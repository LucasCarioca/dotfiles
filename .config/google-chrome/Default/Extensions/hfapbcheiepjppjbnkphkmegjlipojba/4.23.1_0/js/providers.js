var ExternalProviders = {
	"101inks": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.ProductPrice:contains(\"-\")', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        if (bestCode) location.reload(true);\r\n    }\r\n\r\n};",
	"101inks.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.ProductPrice:contains(\"-\")', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        if (bestCode) location.reload(true);\r\n    }\r\n\r\n};",
	"123inkjets": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.discount;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if(bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"123piecesderechangeFR": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('#totalPrice').text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('#totalPrice', responseHTML).text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n  \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"123pneusfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.col-sm-3.col-xs-6:contains(\"\u20ac\")').last().text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.col-sm-3.col-xs-6:contains(\"\u20ac\")', responseHTML).last().text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"123rf": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.fapiao-vat-container:last').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.a-right span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = (oldPrice - newPrice);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promocode').val(bestCode);\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"1800anylens": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = false;\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                __EVENTTARGET: 'ctl00$ContentPlaceHolder1$lbPromoApply',\r\n                __EVENTARGUMENT: $('#__EVENTARGUMENT').val(),\r\n                __LASTFOCUS: $('#__LASTFOCUS').val(),\r\n                __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n                __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n                __EVENTVALIDATION:  $('#__EVENTVALIDATION').val(),\r\n                ctl00$txtSearch: $('input[name=\"ctl00$txtSearch\"]').text(),\r\n                ctl00$tbweSearch_ClientState: $('input[name=\"ctl00$tbweSearch_ClientState\"]').val(),\r\n                ctl00$ContentPlaceHolder1$cartMain$lvOrder$ctrl0$hidProductPrice: $('input[name=\"ctl00$ContentPlaceHolder1$cartMain$lvOrder$ctrl0$hidProductPrice\"]').val(),\r\n                ctl00$ContentPlaceHolder1$cartMain$lvOrder$ctrl0$ddlRightQty: 1,\r\n                ctl00$ContentPlaceHolder1$cartMain$lvOrder$ctrl0$ddlLeftQty: 2,\r\n                ctl00$ContentPlaceHolder1$tbPromoCode: code,\r\n                ctl00$ContentPlaceHolder1$wetbPromoCode_ClientState: '',\r\n                ctl00$ContentPlaceHolder1$ddlShipping: 1\r\n            };\r\n        } \r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#ctl00_ContentPlaceHolder1_lbSaving', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"1800flowers": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n      $.each(data, function () {\r\n        if (object[this.name] !== undefined) {\r\n          if (!object[this.name].push) {\r\n            object[this.name] = [object[this.name]];\r\n          }\r\n          object[this.name].push(this.value || '');\r\n        } else {\r\n          object[this.name] = this.value || '';\r\n        }\r\n      });\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action != 'applyCouponUrl') return false;\r\n\r\n    var formData = $('#PromotionCodeForm').serializeObject();\r\n    formData.appliedPromoCode = code;\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#promotionAmt', responseHTML)[0].value.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"1800getlens": "var ExternalProvider = {\r\n    init: function() {\r\n\r\n        $.fn.serializeObject = function()\r\n        {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function() {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n\r\n    prepare: function (action, code) {\r\n\r\n        var formData = $('#frm').serializeObject();\r\n\r\n        if(action === 'applyCouponUrl') {\r\n\r\n            formData = Object.assign(formData, {\r\n                coupcode: code,\r\n                typed_coupcode: ''\r\n            });\r\n        } else {\r\n\r\n            formData = Object.assign(formData, {\r\n                coupcode: '(optional)',\r\n                typed_coupcode: '',\r\n                dodelcoup: 'yes'\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var $response = $.parseHTML(response),\r\n            codeApplied = $('#special-offers .offer.promo', $response),\r\n            codeFound = false, savings = 0.00, $item;\r\n\r\n        codeApplied.each(function() {\r\n            $item = $(this);\r\n            if($('.name .promo-item', $item).text().toLowerCase().indexOf(code.toLowerCase()) !== -1) {\r\n\r\n                codeFound = true;\r\n                savings = parseFloat($('.subtotal', $item).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"1800getlens.mobile": "var ExternalProvider = {\r\n    init: function() {\r\n\r\n        $.fn.serializeObject = function()\r\n        {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function() {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n\r\n    prepare: function (action, code) {\r\n\r\n        var formData = $('#frm').serializeObject();\r\n\r\n        if(action === 'applyCouponUrl') {\r\n\r\n            formData = Object.assign(formData, {\r\n                coupcode: code,\r\n                typed_coupcode: ''\r\n            });\r\n        } else {\r\n\r\n            formData = Object.assign(formData, {\r\n                coupcode: '(optional)',\r\n                typed_coupcode: '',\r\n                dodelcoup: 'yes'\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var $response = $.parseHTML(response),\r\n            codeApplied = $('#mcrtotalitems .mcrextras', $response),\r\n            codeFound = false, savings = 0.00, $item;\r\n\r\n        codeApplied.each(function() {\r\n            $item = $(this);\r\n            if($('.label', $item).text().indexOf('Coupon Applied') !== -1) {\r\n\r\n                codeFound = true;\r\n                savings = parseFloat($('.subtotal', $item).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"1800lighting": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cl-order-totals-table__td:contains(- $)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"1ink": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.SubTotal em:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#couponcode').val(bestCode);\r\n            $('#CartContent > div > div:nth-child(1) > div.CartCode.cf > div > form > div > input.btn').click();\r\n        }\r\n    }\r\n};",
	"2xist": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total-line--reduction .order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"360training": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = Number($('.totalPriceTable:eq(1) #WC_SingleShipmentOrderTotalsSummary_td_12', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"thirtyninedollarglasses": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#savedAmount', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"4inkjets": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.discount;\r\n     \r\n         return {\r\n             success: savings > 0,\r\n             savings: isNaN(savings) ? 0.00 : savings\r\n         };\r\n    },\r\n    \r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            jQuery('#coupon_code').val(bestCode);\r\n            var s = document.createElement('script');\r\n            s.type = 'text\/javascript';\r\n            var code = `jQuery('#coupon_code').trigger('change');jQuery('#btn-apply-coupon').click();`;\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n};",
	"4wd": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#price_orderTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('#price_orderTotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"fiveeleveltactical": "var ExternalProvider = {\r\n  init: function () {\r\n    this._cartTotal = parseFloat($('tfoot .price').text().replace(\/[^0-9|\\.]\/g, ''));\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var newTotal = parseFloat($('tfoot .price', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n    var savings = this._cartTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"525america": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"7forallmankind": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match('discount_amount(.*)base_discount_amount')[0].replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            jQuery('#discount-code, #coupon_code').val(bestCode);\r\n            var s = document.createElement('script');\r\n            s.type = 'text\/javascript';\r\n            var code = `jQuery('#block-discount-heading').click();jQuery('#discount-code').trigger('change');jQuery('button[value=\"Apply Discount\"]').click();`;\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n};",
	"800bear": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function () {\r\n        retries++;\r\n        if ($('.delete-button').length) {\r\n          $('.delete-button')[0].click();\r\n        }\r\n        if (!$('.delete-button').length && retries < 3) {\r\n          clearInterval(interval);\r\n          resolve();\r\n        } else if (retries === 3) {\r\n          resolve();\r\n        }\r\n      }, 2000);\r\n    })\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.d.OrderTotals);\r\n    var savings = parseFloat($('.you-save span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#couponField').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#couponField').trigger('input').trigger('change');\r\n      $('#btnAddCoupon').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  }\r\n};",
	"89thandmadison": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload()\r\n        }\r\n    }\r\n}",
	"a1supplements": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    let savings = parseFloat(response.match(\/\"discount_amount\":-(.*?(?=,))\/)[1]);\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"a4c": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.a-right', responseHTML).filter(function(){\r\n            return $(this).text().indexOf('Discount') > -1;\r\n        }).next('.a-right');\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = parseFloat($savings.text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            if(savings > 0.00){\r\n                return {\r\n                    success: true,\r\n                    savings: parseFloat(savings)\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"abchome": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#shopping-cart-totals-table span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"abebooks": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsArray = $('#oldHeader > tbody > tr:eq(0) > td:eq(0) > table > tbody > tr:eq(0) > td:eq(1) > div > nobr:eq(1) > span', responseHTML).html().split('-');\r\n        var savings = savingsArray && savingsArray.length > 1 ? parseFloat(savingsArray[1]) : 0.00;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        location.reload(true);\r\n    }\r\n};",
	"abebooks.mobile": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsArray = $('#main > div:eq(0) > div:eq(1) > div.price-coupon', responseHTML).html().split('-');\r\n        var savings = savingsArray && savingsArray.length > 1 ? parseFloat(savingsArray[1]) : 0.00;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        location.reload(true);\r\n    }\r\n};",
	"abercrombie": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var shipping = parseFloat($('#right-rail-shopping-bag .order-summary dl dd:nth-child(4)').text().replace(\/[^0-9|.]\/g, ''));\r\n        var tax = parseFloat($('#right-rail-shopping-bag .order-summary dl dd:nth-child(6)').text().replace(\/[^0-9|.]\/g, ''));\r\n        var oldTotal = parseFloat($('.total-amount td.th-total').text().replace(\/[^0-9|.]\/g, ''));\r\n        var checkOutTotal = parseFloat($('#right-rail-shopping-bag .order-summary dl dd:last-child').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = response.totals.subTotal;\r\n        var savings;\r\n\r\n        if (oldTotal) {\r\n            savings = oldTotal - newTotal;\r\n        } else {\r\n            var deduction = tax + shipping;\r\n            savings = (checkOutTotal - deduction) - newTotal;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"aboutyoude": "var ExternalProvider = {\r\n  oldTotal: 0.00,\r\n  init: function () {\r\n    this.oldTotal = parseFloat($('.with-tax-with-voucher .total-value').text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('#voucherCode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#voucherCode').focus().trigger('input').trigger('change');\r\n      setTimeout(function(){ \r\n        $('.voucher button[class=\"tertiary\"]').click();\r\n      }, 1000);\r\n    } else if (type === 'removeInjectedCoupon'){\r\n      $('.voucher button[class=\"tertiary delete\"]').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n\r\n          if (waited > maxWait) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 400);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 30);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var newTotal = parseFloat($('.with-tax-with-voucher .total-value').text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    var isCouponApplied = $(\".voucher.full.is-applied\").length;\r\n    if (bestCode && !isCouponApplied) {\r\n      $('#voucherCode').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#voucherCode').focus().trigger('input').trigger('change');\r\n      $('.voucher button[class=\"tertiary\"]').click();\r\n    }\r\n  }\r\n};",
	"abt": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var $priceDiv = $('div.cart_inner > div.inner_row > div.pricing', responseHTML);\r\n\r\n        var oldPriceText = $priceDiv.find('span[style*=\"line-through\"]').text();\r\n        var newPriceText = $priceDiv.find('span.vcat-red').text();\r\n        var oldPrice = parseFloat(oldPriceText.replace(this.nonPriceRegex, '').toString());\r\n        var newPrice = parseFloat(newPriceText.replace(this.nonPriceRegex, '').toString());\r\n        var discount = oldPrice - newPrice;\r\n\r\n        if(discount > 0){\r\n            \/\/do the clearing here, because the orderId is only retrievable at resulting page of applyCouponUrl\r\n            var url = $('a:contains(\"remove discount\")', responseHTML).attr('href');\r\n            $.ajax({\r\n                url: url,\r\n                type: 'GET',\r\n                async: false\r\n            });\r\n\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function() {\r\n        location.reload();\r\n    }\r\n};",
	"abt.mobile": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var $priceDiv = $('div.cart-product > div.cart-product-detail', responseHTML);\r\n\r\n        var oldPriceText = $priceDiv.find('div.strike-through-price').text();\r\n        var newPriceText = $priceDiv.find('div.total-price-sale > div.total').text();\r\n        var oldPrice = parseFloat(oldPriceText.replace(this.nonPriceRegex, '').toString());\r\n        var newPrice = parseFloat(newPriceText.replace(this.nonPriceRegex, '').toString());\r\n        var discount = oldPrice - newPrice;\r\n\r\n        if(discount > 0){\r\n            \/\/do the clearing here, because the orderId is only retrievable at resulting page of applyCouponUrl\r\n            var url = $('a:contains(\"remove discount\")', responseHTML).attr('href');\r\n            $.ajax({\r\n                url: url,\r\n                type: 'GET',\r\n                async: false\r\n            });\r\n\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function() {\r\n        location.reload();\r\n    }\r\n};",
	"academy": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    const script = document.createElement('script');\r\n    let scriptContent = `\r\n        fetch('\/api\/cart\/000000').then(response => {\r\n          response.json().then(json => {\r\n            let data = json;\r\n            if (document.getElementById(\"orderId\") === null) {\r\n              let orderId = document.createElement(\"input\");\r\n              orderId.id = 'orderId';\r\n              orderId.setAttribute('type', 'hidden');\r\n              orderId.setAttribute('value', data.orders[0].orderId);\r\n              (document.body || document.head || document.documentElement).appendChild(orderId);\r\n            }\r\n          });\r\n        });\r\n      `;\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n    this.initEventInstance();\r\n  },\r\n  parse: function (response) {\r\n    let savings = Math.abs(parseFloat(response.orders[0].totals.totalAdjustment));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if ($('#promofield').length < 1 && bestCode) {\r\n      const toggleCodeField = $('button[data-auid=\"crt_btnAddPromo\"]');\r\n      toggleCodeField.get(0).dispatchEvent(this.clickEvent);\r\n    }\r\n    setTimeout(function () {\r\n      const codeField = $('#promofield');\r\n      const submitButton = $('button[data-auid=\"btncrt_btnPromoSbmt\"]');\r\n      codeField.val(bestCode);\r\n      codeField.get(0).dispatchEvent(ExternalProvider.changeEvent);\r\n      submitButton.get(0).dispatchEvent(ExternalProvider.clickEvent);\r\n    }, 100);\r\n  },\r\n  initEventInstance: function () {\r\n    this.clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n    this.changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"accessorize": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = $('#currentFlag')[0].innerText.split(' ')[$('#currentFlag')[0].innerText.split(' ').length - 1];\r\n        var selector = $('#currentFlag img')[0];\r\n\r\n        if (selector.src.match(\/(gb)\/g)) {\r\n            locale = localeMapping.GB;\r\n        } else if (selector.src.match(\/(de)\/g)) {\r\n            locale = localeMapping.DE;\r\n        } else if (selector.src.match(\/(fr)\/g)) {\r\n            locale = localeMapping.FR;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    __prepareUrl: function () {\r\n        var applyUrlInput = $('#__applyUrl');\r\n        var applyUrl = location.origin + '\/view\/basket\/add_promotional_code';\r\n        var resultUrlInput = $('#__resultUrl');\r\n        var resultUrl = location.origin + '\/view\/content\/basket?promotionCodeInvalid=false';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__applyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#__applyUrl');\r\n        }\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '__resultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#__resultUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        resultUrlInput.attr('value', resultUrl);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#basketDiscounts', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider.__prepareUrl();",
	"acdsee": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var selector = $('#subTotal').text().replace(\/[0-9.,]\/g, '').trim();\r\n    var newCurrency = currency;\r\n\r\n    if (selector === '\u20ac') {\r\n      newCurrency = 'EUR';\r\n      locale = localeMapping.DE;\r\n    } else if (selector === '\u00a3') {\r\n      newCurrency = 'GBP';\r\n      locale = localeMapping.GB;\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  }\r\n};",
	"acerfr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('tfoot .price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('tfoot .price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"aceronlinestore": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var selector = '#shopping-cart-totals-table tfoot .price:last';\r\n        var oldPrice = parseFloat($(selector).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newPrice = parseFloat($(selector, responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var discount = oldPrice - newPrice;\r\n        \r\n        if (discount > 0) {\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload()\r\n        }\r\n    }\r\n};",
	"acherryontop": "var ExternalProvider = {\r\n  prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = $('span:contains(\"Order #\")').text().replace(\/[^0-9|.]\/g, '');\r\n\r\n    \/\/ Append apply url input\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = false;\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        action: 'add_promo_gc',\r\n        code: code,\r\n        current_step: 1,\r\n        bill_addr: null,\r\n        ajax: 1\r\n      };\r\n    } else if (type === 'clearCouponUrl') {\r\n      data = {\r\n        action: 'remove_discount',\r\n        id: 1,\r\n        current_step: 1,\r\n        bill_addr: null,\r\n        ajax: 1\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savingsString = response.substring(response.indexOf('$-'));\r\n    savingsString = savingsString.substring(2, savingsString.indexOf('<'));\r\n    var savings = parseFloat(savingsString);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.prepareUrl();",
	"aclens": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount-code-amount > span', responseHTML).html().replace('-', '').replace('$', ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n        \r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n};",
	"acronis": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        function serializeObject(a) {\r\n            var o = {};\r\n\r\n            $.each(a, function () {\r\n                o[this.name] = this.value || '';\r\n            });\r\n\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('form[name=\"cleverForm\"]').serializeArray();\r\n        var data = serializeObject(formDataArray);\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data.purchaseCouponCode = code;\r\n            data.buttonaddCoupon = 'Apply';\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cbCartTotalDiscount .cbDictionaryValue > span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            $('#cbiID0EDAAAAAGAAABADBBEBOA').val(bestCode);\r\n            $(\"input[name='buttonaddCoupon']\").click();\r\n        }\r\n    }\r\n};",
	"activeinstyle": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale;\r\n    var newCurrency;\r\n    var selector = $('#curency_button');\r\n\r\n    if (selector.hasClass('GBP')) {\r\n      locale = localeMapping.GB;\r\n      newCurrency = 'GBP';\r\n    } else if (selector.hasClass('EUR')) {\r\n      locale = localeMapping.DE;\r\n      newCurrency = 'EUR';\r\n    } else {\r\n      locale = localeMapping.US;\r\n      newCurrency = currency;\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('button[value=\"Apply\"]').click();\r\n    }\r\n  }\r\n};",
	"activerideshop": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode).focus();\r\n            $('.order-summary__section--discount .field__input-btn').prop('disabled', false).click();\r\n        }\r\n    }\r\n};",
	"adameve": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'applyCouponUrl') {\r\n      var form = $('#update-cart');\r\n\r\n      form.find('#hidden-source-code').val(code);\r\n\r\n      return form.serialize();\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($(\"table#cart-summary > tbody > tr > td:contains('You saved')\", responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"additionelle": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.order-save .value', responseHTML);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"adenandanais": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1];\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"adidasde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('div[data-ci-test-id=\"orderTotalProductsDeliveryValue\"]').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('div[data-ci-test-id=\"orderTotalProductsDeliveryValue\"]', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"adidasfr": "var ExternalProvider = {\r\n  oldTotal: '',\r\n  init: function () {\r\n    this.oldTotal = $('strong[data-auto-id=\"glass-cart-summary-price-value\"]').text().replace(',', '.').replace(\/[^0-9.]\/g, '');\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action === 'injectCoupon') {\r\n      $('#coupon').click();\r\n      $('#coupon').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#coupon').trigger('input').trigger('change');\r\n      $('.gl-cta__text:contains(\"Appliquer\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('div[data-auto-id=\"glass-cart-order-discounts\"]').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 500);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var newTotal = $('strong[data-auto-id=\"glass-cart-summary-price-value\"]').text().replace(',', '.').replace(\/[^0-9.]\/g, '');\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"adidasgolf": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.total-savings.discount', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = parseFloat($savings.text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            if(savings > 0.00){\r\n                return {\r\n                    success: true,\r\n                    savings: parseFloat(savings)\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"adlermodemarkte": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.totalDiscounts.replace(',','.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"adoramapix": "var ExternalProvider = {\r\n    retrieveWindowVariable: function (name, variable) {\r\n        var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\r\n        var script = document.createElement('script');\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('tmp_' + name);\r\n\r\n        $('body').removeAttr('tmp_' + name);\r\n\r\n        return value;\r\n    },\r\n    prepare: function (action, code) {\r\n        if (['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n        var formData = {};\r\n        var currentShippMethod = this.retrieveWindowVariable('currentShippMethod', 'JSON.stringify(CheckoutController.instance.currentShippMethod)');\r\n        var currentStore = this.retrieveWindowVariable('currentStore', 'JSON.stringify(CheckoutController.instance.currentStore)');\r\n\r\n        if (currentShippMethod) {\r\n            currentShippMethod = JSON.parse(currentShippMethod);\r\n            formData.Rush = currentShippMethod.Rush;\r\n            formData.ShippingMethod = currentShippMethod.Method;\r\n        }\r\n\r\n        formData.WhiteLabel = this.retrieveWindowVariable('whiteLabel', 'CheckoutController.instance.whiteLabel');\r\n        formData.PayFromBalance = this.retrieveWindowVariable('payFromBalance', 'CheckoutController.instance.payFromBalance');\r\n        formData.ShippingAddress = this.retrieveWindowVariable('currentShipping', 'CheckoutController.instance.currentShipping');\r\n        formData.NoShipping = this.retrieveWindowVariable('noShipping', 'CheckoutController.instance.noShipping');\r\n        formData.CouponCode = code;\r\n        formData.StoreID = currentStore ? JSON.parse(currentStore).StoreLocationID : null;\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var codeFound = response.Data.Data.AppliedCoupons.find(function (v) {\r\n            return v.Code.toLowerCase() === code.toLowerCase();\r\n        });\r\n        var savings = 0.00;\r\n\r\n        if (codeFound) savings = response.Data.Data.Summary.TotalDiscount;\r\n\r\n        return {\r\n            success: codeFound !== undefined,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"adoreme": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var i = 0;\r\n        var discount = '';\r\n\r\n        for (i = 0; i < response.totals.length; i++) {\r\n            if (response.totals[i].code === 'grand_total') {\r\n                discount = response.totals[i].savings;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (discount) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(discount)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"adoreme.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var i = 0;\r\n        var discount = '';\r\n\r\n        for (i = 0; i < response.totals.length; i++) {\r\n            if (response.totals[i].code === 'grand_total') {\r\n                discount = response.totals[i].savings;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (discount) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(discount)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"adrenaline": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            $('input[name=\"addPromoCode\"]').val(code);\r\n            $('input[name=\"update_numbers\"]').val(1);\r\n\r\n            var o = {};\r\n            var a = $('#productform').serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name]) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var isCartPage = $('#paynow').length === 0;\r\n    var oldTotal = isCartPage === true ? parseFloat($('td.chk_totalcost').text().replace(\/[^0-9.]\/g, '')) : parseFloat($('td.chk_totalcost span[class=\"transactionFee\"]').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = isCartPage === true ? parseFloat($('td.chk_totalcost', responseHTML).text().replace(\/[^0-9.]\/g, '')) : parseFloat($('td.chk_totalcost span[class=\"transactionFee\"]', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    if (isCartPage === true) {\r\n      savings = parseFloat($('.chk_pricetxt2', responseHTML).last().text().replace(\/[^0-9.]\/g, ''));\r\n    }\r\n\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    var isCartPage = $('#paynow').length === 0;\r\n\r\n    if (bestCode) {\r\n      $('input[name=\"addPromoCode\"]').val(bestCode);\r\n      isCartPage === true ? $('input[name=\"addPromoCode\"]').next().click() : $('#addPromoCode').next().click();\r\n        }\r\n    }\r\n};",
	"adriannapapell": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.order-total').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = response.baskettotal;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"advanceautoparts": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function () {\r\n        retries++;\r\n        if ($('.details--aside--close').length) {\r\n          $('.details--aside--close')[0].click();\r\n        }\r\n        if (!$('.details--aside--close').length && retries < 3) {\r\n          clearInterval(interval);\r\n          resolve();\r\n        } else if (retries === 3) {\r\n          resolve();\r\n        }\r\n      }, 2000);\r\n    })\r\n  },\r\n  _prepareAuthCookie: function () {\r\n    var authCookie = document.cookie.toString().split(';').filter(function (item) {\r\n      return \/WC_AUTHENTICATION\/g.exec(item);\r\n    });\r\n    var auth = authCookie.toString().split('=')[1];\r\n    var token = $('#___jpToken');\r\n\r\n    if (!token.length) {\r\n      token = document.createElement('input');\r\n      token.id = '___jpToken';\r\n      token.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(token);\r\n      token = $('#___jpToken');\r\n    }\r\n\r\n    token.attr('value', auth);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(Math.abs(response.orderInfo.promoCodes[0].amount));\r\n\r\n    return {\r\n      success: savings,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareAuthCookie();",
	"aeroflowbreastpumps": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"aerogarden": "var ExternalProvider = {\r\n    init: function () {\r\n        this.oldTotal = $('#shopping-cart-totals-table > tfoot > tr > td:nth-child(2) > strong > span').text().replace(\/[^0-9.]\/g, '');\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = $('#shopping-cart-totals-table > tfoot > tr > td:nth-child(2) > strong > span', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"aeropostale": "var ExternalProvider = {\r\n  __init: function () {\r\n    this.getCartFormData();\r\n  },\r\n  getCartFormData: function () {\r\n    $.ajax({\r\n      url: 'https:\/\/www.aeropostale.com\/cart',\r\n      method: 'GET',\r\n      async: false,\r\n      success: response => {\r\n        const responseHTML = $.parseHTML(response);\r\n        this.formData = this.serializeFormData($('#cart-items-form', responseHTML));\r\n      }\r\n    });\r\n  },\r\n  prepare: function (step, code) {\r\n    let data = this.formData;\r\n    switch (step) {\r\n      case 'applyCouponUrl':\r\n        data.dwfrm_cart_couponCode = code;\r\n        data.dwfrm_cart_addCoupon = 'dwfrm_cart_addCoupon';\r\n        return data;\r\n      case 'clearCouponUrl':\r\n        data.dwfrm_cart_coupons_i0_deleteCoupon = 'Remove';\r\n        dwfrm_cart_couponCode = '';\r\n        return data;\r\n    }\r\n  },\r\n  parse: function (response, status, xhr, code) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = 0;\r\n    let discountElements = $('.cartcoupon span.value:contains(\"' + code + '\")', responseHTML).parents('.item-details').find('.discount span.value');\r\n    discountElements.each(function () {\r\n      savings += parseFloat($(this).text().replace(\/[^0-9|.]\/g, ''));\r\n    });\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  serializeFormData: function (form) {\r\n    let formArray = form.serializeArray();\r\n    let formData = {}\r\n    formArray.forEach(data => { formData[data.name] = data.value });\r\n    return formData;\r\n  },\r\n};\r\nExternalProvider.__init();",
	"aerosoles": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type == 'applyCouponUrl') {\r\n            var data = $('#couponForm').serializeObject();\r\n            data['\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode'] = code;\r\n            return data;\r\n        }\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat($().text().replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"afflictionclothing": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"afloral": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"agacistore": "var ExternalProvider = {\r\n\r\n\tparse: function(response, status, $xhr, code) {\r\n\r\n\t\tvar $response = $.parseHTML(response),\r\n\t\t\tselector = '.order-discount.discount';\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: $(selector, $($response)).length != 0,\r\n\t\t\tsavings: Math.abs(parseFloat($([selector, 'td:eq(1)'].join(' '), $($response)).text().replace(\/[^0-9|\\.]\/g, '')))\r\n\t\t};\r\n\t},\r\n\r\n\tcomplete: function(bestCode) {\r\n\t\tif(!bestCode) return false;\r\n\r\n\t\tvar checkoutInput = $('#dwfrm_billing_couponCode');\r\n\t\tif(checkoutInput.length) {\r\n\t\t\tcheckoutInput.val(bestCode);\r\n\t\t} else {\r\n\t\t\t$('#dwfrm_cart_couponCode').val(bestCode);\r\n\t\t}\r\n\r\n\t\t$('#add-coupon').click();\r\n\t}\r\n};",
	"ahava": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"entityId\", window.checkoutConfig.quoteData.entity_id);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var EntityId = $('body').attr('entityId');\r\n    var ApplyUrlInput = $('#___jpApplyUrl');\r\n    var ApplyUrl = 'https:\/\/www.ahava.com\/rest\/default\/V1\/guest-carts\/' + EntityId + '\/coupons\/CLAIMCODE';\r\n    var ResultUrl = 'https:\/\/www.ahava.com\/rest\/default\/V1\/guest-carts\/' + EntityId + '\/totals';\r\n    var ClearUrl = 'https:\/\/www.ahava.com\/rest\/default\/V1\/guest-carts\/' + EntityId + '\/payment-information';\r\n\r\n    if (!ApplyUrlInput.length) {\r\n      ApplyUrlInput = document.createElement('input');\r\n      ApplyUrlInput.id = '___jpApplyUrl';\r\n      ApplyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n      ApplyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    ApplyUrlInput.attr('value', ApplyUrl);\r\n    ApplyUrlInput.attr('data-value', ResultUrl);\r\n    ApplyUrlInput.attr('data-clear', ClearUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = response.base_discount_amount;\r\n    var savings = Math.abs(parseFloat(responseHTML));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"airfiltersdelivered": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = this.isCartPage() ? 'https:\/\/www.airfiltersdelivered.com\/checkout\/cart\/couponPost\/' : 'https:\/\/www.airfiltersdelivered.com\/firecheckout\/index\/saveCoupon\/';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/checkout\/cart\/';\r\n  },\r\n  prepare: function (action, code) {\r\n    if (['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n    var data = {};\r\n\r\n    if (this.isCartPage()) {\r\n      data = {\r\n        remove: 0,\r\n        coupon_code: code\r\n      };\r\n    } else {\r\n      data = {\r\n        'coupon[remove]': 0,\r\n        'coupon[code]': code\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = 0.00;\r\n\r\n    if (this.isCartPage()) {\r\n      savings = parseFloat($('#shopping-cart-totals-table tbody tr:nth-child(2) td span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      $.ajax({\r\n        type: 'GET',\r\n        url: 'https:\/\/www.airfiltersdelivered.com\/firecheckout\/',\r\n        cache: false,\r\n        contentType: 'application\/x-www-form-urlencoded',\r\n        async: false,\r\n        success: function (result) {\r\n          responseHTML = $.parseHTML(result);\r\n          savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n      });\r\n    }\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"airnwater": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n    \tconst responseHTML = $.parseHTML(response);\r\n    \tconst savings = parseFloat($('.message font span', responseHTML).text().replace('$', ''));\r\n    \tif (savings) {\r\n    \t\treturn {\r\n    \t\t\tsuccess: true,\r\n    \t\t\tsavings: savings\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"airportparkingreservations": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        if(response.pricing && response.pricing.discount){\r\n            var savings = response.pricing.discount;\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"airsoftmegastore": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = false;\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        __EVENTTARGET: '',\r\n        __EVENTARGUMENT: $('#__EVENTARGUMENT').val(),\r\n        __LASTFOCUS: $('#__LASTFOCUS').val(),\r\n        __VSTATE: $('#__VSTATE').val(),\r\n        __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n        ctl00$mainContentPlaceHolder$shoppingCart$dg$ctl02$txtQty: $('#mainContentPlaceHolder_shoppingCart_dg_txtQty_0').text(),\r\n        ctl00$mainContentPlaceHolder$shoppingCart$txtCouponCode: code,\r\n        'ctl00$mainContentPlaceHolder$shoppingCart$btnApplyCouponCode.x': '',\r\n        'ctl00$mainContentPlaceHolder$shoppingCart$btnApplyCouponCode.y': '',\r\n        ctl00$mainContentPlaceHolder$shoppingCart$txtZipCode: $('mainContentPlaceHolder_shoppingCart_txtZipCode').text(),\r\n        ctl00$mainContentPlaceHolder$shoppingCart$lstCountry: $('#mainContentPlaceHolder_shoppingCart_lstCountry').text(),\r\n        ctl00$mainContentPlaceHolder$shoppingCart$lstShippingMethods: $('#mainContentPlaceHolder_shoppingCart_lstShippingMethods').text(),\r\n        ctl00$mainContentPlaceHolder$lstInsurance: ''\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.shoppingcartpricetablevalue', responseHTML).first().text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#mainContentPlaceHolder_shoppingCart_txtCouponCode').val(bestCode);\r\n      $('#mainContentPlaceHolder_shoppingCart_btnApplyCouponCode').click();\r\n    }\r\n  }\r\n};",
	"airturn": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"alalastyle": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};",
	"alamy": "var ExternalProvider = {\r\n    oldTotal:\"\",\r\n    init: function() {\r\n        this.oldTotal = parseFloat($('#Total').text().replace(\/[^.0-9]\/g,''));\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('#promocode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#promocode').trigger('input').trigger('change');\r\n            $('#promosuccess').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        } \r\n    },\r\n    whenReady: function(step, next)\r\n    {\r\n        if ( (step == 'injectCoupon') || (step == 'removeInjectedCoupon') ) {\r\n            setTimeout(function() {\r\n                var maxWait = 200, waited = 0;\r\n                var waitForClose = setInterval(function() {\r\n                    var confirmed = !$(\".cls_loadingMask\").length;\r\n                    if ((confirmed) || (waited > maxWait)) {\r\n                        clearInterval(waitForClose);\r\n                        setTimeout(function() {\r\n                            next();\r\n                        }, 500);\r\n                    }\r\n                    waited++;\r\n                }, 10);\r\n            }, 50);\r\n        }\r\n    },\r\n    parse: function () {\r\n        var newTotal = parseFloat($('#Total').text().replace(\/[^.0-9]\/g,''));\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"albamodade": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0;\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.albamoda.de\/webapp\/wcs\/stores\/servlet\/PromotionCodeManage',\r\n            data: {\r\n                orderId: $('#PromotionCodeForm input[name=\"orderId\"]').val(),\r\n                taskType: $('#PromotionCodeForm input[name=\"taskType\"]').val(),\r\n                URL: $('#PromotionCodeForm input[name=\"URL\"]').val(),\r\n                errorViewName: $('#PromotionCodeForm input[name=\"errorViewName\"]').val(),\r\n                storeId: $('#PromotionCodeForm input[name=\"storeId\"]').val(),\r\n                catalogId: $('#PromotionCodeForm input[name=\"catalogId\"]').val(),\r\n                langId: $('#PromotionCodeForm input[name=\"langId\"]').val(),\r\n                kdnr: $('#PromotionCodeForm input[name=\"kdnr\"]').val(),\r\n                promoCode: code\r\n            },\r\n            type: 'POST',\r\n            async: false,\r\n            success: function (result) {\r\n                savings = parseFloat($('.price_reduced', $.parseHTML(result)).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"albertsons": "var ExternalProvider = {\r\n    init: function () {\r\n        this.oldTotal = parseFloat($('.id_TotalEstimates').eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('input[aria-label=\"Promo Code\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('input[aria-label=\"Promo Code\"]').trigger('input').trigger('change');\r\n            $('#btnaddenabled').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('#removePromo').click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 400);\r\n    },\r\n    parse: function () {\r\n        var newTotal = parseFloat($('.id_TotalEstimates').eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"alexandalexa": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var currency = $('.grand-total').text().replace(\/[0-9,A-z|.]\/g, '').trim();\r\n        var storeCurrency = '';\r\n         if (currency === '\u20ac') {\r\n            storeCurrency = amount.toLocaleString(localeMapping.DE, { style: 'currency', currency: 'EUR', minimumFractionDigits: minimumFractionDigits });\r\n        } else if (currency === '\u00a3') {\r\n            storeCurrency = amount.toLocaleString(localeMapping.GB, { style: 'currency', currency: 'GBP', minimumFractionDigits: minimumFractionDigits });\r\n        } else if (currency === '$') {\r\n            storeCurrency = amount.toLocaleString(localeMapping.US, { style: 'currency', currency: currency, minimumFractionDigits: minimumFractionDigits });\r\n        }\r\n        return storeCurrency;\r\n    },\r\n    parse: function(response) {        \r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.total-product-cost').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.total-product-cost', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function(bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};",
	"alexandredeparisfr": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.FR;\r\n        var newCurrency = 'EUR';\r\n        var selector = location.origin;\r\n\r\n        if (selector.includes('us.alexandredeparis')) {\r\n            locale = localeMapping.US;\r\n            newCurrency = 'USD';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = location.origin + location.pathname;\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.tot_value:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"alibris": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var resultUrlInput = $('#___jpResultUrl');\r\n    var applyUrl = this.isCartPage() ? 'https:\/\/www.alibris.com\/cart.processCoupon' :\r\n      'https:\/\/www.alibris.com\/portals\/alibrisPortal.portal?_nfpb=true&_windowLabel=checkout&checkout_actionOverride=%2Falibris%2Fjump%2Fcheckout%2FapplyCoupon&_pageLabel=alibrisPage_checkout';\r\n    var resultUrl = this.isCartPage() ? 'https:\/\/www.alibris.com\/cart.view' : 'https:\/\/www.alibris.com\/checkout.showRPO';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    if (!resultUrlInput.length) {\r\n      resultUrlInput = document.createElement('input');\r\n      resultUrlInput.id = '___jpResultUrl';\r\n      resultUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n      resultUrlInput = $('#___jpResultUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    resultUrlInput.attr('value', resultUrl);\r\n  },\r\n  isCartPage: function () {\r\n    return \/cart\/.test(location.href);\r\n  },\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n    var isRemove = action === 'clearCouponUrl';\r\n\r\n    if (this.isCartPage()) {\r\n      if (!isRemove) {\r\n        data = {\r\n          applyCoupon: 'true',\r\n          couponCode: code\r\n        };\r\n      } else {\r\n        data = {\r\n          deleteCoupon: 'true'\r\n        };\r\n      }\r\n    } else {\r\n      data = {\r\n        'checkout{actionForm.couponCode}': code\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = 0;\r\n\r\n    if (this.isCartPage()) {\r\n      var oldTotal = parseFloat($('.amount strike:eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n      var newTotal = parseFloat($('.subtotal-price:eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n      savings = oldTotal - newTotal;\r\n    } else {\r\n      savings = parseFloat($('#cost-summary td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"allaboutdance": "var ExternalProvider = {\r\n    init: function() {\r\n        this.cartTotal = parseFloat($('table td fieldset table tr td:last-child > b').text().replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n    prepare: function(type, code)\r\n    {\r\n\r\n        var couponData = {};\r\n\r\n        var formInputs = [].slice.call($('#CartForm input'));\r\n\r\n        formInputs.forEach(function(e){\r\n            couponData[$(e).attr('name')] = $(e).val();\r\n        });\r\n        \r\n        couponData[\"CouponCode\"] = code;\r\n        couponData[\"Update\"] = 'SET ZIP CODE';\r\n        delete couponData[\"a\"];\r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return couponData;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('#CouponCode', responseHTML).val().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var savings = parseFloat($('fieldset table tbody tr td .redError', responseHTML).text().replace('$', '').replace('-', ''));\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving){\r\n\r\n        var couponData = {};\r\n\r\n        var formInputs = [].slice.call($('#CartForm input'));\r\n\r\n        formInputs.forEach(function(e){\r\n            couponData[$(e).attr('name')] = $(e).val();\r\n        });\r\n        \r\n        couponData[\"CouponCode\"] = bestCode;\r\n        couponData[\"Update\"] = 'SET ZIP CODE';\r\n        delete couponData[\"a\"];\r\n\r\n        $.post('https:\/\/www.allaboutdance.com\/my_cart_big.php3', couponData, function(){\r\n            location.assign('https:\/\/www.allaboutdance.com\/my_cart_big.php3');\r\n        })\r\n    }\r\n}",
	"allaboutdance.mobile": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('fieldset.ui-grid-b .ui-block-b', responseHTML).text().replace(\/[$-]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    \r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#CouponCode').val(bestCode);\r\n            $('.ui-block-b input[name=\"Update\"]').click();\r\n        }\r\n    }\r\n}",
	"allbrands": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar savings = parseFloat($('#coupon_value', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n    \tif (savings > 0) {\r\n    \t\treturn {\r\n    \t\t\tsuccess: true,\r\n    \t\t\tsavings: savings\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"allheart": "var ExternalProvider = {\r\n    _prepareVisible: function() {\r\n\r\n        var scriptContent = \"#piggyPresentCodes, #piggyDomainNotSupported, #piggySlideIn, #piggyTryCoupons, #piggyResult, #piggySimilarDeals, #piggyPromptTryCodes {visibility: visible !important}\\n\";\r\n        var script = document.createElement('style');\r\n        script.id = 'tmpStyle';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var $response = $.parseHTML(response),\r\n            $cartItems = $('.checkout-items td.items', $response),\r\n            codeFound = false, savings = 0.00, itemData;\r\n\r\n        $cartItems.each(function() {\r\n            itemData = $(this).attr('data-productfieldobject');\r\n            if(itemData) {\r\n                try {\r\n                    itemData = JSON.parse(itemData);\r\n                } catch (e) {\r\n                    itemData = {}\r\n                }\r\n\r\n                codeFound = itemData.coupon && itemData.coupon.toLowerCase() === code.toLowerCase();\r\n            }\r\n\r\n            if(codeFound) return false;\r\n        });\r\n\r\n        if(codeFound) {\r\n            savings = parseFloat($('#CheckoutTotalsContentNew .promo-discount .promoDiscount.amount', $response).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareVisible();",
	"allivet": "var ExternalProvider = {\r\n    oldTotal:\"\",\r\n    init: function () {\r\n        this.oldTotal = $('#sCartTotal').text().replace(\/[^0-9.]\/g, '');\r\n    },\r\n    prepare: function (action, code) {\r\n        if (action === 'injectCoupon') {\r\n            $('#CouponCode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#CouponCode').trigger('input').trigger('change');\r\n            $('#btnApplyCouponReward').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('#removeCoupon').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        }\r\n    },\r\n    whenReady: function(step, next)\r\n    {\r\n        if ( (step == 'injectCoupon') || (step == 'removeInjectedCoupon') ) {\r\n            setTimeout(function() {\r\n                var maxWait = 200, waited = 0;\r\n                var waitForClose = setInterval(function() {\r\n                    var confirmed = !$(\".cls_loadingMask\").length;\r\n                    if ((confirmed) || (waited > maxWait)) {\r\n                        clearInterval(waitForClose);\r\n                        setTimeout(function() {\r\n                            next();\r\n                        }, 500);\r\n                    }\r\n                    waited++;\r\n                }, 10);\r\n            }, 100);\r\n        }\r\n    },\r\n    parse: function () {\r\n        var newTotal = $('#sCartTotal').text().replace(\/[^0-9.]\/g, '');\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"allsaints": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"currency\", window.universal_variable.basket.currency);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var locale = localeMapping.US;\r\n        var currencyFormat = currency;\r\n        var cc = $('body').attr('currency');\r\n\r\n        $('body').removeAttr('currency');\r\n\r\n        if (cc === 'GBP') {\r\n            locale = localeMapping.GB;\r\n            currencyFormat = 'GBP';\r\n        } else if (cc === 'EUR') {\r\n            locale = localeMapping.DE;\r\n            currencyFormat = 'EUR';\r\n        } else if (cc === 'EUR') {\r\n            locale = localeMapping.FR;\r\n            currencyFormat = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: currencyFormat, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"allurez": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = false;\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        file: 'shoppingcart',\r\n        actiononcart: 'apply_coupon',\r\n        CartLength: $('input[name=\"CartLength\"]').val(),\r\n        new_size_value: $('input[name=\"new_size_value\"]').val(),\r\n        warranty_info: $('input[name=\"warranty_info\"]').val(),\r\n        engravable_font: $('input[name=\"engravable_font\"]').val(),\r\n        engravable_text: $('input[name=\"engravable_text\"]').val(),\r\n        engravable_cost: $('input[name=\"engravable_cost\"]').val(),\r\n        product_appraisal: $('input[name=\"product_appraisal\"]').val(),\r\n        vendor_sku: $('input[name=\"vendor_sku\"]').val(),\r\n        change_id: $('input[name=\"change_id\"]').val(),\r\n        coupon_code_elm: 'mob',\r\n        ring_size_0: $('input[name=\"ring_size_0\"]').val(),\r\n        istryathome_0: $('input[name=\"istryathome_0\"]').val(),\r\n        vendor_sku_cmb: $('input[name=\"vendor_sku_cmb\"]').val(),\r\n        warranty_info_cmb: $('#warranty_info_cmb_0:selected').val(),\r\n        engravable_cost: $('input[name=\"engravable_cost\"]').val(),\r\n        engravable_font_cmb: $('input[name=\"engravable_font_cmb\"]').val(),\r\n        engravable_text_0: $('input[name=\"engravable_text_0\"]').val(),\r\n        product_appraisal_cmb: $('input[name=\"product_appraisal_cmb\"]').val(),\r\n        coupon_number_mob: code,\r\n        share_friend_email: $('input[name=\"share_friend_email\"]').val(),\r\n        coupon_number: $('input[name=\"coupon_number_mob]').val(),\r\n        share_friend_email: $('input[name=\"share_friend_email\"]').val()\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.pnbold:contains(\"-$\"):first()', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"allvolleyball": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.incart_discount:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promo_code').val(bestCode);\r\n            $('input[name=\"promo_submit\"]').click();\r\n        }\r\n    }\r\n};",
	"alphaindustries": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('#divPromoValue', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"alternativeapparel": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale;\r\n    var newCurrency;\r\n    var contrySelector = $('#country_selector_control .selected-label').text();\r\n\r\n    if (contrySelector === 'GB') {\r\n      locale = localeMapping.GB;\r\n      newCurrency = 'GBP';\r\n    } else if (contrySelector === 'FR' || contrySelector === 'DE') {\r\n      locale = contrySelector === 'DE' ? localeMapping.DE : localeMapping.FR;\r\n      newCurrency = 'EUR';\r\n    } else {\r\n      locale = localeMapping.US;\r\n      newCurrency = currency;\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      jQuery('#coupon_code').val(bestCode);\r\n      jQuery(\"button[title='Apply']\").click();\r\n    }\r\n  }\r\n};",
	"alwaysforme": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.summary-total span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"alyaka": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = savings = parseFloat($('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ambiance-sticker": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.panier-total-coupon-valeur:contains(\"-\")', responseHTML).text().replace(',','.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"americanapparel": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = null;\r\n\r\n        if (this.isCartPage()) {\r\n            var responseHTML = $.parseHTML(response.responseText);\r\n            var cartOldTotal = parseFloat($('.bfx-netTotalWithoutGiftWrap-price').text().replace(\/[^0-9|.]\/g, ''));\r\n            var cartNewTotal = parseFloat($('.bfx-netTotalWithoutGiftWrapMinusOrderDiscount-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n            savings = cartOldTotal - cartNewTotal;\r\n        } else {\r\n            var getAmount = response.responseText.match('bfx-totalDiscounted-price(.*)span');\r\n            var checkoutSavings = parseFloat(getAmount[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n            savings = checkoutSavings;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"americanblinds": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#promo-name', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('.mt-input').val(bestCode);\r\n      var s = document.createElement('script');\r\n      s.type = 'text\/javascript';\r\n      var code = `jQuery('.mt-input').trigger('change');jQuery('button:contains(\"Apply\")').removeAttr('disabled');jQuery('button:contains(\"Apply\")').click();`;\r\n      s.appendChild(document.createTextNode(code));\r\n      document.body.appendChild(s);\r\n\r\n    }\r\n  }\r\n};",
	"americantourister": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = this.isCheckoutPage() ? 'https:\/\/shop.americantourister.com\/on\/demandware.store\/Sites-americantourister-Site\/default\/Cart-AddCouponJson?couponCode=CLAIMCODE&format=ajax' : $('#dwfrm_cart_couponCode').closest('form').attr('action') + '&format=ajax';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  isCheckoutPage: function () {\r\n    return document.querySelector('.payment-method-options') !== null;\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'applyCouponUrl' && !this.isCheckoutPage()) {\r\n      var form = $('#dwfrm_cart_couponCode').closest('form');\r\n\r\n      form.find('#dwfrm_cart_couponCode').val(code);\r\n      form.append('<input name=\"dwfrm_cart_addCoupon\" type=\"hidden\" value=\"dwfrm_cart_addCoupon\"\/>');\r\n\r\n      return form.serializeArray();\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = 0;\r\n\r\n    if (!this.isCheckoutPage()) {\r\n      savings = parseFloat($('#cart-summary-totals-promo .your-savings', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      $.ajax({\r\n        url: 'https:\/\/shop.americantourister.com\/on\/demandware.store\/Sites-americantourister-Site\/default\/COBilling-UpdateSummary',\r\n        type: 'GET',\r\n        async: false,\r\n        success: function (result) {\r\n          savings = parseFloat($('.order-totals-value-text:contains(\"-\")', $.parseHTML(result)).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n      });\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"amiclubwear": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.summary-total td~td', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode){\r\n      $('#coupon_code').val(bestCode);\r\n      window.location.href = \"javascript:discountForm.submit(false);\"\r\n    }\r\n  }\r\n};",
	"amorepacific": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML;\r\n        var savings = 0;\r\n        \r\n        $.ajax({\r\n            type: 'POST',\r\n            url: 'https:\/\/us.amorepacific.com\/checkout\/cart',\r\n            dataType: 'html',\r\n            success: function (result) {\r\n                responseHTML = $.parseHTML(result);\r\n                savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n            },\r\n            async: false\r\n        });\r\n\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#discount-coupon-form button').click();\r\n        }\r\n    }\r\n};",
	"amplebosom": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.subtotal strong:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.discount-input').val(bestCode);\r\n            $('input[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"amritasingh": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var str = $('.reduction-code__text:contains(\"-$\")', responseHTML).text();\r\n    var pos = str.indexOf('(') + 1;\r\n\r\n    str = str.slice(pos, str.lastIndexOf(')'));\r\n\r\n    var savings = parseFloat(str.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"amsety": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n      $('#checkout_form_coupon_code').val(code);\r\n      $('#checkout_form_coupon_code').get(0).dispatchEvent(changeEvent);\r\n      $('#apply-coupon').click();\r\n      $('#checkout_form_coupon_code').val('');\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('#checkout_form_coupon_code').val('');\r\n      $('#apply-coupon').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 700);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var oldTotal = parseFloat($('#price-full-step1').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('#price-with-coupon-step1').text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_form_coupon_code').val(bestCode);\r\n      $('#apply-coupon').click();\r\n    }\r\n  }\r\n};",
	"amsterdamprinting": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var couponData = {};\r\n\r\n        var formInputs = [].slice.call($('#aspnetForm input:not([type=\"submit\"]), #aspnetForm select'));\r\n\r\n        formInputs.forEach(function (e) {\r\n            $(e).attr('name') !== undefined ? (couponData[$(e).attr('name')] = $(e).val()) : false;\r\n        });\r\n\r\n        couponData.ctl00$cphBody$ctl00$shoppingSummary1$CouponWidget1$btn_ApplyCoupon = 'Apply';\r\n\r\n        couponData.ctl00$cphBody$ctl00$shoppingSummary1$CouponWidget1$txt_SmartCoupon = code;\r\n        couponData.ctl00$cphBody$ctl00$shoppingSummary1$CouponWidget2$txt_SmartCoupon = code;\r\n        couponData.ctl00$cphBody$ctl00$shoppingSummary1$CouponWidget3$txt_SmartCoupon = code;\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            return couponData;\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#ctl00_cphBody_ctl00_shoppingSummary1_trSummaryAmtSaved .price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        $('#ctl00_cphBody_ctl00_shoppingSummary1_CouponWidget1_txt_SmartCoupon').val(bestCode);\r\n        $('#ctl00_cphBody_ctl00_shoppingSummary1_CouponWidget1_btn_ApplyCoupon').click();\r\n    }\r\n};",
	"amsterdamprinting.mobile": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var couponData = {};\r\n\r\n        var formInputs = [].slice.call($('#aspnetForm input:not([type=\"submit\"]), #aspnetForm select'));\r\n\r\n        formInputs.forEach(function (e) {\r\n            $(e).attr('name') !== undefined ? (couponData[$(e).attr('name')] = $(e).val()) : false;\r\n        });\r\n\r\n        couponData.ctl00$cphBody$ctl00$shoppingSummary1$CouponWidget1$btn_ApplyCoupon = 'Apply';\r\n\r\n        couponData.ctl00$cphBody$ctl00$shoppingSummary1$CouponWidget1$txt_SmartCoupon = code;\r\n        couponData.ctl00$cphBody$ctl00$shoppingSummary1$CouponWidget2$txt_SmartCoupon = code;\r\n        couponData.ctl00$cphBody$ctl00$shoppingSummary1$CouponWidget3$txt_SmartCoupon = code;\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            return couponData;\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#ctl00_cphBody_ctl00_shoppingSummary1_trSummaryAmtSaved .price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        $('#ctl00_cphBody_ctl00_shoppingSummary1_CouponWidget1_txt_SmartCoupon').val(bestCode);\r\n        $('#ctl00_cphBody_ctl00_shoppingSummary1_CouponWidget1_btn_ApplyCoupon').click();\r\n    }\r\n};",
	"andotherstories": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = (response.orderTotals.totalDiscount).replace(\/[^0-9|.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"andrewmarc": "var ExternalProvider = {\r\n    oldCartPrice: 0,\r\n    currentPath: '',\r\n    checkout: 'checkout',\r\n    cart: 'cart',\r\n    __prepareUrl: function () {\r\n        this.setPath();\r\n\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl;\r\n\r\n        if (this.currentPath === this.cart) {\r\n            applyUrl = 'https:\/\/www.andrewmarc.com\/basket.do?method=applySourceCode';\r\n        } else {\r\n            applyUrl = 'https:\/\/www.andrewmarc.com\/checkout\/accordion.do?method=applySourceCode';\r\n        }\r\n\r\n        \/\/ Append apply url input\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    setPath: function () {\r\n        var pattern = \/\\\/basket.do\/g;\r\n\r\n        if (pattern.exec(location.pathname)) {\r\n            this.currentPath = this.cart;\r\n        } else {\r\n            this.currentPath = this.checkout;\r\n        }\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var jqObj = null;\r\n        var discount = 0;\r\n\r\n        if (this.currentPath === this.cart) {\r\n            $.ajax({\r\n                url: 'https:\/\/www.andrewmarc.com\/basket.do',\r\n                success: function (result) {\r\n                    jqObj = $.parseHTML(result);\r\n                },\r\n                async: false\r\n            });\r\n\r\n            var ctr = 0;\r\n\r\n            for (ctr = 0; ctr < $('div[class=\"discount\"]', jqObj).length; ctr++) {\r\n                discount += parseFloat($('div[class=\"discount\"]', jqObj).eq(ctr).text().replace(\/[^0-9|.]\/g, ''));\r\n            }\r\n        } else {\r\n            var total = parseFloat(response.targetDataForUpdate[2].data.subTotals['0'].value.replace(\/[^0-9|.]\/g, ''));\r\n            var shipping = total > 75 ? (response.targetDataForUpdate[2].data.subTotals[2].value.replace(\/[^0-9|.]\/g, '')) : 0;\r\n\r\n            discount = parseFloat(response.targetDataForUpdate[2].data.orderTotals[1].value.replace(\/[^0-9|.]\/g, '')) - shipping;\r\n        }\r\n\r\n        if (discount > 0) {\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider.__prepareUrl();",
	"angara": "var ExternalProvider = {\r\n    jp_entity_id: '',\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"jp_entity_id\", window.checkoutConfig.quoteData.entity_id);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('jp_entity_id');\r\n\r\n        this.jp_entity_id = value;\r\n\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var resultUrl = 'https:\/\/www.angara.com\/rest\/default\/V1\/guest-carts\/' + this.jp_entity_id + '\/totals-information';\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        resultUrlInput.attr('value', resultUrl);\r\n    },\r\n    prepare: function (action, code) {\r\n        var data = {};\r\n\r\n        if (action === 'resultUrl') {\r\n            data = {\r\n                addressInformation: {\r\n                    address: { countryId: 'US', region: '', regionId: '0', postcode: null },\r\n                    shipping_carrier_code: 'groundshipping',\r\n                    shipping_method_code: 'groundshipping'\r\n                }\r\n            };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.base_discount_amount.toString().replace(\/[^0-9|.]\/g, '')) || 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"anikaschuh": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.panel--td.column--total-price.block:contains(\"-\"):eq(0)', responseHTML).text().replace(\/,\/g, '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.add-voucher--field').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        }\r\n    }\r\n};",
	"aninebing": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency;\r\n        var selector = location.host;\r\n\r\n        if (selector.match('eu')) {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        } else {\r\n            locale = localeMapping.US;\r\n            newCurrency = 'USD';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"anniescatalog": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n        var data = {};\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data['keycode'] = code;\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.discount-row td', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = parseFloat($savings.text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            if(savings > 0.00){\r\n                return {\r\n                    success: true,\r\n                    savings: parseFloat(savings)\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"anntaylor": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function() {\r\n        retries++;\r\n        if ($('.promo-code.component.active a').length) {\r\n          $('.promo-code.component.active a')[0].click();\r\n        }\r\n        if (!$('.promo-code.component.active a').length && retries < 3) {\r\n          clearInterval(interval);\r\n          resolve();\r\n        } else if (retries === 3) {\r\n          resolve();\r\n        }\r\n      }, 2000);\r\n    });\r\n  },\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.order-total').next().text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat(response.checkout.ordSum.subTotal);\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"antennasdirect": "var ExternalProvider = {\r\n    _prepareToken: function () {\r\n        if ($('#__jpToken').length > 1) return false;\r\n\r\n        var __jpToken = document.cookie.match(\/XSRF-TOKEN=(\\w+)\/g)[0].replace('XSRF-TOKEN=', '');\r\n\r\n        $('body').append('<input type=\"hidden\" id=\"__jpToken\" value=\"' + __jpToken + '\" \/>');\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.responseText);\r\n        var savings = parseFloat($('.cart-total-value:contains(\"-\")', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareToken();",
	"anthropologie": "var ExternalProvider = {\r\n    init: function () {\r\n        $('.c-cart-add-promo__h2').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        this.oldTotal = parseFloat($('.js-cart-totals__total').text().replace(\/[^0-9|.]\/g, ''));\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('#promo-code').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#promo-code').trigger('input').trigger('change');\r\n            $('button:contains(\"Apply\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('.c-cart-add-promo__remove').click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 500);\r\n    },\r\n    parse: function () {\r\n        var newTotal = parseFloat($('.js-cart-totals__total').text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"anypromo": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart_row.couponcode div:contains(\"Savings\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && !this.isCheckoutPage()) {\r\n      $('#text_couponcode').val(bestCode);\r\n      $('#brApply').click();\r\n    } else if (bestCode && this.isCheckoutPage()) {\r\n      location.reload();\r\n    }\r\n  },\r\n  isCheckoutPage: function () {\r\n    return location.pathname === '\/Order_Checkout.aspx';\r\n  }\r\n};",
	"ao": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n\r\n        var couponData = {\r\n            \"products\": [],\r\n            \"discountCode\": code,\r\n            \"deliveryCharge\": 0\r\n        };\r\n\r\n        var basketItems = [].slice.call($('.basketItem:not(\".emptyBasketPlaceholder\")'));\r\n\r\n        basketItems.forEach(function(el, i){\r\n            var data = $(el).data();\r\n            couponData[\"products\"][i] = {\r\n                \"productCode\": $('input[name=\"Model.Products[' +i+ '].Sku\"]').val(),\r\n                \"productColourId\": data[\"productcolourid\"],\r\n                \"quantity\": $('input[name=\"Model.Products[' +i+ '].Quantity\"]').val(),\r\n                \"sellPrice\": data[\"unitprice\"],\r\n                \"fittingId\": data[\"fittingid\"],\r\n                \"manufacturerId\": data[\"brandid\"],\r\n                \"applianceTypeId\": data[\"appliancetypeid\"],\r\n                \"services\":[]\r\n            }\r\n        });\r\n\r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return JSON.stringify(couponData);\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var codeFound = response[\"ManualPromotionViewModel\"] && response[\"ManualPromotionViewModel\"][\"PromotionCode\"].toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var savings = response[\"ManualPromotionViewModel\"][\"ManualPromotionValue\"];\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings){\r\n       \r\n       $('#discountCodeInput').val(bestCode);\r\n       $('#discountCodeApply')[0].click();\r\n\r\n    }\r\n}",
	"aode": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseJSON(response);\r\n    var savings = parseFloat(responseHTML.ManualPromotionViewModel.ManualPromotionValue);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"apeainthepod": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isCart() ? $('#continue-shopping')[0].action : $('#dwfrm_billing')[0].action;\r\n\r\n        \/\/ Append apply url input\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    isCart: function () {\r\n        return $('#continue-shopping')[0] != undefined\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var reponseHTML = $.parseHTML(response);\r\n        var newPrice = parseFloat($('.value.bfx-price', reponseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n        var savings = parseFloat(newPrice);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n            $('#dwfrm_cart_couponCode').val('');\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl()",
	"tillys": "var ExternalProvider = {\n\n    origPrice: 0,\n\n    init: function () {\n        this.origPrice = parseFloat($('.order-subtotal td:eq(1)').text().replace(\/[^0-9.]\/g, ''));\n    },\n\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var newPrice = parseFloat($('.order-subtotal td:eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        var savings = this.origPrice - newPrice;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#dwfrm_cart_couponCode').val(bestCode);\n            $('#add-coupon').click();\n        }\n    }\n};",
	"daniel-wellington": "var ExternalProvider = {\n    tableTotals: '',\n    \n    parse: function(response, status, $xhr, code) {\n        if(!response || response.error || !response.result || !response.totals) {\n            return {\n                success: false,\n                savings: 0.00\n            }\n        }\n        \n        this.tableTotals = $.parseHTML(response.totals.html.trim());\n        var discountRow = $('tbody tr:last-child', this.tableTotals).prev();\n        \n        return {\n            success: true,\n            savings: Number($('td:last-child', discountRow).text().replace(\/[^0-9|\\.]\/g, ''))\n        };\n    },\n    \n    complete: function(bestCode) {\n        location.reload();\n    }\n};",
	"paige": "var ExternalProvider = {\n    parse: function(response, status, $xhr, code){\n\n        if(response.PromoCodeInfo && response.PromoCodeInfo.Discount){\n            var savings = response.PromoCodeInfo.Discount;\n\n            return {\n                success: true,\n                savings: parseFloat(savings)\n            };\n        }\n\n        return {\n            success: false,\n            savings: 0.00\n        }\n    },\n\n    complete: function(bestCode, bestSaving){\n\n        if(bestCode){\n            location.reload(true);\n        }\n    }\n};",
	"kneipp": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $(\"#coupon_code\").val(bestCode);\n            $(\"button[value='Apply Coupon']\").click();\n        }\n    }\n};",
	"discountmedicalsupplies": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.summary-total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"bellacor": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.red:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"gilt": "var ExternalProvider = {\r\n    _$principalGuid: null,\r\n    init: function () {\r\n        this._$principalGuid = $('<input type=\"hidden\" name=\"pricipalGuid\">').val($('script:contains(\"principalGuid\")').text().match(\/\\'principalGuid\\': \\'(.*)(\\',)\/)[1]).appendTo('body')\r\n    },\r\n    prepare: function () {\r\n        $('<input type=\"hidden\" name=\"pricipalGuid\">').val($('script:contains(\"principalGuid\")').text().match(\/\\'principalGuid\\': \\'(.*)(\\',)\/)[1]).appendTo('body');\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        if (response.order) {\r\n\r\n            var discount = response.order.amounts_for_order.discounts_usd\r\n                ? response.order.amounts_for_order.discounts_usd : 0;\r\n            if (discount > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: discount\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n\r\n        this._$principalGuid.remove();\r\n\r\n        if(bestCode){\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"gilt.mobile": "var ExternalProvider = {\r\n    _$principalGuid: null,\r\n    init: function () {\r\n        this._$principalGuid = $('<input type=\"hidden\" name=\"pricipalGuid\">').val($('script:contains(\"principalGuid\")').text().match(\/\\'principalGuid\\': \\'(.*)(\\',)\/)[1]).appendTo('body')\r\n    },\r\n    prepare: function () {\r\n        $('<input type=\"hidden\" name=\"pricipalGuid\">').val($('script:contains(\"principalGuid\")').text().match(\/\\'principalGuid\\': \\'(.*)(\\',)\/)[1]).appendTo('body');\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        if (response.order) {\r\n\r\n            var discount = response.order.amounts_for_order.discounts_usd\r\n                ? response.order.amounts_for_order.discounts_usd : 0;\r\n            if (discount > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: discount\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n\r\n        this._$principalGuid.remove();\r\n\r\n        if(bestCode){\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"britishcornershop": "var ExternalProvider = {\n  prepare: function (step, code) {\n    if (step === 'applyCouponUrl') {\n      let data = this.serializeFormData($('#form'));\n      data.promotionalcode = code;\n      return data;\n    }\n  },\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.data li:eq(2) .total span.right', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    (bestCode) ? $('#promotionalcode').val(bestCode) : $('#promotionalcode').val('');\n  },\n  serializeFormData: function (form) {\n    let formArray = form.serializeArray();\n    let formData = {}\n    formArray.forEach(data => { formData[data.name] = data.value });\n    return formData;\n  }\n};",
	"arcanestore": "var ExternalProvider = {\n    prepare: function (type, code) {\n        var data = {};\n\n        function retrieveWindowVariable(variable) {\n            var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + ')); }\\n';\n            var script = document.createElement('script');\n\n            script.id = 'tmpScript';\n            script.appendChild(document.createTextNode(scriptContent));\n            (document.body || document.head || document.documentElement).appendChild(script);\n\n            var value = jQuery('body').attr('tmp_' + variable);\n\n            jQuery('body').removeAttr('tmp_' + variable);\n\n            return JSON.parse(value);\n        }\n\n        if (type === 'applyCouponUrl') {\n            data = {\n                security: this.isCartPage() ? retrieveWindowVariable('wc_cart_params.apply_coupon_nonce') : retrieveWindowVariable('wc_checkout_params.apply_coupon_nonce'),\n                coupon_code: code\n            };\n        } else {\n            data = {\n                security: retrieveWindowVariable('wc_cart_params.remove_coupon_nonce'),\n                coupon: code\n            };\n        }\n\n        return data;\n    },\n    isCartPage: function () {\n        return \/cart\/.test(location.href);\n    },\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.cart-discount .woocommerce-Price-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"prettygreen": "var ExternalProvider = {\n  parse: function (response) {\n    const responseHTML = $.parseHTML(response);\n    let savings = parseFloat($('.payment__promo-list__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    let clearCouponUrl = $('.payment__promo-list__name form', responseHTML).attr('action');\n    this.clearCoupon(clearCouponUrl);\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#id_voucher').val(bestCode);\n      $('#id_voucher_submit_button').click();\n    };\n  },\n  clearCoupon: function (url) {\n    $.ajax({\n      url: url,\n      type: 'POST',\n      data: { csrfmiddlewaretoken: $('input[name=\"csrfmiddlewaretoken\"]').val() },\n      async: false\n    });\n  }\n};",
	"ivlproducts": "var ExternalProvider = {\r\n\tparse: function(response, status, $xhr, code){\r\n\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\r\n\t\tvar $savings = $('td', responseHTML).filter(function(){\r\n\t\t\treturn $(this).text().indexOf('Discount') > -1;\r\n\t\t}).next('td');\r\n\r\n\t\t\/\/ If the element containing the savings value exists\r\n\t\tif($savings.length){\r\n\t\t\tvar savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: parseFloat(savings)\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t}\r\n\t},\r\n\r\n\tcomplete: function(bestCode, bestSaving){\r\n\r\n\t\tlocation.reload(true);\r\n\t}\r\n};",
	"crocsuk": "var ExternalProvider = {\n    parse: function (response) {\n        var oldTotal = parseFloat($('#estimatedTotal').text().replace(\/[^0-9|.]\/g, ''));\n        var newTotal = parseFloat(response.data.cartTotal);\n        var savings = oldTotal - newTotal;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"espritfr": "var ExternalProvider = {\n    parse: function (response) {\n        var savings = response.fltVoucherReduction;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"idmobile": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.voucher-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"shoeline": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = Number(response.couponTotals.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"bargaincrazy": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('strong:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"rosebikes": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart__footer__prize--discount:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#voucherForm_voucher_code').val(bestCode);\r\n            $('.button.button--inline:last').click();\r\n        }\r\n    }\r\n};",
	"schecker": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        if ($('.basket_PriceWithoutDiscounts:contains(\"-\")', responseHTML).text()) {\r\n            var savings = parseFloat($('.basket_PriceWithoutDiscounts', responseHTML).text().split('-')[1].replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.basket_voucher_input').val(bestCode);\r\n            $('input[name=\"button_voucher\"]').click();\r\n        }\r\n    }\r\n};",
	"bobbibrownde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.total.value.order-summary__total-value').text().replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.total.value.order-summary__total-value', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        var savings = parseFloat(oldTotal - newTotal)\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#form--offer_code--field--OFFER_CODE').val(bestCode);\r\n            $('.btn.btn-mini.form-submit').click();\r\n        }\r\n    }\r\n};",
	"superjeweler": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var oldTotal = parseFloat($('#subtotal').val().replace(\/[^0-9.]\/g, ''));\n        var newTotal = parseFloat($('#subtotal', responseHTML).val().replace(\/[^0-9.]\/g, ''));\n        var savings = oldTotal - newTotal;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload()\n    }\n};",
	"superjeweler.mobile": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n\n        var $savings = $('.grand-total .discount input', responseHTML);\n\n        \/\/ If the element containing the savings value exists\n        var savings = $savings.val().replace(\/[^0-9|.]\/g, '');\n        \n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode, bestSaving) {\n        if (bestCode) location.reload(true);\n    }\n};",
	"claires": "var ExternalProvider = {\n\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = Number($('.discount span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function () {\n        location.reload(true);\n    }\n};",
	"timelife": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.cart-details-price em:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#promo-code-input').val(bestCode);\n            $(\"input[value='Apply']\").click();\n        }\n    }\n};",
	"prana": "var ExternalProvider = {\n    prepare: function (type, code) {\n        if(type == 'applyCouponUrl'){\n            var form = $('#firecheckout-form');\n            form.find('#coupon-code').val(code);\n            return this.serializeObject(form.serializeArray());\n        }\n        return null;\n    },\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    },\n    serializeObject: function (a) {\n        var o = {};\n\n        $.each(a, function () {\n            o[this.name] = this.value || '';\n        });\n\n        return o;\n    }\n};",
	"mmoga": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.bestTotal td:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"direct2mum": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.order-summary-title:contains(\"Discount\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#Discount_VoucherCode').val(bestCode);\n            $('input[name=\"submitButton\"]').click();\n        }\n    }\n};",
	"dearfoams": "var ExternalProvider = {\n    parse: function (response) {\n        var savings = response.baskettotal - response.adjustedBaskettotal;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#dwfrm_billing_couponCode').val(bestCode);\n            $('#coupon-save').click();\n        }\n    }\n};",
	"amorepacific": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML;\n        var savings = 0;\n        \n        $.ajax({\n            type: 'POST',\n            url: 'https:\/\/us.amorepacific.com\/checkout\/cart',\n            dataType: 'html',\n            success: function (result) {\n                responseHTML = $.parseHTML(result);\n                savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n            },\n            async: false\n        });\n\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#coupon_code').val(bestCode);\n            $('#discount-coupon-form button').click();\n        }\n    }\n};",
	"voelkner": "var ExternalProvider = {\n    parse: function (response) {\n        var savings = parseFloat(response.order_total.toString().match('F0000\"> -(.*)\u20ac<\/fo')[1].replace(\/[^0-9|]\/g, '')) \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload(true);\n    }\n};",
	"boden": "var ExternalProvider = {\n    prepare: function (type, code) {\n        if (type === 'injectCoupon') {\n            $('#code').val(code);\n            $('#btnApplyCode').click();\n        } else if (type === 'removeInjectedCoupon') {\n            $('#code').val('');\n            $('#btnApplyCode').click();\n        }\n    },\n    whenReady: function(step, next)\n    {\n        if ( (step == 'injectCoupon') || (step == 'removeInjectedCoupon') ) {\n            setTimeout(function() {\n                var maxWait = 200, waited = 0;\n                var waitForClose = setInterval(function() {\n                    var confirmed = !$(\".cls_loadingMask\").length;\n                    if ((confirmed) || (waited > maxWait)) {\n                        clearInterval(waitForClose);\n                        setTimeout(function() {\n                            next();\n                        }, 500);\n                    }\n                    waited++;\n                }, 10);\n            }, 50);\n        }\n    },\n    parse: function () {\n        var oldTotal = parseFloat($('.coPListOriginalPrice').text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\n        var newTotal = parseFloat($('.coPListFinalPrice').text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\n        var savings = oldTotal - newTotal;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        }\n    },\n};",
	"mountainwarehouse": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = 0;\n\n        if ($('.h3:contains(\"-$\")', responseHTML).length) {\n            savings = parseFloat($('.h3:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n        } else {\n            savings = parseFloat($('.h3:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n        }\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#CouponCode').val(bestCode);\n            $(\".button[value='Apply']\").trigger('click');\n        }\n    }\n};",
	"viagogofr": "var ExternalProvider = {\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n        var locale = localeMapping.US;\n        var newCurrency = currency;\n        var selector = $('.header-links-list .mls span, .header-links-list .i-banknote~span').text();\n\n        if (selector.match('\u00a3')) {\n            locale = localeMapping.GB;\n            newCurrency = 'GBP';\n        } else if (selector.match('\u20ac')) {\n            locale = localeMapping.FR;\n            newCurrency = 'EUR';\n        }\n\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\n    }\n};",
	"matalan": "var ExternalProvider = {\n  parse: function (response) {\n    var savings = parseFloat(response.data.attributes.total_discount.replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"peaceloveworld": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#checkout_reduction_code').val(bestCode);\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\n        }\n    }\n};",
	"gourmondo": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.saved-amount', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"maddafella": "var ExternalProvider = {\n    parse: function (response, a, $b, code) {\n        var responseHTML = $.parseHTML(response);\n        var validCoupon = $('.reduction-code .reduction-code__text', responseHTML).last().text().includes(code);\n        var summaryDiscountVal = parseFloat($('.total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).attr('data-checkout-discount-amount-target')) \/ 100;\n        var summaryDiscount = Number.isNaN(summaryDiscountVal) ? 0.00 : summaryDiscountVal;\n        var itemDiscountElement = $('.reduction-code__text:contains(\"-\")', responseHTML);\n        var itemDiscount = 0.00;\n\n        for (var x = 0; x < itemDiscountElement.length; x++) {\n            var discountElementVal = parseFloat(itemDiscountElement[x].innerText.split('(')[1].replace(\/[^0-9|.]\/g, ''));\n\n            itemDiscount += isNaN(discountElementVal) ? 0.00 : discountElementVal;\n        }\n\n        var savings = validCoupon ? summaryDiscount + itemDiscount : 0.00;\n\n        return {\n            success: savings > 0,\n            savings: Number.isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#checkout_reduction_code').val(bestCode);\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\n        }\n    }\n};",
	"soma": "var ExternalProvider = {\n    _prepareUrl: function () {\n        var applyCouponUrl = $('#__jpApplyUrl');\n        var Url = '\/store\/common\/json\/cart.jsp?_DARGS=\/store\/common\/checkout\/cart.jsp.couponForm';\n\n        if (!applyCouponUrl.length) {\n            applyCouponUrl = document.createElement('input');\n            applyCouponUrl.id = '__jpApplyUrl';\n            applyCouponUrl.style.display = 'none';\n            (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\n            applyCouponUrl = $('#__jpApplyUrl');\n        }\n\n        applyCouponUrl.attr('value', Url);\n    },\n    parse: function (response, status, $xhr, code) {\n        if (response && response.promoDiscounts) {\n            for (var i in response.promoDiscounts) {\n                var promo = response.promoDiscounts[i];\n\n                if (promo.couponId && promo.couponId.toLowerCase().indexOf(code.toLowerCase()) > -1) {\n                    return {\n                        success: true,\n                        savings: parseFloat(promo.discountAmount.replace(\/[^0-9|.]\/g, ''))\n                    };\n                }\n            }\n        }\n\n        return {\n            success: false,\n            savings: 0.00\n        };\n    },\n    complete: function (bestCode, bestSaving) {\n        location.reload(true);\n    }\n};\n\nExternalProvider._prepareUrl();",
	"unbeatablesale": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.promoCodeDiscountValue', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $(\"#promoCodeInput\").val(bestCode);\n            $(\"button[name='_target2']\").click();\n        };\n    },\n };",
	"roxy": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.red.itemtotals', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#dwfrm_cart_couponCode').val(bestCode);\n\n            var clickEvent = new MouseEvent('click', {\n                view: window,\n                bubbles: true,\n                cancelable: true\n            });\n            $('button[name=\"dwfrm_cart_addCoupon\"]').get(0).dispatchEvent(clickEvent);\n        }\n    }\n};",
	"yoox": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n\r\n        if (location.href.contains('de') || location.href.contains('fr')) {\r\n            currency = 'EUR';\r\n            locale = location.href.contains('de') ? localeMapping.DE : localeMapping.FR;\r\n        } else if (location.href.contains('uk')) {\r\n            currency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        } else {\r\n            locale = localeMapping.US;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"jackrogersusa": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9.]\/g, ''));\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n    var savings = oldTotal - newTotal;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\n      $('#checkout_reduction_code').trigger('input').trigger('change');\n      $('button[data-trekkie-id=\"apply_discount_button\"]').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\n    }\n  },\n};",
	"nationalpen": "var ExternalProvider = {\n    _prepareUrl: function () {\n        var uID = $('input[name=\"UID\"]').val();\n        var applyUrlInput = $('#___jpApplyUrl');\n        var applyUrl = 'https:\/\/www.nationalpen.co.uk\/uk\/validateVoucher.asp?UID=' + uID + '';\n\n        if (!applyUrlInput.length) {\n            applyUrlInput = document.createElement('input');\n            applyUrlInput.id = '___jpApplyUrl';\n            applyUrlInput.style.display = 'none';\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n            applyUrlInput = $('#___jpApplyUrl');\n        }\n\n        applyUrlInput.attr('value', applyUrl);\n    },\n    prepare: function (type, code) {\n        var data = {};\n\n\n        if (type === 'applyCouponUrl') {\n            data = {\n                tracker: '',\n                taken: '0',\n                ItemID: '',\n                voucherCode: code\n            };\n            return data;\n        }\n\n        return false;\n    },\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('td:contains(\"- \u00a3\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('input[name=\"voucherCode\"]').val(bestCode);\n            $('button:contains(\"Apply Voucher\")').click();\n        }\n    }\n};\n\nExternalProvider._prepareUrl();",
	"oxfamonlineshop": "var ExternalProvider = {\n  prepare: function (step, code) {\n    if (step === 'applyCouponUrl') {\n      let data = this.serializeFormData($('#frmMain'));\n      data.container_0$contentprimary_0$PromoCodes$PromoCode = code;\n      data.container_0$contentprimary_0$PromoCodes$ApplyPromoCode = 'Apply';\n      return data;\n    }\n  },\n  parse: function (response) {\n    const responseHTML = $.parseHTML(response);\n    let savings = parseFloat($('.alt-totals h5.savings span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  },\n  serializeFormData: function (form) {\n    let formArray = form.serializeArray();\n    let formData = {}\n    formArray.forEach(data => { formData[data.name] = data.value });\n    return formData;\n  }\n};",
	"a1supplements": "var ExternalProvider = {\n  parse: function (response) {\n    let savings = parseFloat(response.match(\/\"discount_amount\":-(.*?(?=,))\/)[1]);\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"prettylittercats": "var ExternalProvider = {\n    storeId: '',\n    rechargeCartId: '',\n    prepareUrl: function () {\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\n        var script = document.createElement('script');\n\n        scriptContent += 'body.setAttribute(\"store_id\", updateShipping)';\n        script.id = 'tmpScript';\n        script.appendChild(document.createTextNode(scriptContent));\n        (document.body || document.head || document.documentElement).appendChild(script);\n\n        var value = $('body').attr('store_id');\n\n        value = value.substring(value.indexOf('var post_data = {'));\n\n        var postData = value.substring(value.indexOf('{'), value.indexOf('}') + 1);\n        var storeId = postData.substring(postData.indexOf('store_id'), postData.indexOf(','));\n\n        var data = value.substring(value.indexOf('recharge_cart_id'));\n        var rechargeCartId = data.substring(data.indexOf('recharge_cart_id'), data.indexOf(','));\n\n        var storeIdParser = storeId.split(':');\n        var rechargeCartIdParses = rechargeCartId.split(':');\n\n        this.storeId = storeIdParser[1].replace(\/[^0-9.]\/g, '');\n        this.rechargeCartId = rechargeCartIdParses[1].replace(\/[^0-9.]\/g, '');\n    },\n    prepare: function (type, code) {\n        var data = {};\n\n        if (type === 'applyCouponUrl') {\n            data = {\n                store_id: this.storeId,\n                recharge_cart_id: this.rechargeCartId,\n                discount_code: code,\n                customer_email: $('#checkout_email').val()\n            };\n\n            return data;\n        }\n\n        if (type === 'clearCouponUrl') {\n            data = {\n                store_id: this.storeId,\n                recharge_cart_id: this.rechargeCartId,\n                discount_code: 'nodiscount',\n                customer_email: $('#checkout_email').val()\n            };\n\n            return data;\n        }\n\n        return false;\n    },\n    parse: function (response) {\n        var discount = parseFloat(response.discount_amount);\n\n        return {\n            success: discount > 0,\n            savings: isNaN(discount) ? 0.00 : discount\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#checkout_discount_code').val(bestCode);\n            $('#apply_discount').click();\n        }\n    }\n};\nExternalProvider.prepareUrl();",
	"oyobox": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('span:contains(\"-$\")', responseHTML)[0].innerHTML.replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"buecher": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var oldTotal = parseFloat($('.order-total td').last().text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\n    var newTotal = parseFloat($('.order-total td', responseHTML).last().text().replace(\/[^0-9.]\/g, '')) \/ 100;\n    var savings = parseFloat(oldTotal - newTotal);\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"papamurphys": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('#bVendorDiscount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#CouponCodeText').val(bestCode);\n      $('#EnterCouponCodeBtn').prop('disabled', false);\n      $('#EnterCouponCodeBtn').click();\n    }\n  }\n};",
	"fivestardirect": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('dd:contains(-()', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"vistaprintde": "var ExternalProvider = {\n  parse: function (response) {\n    var savings = response.substring(response.indexOf(\"class='savings-amount'>\") + \"class='savings-amount'>\".length);\n    var savingsLoc = savings.substring(0, savings.indexOf('<'));\n\n    if (savingsLoc.contains('lang=\"de-de\"')) {\n      savings = 0;\n    } else {\n      savings = parseFloat(savingsLoc.replace(',', '.').replace(\/[^.0-9]\/g, ''));\n    }\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"wholesalepartysupplies": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        }\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#promo_code').val(bestCode);\n            $('.button.button--alt').click();\n        }\n    }\n};",
	"ghostbed": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.cart-discount .woocommerce-Price-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"projectjuice": "var ExternalProvider = {\n  retrieveWindowVariable: function (name, variable) {\n    var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\n    var script = document.createElement('script');\n\n    script.id = 'tmpScript';\n    script.appendChild(document.createTextNode(scriptContent));\n    (document.body || document.head || document.documentElement).appendChild(script);\n\n    var value = $('body').attr('tmp_' + name);\n\n    $('body').removeAttr('tmp_' + name);\n\n    return value;\n  },\n  prepare: function (action, code) {\n    var formData = {};\n    var themeToken = this.retrieveWindowVariable('theme_token', 'JSON.stringify(Drupal.settings.ajaxPageState.theme_token)');\n\n    if (action === 'applyCouponUrl') {\n      formData = $('#commerce-checkout-form-review');\n      formData.append('<input type=\"hidden\" name=\"_triggering_element_name\" value=\"coupon_add\">');\n      formData.append('<input type=\"hidden\" name=\"_triggering_element_value\" value=\"Add\">');\n      formData.find('input[name=\"commerce_promotion[coupon_code]\"]').val(code);\n\n      var data = formData.serializeArray();\n\n      data['commerce_promotion[coupon_code]'] = code;\n\n      var ids = document.querySelectorAll('*[id]:not([id=\"\"])');\n      var element = [];\n\n      Array.prototype.forEach.call(ids, function (el, i) {\n        element.push(el.id);\n      });\n\n      for (var i = 0; i < element.length; i++) {\n        data.push({\n          name: 'ajax_html_ids[]',\n          value: element[i]\n        });\n      }\n\n      formData.append('<input type=\"hidden\" name=\"ajax_page_state[theme]\" value=\"projectjuice\">');\n      formData.append('<input type=\"hidden\" name=\"ajax_page_state[theme_token]\" value=\"' + themeToken + '\">');\n      formData.append('<input type=\"hidden\" name=\"ajax_page_state[jquery_version]\" value=\"1.10\">');\n\n      $(\"input[name='_triggering_element_name']\").remove();\n      $(\"input[name='_triggering_element_value']\").remove();\n      $(\"input[name='ajax_page_state[theme]']\").remove();\n      $(\"input[name='_triggering_element_name']\").remove();\n      $(\"input[name='ajax_page_state[jquery_version]']\").remove();\n\n      return data;\n    }\n\n    return false;\n  },\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"lancomeusa": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.coupon__info:eq(0) .value', responseHTML).text().replace(\/[^.0-9]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            if ($('#dwfrm_cart_couponCode').length === 1) {\n                $('#dwfrm_cart_couponCode').val(bestCode);\n                $('#add-coupon').click();\n            } else {\n                $('#dwfrm_couponcode_couponCode').val(bestCode);\n                $('button[name=\"dwfrm_couponcode_applyCoupon\"]').click();\n            }\n        }\n    }\n};",
	"warriorgear": "var ExternalProvider = {\n    __prepareUrl: function () {\n        var s = document.createElement('script');\n        var params = location.pathname.match('panier') ? 'wc_cart_params' : 'wc_checkout_params';\n        var code = \"document.body.setAttribute('apply', \" + params + \".apply_coupon_nonce);document.body.setAttribute('remove', \" + params + '.remove_coupon_nonce);';\n\n        s.id = 'tempScript';\n        s.appendChild(document.createTextNode(code));\n        document.body.appendChild(s);\n        $('tempScript').remove();\n    },\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.cart-discount .amount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};\nExternalProvider.__prepareUrl();",
	"orvisuk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat((response.d.orderTotals.order_allowance_total).replace('\u00a3', ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#special_offer').val(bestCode);\r\n            $('.btn_get_balance').click();\r\n        }\r\n    }\r\n};",
	"swansonvitamins": "var ExternalProvider = {\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n        var locale = localeMapping['US'];\n        var selector = $('#cartHeading').text().replace(\/[A-z.0-9.():,]\/g, '').trim()\n\n        if (selector === \"\u20ac\") {\n            currency = 'EUR';\n            locale = localeMapping['DE'];\n        } else if (selector === \"\u00a3\") {\n            currency = 'GBP';\n            locale = localeMapping['GB'];\n        } else if (selector === \"\u20ac\") {\n            locale = localeMapping['FR'];\n            currency = \"EUR\";\n        }\n\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\n    },\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = $('p:contains(\"-$\")', responseHTML).eq(0).text().replace(\/[^0-9|.]\/g, '');\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#fldPromoCode2').val(bestCode);\n            $('button[name=\"promoCodeSubmit\"]').click();\n        }\n    }\n};",
	"evelom": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.order-discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#dwfrm_cart_couponCode').val(bestCode);\n      $('#add-coupon').click();\n    }\n  }\n};",
	"hirmerde": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.basket_contents_voucher div:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\n     \n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },    \n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"tommiecopper": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var oldTotal = parseFloat($('#shopping-cart-totals-table > tfoot > tr > td.a-right.last > strong > span').text().replace(\/[^0-9.]\/g, ''));\n    var newTotal = parseFloat($('#shopping-cart-totals-table > tfoot > tr > td.a-right.last > strong > span', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n    var savings = oldTotal - newTotal;\n    \n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      jQuery(\"#coupon_code\").val(bestCode);\n      jQuery(\"#discount-coupon-form button\").click();\n    }\n  }\n}",
	"naturalcollection": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"trueleafmarket": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"diy": "var ExternalProvider = {\n  oldTotal:\"\",\n  init: function () {\n      this.oldTotal = $('p[data-test-id=\"basket-cost-total\"]').text().replace(\/[^0-9.]\/g, '');\n  },\n  prepare: function (action, code) {\n    if (action === 'injectCoupon') {\n      $('input[name=\"voucherCode\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\n      $('input[name=\"voucherCode\"]').trigger('input').trigger('change');\n      $('span:contains(\"Apply\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\n    }\n  },\n  whenReady: function (step, next) {\n    if (step === 'injectCoupon') {\n      setTimeout(function () {\n        var maxWait = 500;\n        var waited = 0;\n        var waitForClose = setInterval(function () {\n          var confirmed = !$('p:contains(\"-\u00a3\")').length;\n\n          if ((confirmed) || (waited > maxWait)) {\n            clearInterval(waitForClose);\n            setTimeout(function () {\n              next();\n            }, 1000);\n          }\n\n          waited++;\n        }, 100);\n      }, 1000);\n    }\n  },\n  parse: function () {\n    var newTotal = $('p[data-test-id=\"basket-cost-total\"]').text().replace(\/[^0-9.]\/g, '');\n    var savings = this.oldTotal - newTotal; \n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"sportsmansguide": "var ExternalProvider = {\n  init: function () {\n    $.fn.serializeObject = function () {\n      var o = {};\n      var a = this.serializeArray();\n\n      $.each(a, function () {\n        if (o[this.name] !== undefined) {\n          if (!o[this.name].push) {\n            o[this.name] = [o[this.name]];\n          }\n\n          o[this.name].push(this.value || '');\n        } else {\n          o[this.name] = this.value || '';\n        }\n      });\n\n      return o;\n    };\n  },\n  prepare: function (type, code) {\n    if (!['applyCouponUrl', 'clearCouponUrl'].includes(type)) return false;\n\n    var couponData = $('#paymentform').serializeObject();\n\n    couponData.CouponCode = (type === 'applyCouponUrl') ? code : '';\n\n    if (type === 'applyCouponUrl') {\n      couponData.triggered_action = 'CouponSubmit';\n    } else {\n      couponData.triggered_action = 'RemoveCoupon' + code;\n    }\n\n    return couponData;\n  },\n\n  parseAmount: function (string) {\n    return parseFloat(string.replace(\/[^0-9|.]\/g, ''));\n  },\n\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response.html);\n    var grandTotal = '#summaryGrandTotal';\n\n    var savings = this.parseAmount($(grandTotal).text()) - this.parseAmount($(grandTotal, responseHTML).text());\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#CouponCode').val(bestCode);\n      $('button[name=\"CouponSubmit\"]').click();\n    }\n  }\n};",
	"123pneusfr": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var oldTotal = parseFloat($('.col-sm-3.col-xs-6:contains(\"\u20ac\")').last().text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\n    var newTotal = parseFloat($('.col-sm-3.col-xs-6:contains(\"\u20ac\")', responseHTML).last().text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\n    var savings = oldTotal - newTotal;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"forever21": "var ExternalProvider = {\n    userId: '',\n    init: function () {\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\n        var script = document.createElement('script');\n\n        scriptContent += 'body.setAttribute(\"userid\", fnGetUserId());';\n\n        script.id = 'tmpScript';\n        script.appendChild(document.createTextNode(scriptContent));\n        (document.body || document.head || document.documentElement).appendChild(script);\n\n        var value = $('body').attr('userid');\n\n        this.userId = value;\n        $('body').removeAttr(name);\n    },\n    prepare: function (action, code) {\n        var data = {};\n\n        if (action === 'applyCouponUrl') {\n            data = { userId: this.userId.toString(),\n                promoCode: code,\n                restrictedCodeName: code,\n                creditCardListName: '' };\n\n            return data;\n        }\n\n        if (action === 'clearCouponUrl') {\n            data = { userId: this.userId.toString(),\n                creditCardListName: '' };\n\n            return data;\n        }\n\n        return data;\n    },\n    parse: function (response) {\n        var summary;\n        var savings = 0.0;\n\n        if (response.ErrorMessage !== 'Invalid code.') {\n            summary = response.Summary;\n\n            if ('PromoText' in summary !== null) {\n                savings = summary.TotalAdjustment;\n            }\n        }\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"chaussea": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.discount .price', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"mountainsidemedical": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\n            $('#checkout_reduction_code').trigger('input').trigger('change');\n            $('.field__input-btn.btn')[0].click();\n            $('#checkout_reduction_code').val('');\n        }\n    }\n};",
	"lloydspharmacy": "var ExternalProvider = {\n    storeId: '',\n    catalogId: '',\n    langId: '',\n\n    _prepareUrl: function () {\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\n        var script = document.createElement('script');\n\n        scriptContent += 'body.setAttribute(\"storeId\", WCParamJS.storeId);';\n        scriptContent += 'body.setAttribute(\"catalogId\", WCParamJS.catalogId);';\n        scriptContent += 'body.setAttribute(\"langId\", WCParamJS.langId);';\n        script.id = 'tmpScript';\n        script.appendChild(document.createTextNode(scriptContent));\n        (document.body || document.head || document.documentElement).appendChild(script);\n\n        this.storeId = $('body').attr('storeId');\n        this.catalogId = $('body').attr('catalogId');\n        this.langId = $('body').attr('langId');\n    },\n\n    prepare: function (type, code) {\n        var data = {};\n\n        if (type === 'applyCouponUrl') {\n            data = {\n                storeId: this.storeId,\n                catalogId: this.catalogId,\n                langId: this.langId,\n                orderId: '.',\n                taskType: 'A',\n                URL: '',\n                finalView: 'AjaxOrderItemDisplayView',\n                promoCode: code,\n                requesttype: 'ajax'\n            };\n\n            return data;\n        } else if (type === 'clearCouponUrl') {\n            data = {\n                storeId: this.storeId,\n                catalogId: this.catalogId,\n                langId: this.langId,\n                orderId: '.',\n                taskType: 'R',\n                URL: '',\n                finalView: 'AjaxOrderItemDisplayView',\n                promoCode: code,\n                requesttype: 'ajax'\n            };\n\n            return data;\n        } else if (type === 'resultUrl') {\n            data = {\n                storeId: this.storeId,\n                catalogId: this.catalogId,\n                langId: this.langId\n            };\n\n            return data;\n        }\n\n\n        return false;\n    },\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var oldTotal = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_2', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n        var newTotal = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n        var savings = parseFloat(oldTotal - newTotal);\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};\nExternalProvider._prepareUrl();",
	"houseoffraser": "var ExternalProvider = {\n  prepare: function (step, code) {\n    let data = this.serializeFormData($('#Form'));\n    switch (step) {\n      case 'applyCouponUrl':\n        data.dnn$ctr87462426$ViewBasket$PromoCodeManager$txtPromoCode = code;\n        data.__EVENTTARGET = 'dnn$ctr87462426$ViewBasket$PromoCodeManager$btnApplyPromoCode';\n        return data;\n      case 'clearCouponUrl':\n        data.dnn$ctr87462426$ViewBasket$PromoCodeManager$txtPromoCode = 'removeCode';\n        data.__EVENTTARGET = 'dnn$ctr87462426$ViewBasket$PromoCodeManager$btnApplyPromoCode';\n        return data;\n    }\n  },\n  parse: function (response) {\n    const responseHTML = $.parseHTML(response);\n    let savings = parseFloat($('#BasketSummaryDiscountValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  },\n  serializeFormData: function (form) {\n    let formArray = form.serializeArray();\n    let formData = {}\n    formArray.forEach(data => { formData[data.name] = data.value });\n    return formData;\n  },\n};",
	"meundies": "var ExternalProvider = {\n  _prepareUrl: function () {\n    var applyUrlInput = $('#___jpCouponUrl');\n    var applyUrl = 'https:\/\/www.meundies.com' + $('.edit_order').attr('action');\n\n    if (!applyUrlInput.length) {\n      applyUrlInput = document.createElement('input');\n      applyUrlInput.id = '___jpCouponUrl';\n      applyUrlInput.style.display = 'none';\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n      applyUrlInput = $('#___jpCouponUrl');\n    }\n\n    applyUrlInput.attr('value', applyUrl);\n  },\n  prepare: function (type, code) {\n    var data = {};\n\n    if (type === 'applyCouponUrl') {\n      data = {\n        utf8: $('input[name=\"utf8\"]').val(),\n        _method: $('input[name=\"_method\"]').val(),\n        authenticity_token: $('input[name=\"authenticity_token\"]').val(),\n        'order[coupon_code]': code,\n        commit: 'Apply'\n      };\n    }\n\n    return data;\n  },\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.cart-promo-total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};\nExternalProvider._prepareUrl();",
	"newrepublic": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = $('.total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9.]\/g, '');\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"kennethcole": "var ExternalProvider = {\n  parse: function (response) {\n    var savings = parseFloat(response.cartInfo.cart.products[0].productPromoDiscount);\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"medexsupply": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('form[name=\"cart_quantity\"] > div.product:eq(1) > div.one:eq(3)', responseHTML).html().replace('-', '').replace(\/[^0-9|\\.]\/g, ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n        \r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n};",
	"easy2name": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#coupon_code').val(bestCode);\n      $('#discount-coupon-form button[title=\"Apply\"]').click();\n    }\n  }\n};",
	"bostonstore": "var ExternalProvider = {\n  _prepareUrl: function () {\n    var containerId = $(\"script:contains('containerId')\").text();\n    var checkoutId = containerId.indexOf('checkoutId') + 13;\n    containerId = containerId.slice(checkoutId, containerId.lastIndexOf('containerId')).replace(\"',\", \"\").trim();\n    var applyUrlInput = $('#___jpApplyUrl');\n    var applyUrl = 'https:\/\/www.bostonstore.com\/api\/storefront\/checkouts\/' + containerId + '\/coupons?include=cart.lineItems.physicalItems.options%2Ccart.lineItems.digitalItems.options%2Ccustomer%2Cpayments%2Cpromotions.banners%2Cconsignments.availableShippingOptions';\n\n\n    if (!applyUrlInput.length) {\n      applyUrlInput = document.createElement('input');\n      applyUrlInput.id = '___jpApplyUrl';\n      applyUrlInput.style.display = 'none';\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n      applyUrlInput = $('#___jpApplyUrl');\n    }\n\n    applyUrlInput.attr('value', applyUrl);\n  },\n  parse: function (response) {\n    var savings = parseFloat(response.cart.coupons[0].discountedAmount);\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};\nExternalProvider._prepareUrl();",
	"mamasandpapas": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.checkout_voucher_savings .pull-right', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"designerpaint": "var ExternalProvider = {\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n        var locale = localeMapping.US;\n        var newCurrency = currency;\n        var selector = $('.d-inline-block.mb-0.mr-2.align-middle.text-nowrap strong')[0].innerText.replace(\/[0-9|.]\/g, '');\n\n        if (selector === '\u00a3') {\n            locale = localeMapping.GB;\n            newCurrency = 'GBP';\n        } else if (selector === '\u20ac') {\n            locale = localeMapping.DE;\n            newCurrency = 'EUR';\n        } else if (selector === '\u20ac') {\n            locale = localeMapping.FR;\n            newCurrency = 'EUR';\n        }\n\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\n    }\n};",
	"medifast1": "var ExternalProvider = {\n  prepare: function (type, code) {\n    if (type === 'applyCouponUrl') {\n      var formData = {\n        code: code,\n        CSRFToken: $(\"input[name='CSRFToken']\").val(),\n        CSRFToken: $(\"input[name='CSRFToken']\").val()\n      };\n\n      return formData;\n    }\n    return false;\n  },\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.savingsAmt', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('input[name=\"code\"]').val(bestCode);\n      $('#promoCode button').click();\n    }\n  }\n};",
	"justgoholidaysuk": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var oldTotal = parseFloat($('#OrderBanner1_lblTotalPrice').text().replace(\/[^0-9|.]\/g, ''));\n    var newTotal = parseFloat($('#OrderBanner1_lblTotalPrice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    var savings = oldTotal - newTotal;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"marthastewartwine": "var ExternalProvider = {\n  prepare: function (action, code) {\n    var data = {};\n\n    if (action === 'applyCouponUrl') {\n      data = {\n        qcommerce_promotion_vouchers: {\n          checkout_redemption: 'true',\n          utf8: '\u2713',\n          voucher_code: code\n        }\n      };\n\n      return JSON.stringify(data);\n    }\n\n    return false;\n  },\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.discount:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"ouidad": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response)\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"purityproducts": "var ExternalProvider = {\n  _prepareUrl: function () {\n    var sessionId = document.cookie.match(\/JSESSIONID=([A-z|0-9|.]+);\/)[1];\n    var applyUrlInput = $('#___jpCouponUrl');\n    var applyUrl = 'https:\/\/shop.purityproducts.com\/validateShowCartPromoCode;jsessionid=' + sessionId;\n\n    if (!applyUrlInput.length) {\n      applyUrlInput = document.createElement('input');\n      applyUrlInput.id = '___jpCouponUrl';\n      applyUrlInput.style.display = 'none';\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n      applyUrlInput = $('#___jpCouponUrl');\n    }\n\n    applyUrlInput.attr('apply', applyUrl);\n  },\n  parse: function (response, status, $xhr, code) {\n    var responseHTML = $.parseHTML(response);\n    var validCoupon = $('.id.promoCode', responseHTML).text().includes(code.toUpperCase());\n    var preAppliedDiscount = Number.isNaN(parseFloat($('.currency.promoDiscount span').text().replace(\/[^0-9|.]\/g, ''))) ? 0.00 : parseFloat($('.currency.promoDiscount span').text().replace(\/[^0-9|.]\/g, ''));\n    var savings = validCoupon && (parseFloat($('.currency.promoDiscount span', responseHTML).text().replace(\/[^0-9|.]\/g, '')) > preAppliedDiscount) ? parseFloat($('.currency.promoDiscount span', responseHTML).text().replace(\/[^0-9|.]\/g, '')) : 0.00;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $(\"#js_manualOfferCode\").val(bestCode);\n      $(\"a.standardBtn.action\")[0].click();\n    }\n  }\n};\nExternalProvider._prepareUrl();",
	"furniturevillage": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.order-coupons>div:contains(-)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('a.cart-coupon-link')[0].click();\n            $('#dwfrm_cart_couponCode').val(bestCode);\n\n            var s = document.createElement('script');\n\n            s.type = 'text\/javascript';\n            s.id = 'apply';\n\n            var code = \"$('#dwfrm_cart_couponCode').trigger('change');$('#add-coupon').click();\";\n\n            s.appendChild(document.createTextNode(code));\n            document.body.appendChild(s);\n            $('#apply').remove();\n        }\n    }\n};",
	"crocs-us": "var ExternalProvider = {\n    parse: function (response) {\n        var oldSavings = parseFloat($(\"#estimatedTotal\").text().replace(\/[^0-9|.]\/g, ''));\n        var newSavings = parseFloat(response.data.cartTotalDisplay.replace(\/[^0-9|.]\/g, ''));\n        var savings = 0.00;\n\n        if (oldSavings > newSavings) {\n         savings = parseFloat(Math.abs(response.data.cartPromos.couponItemPromos[0].discount));\n        }\n\n        $.ajax({\n            url: 'https:\/\/www.crocs.com\/on\/demandware.store\/Sites-crocs_us-Site\/default\/Cart-API',\n            method: 'POST',\n            data: {\n                action: 'removecoupon',\n                updates: 'approaching|promos|shipping|delivery',\n                uuid: response.data.cartPromos.couponItemPromos[0].uuid\n            },\n            success: function () {},\n            async: false\n        });\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"mrsfields": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    parse: function(response, status, $xhr, code){\r\n        if(response.totals) {\r\n            var savings  = response.totals.discount;\r\n            if(savings > 0){\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        location.reload(true)\r\n    }\r\n};",
	"xtendlife": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"eggie": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"shopko": "var ExternalProvider = {\n    isCart: function () {\n        return $('#GRAND_ITEMS_TOTAL-value')[0] === undefined;\n    },\n    parse: function (response, status, $xhr, code) {\n        var discount = 0.00;\n        var shipping_discount = 0.00;\n        for (var i = response.totals.length - 1; i >= 0; i--) {\n            if (response.totals[i].label === 'Promotions:') {\n                discount = response.totals[i].value * -1\n            }\n            else if (response.totals[i].label === 'Shipping Discount:') {\n                shipping_discount = response.totals[i].value * -1\n            }\n        }\n        var savings = parseFloat(discount + shipping_discount);\n\n        return {\n            success: savings > 0,\n            savings: savings\n        };\n    },\n    complete: function (bestCode, bestSaving) {\n        if (bestCode) {\n            $('#promoCode').val(bestCode);\n\n            if (this.isCart()) {\n                $('#promoCodeEntry > a')[0].click();\n            } else {\n                $('.formButton.apply.btn.btn-secondary.btn-apply-code.btn-apply-coupon')[0].click();\n            }\n\n            $('#promoCode').val('');\n        }\n    }\n};",
	"shopko.mobile": "var ExternalProvider = {\n    isCart: function () {\n        return $('#GRAND_ITEMS_TOTAL-value')[0] === undefined;\n    },\n    parse: function (response, status, $xhr, code) {\n        var origPrice = this.isCart() ? parseFloat($('.order-summary .label-value-container')[0].innerHTML.replace(\/[^0-9|.]\/g, '')) : parseFloat($('#GRAND_ITEMS_TOTAL-value').text().replace(\/[^0-9|.]\/g, ''));\n        var discountPrice = parseFloat(response.totals[0].value) === 0.00 ? origPrice : response.totals[0].value;\n\n        var savings = parseFloat(origPrice - discountPrice);\n\n        return {\n            success: savings > 0,\n            savings: savings\n        };\n    },\n\n    complete: function (bestCode, bestSaving) {\n        if (bestCode) {\n            $('#promoCode').val(bestCode);\n\n            if (this.isCart()) {\n                $('#promoCodeEntry > a')[0].click();\n            } else {\n                $('.formButton.apply.btn.btn-secondary.btn-apply-code.btn-apply-coupon')[0].click();\n            }\n\n            $('#promoCode').val('');\n        }\n    }\n};",
	"avenue": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.order-totals-value:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"pocode": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('tbody .text-right:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"greenmangaming": "var ExternalProvider = {\n  prepare: function (type, code) {\n    var changeEvent = new Event('change', {\n      bubbles: true,\n      cancelable: true\n    });\n\n    if (type === 'injectCoupon') {\n      $('#promotionalCode').val(code);\n      $('#promotionalCode').get(0).dispatchEvent(changeEvent);\n      $('.btn.btn-checkout:eq(0)').click();\n      $('#promotionalCode').val('');\n    } else if (type === 'removeInjectedCoupon') {\n      $('.btn.btn-checkout:eq(1)').click();\n    }\n  },\n  whenReady: function (step, next) {\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\n      setTimeout(function () {\n        var maxWait = 300,\n          waited = 0;\n        var waitForClose = setInterval(function () {\n          var confirmed = !$('.box-loading').length;\n\n          if ((confirmed) || (waited > maxWait)) {\n            clearInterval(waitForClose);\n            setTimeout(function () {\n              next();\n            }, 1500);\n          }\n\n          waited++;\n        }, 80);\n      }, 100);\n    }\n  },\n  parse: function () {\n    var savings = parseFloat($('span:contains(\"-\")').eq(-1).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"tvstoreonline": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"applebees": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var removeCoupon = $('#RemoveCouponCodeBtn', responseHTML);\r\n        if(removeCoupon) {\r\n            \r\n            return {\r\n                success: true,\r\n                savings: Number($('#bVendorDiscount', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''))\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings)\r\n    {\r\n        location.reload();\r\n    }\r\n    \r\n};",
	"applebees.mobile": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var total = $('#total', responseHTML),\r\n            discountWrap = total.prev(),\r\n            labelDiscount = discountWrap.find('label');\r\n        if(labelDiscount && labelDiscount.text() == 'Discount:') {\r\n            \r\n            return {\r\n                success: true,\r\n                savings: Number(discountWrap.text().replace(\/[^0-9|\\.]\/g, ''))\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings)\r\n    {\r\n        location.reload(true);      \r\n    }\r\n    \r\n};",
	"appliancesconnection": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('li:contains(-$)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"apress": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var script = $('script:contains(\"Wicket.Event.add\")').text();\r\n    var getString = script.match(',\"u\":\"(.*)0-shopCart-tokenContainer-tokenForm-couponInputContainer-couponButton');\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = getString[1].slice(0, -3);\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('div[wicketpath=\"shopCart_miniBasketPanel_sumPricePanel_pricePanel_fragment_savingPrice\"]', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"apricotonline": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"entity_id\", window.checkoutConfig.quoteData.entity_id);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var entityid = $('body').attr('entity_id');\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/www.apricotonline.co.uk\/rest\/default\/V1\/guest-carts\/' + entityid + '\/coupons\/CLAIMCODE';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n\r\n    var resultUrlInput = $('#___jpResultUrl');\r\n    var resultUrl = 'https:\/\/www.apricotonline.co.uk\/rest\/default\/V1\/guest-carts\/' + entityid + '\/payment-information?';\r\n\r\n    if (!resultUrlInput.length) {\r\n      resultUrlInput = document.createElement('input');\r\n      resultUrlInput.id = '___jpResultUrl';\r\n      resultUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n      resultUrlInput = $('#___jpResultUrl');\r\n    }\r\n\r\n    resultUrlInput.attr('value', resultUrl);\r\n  },\r\n  parse: function (response, status, $xhr, code) {\r\n    var responseHTML = parseFloat(response.totals.discount_amount);\r\n    var savings = Math.abs(responseHTML);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      location.reload();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"apt2b": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.total-line--reduction .total-line__price .order-summary__emphasis',responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if(bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"aquarterof": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.total_summary);\r\n        var savings = parseFloat($('.s_cart_price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"aquasana": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"-\")', responseHTML).eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discount_footer').val(bestCode);\r\n            $('input[name=\"discount_submit\"]').click();\r\n        }\r\n    }\r\n};",
	"arborday": "var ExternalProvider = {\r\n    serializeObject: function (a) {\r\n        var o = {};\r\n\r\n        $.each(a, function () {\r\n            o[this.name] = this.value || '';\r\n        });\r\n\r\n        return o;\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = this.serializeObject($('#aspnetForm').serializeArray());\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data.__EVENTTARGET = 'ctl00$ctl00$MainContent$uxCart$uxCart$ApplyCouponGo';\r\n            data.ctl00$ctl00$MainContent$uxCart$uxCart$ecoupon = code;\r\n\r\n            return data;\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#ctl00_ctl00_MainContent_uxCart_uxCart_DiscountDisplay:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#ctl00_ctl00_MainContent_uxCart_uxCart_ecoupon').val(bestCode);\r\n            window.location.href = \"javascript:__doPostBack('ctl00$ctl00$MainContent$uxCart$uxCart$ApplyCouponGo','')\";\r\n        }\r\n    }\r\n};",
	"arcanestore": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        function retrieveWindowVariable(variable) {\r\n            var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + ')); }\\n';\r\n            var script = document.createElement('script');\r\n\r\n            script.id = 'tmpScript';\r\n            script.appendChild(document.createTextNode(scriptContent));\r\n            (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n            var value = jQuery('body').attr('tmp_' + variable);\r\n\r\n            jQuery('body').removeAttr('tmp_' + variable);\r\n\r\n            return JSON.parse(value);\r\n        }\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                security: this.isCartPage() ? retrieveWindowVariable('wc_cart_params.apply_coupon_nonce') : retrieveWindowVariable('wc_checkout_params.apply_coupon_nonce'),\r\n                coupon_code: code\r\n            };\r\n        } else {\r\n            data = {\r\n                security: retrieveWindowVariable('wc_cart_params.remove_coupon_nonce'),\r\n                coupon: code\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-discount .woocommerce-Price-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ardene": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-discount .order-value', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"arenaflowers": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = response.discount_price;\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout--promo-code--code').val(bestCode);\r\n      $('.checkout--promo-code--submit .btn.btn-warning').click();\r\n    }\r\n  }\r\n};",
	"argos": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#orderSummaryPromoVoucherTotal', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promocodeinput').val(bestCode);\r\n      $('#applypromotion').click();\r\n    }\r\n  }\r\n};",
	"armorconcepts": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"arrowdirect": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var $savings = $('#shopping-cart-totals-table .a-right', responseHTML).filter(function(){\r\n            return $(this).text().indexOf('Discount') > -1;}).next('.a-right');\r\n        var savings = parseFloat($savings.text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"arteza": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload()\r\n  }\r\n};",
	"artisticlabels": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar savings = $('#orderSummary_discount', responseHTML);\r\n    \tsavings = parseFloat(savings.text().replace(\/[^0-9|\\.]\/g, ''));\r\n    \tif (savings) {\r\n    \t\treturn {\r\n    \t\t\tsuccess: true,\r\n    \t\t\tsavings: savings\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"artnaturals": "var ExternalProvider = {\r\n  checkoutType: '',\r\n  initializeProvider: function () {\r\n    this.setCheckoutType();\r\n    this.prepareUrl();\r\n  },\r\n  prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl;\r\n    var resultUrlInput = $('#___jpResultUrl');\r\n    var resultUrl = location.href;\r\n\r\n    if (this.checkoutType === 'CART') {\r\n      applyUrl = 'https:\/\/artnaturals.com\/topmenu\/ajax\/add_coupon';\r\n      resultUrl = 'https:\/\/artnaturals.com\/topmenu\/ajax\/minicart';\r\n    } else if (this.checkoutType === 'CHECKOUT') {\r\n      applyUrl = 'https:\/\/artnaturals.com\/onestepcheckout\/index\/add_coupon';\r\n    }\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n\r\n    if (!resultUrlInput.length) {\r\n      resultUrlInput = document.createElement('input');\r\n      resultUrlInput.id = '___jpResultUrl';\r\n      resultUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n      resultUrlInput = $('#___jpResultUrl');\r\n    }\r\n\r\n    resultUrlInput.attr('value', resultUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    data = {\r\n      remove: 0,\r\n      coupon_code: code\r\n    };\r\n\r\n    if (type === 'clearCouponUrl') {\r\n      data.remove = 1;\r\n    } else if (type === 'resultUrl') {\r\n      data = null;\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var oldSavings = Number.isNaN(parseFloat($('span:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, ''))) ? 0.00 : parseFloat($('span:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = parseFloat($('span:contains(\"-$\")', $.parseHTML(response)).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    if (this.checkoutType === \"CART\") {\r\n      var responseJSON = JSON.parse(response);\r\n      savings = parseFloat($('.cart_header_label:contains(\"Total Discount:\") > strong > span', $.parseHTML(responseJSON.content)).text().replace(\/[^0-9|.]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > oldSavings,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  setCheckoutType: function () {\r\n    this.checkoutType = location.href.contains('onestepcheckout') ? 'CHECKOUT' : 'CART';\r\n  }\r\n};\r\nExternalProvider.initializeProvider();",
	"asambeauty": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"asda": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"secretKey\", secretKey );';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n  },\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.subtotal-container').last().text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat(response.basketModel.totals.grandTotal.replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"asgoodasnew": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.couponData strong', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        $.ajax({\r\n            url: $('.removeFn', responseHTML).attr('href'),\r\n            type: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ashburyskies": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat($('span:contains(\"-$\")', response).text().replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ashford": "var ExternalProvider = {\r\n\r\n    origPrice: 0,\r\n\r\n    init: function () {\r\n        this.origPrice = parseFloat($('.checkout_total.checkout_text_color_red').text().replace(\/[^0-9.]\/g, ''));\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newPrice = parseFloat($('.checkout_total.checkout_text_color_red', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        var savings = this.origPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"ashleyfurniturehomestore": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.discount', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload(true)\r\n        }\r\n    }\r\n};",
	"ashleyfurniture": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.order-subtotal').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.order-subtotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#dwfrm_cart_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n    }\r\n  }\r\n};",
	"ashleystewart": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'clearCouponUrl') {\r\n      var form = $('#cart-items-form');\r\n      var data = form.serializeArray();\r\n      data.push({\r\n        name: 'dwfrm_cart_coupons_i0_deleteCoupon',\r\n        value: 'Remove'\r\n      });\r\n\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: form.attr('action'),\r\n        data: data,\r\n        async: false\r\n      });\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-proudct-table .discount .value:eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#dwfrm_cart_couponCode, #dwfrm_billing_couponCode').val(bestCode)\r\n      $('#add-coupon, #couponcode-apply').click();\r\n      window.setTimeout(function () { window.location.reload() }, 2000);\r\n    }\r\n  }\r\n};",
	"asics": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"Total Discounts\")', responseHTML).next().text().replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"askderm": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"asmc": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.text_right:contains(\"EUR\"):eq(3)').text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.discount_sum', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n    var savings = parseFloat(oldTotal - newTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"asos": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.GB;\r\n    var newCurrency = 'GBP';\r\n    var selector = location.href;\r\n\r\n    if (selector.match('us')) {\r\n      locale = localeMapping.US;\r\n      newCurrency = 'USD';\r\n    } else if (selector.match('de')) {\r\n      locale = localeMapping.DE;\r\n      newCurrency = 'EUR';\r\n    } else if (selector.match('fr')) {\r\n      locale = localeMapping.FR;\r\n      newCurrency = 'EUR';\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  __prepareUrl: function () {\r\n    var accessToken = $('script:contains(\"accessToken:\")').text().match(\/accessToken: '(.*)'\/)[1];\r\n    var regExp = '';\r\n\r\n    $.ajaxSettings.beforeSend = function (xhr) {\r\n      xhr.setRequestHeader('authorization', {\r\n        toString: function () {\r\n          return 'Bearer ' + accessToken;\r\n        }\r\n      });\r\n    };\r\n\r\n    if (location.href.match('us')) regExp = \/bid=([\\w|-]+)\/;\r\n    else if (location.href.match('fr')) regExp = \/bid=([\\w|-]+)\/;\r\n    else if (location.href.match('de')) regExp = \/bid=([\\w|-]+)\/;\r\n    else regExp = \/bid=([\\w|-]+)\/;\r\n\r\n    $('body').attr('token', document.cookie.match(regExp)[1]);\r\n  },\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('div[data-bind=\"currency: total\"]').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = response.bag.total.total.value;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"asquarednutrition": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"astutegraphicscom": "var ExternalProvider = {\r\n    retrieveWindowVariable: function (name, variable) {\r\n        var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + \"); }\\n\";\r\n        var script = document.createElement('script');\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $(\"body\").attr(\"tmp_\" + name);\r\n        $(\"body\").removeAttr(\"tmp_\" + name);\r\n\r\n        return value;\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type != 'applyCouponUrl' && type != 'clearCouponUrl') return null\r\n        var data = {};\r\n        if (type == 'applyCouponUrl') {\r\n            if (location.href.indexOf('basket') !== -1) {\r\n                data['security'] = this.retrieveWindowVariable('security', 'wc_cart_params.apply_coupon_nonce');\r\n            } else {\r\n                data['security'] = this.retrieveWindowVariable('security', 'wc_checkout_params.apply_coupon_nonce');\r\n            }\r\n        } else {\r\n            if (location.href.indexOf('basket') !== -1) {\r\n                data['security'] = this.retrieveWindowVariable('security', 'wc_cart_params.remove_coupon_nonce');\r\n            } else {\r\n                data['security'] = this.retrieveWindowVariable('security', 'wc_checkout_params.remove_coupon_nonce');\r\n            }\r\n        }\r\n        data['coupon_code'] = code;\r\n        return data;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-discount .woocommerce-Price-amount', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.href = 'https:\/\/astutegraphics.com' + location.pathname;\r\n        }\r\n    }\r\n}",
	"astutegraphicscom.mobile": "var ExternalProvider = {\r\n    retrieveWindowVariable: function (name, variable) {\r\n        var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + \"); }\\n\";\r\n        var script = document.createElement('script');\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $piggyJq(\"body\").attr(\"tmp_\" + name);\r\n        $piggyJq(\"body\").removeAttr(\"tmp_\" + name);\r\n\r\n        return value;\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type != 'applyCouponUrl' && type != 'clearCouponUrl') return null\r\n        var data = {};\r\n        if (type == 'applyCouponUrl') {\r\n            if (location.href.indexOf('basket') !== -1) {\r\n                data['security'] = this.retrieveWindowVariable('security', 'wc_cart_params.apply_coupon_nonce');\r\n            } else {\r\n                data['security'] = this.retrieveWindowVariable('security', 'wc_checkout_params.apply_coupon_nonce');\r\n            }\r\n        } else {\r\n            if (location.href.indexOf('basket') !== -1) {\r\n                data['security'] = this.retrieveWindowVariable('security', 'wc_cart_params.remove_coupon_nonce');\r\n            } else {\r\n                data['security'] = this.retrieveWindowVariable('security', 'wc_checkout_params.remove_coupon_nonce');\r\n            }\r\n        }\r\n        data['coupon_code'] = code;\r\n        return data;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n        var savings = parseFloat($piggyJq('.cart-discount .woocommerce-Price-amount', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.href = 'https:\/\/astutegraphics.com' + location.pathname;\r\n        }\r\n    }\r\n}",
	"ataglance": "var ExternalProvider = {\r\n\tparse: function(response, status, $xhr, code) {\r\n\t\tvar $response = $.parseHTML(response);\r\n\t\tvar $discountWrapper = $('.orderPromoDiscount', $response);\r\n\t\tvar savings = parseFloat($('dd', $discountWrapper).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n\t},\r\n\tcomplete: function(bestCode) {\r\n\t\tif(bestCode) location.reload();\r\n\t}\r\n};",
	"cross": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === \"applyCouponUrl\") {\r\n            return {\r\n                coupon_code_fake: code,\r\n                coupon_code: code,\r\n                last_code: code,\r\n                remove_coupon: ''\r\n            };\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match('base_discount_amount\":(.*),\"')[0].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function(bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"atgstores": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n\t    var params = this.serializeObject($('form#frmMain').serializeArray());\r\n\t    if(type == 'applyCouponUrl') {\r\n\t    \tparams['ctl00$ctl00$ctl00$Main$MainMasterContent$ContentPlaceholder1$tbPromoCode'] = code;\r\n\t    \tparams['ctl00$ctl00$ctl00$Main$MainMasterContent$ContentPlaceholder1$btnCouponValidate'] = 'Validate';\r\n    \t} else {\r\n    \t\tparams['ctl00$ctl00$ctl00$Main$MainMasterContent$ContentPlaceholder1$tbPromoCode'] = '';\r\n    \t}\r\n    \treturn params;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar $discount = $('#trDiscount', responseHTML);\r\n    \tif ($discount.length && $discount.text().toLowerCase().indexOf(code.toLowerCase()) > -1) {\r\n    \t\tvar savings = parseFloat($discount.find('#lblDiscount').text().replace(\/[^0-9|\\.]\/g, ''));\r\n    \t\treturn {\r\n    \t\t\tsuccess: true,\r\n        \t\tsavings: savings\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n    \t$('#tbPromoCode').val(bestCode);\r\n    \t$('#btnCouponValidate').click();\r\n    },\r\n    serializeObject: function(a) {\r\n\t    var o = {};\r\n\t    $.each(a, function() {\r\n\t        o[this.name] = this.value || '';\r\n\t    });\r\n\t    return o;\r\n\t}\r\n}",
	"atkins": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var applyUrlInput = $('#__applyUrl');\r\n    var applyUrl = this.isCartPage() ? 'https:\/\/shop.atkins.com\/Cart.aspx' : 'https:\/\/shop.worldpantry.com\/CheckOut\/SubmitOrder.aspx?' + $('#wpbillingaddress > a').attr('href').split('=&process')[0].replace('\/CheckOut\/BillingAddress.aspx?', '');\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__applyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__applyUrl');\r\n    }\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  isCartPage: function () {\r\n    return \/Cart.aspx\/.test(location.pathname);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.footer.subtotal_price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#offer_code').val(bestCode);\r\n      $('#promo_code_apply').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"atleticodemadrid": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('.summaryTotals > .summaryLineRight').eq(0).text().replace(\/[-.A-z.0-9.,]\/g, '').trim();\r\n        \r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (selector === \"\u20ac\") {\r\n            locale = localeMapping['FR'];\r\n            currency = \"EUR\";\r\n        }\r\n            \r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },    \r\n};",
	"atmcollection": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"atmosphere": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'applyCouponUrl') {\r\n            var data = {\r\n                vouchers: [code]\r\n            };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat((response.cartData.orderDiscounts.formattedValue).replace(\/[^0-9|.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"atmosrx": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-total .order-col p:eq(2)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#__coupon_code').val(bestCode);\r\n            $('#btn_apply_coupon').click();\r\n        }\r\n    }\r\n};",
	"att": "var ExternalProvider = {\r\n  $: window.$piggyJq || jQuery,\r\n  parse: function(response, status, $xhr, couponCode) {\r\n    var responseHTML = response.promise.responseText;\r\n    var oldTotal = parseFloat(this.$('strong[ng-bind = \"data.totalDueMonthly | currency\"]').text().replace(this.regularExpression, ''));\r\n    var newTotal = parseFloat(this.$('strong[ng-bind = \"data.totalDueMonthly | currency\"]', responseHTML).text().replace(this.regularExpression, ''));\r\n    this.savings = oldTotal - newTotal;\r\n\r\n    if (this.savings > 0) {\r\n      return {\r\n        success: true,\r\n        savings: this.savings\r\n      }\r\n    }\r\n\r\n    return {\r\n      success: false,\r\n      savings: this.savings\r\n    }\r\n  },\r\n  complete: function(bestCode, bestSavings) {\r\n    if(bestCode) {\r\n      location.reload(true);\r\n    }\r\n  },\r\n  savings: 0.00,\r\n  regularExpression: \/[^0-9|\\.]\/g\r\n};",
	"attenuatepro": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.field__input-btn').removeAttr(\"disabled\").click();\r\n        }\r\n    }\r\n};",
	"attitudeclothing": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.GBP:contains(\"-\"):first', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"attractionticketsdirect": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.line_items[0].amount * -1);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#edit-panes-uc-discounts-uc-discounts-codes').val(bestCode);\r\n      $('#edit-panes-uc-discounts-uc-discounts-button').click();\r\n    }\r\n  }\r\n};",
	"auchanfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.ui-tag--item~span', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"auratenewyork": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().split('$')[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"aureliaskincare": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.input-text.couponcode').val(bestCode);\r\n            $('.coupon-add.form-button-alt').click();\r\n        }\r\n    }\r\n};",
	"aurumbrothers": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var discount = parseFloat($('[data-checkout-discount-amount-target]', response.responseText).html()\r\n            .replace(\/[^0-9|\\.]\/g, '').trim()\r\n        );\r\n\r\n        if (discount > 0) {\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if(bestCode){\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"autoanything": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.d.Payload.TotalOrderPromotionsDiscountAmount.Amount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"autoanything.mobile": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var result;\r\n\r\n        var codeFound = true;\r\n\r\n        \/\/ If any coupon hasn't been applied, then the current coupon wasnt applied\r\n        if (response.promotionsNotApplied.length)codeFound = false;\r\n\r\n        if (codeFound) {\r\n            var savings = response.totalSavings.amount;\r\n\r\n            if (savings) {\r\n                result = {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n\r\n                return result;\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    }\r\n};",
	"autodocfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.cart.discount_sum_str.replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"autopartswarehouse": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = Number($('span[data-elemname=\"order_total_text\"]').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = Number($('span[data-elemname=\"order_total_text\"]', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"autoteilemeile": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.savings', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"autotrader": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('span.success-promo', responseHTML).text().toLowerCase().indexOf(\"Successful entry\".toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('.cart-total td.price').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('.cart-total td.price', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings){\r\n        $.post(\"https:\/\/sell.autotrader.com\/syc\/vip\/payment.jsf\", \r\n            {\r\n                \"AJAXREQUEST\": \"_viewRoot\",\r\n                \"promo-entries-form:j_id486\": bestCode,\r\n                \"promo-entries-form\": \"promo-entries-form\",\r\n                \"javax.faces.ViewState\": \"j_id5\",\r\n                \"promo-entries-form:promoApplyBtn\": \"promo-entries-form:promoApplyBtn\"\r\n            },\r\n            function(){\r\n                location.reload();\r\n            });\r\n    }\r\n}",
	"autozone": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"autozone.mobile": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var mainContent = null;\r\n        var savings = 0.00;\r\n\r\n        for (var i = 0; i < responseHTML.length; i++) {\r\n            if (responseHTML[i] && responseHTML[i].id === 'main-content') {\r\n                mainContent = responseHTML[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (mainContent) {\r\n            var savingsArray = $('span#savings', mainContent).html().split('-$');\r\n\r\n            if (savingsArray && savingsArray.length > 1) {\r\n                savings = parseFloat(savingsArray[1]);\r\n            }\r\n        }\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        location.reload(true);\r\n    }\r\n};",
	"avasflowers": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.cart.reviewItemsTotal td:eq(7) strong:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.order-summary-wrapper div:contains(\"Coupon\") .price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings;\r\n\r\n\r\n        if (oldPrice > 0 && isNaN(newPrice)) {\r\n            savings = oldPrice;\r\n        }\r\n        else if (isNaN(oldPrice) && newPrice > 0) {\r\n            savings = newPrice;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"aveda": "var ExternalProvider = {\r\n  idx: 0,\r\n  _prepareData: function () {\r\n    var applyCouponUrlParam = $('#__jpApplyParamUrl');\r\n\r\n    if (!applyCouponUrlParam.length) {\r\n      applyCouponUrlParam = document.createElement('input');\r\n      applyCouponUrlParam.id = '__jpApplyParamUrl';\r\n      applyCouponUrlParam.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyCouponUrlParam);\r\n      applyCouponUrlParam = $('#__jpApplyParamUrl');\r\n    }\r\n\r\n    applyCouponUrlParam.attr('value', this.getDbgMethod());\r\n  },\r\n  getDbgMethod: function () {\r\n    return \/checkout\\\/viewcart\/gim.test(location.href) ? 'logic.checkout--viewcart' : 'logic.checkout--index';\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = [{ method: this.getDbgMethod(), id: ++this.idx, params: [{ _SUBMIT: 'offer_code', OFFER_CODE: code }] }];\r\n\r\n    return {\r\n      JSONRPC: JSON.stringify(data)\r\n    };\r\n  },\r\n  parse: function (response) {\r\n    var savings = Math.abs(response[0].result.value.transaction.trans.TOTAL_ITEMS_DISCOUNT);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  }\r\n};\r\nExternalProvider._prepareData();",
	"avene": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code_fake').val(bestCode);\r\n      $('#coupon_code_fake').get(0).dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\r\n      $('button[value=\"Apply Coupon\"]').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  }\r\n};",
	"avenue": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-totals-value:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"avery": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    $('#coupon_code').val(bestCode);\r\n\r\n    var clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    $('a:contains(\"Apply\")').get(0).dispatchEvent(clickEvent);\r\n  }\r\n};",
	"avon": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.SessionModel.Cart.OrderDetails.Discount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"awdirect": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                prioritycode_vis: code,\r\n                prioritycode: code\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings;\r\n\r\n        var success = $('input#prioritycode_invis', responseHTML).val() === code;\r\n\r\n        if (success) {\r\n            savings = $('#cartSummary .your-savings', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        }\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input#prioritycode').val(bestCode);\r\n\r\n            $('.promo-code-input img[alt=\"Update\"]').click();\r\n        }\r\n    }\r\n};",
	"babybjorn": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var s = document.createElement('script');\r\n        var code;\r\n        var page = location.href.match('panier') ? 'cart' : 'checkout';\r\n\r\n        code = \"jQuery('body').attr('cartParams', JSON.stringify(wc_\" + page + '_params));';\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n        $('#temp').remove();\r\n\r\n        this.cartParams = JSON.parse($('body').attr('cartParams'));\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            return {\r\n                security: this.cartParams.apply_coupon_nonce,\r\n                coupon_code: code\r\n            };\r\n        } else if (type === 'clearCouponUrl') {\r\n            return {\r\n                security: this.cartParams.remove_coupon_nonce,\r\n                coupon: code\r\n            };\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-discount .amount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"babyleggings": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#cas_total td:contains(\"Discount\")', responseHTML).next().text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($('#code').length !== 0) {\r\n                $('#code').val(bestCode);\r\n                $('#apply_code').click();\r\n            } else {\r\n                location.reload();\r\n            }\r\n        }\r\n    }\r\n};",
	"babysecurity": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savingsString = response.substring(response.indexOf('-\\\\u00a3'));\r\n        savingsString = savingsString.substring(7, savingsString.indexOf('<\\\\'));\r\n\r\n        var savings = parseFloat(savingsString);\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"babywalz": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.bw-checkout-2__summary-coupon span:contains(\"-\")', responseHTML).text().replace(\/,\/g, '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"backcountry": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#saved-total', responseHTML).text().replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"backjoy": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"badspiegelde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.data.Totals.TotalsCouponDiscount.replace(',','.').replace(\/[^.0-9]\/g,''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"baggallini": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $(\".discount:contains('-')\", responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#dwfrm_billing_couponCode').val(bestCode);\r\n            $('#coupon-save').click();\r\n        }\r\n    }\r\n};",
	"bagsandbows": "var ExternalProvider = {\r\n    init: function () {\r\n        this.oldTotal = parseFloat($('.cartSummaryLineRight:eq(0)').text().replace(\/[^0-9|.]\/g, ''))\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = parseFloat($('.cartTotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bailey44": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"Checkout\", Shopify.Checkout.token);';\r\n    scriptContent += 'body.setAttribute(\"shopId\", __st.a);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var checkout = $('body').attr('Checkout');\r\n    var shopId = $('body').attr('shopId');\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/www.bailey44.com\/' + shopId + '\/checkouts\/' + checkout + '';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total-line__price:eq(1) ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.field__input-btn.btn').removeAttr('disabled');\r\n      $('.field__input-btn.btn').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"bajabikes": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = 'USD';\r\n        var url = window.location.pathname;\r\n\r\n        if (url.match(\/de\/g)) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.DE;\r\n        } else if (url.match(\/en\/g)) {\r\n            newCurrency = 'GBP';\r\n            locale = localeMapping.GB;\r\n    }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"bakemeawish": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldDiscount = parseFloat($('.accent:contains(-$)').text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        oldDiscount = isNaN(oldDiscount) ? 0.00 : oldDiscount;\r\n\r\n        var newDiscount = parseFloat($('.accent:contains(-$)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = 0.00;\r\n\r\n        if (oldDiscount < newDiscount) {\r\n            savings = newDiscount;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bakerross": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match(\/base_discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"baldurgartende": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = $('#qs_cart_discount', $.parseHTML(response)).text().replace(',', '.').replace(\/[^.0-9]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"balfour": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bambonatureusa": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bananarepublic": "var ExternalProvider = {\r\n    $: window.$piggyJq || jQuery,\r\n    _prepareSession: function () {\r\n        var sessionObject = this.getCookie('unknownShopperId');\r\n\r\n        sessionObject = sessionObject.replace(\/[^a-zA-Z0-9]+\/gim, '');\r\n\r\n        if (sessionObject) {\r\n            var applyUrlInput = this.$('#__jpDynSessConf');\r\n\r\n            if (!applyUrlInput.length) {\r\n                applyUrlInput = document.createElement('input');\r\n                applyUrlInput.id = '__jpDynSessConf';\r\n                applyUrlInput.style.display = 'none';\r\n                (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n                applyUrlInput = this.$('#__jpDynSessConf');\r\n            }\r\n\r\n            applyUrlInput.attr('value', sessionObject);\r\n        }\r\n    },\r\n\r\n    prepare: function (actionType, couponCode) {\r\n        var formData = {};\r\n\r\n        if (actionType === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                op: 'apply',\r\n                path: '\/shoppingBag\/applyPromo',\r\n                value: couponCode\r\n            });\r\n        }\r\n\r\n        if (actionType === 'clearCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                op: 'remove',\r\n                path: '\/shoppingBag\/removePromo\/' + couponCode\r\n            });\r\n        }\r\n\r\n        return JSON.stringify(formData);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, couponCode) {\r\n        var appliedPromotion = response.shoppingBag.appliedPromotions;\r\n        var codeFound = false;\r\n        var savings = 0.00;\r\n\r\n        if (Array.isArray(appliedPromotion)) {\r\n            appliedPromotion.forEach(function (code) {\r\n                if (code.code.toLowerCase() === couponCode.toLowerCase()) {\r\n                    codeFound = true;\r\n                    savings = ExternalProvider.parseAmount(code.promoDiscountTotal);\r\n                }\r\n            });\r\n        } else if (appliedPromotion && appliedPromotion.code.toLowerCase() === couponCode.toLowerCase()) {\r\n            codeFound = true;\r\n            savings = this.parseAmount(appliedPromotion.promoDiscountTotal);\r\n        }\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    parseAmount: function (string) {\r\n        return string ? parseFloat(string.replace(\/[^0-9|.]\/g, '')) : 0.00;\r\n    },\r\n\r\n    getCookie: function (cookieName) {\r\n        var name = cookieName + '=';\r\n        var ca = document.cookie.split(';');\r\n\r\n        for (var i = 0; i < ca.length; i++) {\r\n            var c = ca[i];\r\n\r\n            while (c.charAt(0) === ' ') {\r\n                c = c.substring(1);\r\n            }\r\n\r\n            if (c.indexOf(name) === 0) {\r\n                return decodeURIComponent(c.substring(name.length, c.length));\r\n            }\r\n        }\r\n\r\n        return '';\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareSession();",
	"bandagenspezialist": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            var $form = $('#coupon_wrap form');\r\n\r\n            $form.find('#coupon_field').val(code);\r\n\r\n            return $form.serialize();\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.carttable tr:eq(5)', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"diy": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    if (action === 'injectCoupon') {\r\n      $('input[name=\"voucherCode\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[name=\"voucherCode\"]').trigger('input').trigger('change');\r\n      $('span:contains(\"Apply\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if (step === 'injectCoupon') {\r\n      setTimeout(function () {\r\n        var maxWait = 500;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('p:contains(\"-\u00a3\")').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1000);\r\n          }\r\n\r\n          waited++;\r\n        }, 100);\r\n      }, 1000);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = $('p:contains(\"-\u00a3\")').first().text().replace(\/[^0-9.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"banggood": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.changecouponcode', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"changecouponcode\"]').val(bestCode);\r\n      $('.apply.useCoupon').click();\r\n    }\r\n  }\r\n};",
	"bangjuice": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"- \u20ac\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"baracuta": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('span[data-model-basket=\"totalDiscount.formatted\"]', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"barbellapparel": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"bareminerals": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'injectCoupon') {\r\n            $('#dwfrm_cart_couponCode').val(code);\r\n            $('#add-coupon').click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 100);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount.discount td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"barenecessities": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        if (response.status.StatusMessage !== 'Invalid'){\r\n            if (response.bagModel && response.bagModel.Summary \r\n                && response.bagModel.Summary.subTotalSavings \r\n                && response.bagModel.Summary.hasSubTotalSavings\r\n                && response.bagModel.Summary.PromoCodeMessages.length === 0) {\r\n                var savings_string = response.bagModel.Summary.subTotalSavings,\r\n                    savings_amount = parseFloat(savings_string.replace('$', ''));\r\n                return {\r\n                    success: true,\r\n                    savings: savings_amount\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings)\r\n    {\r\n        location.reload(true);\r\n    }\r\n\r\n};",
	"bargaincrazy": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('strong:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bargainmax": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    let savings = Math.abs(response.discount_amount);\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"barnesandnoble": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        if (response && response.success && response.data) {\r\n            if (response.data.voucherDiscount) {\r\n                var savings = parseFloat(response.data.voucherDiscount);\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings)\r\n    {\r\n        location.reload(true);\r\n    }\r\n\r\n};",
	"barneys": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldPrice = parseFloat($('del', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.promo-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"baseballmonkey": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.summary);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"baseballsavings": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total.discount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"basicoutfitters": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^.0-9]\/g, ''));\r\n        var savings = parseFloat(oldTotal - newTotal);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"basspro": "var ExternalProvider = {\r\n\tprepare: function (action) {\r\n\t\tif (action !== 'resultUrl') return null;\r\n\r\n\t\tvar orderId = $('form[name=\"storepickUp\"] input[name=\"orderId\"]').val();\r\n\r\n\t\treturn {\r\n\t\t\tcalculationUsageId: -2,\r\n\t\t\tURL: 'AjaxOnePageCheckOutCartView?orderId=' + orderId\r\n\t\t};\r\n\t},\r\n\tparseAmount: function (string) {\r\n\t\treturn parseFloat(string.replace(\/[^0-9.]\/g, ''));\r\n\t},\r\n\tparse: function (response) {\r\n\t\tvar $response = $.parseHTML(response),\r\n\t\t\tcartAmount = 0.00;\r\n\t\t$response.forEach(function (v) {\r\n\t\t\tif ($(v).attr('id') === 'ordertotals') {\r\n\t\t\t\tcartAmount = $(v).val();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: true,\r\n\t\t\tsavings: this.parseAmount($('.mw-total .charge.amount').text()) - parseFloat(cartAmount)\r\n\t\t}\r\n\t},\r\n\tcomplete: function (bestCode) {\r\n\t\tif (bestCode) location.reload();\r\n\t}\r\n};",
	"basspro.tablet": "var ExternalProvider = {\r\n\r\n\tprepare: function(action, code) {\r\n\t\tif(action !== 'resultUrl') return null;\r\n\r\n\t\tvar orderId = $piggyJq('form[name=\"storepickUp\"] input[name=\"orderId\"]').val();\r\n\r\n\t\treturn {\r\n\t\t\tcalculationUsageId: -2,\r\n\t\t\tURL: 'AjaxOnePageCheckOutCartView?orderId=' + orderId\r\n\t\t};\r\n\t},\r\n\r\n\tparseAmount: function(string) {\r\n\t\treturn parseFloat(string.replace(\/[^0-9.]\/g, ''));\r\n\t},\r\n\r\n\tparse: function(response, status, $xhr, code) {\r\n\r\n\t\tvar $response = $piggyJq.parseHTML(response),\r\n\t\t\tcartAmount = 0.00;\r\n\t\t$response.forEach(function(v) {\r\n\t\t\tif($piggyJq(v).attr('id') === 'ordertotals') {\r\n\t\t\t\tcartAmount = $(v).val();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: true,\r\n\t\t\tsavings: this.parseAmount($piggyJq('.mw-total .charge.amount').text()) - parseFloat(cartAmount)\r\n\t\t}\r\n\t},\r\n\r\n\tcomplete: function(bestCode) {\r\n\t\tif(bestCode) location.reload();\r\n\t}\r\n};",
	"basspro.mobile": "var ExternalProvider = {\r\n\r\n\tprepare: function(action, code) {\r\n\t\tif(action !== 'resultUrl') return null;\r\n\r\n\t\tvar orderId = $piggyJq('form[name=\"storepickUp\"] input[name=\"orderId\"]').val();\r\n\r\n\t\treturn {\r\n\t\t\tcalculationUsageId: -2,\r\n\t\t\tURL: 'AjaxOnePageCheckOutCartView?orderId=' + orderId\r\n\t\t};\r\n\t},\r\n\r\n\tparseAmount: function(string) {\r\n\t\treturn parseFloat(string.replace(\/[^0-9.]\/g, ''));\r\n\t},\r\n\r\n\tparse: function(response, status, $xhr, code) {\r\n\r\n\t\tvar $response = $piggyJq.parseHTML(response),\r\n\t\t\tcartAmount = 0.00;\r\n\t\t$response.forEach(function(v) {\r\n\t\t\tif($piggyJq(v).attr('id') === 'ordertotals') {\r\n\t\t\t\tcartAmount = $(v).val();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: true,\r\n\t\t\tsavings: this.parseAmount($piggyJq('.mw-total .charge.amount').text()) - parseFloat(cartAmount)\r\n\t\t}\r\n\t},\r\n\r\n\tcomplete: function(bestCode) {\r\n\t\tif(bestCode) location.reload();\r\n\t}\r\n};",
	"bathandbodyworks": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var applyUrl = this.isCartPage() ?\r\n            'https:\/\/www.bathandbodyworks.com\/on\/demandware.store\/Sites-BathAndBodyWorks-Site\/en_US\/Cart-AddCouponJson'\r\n            : $('#cart-items-form').attr('action');\r\n        var resultUrl = this.isCartPage() ? 'https:\/\/www.bathandbodyworks.com\/on\/demandware.store\/Sites-BathAndBodyWorks-Site\/en_US\/COBilling-UpdateSummary'\r\n            : $('#cart-items-form').attr('action');\r\n\r\n        \/\/ Append apply url input\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        \/\/ Append result url input\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        resultUrlInput.attr('value', resultUrl);\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            if (this.isCartPage()) {\r\n                data.couponCode = code;\r\n                data.format = 'ajax';\r\n            } else {\r\n                data.dwfrm_cart_shipments_i0_items_i0_quantity = $(\"input[name='dwfrm_cart_shipments_i0_items_i0_quantity']\").val();\r\n                data.dwfrm_cart_shipments_i0_items_i0_freeQty = $(\"input[name='dwfrm_cart_shipments_i0_items_i0_freeQty']\").val();\r\n                data.visibleQty = $(\"input[name='visibleQty']\").val();\r\n                data['maxQty-dwfrm_cart_shipments_i0_items_i0_quantity'] = $('input[name=\"maxQty-dwfrm_cart_shipments_i0_items_i0_quantity\"]').val();\r\n                data.dwfrm_cart_updateCart = 'dwfrm_cart_updateCart';\r\n                data.dwfrm_cart_couponCode = code;\r\n                data.dwfrm_cart_addCoupon = 'dwfrm_cart_addCoupon';\r\n            }\r\n        }\r\n\r\n        if (type === 'resultUrl') {\r\n            if (!this.isCartPage()) {\r\n                data.dwfrm_cart_shipments_i0_items_i0_quantity = $(\"input[name='dwfrm_cart_shipments_i0_items_i0_quantity']\").val();\r\n                data.dwfrm_cart_shipments_i0_items_i0_freeQty = $(\"input[name='dwfrm_cart_shipments_i0_items_i0_freeQty']\").val();\r\n                data.visibleQty = $(\"input[name='visibleQty']\").val();\r\n                data['maxQty-dwfrm_cart_shipments_i0_items_i0_quantity'] = $('input[name=\"maxQty-dwfrm_cart_shipments_i0_items_i0_quantity\"]').val();\r\n                data.dwfrm_cart_updateCart = 'dwfrm_cart_updateCart';\r\n                data.dwfrm_cart_couponCode = code;\r\n                data.dwfrm_cart_addCoupon = 'dwfrm_cart_addCoupon';\r\n            }\r\n        }\r\n\r\n        return data;\r\n    },\r\n\r\n    isCartPage: function () {\r\n        if (document.getElementById('dwfrm_billing_paymentMethods_creditCard_owner') === null) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount.discount td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var couponField = $('#dwfrm_cart_couponCode').length !== 0 ? '#dwfrm_cart_couponCode' : '#dwfrm_billing_couponCode';\r\n\r\n            $(couponField).val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"baublebar": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('._JS_CartTotalPrice').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('._JS_CartTotalPrice', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"baur": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.productLineItems[0].discount.value;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"baxterboo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"-\")', responseHTML).eq(1).text().replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promo').length;\r\n            $('#promo, .promoCodeForm').val(bestCode);\r\n            $('#apply_promo, #promo_submit').click();\r\n        }\r\n    }\r\n};",
	"bbclothing": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(-)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bbdakota": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"bcbg": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.order-discount td:eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"beachbunnyswimwear": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.reduction-code__text:contains(\"-\")', responseHTML).text().match(\/\\((.*)\\)\/)[1].replace(\/[^0-9|.]\/g, ''));\r\n       \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"beadaholique": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};",
	"beallsdepartmentstore": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = Math.trunc((parseFloat($('.totals-total .amount').text().replace(\/[^0-9|.]\/g, '')) * 100)) \/ 100;\r\n        var newTotal = parseFloat(response.pagorder.grandTotal);\r\n        var savings = oldTotal - newTotal;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promocode').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#promocode').trigger('input').trigger('change');\r\n            $('.btn-secondary.expand').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        }\r\n    }\r\n};",
	"beauties": "var ExternalProvider = {\r\n    parse: function (response, a, $b, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var validCode = $('.promo_applied', responseHTML).eq(0).text().includes(code);\r\n        var oldTotal = parseFloat($('.update-total .total').text().split('$')[$('.update-total .total').text().split('$').length - 1]);\r\n        var newTotal = parseFloat($('.update-total .total', responseHTML).text().split('$')[$('.update-total .total', responseHTML).text().split('$').length - 1]);\r\n        var savings = validCode ? oldTotal - newTotal : 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"beautifiedyou": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response['components\/cart\/totals']);\r\n        var savings = parseFloat($('.cart-total-value span:contains(\"-\")', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"beautybrands": "var ExternalProvider = {\r\n    init: function () {\r\n        if (this.isCheckoutPage()) {\r\n            this.oldTotal = $('#mlAccordionCheckoutApp > div > div > div.ml-accordion-annotations > div > div.ml-accordion-summary > div:nth-child(3) > div.ml-accordion-summary-item.ng-scope.ml-summary-message > div.ml-accordion-summary-item-value.ng-binding').text().replace(\/[^0-9.]\/g, '');\r\n        } else {\r\n            this.oldTotal = $('div.ml-basket-row.ml-basket-you-saved > div.ml-basket-column.ml-basket-total-value.ml-basket-you-saved-value').text().replace(\/[^0-9.]\/g, '');\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        if (this.isCheckoutPage()) {\r\n            var newTotal = $('div.ml-basket-row.ml-basket-you-saved > div.ml-basket-column.ml-basket-total-value.ml-basket-you-saved-value', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        } else {\r\n            var newTotal = $('div.ml-basket-row.ml-basket-you-saved > div.ml-basket-column.ml-basket-total-value.ml-basket-you-saved-value', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        }\r\n\r\n        var savings = newTotal - this.oldTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCheckoutPage: function () {\r\n        return location.pathname === '\/checkout\/accordioncheckout.do';\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"beautybridge": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var coupon = $('.cart-totals .cart-total .cart-total-value', responseHTML)[2];\r\n        var savings = parseFloat($('span', coupon).text().replace(\/[$-]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        $('#couponcode').val(bestCode);\r\n        if (bestCode) {\r\n            if ($('input[name=\"apply_code\"]').length) {\r\n                $('input[name=\"apply_code\"]').click();\r\n            } else {\r\n                $('.coupon-form').submit();\r\n            }\r\n        }\r\n    }\r\n};",
	"beautycoiffure": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#total_discount', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n        var clearUrl = $('.delete_voucher', responseHTML).attr(\"href\");\r\n\r\n        $.ajax({\r\n            url: clearUrl,\r\n            type: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    },\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var selector = $(\"#total_price\").text().replace(\/[0-9.,]\/g, '').trim();\r\n        var locale = '';\r\n\r\n        switch (selector) {\r\n            case '\u20ac':\r\n                locale = localeMapping['FR'];\r\n                currency = \"EUR\";\r\n                break;\r\n            case '\u00a3':\r\n                locale = localeMapping['GB'];\r\n                currency = \"GBP\";\r\n                break;\r\n            default:\r\n                locale = localeMapping['US'];\r\n                currency = \"USD\";\r\n                break;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"beautyplussalon": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"entityId\", window.checkoutConfig.quoteData.entity_id);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var entityId = $('body').attr('entityId');\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/www.beautyplussalon.com\/rest\/default\/V1\/guest-carts\/' + entityId + '\/coupons\/CLAIMCODE';\r\n    var resultUrl = 'https:\/\/www.beautyplussalon.com\/rest\/default\/V1\/guest-carts\/' + entityId + '\/payment-information';\r\n    var clearUrl = 'https:\/\/www.beautyplussalon.com\/rest\/default\/V1\/guest-carts\/' + entityId + '\/coupons';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    applyUrlInput.attr('data-value', resultUrl);\r\n    applyUrlInput.attr('data-clear', clearUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = response.totals.base_discount_amount;\r\n    var savings = Math.abs(parseFloat(responseHTML));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && location.pathname === '\/checkout\/cart\/') {\r\n      $('#block-discount-heading').click();\r\n      $('#coupon_code').val(bestCode);\r\n      $('.action.apply.primary').click();\r\n    } else if (bestCode && !(location.pathname === '\/checkout\/cart\/')) {\r\n      location.reload();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"beautyworksonline": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('button[value=\"Apply Coupon\"]').click();\r\n    }\r\n  }\r\n};",
	"beaverbrooks": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.cartDetailsData.discountData.voucherDiscounts.value;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bebe": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#GRAND_ORDERS_DISCOUNT_TOTAL-value', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promoCode').val(bestCode);\r\n            var s = document.createElement('script');\r\n            s.type = 'text\/javascript';\r\n            var code = `jQuery('#promoCode').trigger('change');jQuery('#applyButton').trigger('click');`;\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n};",
	"beckett": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response[0].price);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#coupon_code_button').click();\r\n        }\r\n    }\r\n};",
	"beddinginn": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var savings = parseFloat(response.match(\/\\|(\\.|[0-9])*\\|\/)[0].replace('|', ''));\r\n        if(savings){\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n};",
	"beddingstyle": "var ExternalProvider = {\r\n    _prepareData: function() {\r\n\r\n        var couponUrl = ExternalProvider.retrieveWindowVariable('location.href');\r\n        var pigInput = jQuery('<input id=\"piggy-usx-id\" value=\"' + couponUrl + '\">');\r\n        jQuery('body').append(pigInput);\r\n    },\r\n    retrieveWindowVariable: function(variable) {\r\n\r\n        var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + \")); }\\n\";\r\n        var script = document.createElement('script');\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n        var value = jQuery(\"body\").attr(\"tmp_\" + variable);\r\n        jQuery(\"body\").removeAttr(\"tmp_\" + variable);\r\n\r\n        return JSON.parse(value);\r\n\r\n    },\r\n    prepare: function(type, code){\r\n        function serializeObject(a) {\r\n            var o = {};\r\n            $.each(a, function() {\r\n                o[this.name] = this.value || '';\r\n            });\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = jQuery('#paymentsubmit').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data['couponcode'] = code;\r\n        } else {\r\n            data['couponcode'] = 'X___X';\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = jQuery('#coup_amount', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = parseFloat($savings.val().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            if(savings > 0.00){\r\n                return {\r\n                    success: true,\r\n                    savings: parseFloat(savings)\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            $('#couponcode').val(bestCode);\r\n            $('#couponcode').next('.formBtn')[0].click();\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareData();",
	"beddingstyle.mobile": "var ExternalProvider = {\r\n    _prepareData: function() {\r\n\r\n        var couponUrl = ExternalProvider.retrieveWindowVariable('location.href');\r\n        var pigInput = jQuery('<input id=\"piggy-usx-id\" value=\"' + couponUrl + '\">');\r\n        jQuery('body').append(pigInput);\r\n    },\r\n    retrieveWindowVariable: function(variable) {\r\n\r\n        var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + \")); }\\n\";\r\n        var script = document.createElement('script');\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n        var value = jQuery(\"body\").attr(\"tmp_\" + variable);\r\n        jQuery(\"body\").removeAttr(\"tmp_\" + variable);\r\n\r\n        return JSON.parse(value);\r\n\r\n    },\r\n    prepare: function(type, code){\r\n        function serializeObject(a) {\r\n            var o = {};\r\n            $.each(a, function() {\r\n                o[this.name] = this.value || '';\r\n            });\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = jQuery('#paymentsubmit').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data['couponcode'] = code;\r\n        } else {\r\n            data['couponcode'] = 'X___X';\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = jQuery('#coup_amount', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = parseFloat($savings.val().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            if(savings > 0.00){\r\n                return {\r\n                    success: true,\r\n                    savings: parseFloat(savings)\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            $('#couponcode').val(bestCode);\r\n            $('#couponcode').next('.formBtn')[0].click();\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareData();",
	"bedeckhome": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match(\/base_discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    },\r\n};",
	"bedstar": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-value.disColr', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bejealous": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"belk": "var ExternalProvider = {\r\n  serializeObjectPolyfill: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n      for (var i = 0; i < data.length; i++) {\r\n        object[data[i]['name']] = data[i]['value'];\r\n      }\r\n\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (type, code) {\r\n    var formData = $('#cart-items-form').serializeObject();\r\n    formData.dwfrm_cart_couponCode = code;\r\n    if (type === 'applyCouponUrl') {\r\n      formData.dwfrm_cart_addCoupon = 'dwfrm_cart_addCoupon';\r\n    } else if (type === 'clearCouponUrl') {\r\n      formData.dwfrm_cart_coupons_i0_deleteCoupon = 'Remove';\r\n    } else if (type === 'resultUrl') {\r\n      formData = null;\r\n    }\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat($('.order-coupon:eq(1)', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#dwfrm_cart_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider.serializeObjectPolyfill();",
	"belkin": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('div.col-xs-4.col-sm-2.cart-totals-right.text-right.discount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bellacor": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.red:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"belleandjune": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n      $.each(data, function () {\r\n        if (object[this.name] !== undefined) {\r\n          if (!object[this.name].push) {\r\n            object[this.name] = [object[this.name]];\r\n          }\r\n          object[this.name].push(this.value || '');\r\n        } else {\r\n          object[this.name] = this.value || '';\r\n        }\r\n      });\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action === 'resultUrl') {\r\n      var formData = $(\"#one-step-checkout-form\").serializeObject();\r\n      formData.appliedPromoCode = code;\r\n\r\n      return formData;\r\n    }\r\n    \r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = response.review;\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      jQuery('#coupon_code_onestepcheckout').val(bestCode);\r\n      jQuery('#add_coupon_code_button').click();\r\n    }\r\n  }\r\n};",
	"bellechloe": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.reduction-code', responseHTML).text().trim().split(' ')[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"bellelily": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.total.bonus);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#bonus_sn').val(bestCode);\r\n      $('#use_bouns').click();\r\n    }\r\n  }\r\n};",
	"bellfieldclothing": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code__text:contains(\"-\u00a3\")', responseHTML).text().split('(').pop().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"beltoutlet": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.total-line__price .order-summary__emphasis').text().replace(\/[^0-9.]\/g, ''));\r\n        var newTotal = parseFloat($('.total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"benhogangolf": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"benmeadows": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = !this.isCartPage() ? 'https:\/\/www.benmeadows.com\/cart\/' : 'https:\/\/www.benmeadows.com\/cart\/order-review.aspx';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            if (!this.isCartPage()) {\r\n                data = {\r\n                    __EVENTTARGET: 'ctl00$ctl00$content$content$CheckoutSummary$ApplyKeycode$btnApplyKeycode',\r\n                    __EVENTARGUMENT: '',\r\n                    ctl00$ctl00$txtEmailAddress: '',\r\n                    ctl00$ctl00$txtHeaderSearch: '',\r\n                    ctl00$ctl00$content$content$CartDisplay$rpt$ctl00$txtQty: $('#ctl00_ctl00_content_content_CartDisplay_rpt_ctl00_txtQty').val(),\r\n                    ctl00$ctl00$content$content$CartDisplay$rpt$ctl00$hdnItemCatPrefix: $('#ctl00_ctl00_content_content_CartDisplay_rpt_ctl00_hdnItemCatPrefix').val(),\r\n                    ctl00$ctl00$content$content$CartDisplay$rpt$ctl00$hdnItemSKu: $('#ctl00_ctl00_content_content_CartDisplay_rpt_ctl00_hdnItemSKu').val(),\r\n                    ctl00$ctl00$content$content$CartDisplay$rpt$ctl00$hdnItemName: 'N\/A Discontinued',\r\n                    ctl00$ctl00$content$content$CheckoutSummary$hdnFreight: '',\r\n                    ctl00$ctl00$content$content$CheckoutSummary$hdnTax: '',\r\n                    ctl00$ctl00$content$content$CheckoutSummary$txtShipToZip: '',\r\n                    ctl00$ctl00$content$content$CheckoutSummary$ApplyKeycode$txtKeycode: code,\r\n                    ctl00$ctl00$txtEmailFooter: 'email address',\r\n                    __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n                    __EVENTVALIDATION: $('#__EVENTVALIDATION').val(),\r\n                    __VIEWSTATE: $('#__VIEWSTATE').val()\r\n                };\r\n\r\n                return data;\r\n            }\r\n\r\n            data = {\r\n                __EVENTTARGET: 'ctl00$ctl00$content$content$CheckoutSummary$ApplyKeycode$btnApplyKeycode',\r\n                __EVENTARGUMENT: '',\r\n                ctl00$ctl00$txtEmailAddress: '',\r\n                ctl00$ctl00$content$content$shippingOptions$ddMethods: 'GROUND',\r\n                ctl00$ctl00$content$content$shippingOptions$txtOther: '',\r\n                ctl00$ctl00$content$content$shippingOptions$txtShippingCollectAccount: '',\r\n                ctl00$ctl00$content$content$QuestionsComments$txtComments: '',\r\n                ctl00$ctl00$content$content$PaymentOptions$paymentMethod: 'rbCC',\r\n                ctl00$ctl00$content$content$PaymentOptions$editSavedCC: '',\r\n                ctl00$ctl00$content$content$PaymentOptions$CreditCard$ddCCType: '',\r\n                ctl00$ctl00$content$content$PaymentOptions$CreditCard$txtName: '',\r\n                ctl00$ctl00$content$content$PaymentOptions$CreditCard$txtCCNumber: '',\r\n                ctl00$ctl00$content$content$PaymentOptions$CreditCard$txtCCNumberSave: '',\r\n                ctl00$ctl00$content$content$PaymentOptions$CreditCard$txtCCMasked: '',\r\n                ctl00$ctl00$content$content$PaymentOptions$CreditCard$txtCVV: '',\r\n                ctl00$ctl00$content$content$PaymentOptions$CreditCard$ddCCMonth: $('#ctl00_ctl00_content_content_PaymentOptions_CreditCard_ddCCMonth').find(':selected').val(),\r\n                ctl00$ctl00$content$content$PaymentOptions$CreditCard$ddCCYear: $('#ctl00_ctl00_content_content_PaymentOptions_CreditCard_ddCCYear').find(':selected').val(),\r\n                ctl00$ctl00$content$content$PaymentOptions$CreditCard$hldNum: '',\r\n                ctl00$ctl00$content$content$PaymentOptions$CreditCard$saveAttempt: 'N',\r\n                ctl00$ctl00$content$content$PaymentOptions$txtPoRefNewCC: '',\r\n                ctl00$ctl00$content$content$PaymentOptions$txtPONumberOnly: '',\r\n                ctl00$ctl00$content$content$ItemDisplay$rpt$ctl00$txtQty: $('#ctl00_ctl00_content_content_ItemDisplay_rpt_ctl00_txtQty').val(),\r\n                ctl00$ctl00$content$content$ItemDisplay$rpt$ctl00$hdnItemCatPrefix: $('#ctl00_ctl00_content_content_ItemDisplay_rpt_ctl00_hdnItemCatPrefix').val(),\r\n                ctl00$ctl00$content$content$ItemDisplay$rpt$ctl00$hdnItemSKu: $('#ctl00_ctl00_content_content_ItemDisplay_rpt_ctl00_hdnItemSKu').val(),\r\n                ctl00$ctl00$content$content$ItemDisplay$rpt$ctl00$hdnItemName: $('#ctl00_ctl00_content_content_ItemDisplay_rpt_ctl00_hdnItemName').val(),\r\n                ctl00$ctl00$content$content$ListTotals$hdnSubTotalVal: $('#ctl00_ctl00_content_content_ListTotals_hdnSubTotalVal').val(),\r\n                ctl00$ctl00$content$content$ListTotals$hdnFreightVal: $('#ctl00_ctl00_content_content_ListTotals_hdnFreightVal').val(),\r\n                ctl00$ctl00$content$content$ListTotals$hdnTaxVal: '',\r\n                ctl00$ctl00$content$content$ListTotals$hdnTotalVal: $('#ctl00_ctl00_content_content_ListTotals_hdnTotalVal').val(),\r\n                ctl00$ctl00$content$content$ListTotals$hdnDiscountVal: '',\r\n                ctl00$ctl00$content$content$CheckoutSummary$hdnFreight: $('#ctl00_ctl00_content_content_CheckoutSummary_hdnFreight').val(),\r\n                ctl00$ctl00$content$content$CheckoutSummary$hdnTax: '0',\r\n                ctl00$ctl00$content$content$CheckoutSummary$ApplyKeycode$txtKeycode: code,\r\n                ctl00$ctl00$content$content$ShipToSelect$ddAddresses: '0',\r\n                ctl00$ctl00$content$content$BillToSelect$ddAddresses: '0',\r\n                ctl00$ctl00$content$content$AddressDialog$txtFirst: '',\r\n                ctl00$ctl00$content$content$AddressDialog$txtLast: '',\r\n                ctl00$ctl00$content$content$AddressDialog$txtCompany: '',\r\n                ctl00$ctl00$content$content$AddressDialog$txtAttn: '',\r\n                ctl00$ctl00$content$content$AddressDialog$txtAddress1: '',\r\n                ctl00$ctl00$content$content$AddressDialog$ddCountry: $('#ctl00_ctl00_content_content_AddressDialog_ddCountry').find(':selected').val(),\r\n                ctl00$ctl00$content$content$AddressDialog$txtZip: '',\r\n                ctl00$ctl00$content$content$AddressDialog$txtCity: '',\r\n                ctl00$ctl00$content$content$AddressDialog$ddState: '',\r\n                ctl00$ctl00$content$content$AddressDialog$txtProvince: '',\r\n                ctl00$ctl00$content$content$AddressDialog$txtPhone: '',\r\n                ctl00$ctl00$content$content$AddressDialog$txtPhnExt: '',\r\n                ctl00$ctl00$txtEmailFooter: 'email address',\r\n                __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n                __EVENTVALIDATION: $('#__EVENTVALIDATION').val(),\r\n                __VIEWSTATE: $('#__VIEWSTATE').val()\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    isCartPage: function () {\r\n        return \/order-review\/.test(location.href);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings;\r\n\r\n        if (!this.isCartPage()) {\r\n            savings = parseFloat($('#ctl00_ctl00_content_content_CheckoutSummary_lblDiscount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        } else {\r\n            savings = parseFloat($('#ctl00_ctl00_content_content_ListTotals_lblDiscount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#ctl00_ctl00_content_content_CheckoutSummary_ApplyKeycode_txtKeycode').val(bestCode);\r\n            $('#ctl00_ctl00_content_content_CheckoutSummary_ApplyKeycode_btnApplyKeycode').click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"beprepared": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.desktop-cart-cart .accpt-pay td:contains(\"$-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#input-coupon').val(bestCode);\r\n            $('#button-coupon, .btn-coupon').click();\r\n        }\r\n    }\r\n};",
	"berettausa": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:eq(2)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bergfreundede": "var ExternalProvider = {\r\n    voucherId: '',\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = $('.summary-total-price').text().replace(\/[^0-9.]\/g, '') \/ 100;\r\n        var newTotal = $('.summary-total-price', responseHTML).text().replace(\/[^0-9.]\/g, '') \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        this.voucherId = $('.voucher-box a', responseHTML)[0].getAttribute('href').match('voucherId=(.*)&')[1];\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $.ajax({\r\n                url: 'https:\/\/www.bergfreunde.de\/index.php',\r\n                type: 'GET',\r\n                data: {\r\n                    voucherId: this.voucherId,\r\n                    fnc: 'removeVoucher',\r\n                    cl: 'basket',\r\n                    CustomError: 'basket'\r\n                },\r\n                async: false\r\n            });\r\n\r\n            $('input[name=\"voucherNr\"]').val(bestCode);\r\n            $('.a-button--gray.right').click();\r\n        }\r\n    }\r\n};",
	"bergners": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var $response = $.parseHTML(response);\r\n        var $promoCode = $('#promoCode', $response);\r\n\r\n        if ($promoCode.val().toLowerCase() === code.toLowerCase()) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat($('.couponDiscount .amount', $response).text().replace(\/[^0-9|.]\/gim, ''))\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bergzeit": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var parseHTML = $.parseHTML(response.elements.structure_basketFlyout);\r\n        var savings = parseFloat($('.price:contains(-)', parseHTML)[0].innerText.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"berries": "var ExternalProvider = {\r\n    oldCartPrice: 0,\r\n    currentBestPrice: 0,\r\n    __injectHTMLElement: function () {\r\n        var formElement = '#cartForm';\r\n        var url = $(formElement).attr('action');\r\n        var spanString = \"<span id = 'sm-cp-url' url-attr = '\" + url + \"' ><\/span>\";\r\n\r\n        $('body').append(spanString);\r\n    },\r\n    extendSerialize: function () {\r\n        jQuery.fn.extend({\r\n            getSerializedArray: function () {\r\n                var formArray = $(this).serializeArray();\r\n                var data = {};\r\n\r\n                $.each(formArray, function () {\r\n                    data[this.name] = this.value || '';\r\n                });\r\n\r\n                return data;\r\n            }\r\n        });\r\n    },\r\n    init: function () {\r\n        this.extendSerialize();\r\n        this.oldCartPrice = parseFloat($('.codesAndTotalsInner .subtotal .value').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        if (isNaN(this.oldCartPrice)) {\r\n            this.oldCartPrice = 0;\r\n        }\r\n\r\n        this.currentBestPrice = this.oldCartPrice;\r\n    },\r\n    prepare: function (requestType, code) {\r\n        if (requestType === 'applyCouponUrl') {\r\n            var formElement = '#cartForm';\r\n            var data = $(formElement).getSerializedArray();\r\n\r\n            data.SpecialCode = code;\r\n\r\n            return data;\r\n        }\r\n    },\r\n    parse: function (response, status, xhr, code) {\r\n        var jqObj = $.parseHTML(response.responseText);\r\n        var newPrice = parseFloat($('.codesAndTotalsInner .subtotal .value', jqObj).text().replace(\/[^0-9|.]\/g, ''));\r\n        var discount = this.currentBestPrice - newPrice;\r\n\r\n        if (discount > 0) {\r\n            this.currentBestPrice = newPrice;\r\n\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider.__injectHTMLElement();",
	"bestbullysticks": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#hnd-sub-dis', responseHTML).val());\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (!this.isCheckOutPage()) {\r\n                $('input[name=\"discountcouponcode\"]').val(bestCode);\r\n                $('input[name=\"applydiscountcouponcode\"]').click();\r\n            } else {\r\n                $('.input-coupon-code').val(bestCode);\r\n                $('.add-coupon-code-button').click();\r\n            }\r\n        }\r\n    },\r\n    isCheckOutPage: function () {\r\n        return \/onepagecheckout\/.test(location.href);\r\n    }\r\n};",
	"bestbuy": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    $.get('', response => {\r\n      let csrfString = response.match(\/(?<=\"id\":).[^,]*\/)[0].replace(\/['\"]+\/g, '');\r\n      if (document.getElementById(\"csrf\") === null) {\r\n        let csrfInput = document.createElement(\"input\");\r\n        csrfInput.id = 'csrf';\r\n        csrfInput.setAttribute('type', 'hidden');\r\n        csrfInput.setAttribute('value', csrfString);\r\n        (document.body || document.head || document.documentElement).appendChild(csrfInput);\r\n      }\r\n    });\r\n    this.createEventInstance();\r\n  },\r\n  init: function () {\r\n    $('a[data-track=\"gift-promo-code-link\"]').length > 0 && $('a[data-track=\"gift-promo-code-link\"]').get(0).click();\r\n  },\r\n  prepare: function (step, code) {\r\n    if (step === 'injectCoupon') {\r\n      this.inputCodeField(code);\r\n    } else if (step === 'removeInjectedCoupon') {\r\n      $('.alternate-payment__remove').get(0).dispatchEvent(this.clickEvent);\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if (step === 'injectCoupon') {\r\n      this.waitForSelector(this.isLoaded, this.getDiscount.bind(this, next), 200);\r\n    } else if (step === 'removeInjectedCoupon') {\r\n      this.waitForSelector(this.isRemoved, function () {\r\n        next();\r\n      }, 200);\r\n    }\r\n  },\r\n  parse: function () {\r\n    let savings = parseFloat(this.promoCodeSavings.replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      this.inputCodeField(bestCode);\r\n    };\r\n  },\r\n  getDiscount: function (next) {\r\n    ExternalProvider.promoCodeSavings = $('.alternate-payment__price').text();\r\n    next();\r\n  },\r\n  isLoaded: function () {\r\n    return $('.alternate-payment__details').length > 0;\r\n  },\r\n  isRemoved: function () {\r\n    return $('.alternate-payment__remove').length < 1;\r\n  },\r\n  inputCodeField: function (code) {\r\n    const codeField = $('.gift-promo-cards input').first();\r\n    const submitButton = $('.gift-promo-cards button');\r\n    codeField.val(code);\r\n    codeField.get(0).dispatchEvent(this.changeEvent);\r\n    submitButton.get(0).dispatchEvent(this.clickEvent);\r\n  },\r\n  waitForSelector: function (isResolved, runNext, maxWait) {\r\n    let waited = 0;\r\n    let waitForClose = setInterval(function () {\r\n      if (waited > maxWait || isResolved()) {\r\n        clearInterval(waitForClose);\r\n        runNext();\r\n      }\r\n      waited++;\r\n    }, 10);\r\n  },\r\n  createEventInstance: function () {\r\n    this.changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n    this.clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"bestbuyeyeglasses": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.subtotal .cost', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#giftofferlink')[0].click();\r\n            $('#coupcode').val(bestCode);\r\n            $('#coupapply')[0].click();\r\n        }\r\n    }\r\n};",
	"bestcanvas": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML($('#shoppingcartForm\\\\:data', response).text());\r\n    var savings = parseFloat($('.text-right:contains(\"-C$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bestchoiceproducts": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    var savings = oldTotal - newTotal;\r\n\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      location.reload();\r\n    }\r\n  }\r\n};",
	"bestcigarprices": "var ExternalProvider = {\r\n    init: function () {\r\n        this.oldTotal = parseFloat($('#cart-total-price-subtotal').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    },\r\n    whenReady: function (step, next) {\r\n        var self = this;\r\n\r\n        if (step === 'injectCoupon') {\r\n            this._timeout = setInterval(function () {\r\n                if ($('cart-coupon-message')) {\r\n                    clearTimeout(self._timeout);\r\n                    setTimeout(next, 1000);\r\n                }\r\n            }, 200);\r\n        }\r\n    },\r\n    parse: function () {\r\n        var newTotal = parseFloat($('#cart-total-price-subtotal').text().replace(\/[^0-9]\/g, '')) \/ 100;        \r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"bestdealmagazines": "var ExternalProvider = {\r\n\tbasketTotal: 0.00,\r\n    init: function()\r\n    {\r\n\r\n        this.basketTotal = $('input[name=\"amount\"]').val();\r\n\r\n    },\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\t\r\n        var oldPrice = this.basketTotal,\r\n\t\t\tnewPrice = $('input[name=\"amount\"]', responseHTML).val(),\r\n\t\t\tsavings = (oldPrice - newPrice);\r\n\r\n\t\tif (newPrice < oldPrice) {\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: savings\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t};\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\t\t\r\n\t\t$('#couponCode').val(bestCode);\r\n\t\t$('button[name=update]').click()\r\n\r\n    }\r\n}",
	"bestgymequipment": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"besthairbuy": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response),\r\n            isDiscount = $('#shopping-cart-totals-table tbody tr:nth-child(2) td:nth-child(1)', responseHTML).text().trim().toLowerCase() === 'total discount';\r\n            savings =  parseFloat($('#shopping-cart-totals-table tbody tr:nth-child(2) td:nth-child(2)', responseHTML).text().replace('$', '').replace('-', ''));\r\n\r\n        if (savings && isDiscount) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSavings) {\r\n        location.reload(true);\r\n    }\r\n}",
	"bestseller": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n        var selector = location.pathname;\r\n\r\n        if (selector.match(\/(gb)\/g)) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector.match(\/(de|fr)\/g)) {\r\n            locale = selector.match(\/(de)\/g) ? localeMapping.DE : localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"best-slippers": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bestusedtires": "jQuery.fn.extend({\r\n    getSerializeArray: function () {\r\n        var form_data = $(this).serializeArray()\r\n        var data = {}\r\n        $.each(form_data, function () {\r\n            data[this.name] = this.value || ''\r\n        })\r\n        return data\r\n    }\r\n})\r\n\r\nvar ExternalProvider = {\r\n    oldTotalDiscount: 0,\r\n    init: function () {\r\n        var old_total_discount = $('#cart_table_data tbody tr:nth-child(2) .cart_green').text().replace(\/[^0-9|\/.]\/g, '')\r\n        if (old_total_discount)\r\n            this.oldTotalDiscount = parseFloat(old_total_discount)\r\n        if (isNaN(this.oldTotalDiscount))\r\n            this.oldTotalDiscount = 0\r\n    },\r\n    prepare: function (requestType, code) {\r\n        if (requestType != 'resultUrl') {\r\n            var form_data = $('.shopping_cart_form').getSerializeArray()\r\n            form_data['actions[ShoppingCartModule]'] = 'enter_coupon'\r\n            form_data['coupon_code'] = code\r\n            return form_data\r\n        }\r\n    },\r\n    parse: function (response, text, $xhr, code) {\r\n        var jqObj = $.parseHTML(response)\r\n        var newTotalDiscount = parseFloat($('#cart_table_data tbody tr:nth-child(4) td:nth-child(3) .cart_green', jqObj).text().replace(\/[^0-9|\/.]\/g, ''))\r\n        var discount = newTotalDiscount - this.oldTotalDiscount\r\n        if (discount > 0 && this.isCouponCodePresent(jqObj, code)) {\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.0\r\n        }\r\n    },\r\n    isCouponCodePresent: function (jqObj, code) {\r\n        var pattern = new RegExp(code, 'g')\r\n        if (pattern.exec($('.coupon_message_success', jqObj).text()))\r\n            return true\r\n        return false\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};",
	"bestvetcare": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var couponUrl = this.isCartPage() ? 'https:\/\/www.bestvetcare.com\/my_cart\/applycoupon.aspx?ControllerName=my_cart' : 'https:\/\/www.bestvetcare.com\/my_cart\/applycoupon.aspx?ControllerName=checkout';\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      if (this.isCartPage() === true) {\r\n        $.ajax({\r\n          url: couponUrl,\r\n          type: 'POST',\r\n          async: false,\r\n          data: {\r\n            Coupan_code: code\r\n          }\r\n        });\r\n      } else {\r\n        $.ajax({\r\n          url: couponUrl,\r\n          type: 'POST',\r\n          async: false,\r\n          data: {\r\n            Coupan_code: code\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount_table tr:contains(\"Coupon Discount\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#Coupan_code').val(bestCode);\r\n      $('#Coupan_code').next().click();\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/my_cart.aspx';\r\n  }\r\n};",
	"betseyjohnson": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"bettenrid": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.couponData td', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"voucherNr\"]').val(bestCode);\r\n      $('.js-voucherInput button').click();\r\n    }\r\n  }\r\n};",
	"betterlifehealthcare": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            return JSON.stringify({\r\n                emailAddress: $('#email').val(),\r\n                voucherCode: code\r\n            });\r\n        } else if (type === 'clearCouponUrl') {\r\n            return JSON.stringify({\r\n                emailAddress: $('#email').val(),\r\n                voucherCode: ''\r\n            });\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.discount.saving;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#discount-code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#discount-code').trigger('input').trigger('change');\r\n            $('#discount-code-button').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"bettersex": "var ExternalProvider = {\r\n    origPrice: 0,\r\n    init: function () {\r\n        this.origPrice = parseFloat($('.non-clicleable-price').text().replace(\/[^0-9.]\/g, ''));\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newPrice = parseFloat($('.non-clicleable-price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = this.origPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"betterworldbooks": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.PromoTotal);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var data = {\r\n                'code': bestCode,\r\n                'op': 'ApplyPromoCode'\r\n            };\r\n\r\n            $.ajax({\r\n                url: 'https:\/\/www.betterworldbooks.com\/cart\/cartservices.aspx',\r\n                type: 'POST',\r\n                data: data,\r\n                async: false\r\n            });\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"bettysattic": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = false;\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        'options': '',\r\n        'optionTypes': $('input[name=\"optionTypes\"]').val(),\r\n        'option': $('input[name=\"option\"]').val(),\r\n        'qty': 1,\r\n        'itemPk': $('input[name=\"itemPk\"]').val(),\r\n        'sourceCode': code,\r\n        'sourceCode.x': '',\r\n        'sourceCode.y': '',\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discountvalue.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"getbevel": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.view);\r\n        var savings = parseFloat($('#promo-discount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.promo-code-link').click();\r\n            $('#coupon_id').val(bestCode);\r\n            $('#promo-code-apply').click();\r\n        }\r\n    }\r\n};",
	"bhcosmetics": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total-line__price span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bigalsaquariumservice": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.a-right span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bigbustours": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    let savings = parseFloat(response.match('discount_amount(.*)base_discount_amount')[0].replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $.post('\/en\/london\/checkout\/cart\/couponPost\/', {remove: 0, coupon_code: bestCode}, () => location.reload());\r\n    };\r\n  }\r\n};",
	"bigcitysportswear": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bigfishgames": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat((response.CartAnonymous.cart.discounts[0].amountDiscounted).replace('- &#36;', '').replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $(\"#discount_input\").val(bestCode);\r\n      $(\"#add_discount_button\").removeClass(\"disable_btn\");\r\n      $(\"#add_discount_button\")[0].click();\r\n    }\r\n  }\r\n};",
	"biggerbooks": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.coupon-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"biglots": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var couponUrl = this.isCartPage() ? 'https:\/\/www.biglots.com\/cart\/cart.jsp?_DARGS=\/cart\/cart.jsp.cartPromoForm' : 'https:\/\/www.biglots.com\/checkout\/checkout.jsp?_DARGS=\/checkout\/checkout.jsp.cartPromoForm';\r\n    var formData = $('form[name=\"cartPromoForm\"]').serializeArray();\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      formData.forEach(function (element) {\r\n        if (element.name === 'couponClaimCode') {\r\n          element.value = code;\r\n        }\r\n      });\r\n\r\n      formData.push({\r\n        name: '\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon',\r\n        value: 'Apply'\r\n      });\r\n      formData.push({\r\n        name: '_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon',\r\n        value: ''\r\n      });\r\n\r\n      $.ajax({\r\n        url: couponUrl,\r\n        type: 'POST',\r\n        async: false,\r\n        data: formData\r\n      });\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.orange-text.total-amount.discount-value', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/cart\/cart.jsp';\r\n  }\r\n};",
	"bikini": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $)', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"bilderwelten": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.u-t-color-success td:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"billabong": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price-promo-discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#PromotionPromotionCode').val(bestCode);\r\n            $('.button[name=\"update-quantity\"]').click();\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"biotherm-usa": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        if ($('.cartcoupon .value', responseHTML).text().indexOf(code) !== -1) {\r\n            var savings = parseFloat($('.order_discount td:eq(1)', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        location.reload(true);\r\n    }\r\n};",
	"birchbox": "var ExternalProvider = {\r\n  __prepareProvider: function () {\r\n    let convertedLocalStorage = JSON.stringify(localStorage).match(\/\"sessionId\\\\\":\\\\\"(.*?)\\\\\"\/g);\r\n    const visitorID = this.getCookieByKey('bbox-vid');\r\n    const storage = JSON.parse('{' + (convertedLocalStorage[0].replace(\/\\\\\/g, '') + '}'));\r\n    this.createTokenInput();\r\n    $('#visitor-id').val(visitorID);\r\n    $('#session-id').val(storage.sessionId);\r\n  },\r\n  parse: function (response) {\r\n    savings = Math.abs(parseFloat(response.receipt_credit_coupon.amount));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  getCookieByKey: function (key) {\r\n    let value = \"; \" + document.cookie;\r\n    let parts = value.split(\"; \" + key + \"=\");\r\n    if (parts.length == 2) return parts.pop().split(\";\").shift();\r\n  },\r\n  createTokenInput: function () {\r\n    $('<input>').attr({\r\n      type: 'hidden',\r\n      id: 'visitor-id',\r\n    }).appendTo('body');\r\n\r\n    $('<input>').attr({\r\n      type: 'hidden',\r\n      id: 'session-id',\r\n    }).appendTo('body');\r\n  }\r\n};\r\nExternalProvider.__prepareProvider();",
	"birchboxfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon').val(bestCode);\r\n      $('.btn-text').click();\r\n    }\r\n  }\r\n};",
	"birthdayexpress": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('strong:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        $('#promo_code').val(bestCode);\r\n        $('button[value=\"add_promo_code\"]').click();\r\n    }\r\n}",
	"bissell": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"jp_shoppingCartHandler\", window.shoppingCartHandler);';\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var value = $('body').attr('jp_shoppingCartHandler');\r\n    var shoppingCartHandler = value;\r\n    var applyUrlElement = $('#__jpApplyCouponUrl');\r\n    var applyUrl = 'https:\/\/www.bissell.com' + shoppingCartHandler + '&pageSource=&linkSource=&isOverlay=false&isRemove=false'\r\n    \r\n    if (applyUrlElement.length < 1) {\r\n      $('<input>').attr({\r\n        id: '__jpApplyCouponUrl',\r\n        value: applyUrl,\r\n        type: 'hidden'\r\n      }).appendTo('body');\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseString = response.responseText;\r\n    var savings = parseFloat(responseString.match(\/\"AppliedDiscountAmount\":\"(.*)\"\/)[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"bistromd": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.ml-discount-price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"bistromd.mobile": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.ml-discount-price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"bitdefender": "var ExternalProvider = {\r\n    init: function() {\r\n\r\n        $.fn.serializeObject = function()\r\n        {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function() {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            var $form = $('#frmCheckout');\r\n\r\n            $form.find('input[name=\"coupon\"]').val(code);\r\n            $form.find('input[name=\"coupon_fake\"]').val(code);\r\n\r\n            return $form.serializeObject();\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.totalPrice.ng-binding').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.order__total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#coupon').trigger('input').trigger('change');\r\n            $('.applyCoupon.col-xs-5')[0].click();\r\n        }\r\n    }\r\n};",
	"bitibafr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.total__price').text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.total__price', responseHTML).text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"blacks": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discounted', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"farmandfleet": "var ExternalProvider = {\r\n  init: function () {\r\n    if ($('.collapse-header.open:contains(\"Promo Code\")').length) {\r\n      $('.collapse-header:eq(1)').click();\r\n    }\r\n  },\r\n  prepare: function (step, code) {\r\n    this.inputCodeField(code);\r\n  },\r\n  whenReady: function (step, next) {\r\n    this.waitForSelector(this.isLoaded, this.getDiscount.bind(this, next), 200);\r\n\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat(this.promoCodeSavings);\r\n    \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      this.inputCodeField(bestCode);\r\n    };\r\n  },\r\n  getDiscount: function (next) {\r\n    if (this.isCheckoutPage()) {\r\n      this.promoCodeSavings = $('.order-summary-footer-row.red').text().replace(\/[^0-9|.]\/g, '');\r\n    } else {\r\n      this.promoCodeSavings = $('.cart-order-savings.red').text().replace(\/[^0-9|.]\/g, '');\r\n    }\r\n    next();\r\n  },\r\n  isLoaded: function () {\r\n    var loadingElement = ExternalProvider.isCheckoutPage() ? $('.collapse-header.open:contains(\"Promo Code\")') : $('.cart-order-checkout-standard button:disabled');\r\n    return loadingElement.length < 1;\r\n  },\r\n  inputCodeField: function (code) {\r\n    $('.collapse-header:eq(1)').click();\r\n    $('#promoCode').val(code);\r\n    $('.apply-promo').click();\r\n  },\r\n  waitForSelector: function (isResolved, runNext, maxWait) {\r\n    let waited = 0;\r\n    let waitForClose = setInterval(function () {\r\n      if (waited > maxWait || isResolved()) {\r\n        clearInterval(waitForClose);\r\n        runNext();\r\n      }\r\n      waited++;\r\n    }, 10);\r\n  },\r\n  isCheckoutPage: function () {\r\n    return \/checkout\/.test(location.pathname);\r\n  }\r\n};",
	"blair": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    if (this.isCartPage() === false) {\r\n      return new Promise((resolve) => {\r\n        let retries = 0;\r\n        const interval = setInterval(function () {\r\n          retries++;\r\n          $('.promoCodeRemove.tip a:contains(\"Remove\")').click()\r\n          let hasCodeAppliedInCheckout = $('.promoCodeRemove.tip').is(':visible');\r\n          if (hasCodeAppliedInCheckout === false || retries < 3) {\r\n            clearInterval(interval);\r\n            resolve();\r\n          } else if (retries >= 3) {\r\n            clearInterval(interval);\r\n            resolve();\r\n          }\r\n        }, 2000);\r\n      })\r\n    }\r\n  },\r\n  __prepareUrl: function () {\r\n    this.couponUrl = this.isCartPage() ? 'https:\/\/www.blair.com\/checkout\/update_items_in_order.cmd' : 'https:\/\/checkout.blair.com\/checkout\/update_promo_code_ajax.cmd';\r\n    this.resultUrl = '\/checkout\/basket.jsp';\r\n  },\r\n  init: function () {\r\n    this.oldTotal = this.isCartPage() ? this.getOldTotalInCart() : this.parseToNum($('#GRAND_ITEMS_TOTAL-value').text());\r\n  },\r\n  prepare: function (step, code) {\r\n    if (step === 'applyCouponUrl') {\r\n      if (this.isCartPage()) {\r\n        let formData = this.prepareCartData(step, code);\r\n        this.sendRequest(this.couponUrl, 'GET', formData, null, function (response) {\r\n          ExternalProvider.getSavings(response);\r\n        });\r\n      } else {\r\n        let formData = this.prepareCheckoutData(code);\r\n        this.sendRequest(this.couponUrl, 'POST', formData, null, function (response) {\r\n          if (response.applied === \"true\") {\r\n            ExternalProvider.sendRequest(ExternalProvider.resultUrl, 'GET', null, null, function (response) {\r\n              ExternalProvider.getSavings(response);\r\n            });\r\n          } else {\r\n            ExternalProvider.savings = 0;\r\n          }\r\n        });\r\n      }\r\n    } else if (step === 'clearCouponUrl') {\r\n      this.isCartPage() === false && this.sendRequest(this.couponUrl, 'POST', {\r\n        form_state: 'updatePromoCodeForm',\r\n        promoCode: '',\r\n        delete: true,\r\n      });\r\n    }\r\n  },\r\n  getSavings: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    this.savings = ($('.order-summary .discount:contains(\"Promotional\")', responseHTML).length > 0) ?\r\n      this.parseToNum($('.order-summary .discount:contains(\"Promotional\")', responseHTML).next().text()) :\r\n      this.oldTotal - this.parseToNum($('.order-summary div.label:contains(\"Subtotal\")', responseHTML).next().text());\r\n  },\r\n  prepareCartData: function (step, code) {\r\n    let serializeForm = $('form[name=\"basket_body\"]').serializeArray();\r\n    let formData = {};\r\n    serializeForm.forEach(data => formData[data.name] = data.value);\r\n    formData.checkoutAction = 4;\r\n    if (step === 'applyCouponUrl') {\r\n      formData.promoCode = code;\r\n    } else {\r\n      formData.promoCode = '';\r\n      formData.removePromoCode = true;\r\n    }\r\n    return formData;\r\n  },\r\n  prepareCheckoutData: function (code) {\r\n    return {\r\n      form_state: 'updatePromoCodeForm',\r\n      promoCode: code,\r\n      delete: false,\r\n    }\r\n  },\r\n  parse: function () {\r\n    return {\r\n      success: this.savings > 0,\r\n      savings: Number.isNaN(this.savings) ? 0.00 : this.savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCode').val(bestCode);\r\n      $('#promoCode').next().click();\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname !== '\/checkout\/checkout.jsp';\r\n  },\r\n  getOldTotalInCart: function () {\r\n    let oldTotal;\r\n    let formData = this.prepareCartData('removeCoupon', null)\r\n    this.sendRequest(this.couponUrl, 'GET', formData, null, function (response) {\r\n      const responseHTML = $.parseHTML(response);\r\n      oldTotal = ExternalProvider.parseToNum($('.order-summary div.label:contains(\"Subtotal\")', responseHTML).next().text())\r\n    });\r\n    return oldTotal;\r\n  },\r\n  sendRequest: function (url, method, data = null, headers = null, onSuccess = null) {\r\n    $.ajax({\r\n      url: url,\r\n      method: method,\r\n      headers: headers,\r\n      data: data,\r\n      async: false,\r\n      success: function (response) {\r\n        onSuccess !== null && onSuccess(response);\r\n      }\r\n    })\r\n  },\r\n  parseToNum: function (element) {\r\n    return parseFloat(element.replace(\/[^0-9|.]\/g, ''));\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"blancheporte": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = response.cartAmounts.montantTotalRabais;\r\n    var savings = parseFloat(responseHTML);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"blessedherbs": "var ExternalProvider = {\r\n    \r\n    _prepareUrl: function() {\r\n\r\n\t\tvar applyUrlInput = $('#__jpCouponUrl'),\r\n\t\t\tapplyUrl = this.isCartPage() ? 'http:\/\/www.blessedherbs.com\/checkout\/cart\/couponPost' : 'https:\/\/www.blessedherbs.com\/onestepcheckout\/index\/add_coupon';\r\n\t\tif(!applyUrlInput.length) {\r\n\t\t\tapplyUrlInput = document.createElement(\"input\");\r\n\t\t\tapplyUrlInput.id = '__jpCouponUrl';\r\n\t\t\tapplyUrlInput.style.display = \"none\";\r\n\t\t\t(document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n\t\t\tapplyUrlInput = $('#__jpCouponUrl');\r\n\t\t}\r\n\r\n\t\tapplyUrlInput.attr('value', applyUrl);\r\n\t},\r\n\r\n    isCartPage: function() {\r\n\t\treturn $('#coupon_code_onestepcheckout').length == 0;\r\n\t},\r\n\r\n    prepare: function(action, code) {\r\n\r\n\t\tvar requestData = {};\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            if (this.isCartPage()) {\r\n                requestData = {\r\n                    coupon_code: code,\r\n                    remove: 0\r\n                };\r\n            } else {\r\n                requestData = {\r\n                    coupon_code: code\r\n                };\r\n            }\r\n            return requestData;\r\n        } else if (action === 'clearCouponUrl') {\r\n            requestData = {\r\n                coupon_code: code,\r\n                remove: 1\r\n            };\r\n            return requestData;\r\n        }\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        var responseHTML = this.isCartPage() ? $.parseHTML(response) : $.parseHTML(JSON.parse(response)['review_html']);\r\n        var savings = parseFloat($('.summary-total > td:eq(1) > .price', responseHTML).html().replace('-', '').replace('$', '').replace(\/[^0-9|\\.]\/g, ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n        \r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"blinds": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('div[data-testid=\"gcc-promo-discount\"]', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"blindsaver": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n      $('#couponInputField').val(code);\r\n      $('#couponInputField').get(0).dispatchEvent(changeEvent);\r\n      $('#applyCouponBtn').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1500);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('#showCouponSavings > div > div:contains(\"$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"blingjewelry": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"blinkforhome": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n}",
	"blinkhealth": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    if (action === 'applyCouponUrl') {\r\n      return JSON.stringify({ code: code });\r\n    }\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.discount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"blinq": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var success = response.coupon_code.toLowerCase() === code.toLowerCase();\r\n        var savings = response.coupon_discount !== 0\r\n            ? parseFloat(response.coupon_discount) \/ 100\r\n            : 0.00;\r\n\r\n        return {\r\n            success: success,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n}",
	"blissworld": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($(\"span:contains('-$')\", responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bloom-boutique": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var newCurrency = 'USD';\r\n        var locale = localeMapping.US;\r\n        var selector = $('.active-currency').eq(0).text();\r\n\r\n        if (selector === '\u00a3') {\r\n            newCurrency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        } else if (selector === '\u20ac') {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.DE;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply Voucher\"]').click();\r\n        }\r\n    }\r\n};",
	"bloomandwild": "var ExternalProvider = {\r\n  init: function() {\r\n    this.removeCode();\r\n  },\r\n  prepare: function (action, code) {\r\n    this.code = code;\r\n    if (action === 'injectCoupon') {\r\n      this.inputCouponCode(code);\r\n    } else if (action === 'removeInjectedCoupon') {\r\n      this.removeCode();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if (step === 'injectCoupon') {\r\n      this.waitForSelector(this.isDiscountRemoved.bind(this), this.cycleCode.bind(this, next), 150);\r\n    } else {\r\n      this.waitForSelector(this.isDiscountRemoved.bind(this), () => next(), 50);\r\n    }\r\n  },\r\n  cycleCode: function (next) {\r\n    this.oldPrice = $('.bwButton.primary.large.wrap.ng-star-inserted')[0].innerText.replace(\/[^0-9.]\/g, '');\r\n    this.waitForSelector(this.isCodeFieldReady, this.codeFieldReady.bind(this, next), 150);\r\n  },\r\n  parse: function () {\r\n    var savings = Math.abs(parseFloat(this.oldPrice - this.newPrice));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  createEventInstance: function () {\r\n    this.mouseClick = new MouseEvent('click', { view: window, bubbles: true, cancelable: true });\r\n    this.inputEvent = new Event('input', { bubbles: true });\r\n  },\r\n  submitCode: function () {\r\n    $('.bwButton.primary.slim').get(0).dispatchEvent(this.mouseClick);\r\n  },\r\n  removeCode: function () {\r\n    if ($('.payment__discount-code').find('a:contains(\"Remove\")').length > 0) {\r\n      $('.payment__discount-code').find('a:contains(\"Remove\")').get(0).click();\r\n    }\r\n  },\r\n  waitForSelector: function (isResolved, runNext, maxWait) {\r\n    var waited = 0;\r\n    var waitForClose = setInterval(function () {\r\n      if (waited > maxWait || isResolved()) {\r\n        clearInterval(waitForClose);\r\n        runNext();\r\n      }\r\n      waited++;\r\n    }, 15);\r\n  },\r\n  isValidCoupon: function () {\r\n    return $('.payment__discount-code .discount-code div:contains(\"applied\")').length > 0;\r\n  },\r\n  isCodeFieldReady: function () {\r\n    return $('#discountCode').length > 0;\r\n  },\r\n  isDiscountRemoved: function() {\r\n    this.removeCode();\r\n    return $('.payment__discount-code .discount-code div:contains(\"applied\")').length < 1;\r\n  },\r\n  codeFieldReady: function (next) {\r\n    this.inputCouponCode(this.code);\r\n    this.waitForSelector(this.isValidCoupon, this.savingsReady.bind(this, next), 150);\r\n  },\r\n  savingsReady: function (next) {\r\n    this.newPrice = $('.bwButton.primary.large.wrap.ng-star-inserted')[0].innerText.replace(\/[^0-9.]\/g, '');\r\n    next();\r\n  },\r\n  complete: function (bestCode) {\r\n    if ($('#discountCode').length > 0) {\r\n      this.inputCouponCode(bestCode)\r\n    }\r\n  },\r\n  inputCouponCode: function(code) {\r\n    $('#discountCode').val(code)[0].dispatchEvent(this.inputEvent);\r\n    $('#discountCode').trigger('input').trigger('change');\r\n    this.submitCode();\r\n  }\r\n};\r\nExternalProvider.createEventInstance();",
	"bloomandwildde": "var ExternalProvider = {\r\n    oldTotal: 0,\r\n    init: function () {\r\n        this.oldTotal = parseFloat($('.bw-order-total h4').text().replace(\/[^0-9]\/g, ''));\r\n\r\n        if ($('.bw-order-total h4').text().match(',')) this.oldTotal \/= 100;\r\n    },\r\n    prepare: function (action, code) {\r\n        var clickEvent = new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        });\r\n\r\n        if (action === 'injectCoupon') {\r\n            $('#discountCode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#discountCode').trigger('input').trigger('change');\r\n            $('bw-discount-code button').get(0).dispatchEvent(clickEvent);\r\n        } else if (action === 'removeInjectedCoupon') {\r\n            $('bw-discount-code a').get(0).dispatchEvent(clickEvent);\r\n        }\r\n\r\n        return null;\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 800);\r\n    },\r\n    parse: function () {\r\n        var newTotal = parseFloat($('.bw-order-total h4').text().match(\/\u20ac(\\S+)\/)[1].replace(\/[^0-9]\/g, ''));\r\n        var savings;\r\n\r\n        if ($('.bw-order-total h4').text().match(',')) newTotal \/= 100;\r\n        savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"bloomandwildfleursfr": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        this._clickEvent = new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        });\r\n\r\n        if (action === 'injectCoupon') {\r\n            $('#discountCode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#discountCode').trigger('input').trigger('change');\r\n            $('bw-discount-code button').get(0).dispatchEvent(this._clickEvent);\r\n        } else if (action === 'removeInjectedCoupon' && $('bw-discount-code a').length > 0) {\r\n            $('bw-discount-code a').get(0).dispatchEvent(this._clickEvent);\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var self = this;\r\n\r\n        this._timeout = setInterval(function () {\r\n            if ($('bw-loading-spinner').length < 1) {\r\n                clearInterval(self._timeout);\r\n                setTimeout(next, 1000);\r\n            }\r\n        }, 500);\r\n    },\r\n    parse: function () {\r\n        var savings = 0.00;\r\n\r\n        if ($('.bw-order-total h4 span').text().length > 0) {\r\n            var oldTotal = parseFloat($('.bw-order-total h4 span').text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n            var newTotal = parseFloat($('button[bwtrackas=\"checkout.payment.pay.payNowCard\"]').text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n            savings = oldTotal - newTotal;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountCode').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#discountCode').trigger('input').trigger('change');\r\n            $('bw-discount-code button').get(0).dispatchEvent(this._clickEvent);\r\n        }\r\n    }\r\n};",
	"bloomingdales": "var ExternalProvider = {\r\n    _prepareUrl: function() {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var bagguid = document.cookie.match(\/bloomingdales_bagguid=.*;\/)[0].split(';')[0].replace('bloomingdales_bagguid=','');\r\n        var applyUrl = 'https:\/\/www.bloomingdales.com\/my-bag\/' + bagguid + '\/promo?currencyCode=USD';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.bag.meta.analytics.data.order_discount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function(bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"blowltd": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    this.getFields();\r\n    this.inputCodeField(code);\r\n  },\r\n  whenReady: function (step, next) {\r\n    this.waitForSelector(this.isDoneLoading, this.getDiscount.bind(this, next), 20000);\r\n  },\r\n  parse: function () {\r\n    let savings = parseFloat(ExternalProvider.selector.text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      this.inputCodeField(bestCode);\r\n    }\r\n  },\r\n  getFields: function () {\r\n    this.codeField = $('#promo');\r\n    this.submitButton = $('#promo').parents('form').find('button');\r\n  },\r\n  inputCodeField: function (code) {\r\n    this.codeField.val(code);\r\n    this.codeField.get(0).dispatchEvent(this.changeEvent);\r\n    this.submitButton.get(0).dispatchEvent(this.clickEvent);\r\n  },\r\n  getDiscount: function (next) {\r\n    this.waitForSelector(this.isDiscountRemove, function() {\r\n      ExternalProvider.waitForSelector(ExternalProvider.isDiscountReady, function () {\r\n        ExternalProvider.selector = $('.booking-column__entry:contains(\"Discount\")').next();\r\n        ExternalProvider.modalButton.get(0).dispatchEvent(ExternalProvider.clickEvent);\r\n        next();\r\n      }, 200);\r\n    }, 200)\r\n  },\r\n  waitForSelector: function (isResolved, runNext, maxWait) {\r\n    let waited = 0;\r\n    let waitForClose = setInterval(function () {\r\n      if (waited > maxWait || isResolved()) {\r\n        clearInterval(waitForClose);\r\n        runNext();\r\n      }\r\n      waited++;\r\n    }, 15);\r\n  },\r\n  isDoneLoading: function () {\r\n    ExternalProvider.modalButton = $('body').find('button:contains(\"Ok\")');\r\n    return ExternalProvider.modalButton.length > 0;\r\n  },\r\n  isDiscountReady: function () {\r\n    return $('.booking-column__entry:contains(\"Discount\")').next().length > 0;\r\n  },\r\n  isDiscountRemove: function () {\r\n    return $('.booking-column__entry:contains(\"Discount\")').next().length < 1;\r\n  },\r\n  createEventInstance: function () {\r\n    this.changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n    this.clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  },\r\n};\r\nExternalProvider.createEventInstance();",
	"blu": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.order-discount', responseHTML).first().text().replace(\/[^0-9.]\/g, '');\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestSavings, bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"blueandcream": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.basket-charge-prompt:contains(\"Coupon\")', responseHTML).next().text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"question2\"]').click();\r\n\r\n            $('#coupon2').val(bestCode);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#coupon-trigger2').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"bluebella": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().split(\"$\")[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bluebellade": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"bluebellafr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"bluefly": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('span.sbOrderPromoMsg, span.sbShipPromoMsg', responseHTML).text().length > 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('.cartEstimatedTotalContainer .cartEstimatedTotalAmount').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('.cartEstimatedTotalContainer .cartEstimatedTotalAmount', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"bluemercury": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var str = $('.reduction-code__text:contains(\"-$\")', responseHTML).text();\r\n    var pos = str.indexOf('(') + 1;\r\n\r\n    str = str.slice(pos, str.lastIndexOf(')'));\r\n\r\n    var savings = parseFloat(str.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.field__input-btn.btn').removeClass('btn--disabled');\r\n      $('.field__input-btn.btn').removeAttr('disabled');\r\n      $('.field__input-btn.btn')[0].click();\r\n    }\r\n  }\r\n};",
	"bluenile": "var ExternalProvider = {\r\n    prepare: function(type, code) {\r\n      if(type === \"applyCouponUrl\"){\r\n          var data = {};\r\n          data['sourceCode'] = code;\r\n          $(\"#pf-form input\").each(function() {\r\n              data[$(this).attr('name')] = $(this).attr('value');\r\n          });\r\n          return data;\r\n      }\r\n\r\n      return null;\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n      if (response && response.orderInfo \r\n          && response.orderInfo.promotion && response.orderInfo.promotion.totalDiscountAmount){\r\n        var savings = parseFloat(response.orderInfo.promotion.totalDiscountAmount.replace('$', ''));\r\n        if (savings){\r\n          return {\r\n            success: true,\r\n            savings: savings\r\n          }\r\n        }\r\n      }\r\n\r\n      return {\r\n          success: false,\r\n          savings: 0.00\r\n      }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings)\r\n    {\r\n        location.reload(true);\r\n    }\r\n};",
	"bluevanilla": "var ExternalProvider = {\r\n  cartParams: {},\r\n  __prepareUrl: function () {\r\n    var s = document.createElement('script');\r\n    var code;\r\n    var page = location.href.match('cart') ? 'cart' : 'checkout';\r\n\r\n    code = \"jQuery('body').attr('cartParams', JSON.stringify(wc_\" + page + '_params));';\r\n    s.appendChild(document.createTextNode(code));\r\n    document.body.appendChild(s);\r\n    $('#temp').remove();\r\n\r\n    this.cartParams = JSON.parse($('body').attr('cartParams'));\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'applyCouponUrl') {\r\n      return {\r\n        security: this.cartParams.apply_coupon_nonce,\r\n        coupon_code: code\r\n      };\r\n    } else if (type === 'clearCouponUrl') {\r\n      return {\r\n        security: this.cartParams.remove_coupon_nonce,\r\n        coupon: code\r\n      };\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-discount .amount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"blumenversandedelweiss": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var o = {};\r\n      var a = this.serializeArray();\r\n\r\n      $.each(a, function () {\r\n        if (o[this.name] !== undefined) {\r\n          if (!o[this.name].push) {\r\n            o[this.name] = [o[this.name]];\r\n          }\r\n\r\n          o[this.name].push(this.value || '');\r\n        } else {\r\n          o[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return o;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    var formData = $('#commerce-checkout-form-checkout').serializeObject();\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      formData = Object.assign(formData, {\r\n        'commerce_coupon[coupon_code]': code\r\n      });\r\n    }\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.component-type-commerce-price-formatted-amount .component-total').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.component-type-commerce-price-formatted-amount .component-total', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bobbibrowncosmetics": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        JSONRPC: JSON.stringify([\r\n          {\r\n            method: 'logic.checkout--viewcart',\r\n            id: 1,\r\n            params: [\r\n              {\r\n                _SUBMIT: 'offer_code',\r\n                _TOKEN: $('input[name=\"_TOKEN\"]').val(),\r\n                OFFER_CODE: code\r\n              }\r\n            ]\r\n          }\r\n        ])\r\n      };\r\n    }\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savings = 0;\r\n    if (typeof response[0].error === 'undefined') {\r\n      savings = Math.abs(parseFloat(response[0].result.value.transaction.trans.TOTAL_ITEMS_DISCOUNT));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#form--offer_code--field--OFFER_CODE').val(bestCode);\r\n      $('input[data-test-id=\"form_offer_code_apply\"]').click();\r\n    }\r\n  }\r\n};",
	"bobbibrownde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.total.value.order-summary__total-value').text().replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.total.value.order-summary__total-value', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        var savings = parseFloat(oldTotal - newTotal)\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#form--offer_code--field--OFFER_CODE').val(bestCode);\r\n            $('.btn.btn-mini.form-submit').click();\r\n        }\r\n    }\r\n};",
	"bobbibrownuk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.total.value.order-summary__total-value').text().replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.total.value.order-summary__total-value', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        var savings = parseFloat(oldTotal - newTotal)\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#form--offer_code--field--OFFER_CODE').val(bestCode);\r\n            $('.btn.btn-mini.form-submit').click();\r\n        }\r\n    }\r\n};",
	"bobeau": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        $.ajax({\r\n            url: 'https:\/\/www.bobeau.com\/basket.do?method=validateSourceCode&sourceCode=CLAIMCODE',\r\n            type: 'GET',\r\n            async: false\r\n        });\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.bobeau.com\/basket.do?method=applySourceCode',\r\n            type: 'POST',\r\n            async: false,\r\n            data: {\r\n                sourceCode: code\r\n            }\r\n        });\r\n    },\r\n    parse: function (response) {\r\n        var savings = 0;\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.bobeau.com\/basket.do',\r\n            type: 'GET',\r\n            async: false,\r\n            success: function (result) {\r\n                savings = parseFloat($('.discount', result).text().replace(\/[^0-9.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bobevans": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var removeCoupon = $('#RemoveCouponCodeBtn', responseHTML);\r\n        if (removeCoupon) {\r\n            return {\r\n                success: true,\r\n                savings: Number($('#bVendorDiscount', responseHTML).text().replace(\/[^0-9.]\/g, ''))\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"boden": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('#code').val(code);\r\n            $('#btnApplyCode').click();\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('#code').val('');\r\n            $('#btnApplyCode').click();\r\n        }\r\n    },\r\n    whenReady: function(step, next)\r\n    {\r\n        if ( (step == 'injectCoupon') || (step == 'removeInjectedCoupon') ) {\r\n            setTimeout(function() {\r\n                var maxWait = 200, waited = 0;\r\n                var waitForClose = setInterval(function() {\r\n                    var confirmed = !$(\".cls_loadingMask\").length;\r\n                    if ((confirmed) || (waited > maxWait)) {\r\n                        clearInterval(waitForClose);\r\n                        setTimeout(function() {\r\n                            next();\r\n                        }, 500);\r\n                    }\r\n                    waited++;\r\n                }, 10);\r\n            }, 50);\r\n        }\r\n    },\r\n    parse: function () {\r\n        var oldTotal = parseFloat($('.coPListOriginalPrice').text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n        var newTotal = parseFloat($('.coPListFinalPrice').text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n};",
	"bodendirect": "var ExternalProvider = {\r\n    origPrice: 0,\r\n    init: function () {\r\n        this.origPrice = parseFloat($('#shoppinBagSubtotal').text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newPrice = parseFloat($('#shoppinBagSubtotal', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n        var savings = this.origPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bodenuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.coPListSaveSumm', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bodybuilding": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type !== 'applyCouponUrl') return null;\r\n\r\n        var formArray = $('#cartForm').serializeArray();\r\n        var data = {};\r\n\r\n        formArray.map(function (element) {\r\n            if (!element.value || element.value !== ' ') data[element.name] = element.value;\r\n            else data[element.name] = '';\r\n\r\n            return true;\r\n        });\r\n\r\n        data.promoCode = code;\r\n        data.updateCartButton = 'submit';\r\n        data['_D:\/atg\/store\/order\/purchase\/CartFormHandler.checkout'] = '';\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.qa-automation-var-couponDiscounts', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bodyguardz": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#shopping-cart-totals-table tbody td:contains(\"Discount (' + code + ')\") + td span', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    }, complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"bodylab24de": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).last().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bogsfootwearcanada": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var object = {};\r\n            var data = this.serializeArray();\r\n\r\n            $.each(data, function () {\r\n                if (object[this.name] !== undefined) {\r\n                    if (!object[this.name].push) {\r\n                        object[this.name] = [object[this.name]];\r\n                    }\r\n\r\n                    object[this.name].push(this.value || '');\r\n                } else {\r\n                    object[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return object;\r\n        };\r\n    },\r\n    prepare: function (action, code) {\r\n        var formData = $('#checkout').serializeObject();\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                'checkout:txtPromoCode': code,\r\n                'javax.faces.source': 'checkout:btnUpdate',\r\n                'javax.faces.partial.event': 'click',\r\n                'javax.faces.partial.execute': 'checkout:btnUpdate checkout:txtPromoCode',\r\n                'javax.faces.partial.render': '@all',\r\n                'javax.faces.behavior.event': 'action',\r\n                'javax.faces.partial.ajax': true\r\n            });\r\n        } else if (action === 'clearCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                'checkout:txtPromoCode': code,\r\n                'javax.faces.source': 'checkout:btnRemovePromo',\r\n                'javax.faces.partial.event': 'click',\r\n                'javax.faces.partial.execute': 'checkout:btnUpdate checkout:txtPromoCode',\r\n                'javax.faces.partial.render': '@all',\r\n                'javax.faces.behavior.event': 'action',\r\n                'javax.faces.partial.ajax': true\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount .value span', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bollmanhat": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bonanza": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($(\".value .value:contains('-')\", responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#offer_user_given_coupon_code').val(bestCode);\r\n            $('.apply_coupon').click();\r\n        }        \r\n    }\r\n};",
	"bonmarche": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.value:contains(\"-\")', responseHTML).eq(0).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"bonobos": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var cartToken = $('#___jpcartToken');\r\n    var applyUrl = 'https:\/\/api.bonobos.com\/api\/carts\/' + JSON.parse(window.localStorage.currentOrder).data.number + '\/promotion';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    if (!cartToken.length) {\r\n      cartToken = document.createElement('input');\r\n      cartToken.id = '___jpcartToken';\r\n      cartToken.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(cartToken);\r\n      cartToken = $('#___jpcartToken');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    cartToken.attr('value', JSON.parse(window.localStorage.currentOrder).data.token);\r\n  },\r\n  init: function () {\r\n    if ($(\"[class*='cart_contents---appliedPromo']\").length) {\r\n      $.ajax({\r\n        url: $('#___jpCouponUrl').val(),\r\n        type: 'DELETE',\r\n        headers: {\r\n          Accept: 'application\/json;v=2.0;schema=gramercy',\r\n          'Accept-Encoding': 'gzip, deflate, br',\r\n          'Accept-Language': 'en-US,en;q=0.9',\r\n          Connection: 'keep-alive',\r\n          'Content-Type': 'application\/json;charset=UTF-8',\r\n          'X-Cart-Token': $('#___jpcartToken').val(),\r\n          'X-Client-Authentication-Token': 'iITkA3apTvW7MVnIxPHZ0vckhkPiU7ZX'\r\n        },\r\n        data: {},\r\n        async: false\r\n      });\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var savings = response.cart.promotion.total.replace(\/[^0-9.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"bonprixde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = 0.00;\r\n\r\n    if (response.vouchers[0].error === null) {\r\n      var oldTotal = parseFloat($('#rightBasketTable .price:eq(0)').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n      var newTotal = parseFloat(response.cartSum.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n      savings = parseFloat(oldTotal - newTotal);\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bonprixfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = 0;\r\n    var newTotal = 0;\r\n\r\n    if (!$('#totalAmount').length) {\r\n      oldTotal = parseFloat($('.price.full-amount').text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n      newTotal = parseFloat(response.cartSum.replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      oldTotal = parseFloat($('#totalAmount').text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n      newTotal = parseFloat(response.cartSum.replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    }\r\n\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bonton": "var ExternalProvider = {\r\n\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            return {\r\n                estimateTax: true,\r\n                calculationUsageId: -7,\r\n                updatePrices: 1,\r\n                updateMiniCartCookie: true,\r\n                calculateTax: true,\r\n                errorViewName: 'AjaxOrderItemDisplayView',\r\n                orderId: $('input[name=\"orderId\"]').val(),\r\n                notStorePrice: true,\r\n                URL: 'donothing',\r\n                promoCode: code,\r\n                applyButton: code\r\n            };\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var $savings = $('.couponDiscount .amount', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if ($savings.length) {\r\n            var savings = $savings.text().replace(\/[^0-9|.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"boobydoo": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var resultUrlInput = $('#___jpResultUrl');\r\n    var applyUrl = this.isCartPage() ? 'https:\/\/www.boobydoo.co.uk\/checkout\/cart\/couponPost\/' : 'https:\/\/www.boobydoo.co.uk\/checkout\/klarna\/couponPost\/';\r\n    var resultUrl = this.isCartPage() ? 'https:\/\/www.boobydoo.co.uk\/checkout\/cart\/' : 'https:\/\/www.boobydoo.co.uk\/checkout\/klarna\/';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    if (!resultUrlInput.length) {\r\n      resultUrlInput = document.createElement('input');\r\n      resultUrlInput.id = '___jpResultUrl';\r\n      resultUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n      resultUrlInput = $('#___jpResultUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    resultUrlInput.attr('value', resultUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      if (this.isCartPage()) {\r\n        data.remove = 0;\r\n        data.coupon_code = code;\r\n      } else {\r\n        data.coupon_code = code;\r\n      }\r\n    }\r\n\r\n    return data;\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/checkout\/cart\/';\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"boohoo": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var selector;\r\n\r\n        if (location.href.includes('billing')) {\r\n            selector = $('div > table > tbody > tr.order-total > td.order-value').eq(0).text().replace(\/[A-z.0-9,]\/g, '').trim();\r\n        }\r\n        else {\r\n            selector = $('.current-country-arrow').eq(0).text().replace(\/[A-z.0-9,]\/g, '').trim();\r\n        }\r\n\r\n        switch (selector) {\r\n            case '\u20ac':\r\n                locale = localeMapping['FR'];\r\n                currency = \"EUR\";\r\n                break;\r\n            case '$':\r\n                locale = localeMapping['US'];\r\n                currency = \"USD\";\r\n                break;\r\n            case String.fromCharCode('163'):\r\n                locale = localeMapping['GB'];\r\n                currency = \"GBP\";\r\n                break;\r\n            default:\r\n                locale = localeMapping['DE'];\r\n                currency = \"EUR\";\r\n                break;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.order-total td:eq(1)').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.order-total td:eq(1)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"boohoode": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var selector;\r\n        if (location.href.includes('billing')) {\r\n            selector = $('div > table > tbody > tr.order-total > td.order-value').eq(0).text().replace(\/[A-z.0-9,]\/g, '').trim();\r\n        }\r\n        else {\r\n            selector = $('.current-country-arrow').eq(0).text().replace(\/[A-z.0-9,]\/g, '').trim();\r\n        }\r\n\r\n        switch (selector) {\r\n            case '\u20ac':\r\n                locale = localeMapping['FR'];\r\n                currency = \"EUR\";\r\n                break;\r\n            case '$':\r\n                locale = localeMapping['US'];\r\n                currency = \"USD\";\r\n                break;\r\n            case String.fromCharCode('163'):\r\n                locale = localeMapping['GB'];\r\n                currency = \"GBP\";\r\n                break;\r\n            default:\r\n                locale = localeMapping['DE'];\r\n                currency = \"EUR\";\r\n                break;\r\n        }\r\n\r\n        var storeCurrency = amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n\r\n        return storeCurrency;\r\n    },\r\n};",
	"boohooman": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|.]\/g,\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = $('div.price-unadjusted > span', responseHTML).text();\r\n        var newTotal = $('div.price-adjusted > span', responseHTML).text();\r\n\r\n        var savings = parseFloat(oldTotal.replace(this.nonPriceRegex, '').toString())\r\n          - parseFloat(newTotal.replace(this.nonPriceRegex, '').toString());\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        location.reload();\r\n    }\r\n};",
	"boohoouk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.order-total td:eq(1)').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.order-total td:eq(1)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bookit": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n        var currentPath = window.location.pathname;\r\n        var data = {\r\n            action: \"resp_addons.php\",\r\n            itineraryId: $('input[name=\"itineraryId\"]').val(),\r\n            BISESSID: $('input[name=\"BISESSID\"]').val(),\r\n            newJsonData: '{\"type\":\"setCouponCode\",\"code\":\"'+ code +'\"}'\r\n        };\r\n\r\n        if(currentPath == \"\/review.php\"){\r\n            if ($('#at-ts-coupon-input').length > 0) {\r\n                $('#at-ts-coupon-input').val(code);\r\n                $('#at-ts-apply-coupon').click();\r\n            }\r\n            return data;\r\n        }else{\r\n            return data;\r\n        }\r\n        \r\n    },\r\n    parse: function(response, status, $xhr, code) {\r\n        var currentPath = window.location.pathname;\r\n        if( currentPath == \"\/review.php\"){\r\n            var savings = response.overview.appliedCoupon.total.replace(\/[^0-9.]\/g, '');\r\n            if(savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n            }\r\n        }else{\r\n            var savings = response.overview.appliedCoupon.total.replace(\/[^0-9.]\/g, '');\r\n            if(savings > 0) {\r\n                if ($('#at-ts-coupon-input').length > 0) {\r\n                    $('#at-ts-coupon-input').val(code);\r\n                    $('#at-ts-apply-coupon').click();\r\n                }\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n            }\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n    }\r\n};",
	"bookoutlet": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.text-center strong:contains(\"$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.text-center strong:contains(\"$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"booksamillion": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    var formData = $('#checkout').serializeArray();\r\n    formData.forEach(element => {\r\n      if (element.name === \"cpncode\") {\r\n        element.value = code\r\n      }\r\n    });\r\n    if (action == \"applyCouponUrl\") {\r\n      formData.push({\r\n        name: 'apply_coupon',\r\n        value: 'Apply Coupon'\r\n      })\r\n    }\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('tr[valign=\"middle\"]:contains(\"Coupon Savings:\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"cpncode\"]').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[name=\"cpncode\"]').trigger('input').trigger('change');\r\n      $('button[name=\"apply_coupon\"]')[0].click();\r\n    }\r\n  }\r\n};",
	"boostmobile": "var ExternalProvider = {\r\n    basketTotal: 0.00,\r\n    init: function() {\r\n        \r\n        $.ajaxSettings.crossDomain = true;\r\n        $.ajaxSettings.beforeSend = function(xhr){\r\n            xhr.setRequestHeader('Upgrade-Insecure-Requests',{toString: function(){ return '1'; }});\r\n            xhr.setRequestHeader('Access-Control-Allow-Origin',{toString: function(){ return '*'; }});\r\n        };\r\n        this.basketTotal = Number($('#boost_cart_total').text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n    },\r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        var responseHTML = $.parseHTML(response);\r\n\r\n\t\tvar oldPrice = this.basketTotal,\r\n\t\t\tnewPrice = Number($('#boost_cart_total', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\t\t\t\t\t\r\n\t\tif (newPrice < oldPrice) {\r\n\t\t\t\r\n\t\t\tvar discount = oldPrice - newPrice;\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: discount\r\n\t\t\t}\r\n\t\t}\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n\r\n    },\r\n    complete: function(bestCode, bestSaving)\r\n    {\r\n        $('input.promo_code').val(bestCode);\r\n        $('#cartPromo').submit();\r\n    }\r\n}",
	"boots": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.total_font.showing_pounds').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.total_font.showing_pounds', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCode').val(bestCode);\r\n      $('#WC_PromotionCodeDisplay_links_1 > div').click();\r\n    }\r\n  }\r\n};",
	"borghese": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"bornshoes": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.couponTotals.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"boscovs": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = 0;\r\n\r\n    if ($(\"span:contains('You Save:')\", responseHTML).length > 0) {\r\n      savings = parseFloat($('#payments > .red:contains(\"($\")', responseHTML).first().text().replace(\/[^0-9|.]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $(\"#couponCode\").val(bestCode);\r\n      $(\"#coupon-button\").click();\r\n    }\r\n  }\r\n};",
	"bostonproper": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.subtotal-price:contains(-$)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bostonstore": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var containerId = $(\"script:contains('containerId')\").text();\r\n    var checkoutId = containerId.indexOf('checkoutId') + 13;\r\n    containerId = containerId.slice(checkoutId, containerId.lastIndexOf('containerId')).replace(\"',\", \"\").trim();\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/www.bostonstore.com\/api\/storefront\/checkouts\/' + containerId + '\/coupons?include=cart.lineItems.physicalItems.options%2Ccart.lineItems.digitalItems.options%2Ccustomer%2Cpayments%2Cpromotions.banners%2Cconsignments.availableShippingOptions';\r\n\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.cart.coupons[0].discountedAmount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"botanicchoice": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n    if (type === 'applyCouponUrl') {\r\n      var idOfProduct = $('input[name=\"id\"]').val();\r\n      var param1 = \"so_interval_\" + idOfProduct;\r\n      var param2 = \"qty_\" + idOfProduct;\r\n      data = {\r\n        ship_method: $('input[name=\"ship_method\"]').val(),\r\n        delete_cart_line_id: $('input[name=\"delete_cart_line_id\"]').val(),\r\n        id: $('input[name=\"id\"]').val(),\r\n        [param1]: $('select[name=param1]').val(),\r\n        [param2]: $('input[name=param2]').val(),\r\n        shipMethods: $('select[name=\"shipMethods\"]').val(),\r\n        source_code: code,\r\n        coupon_code: code,\r\n        srcsrc: 'Cart'\r\n      };\r\n      return data;\r\n    }\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.grand-total').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.grand-total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n  \r\n    return {\r\n      success: savings > 0,\r\n      savings: isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bottlebreacher": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-total-value:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bouqs": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var ApplyUrlInput = $('#___jpApplyUrl');\r\n        var ApplyUrl = this.isCartPage() ? 'https:\/\/bouqs.com\/cart' : 'https:\/\/bouqs.com\/checkout\/payment';\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('input');\r\n            ApplyUrlInput.id = '___jpApplyUrl';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        ApplyUrlInput.attr('value', ApplyUrl);\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"bourbonandboots": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var discount = parseFloat($('[data-checkout-discount-amount-target]', response.responseText).html()\r\n            .replace(\/[^0-9|\\.]\/g, '').trim()\r\n        );\r\n\r\n        if (discount > 0) {\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if(bestCode){\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('[data-reduction-form] .btn')[0].click();\r\n        }\r\n    }\r\n};",
	"boutique1": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var symbol = $('.price').eq(0).text().replace(\/[0-9,A-z|.]\/g, '');\r\n    var storeCurrency = '';\r\n\r\n    if (symbol === '\u20ac') {\r\n      storeCurrency = amount.toLocaleString(localeMapping.DE, { style: 'currency', currency: 'EUR', minimumFractionDigits: minimumFractionDigits });\r\n    } else if (symbol === '\u00a3') {\r\n      storeCurrency = amount.toLocaleString(localeMapping.GB, { style: 'currency', currency: 'GBP', minimumFractionDigits: minimumFractionDigits });\r\n    } else if (symbol === '$') {\r\n      storeCurrency = amount.toLocaleString(localeMapping.US, { style: 'currency', currency: currency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n\r\n    return storeCurrency;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/base_discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"boutiqueorange": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsRaw = parseFloat($('.div_bloc_prix_promo p:eq(1)', responseHTML).text().replace(\/[^0-9]\/g, ''));\r\n        var savings = $('.div_bloc_prix_promo p:eq(1)', responseHTML).text().contains(',') ? savingsRaw \/ 100 : savingsRaw.toFixed(2);\r\n        var invalidCode = $('input[name=\"ctl00$ContentPlaceHolder1$wuc_panier$TB_Votre_Code\"]', responseHTML).hasClass('ipt-error');\r\n\r\n        if (invalidCode) {\r\n            savings = 0.00;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bouxavenue": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.order-value.js-total:eq(1)').text().replace(\/[^0-9.]\/g, ''));\r\n        var newTotal = parseFloat($('.order-value.js-total', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = 0.00;\r\n\r\n        if (oldTotal > newTotal){\r\n             savings = parseFloat($('.value:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    },\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var newCurrency = currency;\r\n        var locale = localeMapping.US;\r\n        var selector = $('img[alt=\"Bouxavenue\"]').attr('class');\r\n\r\n        if (selector.match('gb')) {\r\n            newCurrency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        } else if (selector.match(\/(de|fr)\/g)) {\r\n            newCurrency = 'EUR';\r\n            locale = selector.match(\/(de)\/g) ? localeMapping.DE : localeMapping.FR;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"bowflex": "var ExternalProvider = {\r\n  oldPrice: 0.00,\r\n  isCartPage: false,\r\n  _injectPiggyElements: function () {\r\n    var cartCouponBoxAction = $('#cart-items-form').attr('action');\r\n    var checkoutCouponBoxAction = $('#dwfrm_billing').attr('action');\r\n\r\n    var checkoutApplyCouponUrl = 'https:\/\/www.bowflex.com\/on\/demandware.store\/Sites-bowflex-Site\/en_US\/Cart-AddCouponJson?couponCode=CLAIMCODE&format=ajax';\r\n\r\n    this.isCartPage = cartCouponBoxAction !== undefined && cartCouponBoxAction !== '' && cartCouponBoxAction !== null;\r\n\r\n    var applyCouponUrlElement = $('#___jpApplyCouponUrl');\r\n    var clearCouponUrlElement = $('#___jpClearCouponUrl');\r\n    var responseTypeElement = $('#___jpResponseType');\r\n\r\n    if (!applyCouponUrlElement.length) {\r\n      applyCouponUrlElement = document.createElement('input');\r\n      applyCouponUrlElement.id = '___jpApplyCouponUrl';\r\n      applyCouponUrlElement.style.display = 'none';\r\n      applyCouponUrlElement.value = this.isCartPage ? cartCouponBoxAction : checkoutApplyCouponUrl;\r\n      (document.body || document.head || document.documentElement).appendChild(applyCouponUrlElement);\r\n\r\n      applyCouponUrlElement = $('#___jpApplyCouponUrl');\r\n      applyCouponUrlElement.attr('value', this.isCartPage ? cartCouponBoxAction : checkoutApplyCouponUrl);\r\n    }\r\n\r\n    if (!clearCouponUrlElement.length) {\r\n      clearCouponUrlElement = document.createElement('input');\r\n      clearCouponUrlElement.id = '___jpClearCouponUrl';\r\n      clearCouponUrlElement.type = 'hidden';\r\n      clearCouponUrlElement.style.display = 'none';\r\n      clearCouponUrlElement.value = this.isCartPage ? cartCouponBoxAction : checkoutCouponBoxAction;\r\n      (document.body || document.head || document.documentElement).appendChild(clearCouponUrlElement);\r\n\r\n      clearCouponUrlElement = $('#___jpClearCouponUrl');\r\n      clearCouponUrlElement.attr('value', this.isCartPage ? cartCouponBoxAction : checkoutCouponBoxAction);\r\n    }\r\n\r\n    if (!responseTypeElement.length) {\r\n      responseTypeElement = document.createElement('input');\r\n      responseTypeElement.id = '___jpResponseType';\r\n      responseTypeElement.type = 'hidden';\r\n      responseTypeElement.style.display = 'none';\r\n      responseTypeElement.value = this.isCartPage ? 'html' : 'json';\r\n      (document.body || document.head || document.documentElement).appendChild(responseTypeElement);\r\n\r\n      responseTypeElement = $('#___jpResponseType');\r\n      responseTypeElement.attr('value', this.isCartPage ? 'html' : 'json');\r\n    }\r\n  },\r\n  init: function () {\r\n    this.oldPrice = parseFloat($('tr.order-total td.white-space-nowrap').text().replace(\/[^0-9.]\/g, ''));\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type !== 'applyCouponUrl' || !this.isCartPage) return false;\r\n\r\n    return {\r\n      dwfrm_cart_couponCode: code,\r\n      dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon'\r\n    };\r\n  },\r\n  parse: function (response, status, $xhr, code) {\r\n    var savings = 0.00;\r\n    var newVal = 0.00;\r\n    var oldVal = 0.00;\r\n    var shipping = 0.00;\r\n\r\n    var success = this.isCartPage ? $('.cartcoupon .value', responseHTML).text().indexOf(code) >= 0 : false;\r\n    if (this.isCartPage && success) {\r\n      var responseHTML = $.parseHTML(response.responseText);\r\n      var newPrice = parseFloat($('tr.order-total td.white-space-nowrap', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n      var discount = parseFloat($('.value:contains(\"-$\"):eq(0)', responseHTML).text().replace(\/[^0-9.]\/g, ''))\r\n      shipping = Math.abs(parseFloat($('.value:contains(\"-$\"):eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, '')));\r\n      shipping = Number.isNaN(shipping) ? 0.00 : shipping;\r\n      savings = (newPrice > 0.00) && (newPrice !== this.oldPrice)\r\n        ? discount + shipping\r\n        : 0.00;\r\n    } else {\r\n      $.ajax({\r\n        url: 'https:\/\/www.bowflex.com\/update-summary',\r\n        type: 'GET',\r\n        success: function (result) {\r\n          shipping = Math.abs(parseFloat($('.order-shipping-discount.discount', result).text().replace(\/[^0-9.]\/g, '')));\r\n          shipping = Number.isNaN(shipping) ? 0.00 : shipping;\r\n          oldVal = parseFloat($('.order-subtotal').text().replace(\/[^0-9.]\/g, ''));\r\n          newVal = parseFloat($('.order-subtotal', result).text().replace(\/[^0-9.]\/g, ''));\r\n          savings = (oldVal - newVal) + shipping;\r\n\r\n        },\r\n        async: false\r\n      });\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (this.isCartPage) {\r\n      $('#dwfrm_cart_couponCode').val(bestCode);\r\n      $('#cart-items-form').submit();\r\n    } else {\r\n      $('#dwfrm_billing_couponCode').val(bestCode);\r\n      $('#dwfrm_billing').submit();\r\n    }\r\n  }\r\n};\r\nExternalProvider._injectPiggyElements();",
	"boxed": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = response.data.checkoutInfo.pricingInfo.promoDiscount;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"boxerman": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.column--total-price:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"sVoucher\"]').val(bestCode);\r\n      $('.add-voucher--button').click();\r\n    }\r\n  }\r\n};",
	"boxlunch": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    cartTotal: 0,\r\n\r\n    init: function () {\r\n        this.cartTotal = parseFloat($('.orderTotal').text().replace(this.nonPriceRegex, ''));\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code){\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = this.cartTotal - parseFloat($('.orderTotal', responseHTML).text().replace(this.nonPriceRegex, ''));\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function(bestCode){\r\n        if(bestCode) {\r\n            $('#dwfrm_cart_couponCode, #dwfrm_billing_couponCode').val(bestCode);\r\n            $('#add-coupon, [name=\"dwfrm_cart_addCoupon\"]').click();\r\n        }\r\n    }\r\n};",
	"boxlunch.mobile": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    cartTotal: 0,\r\n\r\n    init: function () {\r\n        this.cartTotal = parseFloat($piggyJq('.orderTotal').text().replace(this.nonPriceRegex, ''));\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code){\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n        var savings = this.cartTotal - parseFloat($piggyJq('.orderTotal', responseHTML).text().replace(this.nonPriceRegex, ''));\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function(bestCode){\r\n        if(bestCode) {\r\n            $piggyJq('#dwfrm_cart_couponCode, #dwfrm_billing_couponCode').val(bestCode);\r\n            $piggyJq('#add-coupon, [name=\"dwfrm_cart_addCoupon\"]').click();\r\n        }\r\n    }\r\n};",
	"hardtailforever": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"brands4friendsde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#t-voucher-amount:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"brayola": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.product__price .order-summary__small-text', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.product__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"breuninger": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = 'USD';\r\n        var selector = $('.kaufen-kosten-position__preis:eq(4)').text().replace(\/[0-9.,]\/g, '').trim();\r\n        var mainSelector = $('.shop-preis.shop-preis--schwarzpreis.produkt-preis__aktuell:eq(0)').text().replace(\/[0-9.,]\/g, '').trim();\r\n\r\n        if ((selector === '\u20ac') || (mainSelector === '\u20ac')) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.DE;\r\n        } else if ((selector === '\u00a3') || (mainSelector === '\u00a3')) {\r\n            newCurrency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.warenkorb.gutschein.betrag.replace(\/[^0-9]\/g, '') \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"briantracy": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            $('#ctl00_body_txtCoupon').val(code);\r\n            $('form#aspnetForm').append('<input type=\"hidden\" name=\"ctl00$body$btnSubmit\" value=\"Continue\" \/>');\r\n\r\n            return $('form#aspnetForm').serializeArray();\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var savings = $('div.box-in.totals > p:contains(\"-\")', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#ctl00_body_txtCoupon').val(bestCode);\r\n            $('#aspnetForm').submit();\r\n        }\r\n    }\r\n};",
	"brickhousesecurity": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    let savings = Math.abs(parseFloat(response[0].discounts[0].discountedAmount));\r\n    let couponId = response[0].coupons[0].id;\r\n    if (couponId) {\r\n      $.ajax({ url: '\/cart.php?action=removecoupon&couponid=' + couponId, async: false });\r\n    }\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bricoprive": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart_discount_price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        $.ajax({\r\n            url: $('.cart_discount_delete a', responseHTML).attr('href'),\r\n            mode: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bricstore": "var ExternalProvider = {\r\n    userId: '',\r\n\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"userid\", window.wc_cart_params.apply_coupon_nonce);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('userid');\r\n\r\n        this.userId = value;\r\n        $('body').removeAttr(name);\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'resultUrl') this.ajaxSettings(null);\r\n    },\r\n    ajaxSettings: function (type) {\r\n        $.ajaxSettings.beforeSend = function (xhr) {\r\n            xhr.setRequestHeader('X-Requested-With', {\r\n                toString: function () {\r\n                    return type;\r\n                }\r\n            });\r\n        };\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.bfx-total-discount', responseHTML).text().replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"brightechshop": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').prop('disabled', false).click();\r\n        }\r\n    }\r\n};",
	"brigittehachenburgde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML($.parseJSON(response).additionalInfos);\r\n    var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"brille24": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.valueVoucher .price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"brilliancenewyork": "var ExternalProvider = {\r\n  isCartPage: function () {\r\n    return \/cart\/.test(location.href);\r\n  },\r\n  prepare: function (type, code) {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n    var jpSecurityId = this.isCartPage() ? 'wc_cart_params.apply_coupon_nonce' : 'wc_checkout_params.apply_coupon_nonce';\r\n\r\n    scriptContent += 'body.setAttribute(\"jp_security_id\",' + jpSecurityId + ')';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var data = [];\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        security: $('body').attr('jp_security_id'),\r\n        coupon_code: code\r\n      };\r\n    } else if (type === 'resultUrl') {\r\n      data = {\r\n        qty: $('.input-text.qty.text').attr(\"name\").val(),\r\n        coupon_code: '',\r\n        'woocommerce-cart-nonce': $('#woocommerce-cart-nonce').val(),\r\n        _wp_http_referer: '\/cart\/'\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-discount > td', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"brissi": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"britishcondoms": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-total-value:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && this.isCartPage()) {\r\n      $('#couponcode').val(bestCode);\r\n      $('input[value=\"Apply\"]').click();\r\n    } else if (bestCode) {\r\n      location.reload();\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return \/cart.php\/.test(location.href);\r\n  }\r\n};",
	"britishcornershop": "var ExternalProvider = {\r\n  prepare: function (step, code) {\r\n    if (step === 'applyCouponUrl') {\r\n      let data = this.serializeFormData($('#form'));\r\n      data.promotionalcode = code;\r\n      return data;\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.data li:eq(2) .total span.right', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    (bestCode) ? $('#promotionalcode').val(bestCode) : $('#promotionalcode').val('');\r\n  },\r\n  serializeFormData: function (form) {\r\n    let formArray = form.serializeArray();\r\n    let formData = {}\r\n    formArray.forEach(data => { formData[data.name] = data.value });\r\n    return formData;\r\n  }\r\n};",
	"brooksbrothers": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.order-discount .price-data .price-value', responseHTML).text().replace(\/[^0-9.]\/g, '').toString();\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        $('#dwfrm_cart_couponCode').val(bestCode);\r\n        $('button[name=\"dwfrm_cart_addCoupon\"]').removeAttr('disabled');\r\n        $('button[name=\"dwfrm_cart_addCoupon\"]').click();\r\n    }\r\n};",
	"brookstone": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#__jpCouponUrl');\r\n    var applyUrl = this.isCartPage() ? $('form[name=\"dwfrm_cart\"]').attr('action') : $('#dwfrm_billing').attr('action');\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var o = {};\r\n      var a = this.serializeArray();\r\n\r\n      $.each(a, function () {\r\n        if (o[this.name] !== undefined) {\r\n          if (!o[this.name].push) {\r\n            o[this.name] = [o[this.name]];\r\n          }\r\n\r\n          o[this.name].push(this.value || '');\r\n        } else {\r\n          o[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return o;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action !== 'applyCouponUrl') return false;\r\n\r\n    var requestData = {};\r\n\r\n    if (this.isCartPage()) {\r\n      requestData = {\r\n        dwfrm_cart_couponCode: code,\r\n        dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon'\r\n      };\r\n    } else {\r\n      requestData = $('#dwfrm_billing').serializeObject();\r\n      requestData.dwfrm_billing_couponCode = code;\r\n      requestData.dwfrm_billing_applyCoupon = 'Apply';\r\n    }\r\n\r\n    return requestData;\r\n  },\r\n  isCartPage: function () {\r\n    return $('#dwfrm_billing').length === 0;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldOrderTotal = parseFloat($('.order-totals-value:last').text().replace(\/[^0-9|.]\/g, ''));\r\n    var oldTax = parseFloat($('.order-sales-tax span.order-totals-value').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    oldTax = Number.isNaN(oldTax) ? 0.00 : oldTax;\r\n    oldOrderTotal -= oldTax;\r\n\r\n    var newOrderTotal = parseFloat($('.order-totals-value:last', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTax = parseFloat($('.order-sales-tax span.order-totals-value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    newTax = Number.isNaN(newTax) ? 0.00 : newTax;\r\n    newOrderTotal -= newTax;\r\n\r\n    var savings = oldOrderTotal - newOrderTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#dwfrm_cart_couponCode, #dwfrm_billing_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"brooktaverner": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount-total .price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            window.location.href = 'javascript:discountForm.submit(false)';\r\n        }\r\n    }\r\n};",
	"brownells": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl' || type === 'clearCouponUrl') {\r\n            data = { promoCode: code };\r\n        }\r\n\r\n        return JSON.stringify(data);\r\n    },\r\n    parse: function (response) {\r\n        var _response = response.d || '{}';\r\n\r\n        _response = JSON.parse(_response);\r\n        _response = JSON.parse(_response.PromoCoupons)[0];\r\n\r\n        var savings = parseFloat(_response.TotalPromoDiscount.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        var clickEvent = new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        });\r\n        if (bestCode) {\r\n            if (!$('#txtCouponPromo').length) {\r\n                $('#txtPromoCode').val(bestCode);\r\n                $('#ctl00_ContentPlaceHolderColMain_btnApplyPromoDiscount').get(0).dispatchEvent(clickEvent);\r\n            } else {\r\n                $('#txtCouponPromo').val(bestCode);\r\n                $('#btnCouponPromo').get(0).dispatchEvent(clickEvent);\r\n            }\r\n        }\r\n    }\r\n};",
	"brownsfashion": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n        var newCurrency;\r\n        var selector = location.pathname;\r\n\r\n        if (selector.match('\/uk\/')) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector.match('\/de\/') || selector.match('\/fr\/')) {\r\n            locale = selector.match('\/de\/') ? localeMapping.DE : localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        } else {\r\n            locale = localeMapping.US;\r\n            newCurrency = currency;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.savings;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"brundobader": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.js-articleSum.list-value.list-sale:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"btshop": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#spanCouponDiscount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon-text').val(bestCode);\r\n      $('#savecoupon').click();\r\n    }\r\n  }\r\n};",
	"bucadibeppo": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#bVendorDiscount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"budgetair": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var url = '';\r\n        var i = 0;\r\n\r\n        for (i = 0; i < Object.keys(sessionStorage).length; i++) {\r\n            var key = Object.keys(sessionStorage)[i];\r\n\r\n            if (key.match('contactdata')) {\r\n                url = JSON.parse(sessionStorage[key])._links.self.href;\r\n            }\r\n        }\r\n\r\n        $('body').attr('apply', url.replace('contact', 'voucherdiscountcodes') + '?DiscountCode=CLAIMCODE');\r\n        $('body').attr('result', url.replace('contact', 'costs'));\r\n    },\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('.price__main').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = response.Costs[0].Total;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"budgetpetcare": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = this.isCheckoutPage() ? 'https:\/\/www.budgetpetcare.com\/payment-proceed-gtw.aspx' : 'https:\/\/www.budgetpetcare.com\/My_Cart.aspx';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    function serializeObject(a) {\r\n      var o = {};\r\n\r\n      $.each(a, function () {\r\n        o[this.name] = this.value || '';\r\n      });\r\n\r\n      return o;\r\n    }\r\n\r\n    var formDataArray = $('#form1').serializeArray();\r\n    var data = serializeObject(formDataArray);\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      if (this.isCheckoutPage()) {\r\n        data.ctl00$ScriptManager1 = 'ctl00$ContentPlaceHolder1$Cart$updCart|ctl00$ContentPlaceHolder1$Cart$Cmd_Calc';\r\n        data.ctl00$ContentPlaceHolder1$Cart$TxtCoupon = code;\r\n        data.ctl00$ContentPlaceHolder1$Cart$Cmd_Calc = 'Apply';\r\n      } else {\r\n        data.ctl00$ContentPlaceHolder1$TxtCoupon = code;\r\n        data.ctl00$ContentPlaceHolder1$rptLoyaltyCoupons$ctl00$hdnCoupon = code;\r\n        data.ctl00$ContentPlaceHolder1$btnCouponApply = 'Apply';\r\n      }\r\n\r\n      return data;\r\n    } else if (type === 'clearCouponUrl') {\r\n      if (this.isCheckoutPage()) {\r\n        data.ctl00$ContentPlaceHolder1$Cart$TxtCoupon = '';\r\n        data.ctl00$ContentPlaceHolder1$Cart$Cmd_Calc = 'Apply';\r\n      } else {\r\n        data.ctl00$ContentPlaceHolder1$TxtCoupon = '';\r\n        data.ctl00$ContentPlaceHolder1$rptLoyaltyCoupons$ctl00$hdnCoupon = '';\r\n        data.ctl00$ContentPlaceHolder1$btnCouponApply = 'Apply';\r\n      }\r\n\r\n      return data;\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHtml = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('#ContentPlaceHolder1_Cart_lblTotal, #ContentPlaceHolder1_Lbl_Total').text().replace(\/[^.0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('#ContentPlaceHolder1_Cart_lblTotal, #ContentPlaceHolder1_Lbl_Total', responseHtml).text().replace(\/[^.0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $(\"#ContentPlaceHolder1_TxtCoupon, #ContentPlaceHolder1_Cart_TxtCoupon\").val(bestCode);\r\n      $(\"#ContentPlaceHolder1_btnCouponApply, #ContentPlaceHolder1_Cart_Cmd_Calc\").click();\r\n    }\r\n  },\r\n  isCheckoutPage: function () {\r\n    return \/payment-proceed-gtw.aspx\/.test(location.href);\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"budgetpetworld": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        data['__VIEWSTATE'] = $('#__VIEWSTATE').val();\r\n        data['__VIEWSTATEGENERATOR'] = $('#__VIEWSTATEGENERATOR').val();\r\n        data['__EVENTVALIDATION'] = $('#__EVENTVALIDATION').val();\r\n\r\n        if ($('#cphCenter_TxtCoupon').length) {\r\n            data['ctl00$cphCenter$TxtCoupon'] = code;\r\n            data['ctl00$cphCenter$lnkUpdate'] = 'Apply';\r\n        }\r\n        else if ($('#cphCenter_cart1_TxtCoupon').length) {\r\n            data['ctl00$cphCenter$cart1$TxtCoupon'] = code;\r\n            data['ctl00$cphCenter$cart1$lnkUpdate'] = 'Apply';\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings;\r\n\r\n        if ($('#cphCenter_TxtCoupon').length) {\r\n            var oldPrice = parseFloat($('.cart_summary_total_right').text().replace(\/[^0-9|\\.]\/g, ''));\r\n            var newPrice = parseFloat($('.cart_summary_total_right', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n            savings = oldPrice - newPrice;\r\n        } else if ($('#cphCenter_cart1_TxtCoupon').length) {\r\n            savings = parseFloat($('#cphCenter_cart1_Lbl_Cpn_Disc', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($('#cphCenter_TxtCoupon').length) {\r\n                $('#cphCenter_TxtCoupon').val(bestCode);\r\n                $('#cphCenter_lnkUpdate').click();\r\n            } else if ($('#cphCenter_cart1_TxtCoupon').length) {\r\n                $('#cphCenter_cart1_TxtCoupon').val(bestCode);\r\n                $('#cphCenter_cart1_lnkUpdate').click();\r\n            }\r\n        }\r\n    }\r\n};",
	"buecher": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.order-total td').last().text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('.order-total td', responseHTML).last().text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n    var savings = parseFloat(oldTotal - newTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"buffalo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var parseHTML = $.parseHTML(response.content);\r\n        var savings = parseFloat($('.pay:contains(-)', parseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon').val(bestCode);\r\n            $('.js-smAddVoucher').click();\r\n        }\r\n    }\r\n};",
	"buffalojeans": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.total-discounts .price', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"bugatchi": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"build": "var ExternalProvider = {\r\n  isCouponApplied: function () {\r\n    return $(\".js-coupon-remove\").length > 0;\r\n  },\r\n  beforeInit: function () {\r\n    if (this.isCouponApplied()) {\r\n      return new Promise((resolve) => {\t\r\n        let retries = 0;\t\r\n        const interval = setInterval(function () {\t\r\n          retries++;\t\r\n          if (ExternalProvider.isCouponApplied()) {\r\n            $(\".js-coupon-remove\").click();\r\n          }\r\n          if (!ExternalProvider.isCouponApplied() && retries < 3) {\r\n            clearInterval(interval);\t\r\n            resolve();\r\n          } else if (retries >= 3) {\t\r\n            clearInterval(interval);\r\n            resolve();\t\r\n          }\r\n        }, 2000);\t\r\n      })\r\n    }\r\n  \r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.couponTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"buildabear": "var ExternalProvider = {\r\n    queueName: '_cfq',\r\n\r\n    retrieveWindowVariable: function (name, variable) {\r\n        var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\r\n        var script = document.createElement('script');\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('tmp_' + name);\r\n\r\n        $('body').attr('tmp_' + name, null);\r\n\r\n        return value;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        if (!response.alternatePayment || !response.alternatePayment.promotions || !response.alternatePayment.promotions.length) {\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n\r\n        var codeFound = false;\r\n        var savings = 0.00;\r\n\r\n        codeFound = response.alternatePayment.promotions.find(function (v) {\r\n            return v.couponCode.toLowerCase() === code.toLowerCase();\r\n        });\r\n\r\n        if (codeFound) {\r\n            savings = parseFloat(codeFound.balance);\r\n\r\n            var queue = $(document).queue(this.queueName);\r\n\r\n            queue.unshift(function (next) {\r\n                $.ajax({\r\n                    type: 'POST',\r\n                    url: '\/shopping\/service?service=removeCouponCode',\r\n                    data: JSON.stringify({\r\n                        id: codeFound.id\r\n                    }),\r\n                    beforeSend: function (xhrObj) {\r\n                        xhrObj.setRequestHeader('Content-Type', 'application\/json');\r\n                        xhrObj.setRequestHeader('Accept', '*\/*');\r\n                        xhrObj.setRequestHeader('X-NewRelic-ID', ExternalProvider.retrieveWindowVariable('X-NewRelic-ID', 'NREUM.loader_config.xpid'));\r\n                    },\r\n                    cache: false,\r\n                    dataType: 'json',\r\n                    success: function () {\r\n                        next();\r\n                    },\r\n                    error: function () {\r\n                        next();\r\n                    }\r\n                });\r\n            });\r\n\r\n            $(document).queue(this.queueName, queue);\r\n        }\r\n\r\n        return {\r\n            success: !!codeFound,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"buildabearuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.discount span.value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"buildasign": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('#cartTotal').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('#cartTotal', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = parseFloat(oldTotal - newTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"buildingsuppliesonline": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(-)', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"bulbhead": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestSavings, bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"bulkapothecary": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-total-value span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bulkofficesupply": "var ExternalProvider = {\r\n  serializeObjectPolyfill: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n      for (var i = 0; i < data.length; i++) {\r\n        object[data[i]['name']] = data[i]['value'];\r\n      }\r\n\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    var formData = $('#aspnetForm').serializeObject();\r\n    formData['ctl00$MainContentHolder$btnAddCoupon.x'] = 135;\r\n    formData['ctl00$MainContentHolder$btnAddCoupon.y'] = 18;\r\n    formData.ctl00$MainContentHolder$CouponField = code;\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#ctl00_MainContentHolder_lblDiscounts', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    if ($('.errorline.error', responseHTML).length && $('.errorline.error', responseHTML).text() === 'Coupon code does not apply to this order.') {\r\n      savings = 0;\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#ctl00_MainContentHolder_CouponField').val(bestCode);\r\n      $('#ctl00_MainContentHolder_btnAddCoupon').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider.serializeObjectPolyfill();",
	"bulkpowders": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var checkoutConfigString = response.substring(response.indexOf('{\"payment\":'));\r\n    checkoutConfigString = checkoutConfigString.substring(0, checkoutConfigString.indexOf(']};') + 2);\r\n    var checkoutConfigObject = JSON.parse(checkoutConfigString);\r\n    var savings = Math.abs(checkoutConfigObject.totalsData.discount_amount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"bulkpowdersfr": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"Checkout\", window.checkoutConfig.quoteData.entity_id);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var Checkout = $('body').attr('Checkout');\r\n        var ApplyUrlInput = $('#___jpApplyUrl');\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('input');\r\n            ApplyUrlInput.id = '___jpApplyUrl';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        ApplyUrlInput.attr('value', Checkout);\r\n    },\r\n    parse: function (response) {\r\n        var savings = Math.abs(response.totals.base_discount_amount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"bulletproof": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]')[0].click();\r\n        }\r\n    }\r\n};",
	"bumbleandbumble": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary-content__value--discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) location.reload();\r\n    }\r\n\r\n};",
	"burpee": "var lastCode;\r\n\r\nvar ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n\r\n        var result;\r\n\t\r\n        var responseHTML = $.parseHTML(response),\r\n            promoError = $('#promoError', responseHTML).text().trim();\r\n\t\t\r\n        if (promoError == '') {\r\n\r\n            var discount = Number($('#cart > div.panel-container.alt > div.panel-content.clearfix > div.wide_5 > div.box_4-content-wrapper > div > table > tbody > tr.discount > td.total-col-2 > span', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\t\t\t\r\n\t\t\tif (discount > 0) {\r\n\r\n\t\t\t\tlastCode = code;\r\n\r\n\t\t\t\tresult = {\r\n\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\tsavings: discount\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tsuccess: false,\r\n\t\t\t\t\tsavings: 0.00\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n            return result;\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSaving){\r\n\r\n\t\tif (bestCode === lastCode) {\r\n\r\n\t\t\tlocation.reload();\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\t$('#promo-code').val(bestCode);\r\n\t\t\t$('#apply-code > span > span').click();\r\n\r\n\t\t}\r\n    }\r\n}",
	"burtsbeesbaby": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n      $('#discount-code').val(code);\r\n      $('#discount-code').get(0).dispatchEvent(changeEvent);\r\n      $('.action.action-apply').click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.action.action-cancel').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 3000);\r\n          }\r\n\r\n          waited++;\r\n        }, 80);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.price:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"butlersde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat($('.cart--c__discount-value', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"buyagift": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.TotalDiscountPrice);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"buyautoparts": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.viewcart_product_price:contains(\"-\")', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#newcoupon').val(bestCode);\r\n            $('#CartApply').click();\r\n        }\r\n    }\r\n};",
	"buydig": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var originalSavings = parseFloat($('#spDiscount').text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = parseFloat($('#spDiscount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n       \r\n        return {\r\n            success: savings > originalSavings,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    \r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"cabelas": "var ExternalProvider = {\r\n\r\n    init: function () {\r\n        this._cartTotal = parseFloat($('.totalClass td:nth-child(3)').text().replace('$', '').replace(',', ''));\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var hasPromo = response.payments.hasPromo;\r\n        var newTotal = parseFloat(response.summary.grandTotal.fmt.replace('$', '').replace(',', ''));\r\n        var savings = this._cartTotal - newTotal;\r\n\r\n        if (savings > 0 && hasPromo) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        $('#promoCode').val(bestCode);\r\n        $('#applyPromoButton').click();\r\n    }\r\n};",
	"cafebritt": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('.checkout-side-add span em', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('.total-price-val').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('.total-price-val', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings){\r\n        $.post('https:\/\/www.cafebritt.com\/order\/add_coupon\/0?ajax=1', {CouponCodeCode: bestCode, ajax: '1'}, function(){\r\n            location.reload();\r\n        })\r\n    }\r\n}",
	"cafepress": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        var clickEvent = new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        });\r\n\r\n        if (action === 'injectCoupon') {\r\n            $('input[name=\"promoGiftCard\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('input[name=\"promoGiftCard\"]').trigger('input').trigger('change');\r\n            $('#promoClear').get(0).dispatchEvent(clickEvent);\r\n        }\r\n\r\n        return null;\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 3) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 800);\r\n    },\r\n    parse: function () {\r\n        var savings = parseFloat($(\"#summaryBox .text-right:contains('-')\").text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#txtCoupon').val(bestCode);\r\n            $('#btnApplyCoupon').click();\r\n        }\r\n    }\r\n};",
	"calchamberstore": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#ctl00_cpholder_ordertotalctl_couponsavings', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"calendarclub": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.row.row--totalCost').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.row.row--totalCost', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"calendars": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var cartUrl = 'https:\/\/www.calendars.com\/checkout\/cart.jsp';\r\n    var checkoutUrl = 'https:\/\/www.calendars.com\/checkout\/billing.jsp';\r\n    var applyUrl = \/checkout\\\/cart.jsp\/.test(location.pathname) ? cartUrl : checkoutUrl;\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = \/checkout\\\/cart.jsp\/.test(location.pathname) ? parseFloat($('#cartSubTotalBox span:contains(\"($\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) : parseFloat($('#orderSummaryTable td:contains(\"($\")', responseHTML).text().split('($')[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#cartCouponCodeBox, #couponClaimCode').val(bestCode);\r\n      $('#applyCode, input[value=\"CLAIM COUPON\"]').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"callawayapparel": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('.ordertotal .value').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('.ordertotal .value', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"callawaygolfpreowned": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"calphalon": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#totalSavings', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"calvinkleinus": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cost.tommyRed.negativeValue.right', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#promoCode').val(bestCode);\r\n            $('#promoCode').find('+ button').click();\r\n        }\r\n    }\r\n};",
	"camaieu": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('strong', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var couponCode = $('.allAdvantages input', responseHTML).attr('data_code');\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.camaieu.fr\/cart\/vouchers\/removeAvantage?voucherCode=' + couponCode,\r\n            type: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"cambridgesatchel": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.payment-due').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.payment-due', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"camif": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.totals.discount.toString().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#coupon').get(0).dispatchEvent(changeEvent);\r\n\r\n            $('.c-coupon-form__wrapper button').click();\r\n        }\r\n    }\r\n};",
	"camper": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var url = window.location.pathname;\r\n        \r\n         if (url.match(\/(DE|FR)\/g)) {\r\n            currency = 'EUR';\r\n            locale = localeMapping[url.match(\/(DE|FR)\/g).toString()];\r\n        } else if (url.match(\/GB\/g)) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n         return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n};",
	"campmor": "var ExternalProvider = {\r\n    parseAmount: function(string) {\r\n        return parseFloat(string.replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n        var $response = $.parseHTML(response),\r\n            codeApplied = $('.promotion_used', $response),\r\n            selector = '#order_details td.total',\r\n            codeFound = false, currentAmt = 0, appliedAmt = 0;\r\n\r\n        codeApplied.each(function() {\r\n            if($('a', $(this)).text().toLowerCase().indexOf(code.toLowerCase()) !== -1) {\r\n                codeFound = true;\r\n            }\r\n        });\r\n\r\n        currentAmt = this.parseAmount($(selector).next('.price').text());\r\n        appliedAmt = this.parseAmount($(selector, $response).next('.price').text());\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: currentAmt - appliedAmt\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload(true);\r\n    }\r\n};",
	"campmor.mobile": "var ExternalProvider = {\r\n    $: window.$piggyJq,\r\n\r\n    parseAmount: function(string) {\r\n        return parseFloat(string.replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n        var $response = this.$.parseHTML(response),\r\n            codeApplied = this.$('.promotion_used', $response),\r\n            selector = '#order_details td.total',\r\n            codeFound = false, currentAmt = 0, appliedAmt = 0;\r\n\r\n        codeApplied.each(function() {\r\n            if(ExternalProvider.$('a', ExternalProvider.$(this)).text().toLowerCase().indexOf(code.toLowerCase()) !== -1) {\r\n                codeFound = true;\r\n            }\r\n        });\r\n\r\n        currentAmt = this.parseAmount(this.$(selector).next('.price').text());\r\n        appliedAmt = this.parseAmount(this.$(selector, $response).next('.price').text());\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: currentAmt - appliedAmt\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload(true);\r\n    }\r\n};",
	"canadapetcare": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var formAction = $('#form1').attr('action');\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = 'https:\/\/www.canadapetcare.com' + formAction + '';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                __EVENTTARGET: $('#__EVENTTARGET').val(),\r\n                __EVENTARGUMENT: $('#__EVENTARGUMENT').val(),\r\n                __LASTFOCUS: $('#__LASTFOCUS').val(),\r\n                __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n                __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n                __EVENTVALIDATION: $('#__EVENTVALIDATION').val(),\r\n                Top_Search: $('#Top_Search').val(),\r\n                ctl00$Banner$hdnPid: $('input[name=\"ctl00$Banner$hdnPid\"]').val(),\r\n                ctl00$Leftmenu$rptType$ctl00$hfTypeId: $('input[name=\"ctl00$Leftmenu$rptType$ctl00$hfTypeId\"]').val(),\r\n                ctl00$Leftmenu$rptType$ctl01$hfTypeId: $('input[name=\"ctl00$Leftmenu$rptType$ctl01$hfTypeId\"]').val(),\r\n                ctl00$Leftmenu$rptType$ctl02$hfTypeId: $('input[name=\"ctl00$Leftmenu$rptType$ctl02$hfTypeId\"]').val(),\r\n                ctl00$Leftmenu$rptType$ctl03$hfTypeId: $('input[name=\"ctl00$Leftmenu$rptType$ctl03$hfTypeId\"]').val(),\r\n                ctl00$Leftmenu$rptType$ctl04$hfTypeId: $('input[name=\"ctl00$Leftmenu$rptType$ctl04$hfTypeId\"]').val(),\r\n                ctl00$Leftmenu$rptType$ctl05$hfTypeId: $('input[name=\"ctl00$Leftmenu$rptType$ctl05$hfTypeId\"]').val(),\r\n                ctl00$Leftmenu$rptType1$ctl00$hfTypeId: $('input[name=\"ctl00$Leftmenu$rptType1$ctl00$hfTypeId\"]').val(),\r\n                ctl00$Leftmenu$rptType1$ctl01$hfTypeId: $('input[name=\"ctl00$Leftmenu$rptType1$ctl01$hfTypeId\"]').val(),\r\n                ctl00$Leftmenu$rptType1$ctl02$hfTypeId: $('input[name=\"ctl00$Leftmenu$rptType1$ctl02$hfTypeId\"]').val(),\r\n                ctl00$Leftmenu$rptType1$ctl03$hfTypeId: $('input[name=\"ctl00$Leftmenu$rptType1$ctl03$hfTypeId\"]').val(),\r\n                ctl00$Leftmenu$rptType1$ctl04$hfTypeId: $('input[name=\"ctl00$Leftmenu$rptType1$ctl04$hfTypeId\"]').val(),\r\n                ctl00$Leftmenu$rptType1$ctl05$hfTypeId: $('input[name=\"ctl00$Leftmenu$rptType1$ctl05$hfTypeId\"]').val(),\r\n                ctl00$ContentPlaceHolder1$hidCouponApplied: '0',\r\n                ctl00$ContentPlaceHolder1$rptOrder$ctl01$hdnAutoOrderId: $('input[name=\"ctl00$ContentPlaceHolder1$rptOrder$ctl01$hdnAutoOrderId\"]').val(),\r\n                ctl00$ContentPlaceHolder1$rptOrder$ctl01$hidUpgrade: $('input[name=\"ctl00$ContentPlaceHolder1$rptOrder$ctl01$hidUpgrade\"]').val(),\r\n                ctl00$ContentPlaceHolder1$rptOrder$ctl01$hidUPSP: $('input[name=\"ctl00$ContentPlaceHolder1$rptOrder$ctl01$hidUPSP\"]').val(),\r\n                ctl00$ContentPlaceHolder1$rptOrder$ctl01$hidSP: $('input[name=\"ctl00$ContentPlaceHolder1$rptOrder$ctl01$hidSP\"]').val(),\r\n                ctl00$ContentPlaceHolder1$rptOrder$ctl01$Qty: $('input[name=\"ctl00$ContentPlaceHolder1$rptOrder$ctl01$Qty\"]').val(),\r\n                ctl00$ContentPlaceHolder1$rptOrder$ctl01$ddlAuto: $('#ContentPlaceHolder1_rptOrder_ddlAuto_0').find(':selected').val(),\r\n                ctl00$ContentPlaceHolder1$TxtCoupon: code,\r\n                ctl00$ContentPlaceHolder1$imgbtnapply: 'Apply',\r\n                ctl00$ContentPlaceHolder1$rdbShippingType: $('#ContentPlaceHolder1_rdbShippingType_1').val(),\r\n                ctl00$Footer$txtFooterEmail: $('input[name=\"ctl00$Footer$txtFooterEmail\"]').val()\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#ContentPlaceHolder1_Lbl_Cpn_Disc:contains(\"$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestcode) {\r\n        if (bestcode) {\r\n            $('#ContentPlaceHolder1_TxtCoupon').val(bestcode);\r\n            $('#ContentPlaceHolder1_imgbtnapply').click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"candere": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var couponAmt = response.coupon_amount;\r\n        var discountIndex = couponAmt.indexOf('price\">$');\r\n        var discountSecIndex = couponAmt.indexOf('<\/span>');\r\n        var savings = parseFloat(couponAmt.substring(discountIndex, discountSecIndex).replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#apply-coupon-ajax').click();\r\n        }\r\n    }\r\n};",
	"canvaschamp": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"canvasondemand": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount-amount', responseHTML).text().replace(\/[$-]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"canvasondemand.mobile": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'removeInjectedCoupon') {\r\n            var clickEvent = new MouseEvent('click', { view: window, bubbles: true, cancelable: true });\r\n\r\n            if ($('.remove-coupon:visible').length) $('.remove-coupon').get(0).dispatchEvent(clickEvent);\r\n            else $('#cboxClose').get(0).dispatchEvent(clickEvent);\r\n        } else if (action === 'injectCoupon') {\r\n            $('.coupon input').val(code);\r\n\r\n            var keyChangeEvent = document.createEvent('KeyboardEvent');\r\n\r\n            keyChangeEvent.initKeyboardEvent('change', true, true);\r\n            $('.coupon input').get(0).dispatchEvent(keyChangeEvent);\r\n            $('.apply-code').click();\r\n        } else {\r\n            return false;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var actionTime;\r\n\r\n        if (step === 'injectCoupon') {\r\n            actionTime = setInterval(function () {\r\n                counter += 1;\r\n\r\n                if ($('.remove-coupon:visible').length || $('#cboxContent:visible').length || counter > 100) {\r\n                    clearInterval(actionTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        } else if (step === 'removeInjectedCoupon') {\r\n            actionTime = setInterval(function () {\r\n                counter += 1;\r\n\r\n                if ((!$('.remove-coupon:visible').length && !$('#cboxContent:visible').length) || counter > 100) {\r\n                    clearInterval(actionTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat($('.discount').text().replace(\/[$-]\/g, ''));\r\n\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        var clickEvent = new MouseEvent('click', { view: window, bubbles: true, cancelable: true });\r\n\r\n        $('#cboxClose').get(0).dispatchEvent(clickEvent);\r\n    }\r\n};",
	"canvasonsale": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseXML = $.parseXML(response);\r\n        var responseHTML = $.parseHTML($('update[id*=\"shoppingcartForm:data\"]', responseXML).text());\r\n        var savings = parseFloat($('.-not-striped.-bigger.-bottom:contains(\"' + code.toUpperCase() + '\") td', responseHTML).last().text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"canvaspeople": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.ReviewCart_Section.html);\r\n    var newTotal = parseFloat($('.value.total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var oldTotal = parseFloat($('.value.total').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"canvasworld": "var ExternalProvider = {\r\n\r\n    prepare: function(requestType,code){\r\n        if(requestType == 'applyCouponUrl') {\r\n            var payload = {};\r\n            $(\"input[name*='qty']\").each(function(){\r\n                payload[$(this).attr('name')] = $(this).val();\r\n            });\r\n            payload['action'] = 'set_discount';\r\n            payload['value'] = code;\r\n            payload['is_sample_only'] = '';\r\n            payload['is_reorder_only'] = '';\r\n            payload['force'] = false;\r\n            return payload;\r\n        }\r\n    },\r\n\r\n    parse: function(response,status,$xhr,code){\r\n            var responseHTML = $.parseHTML(response)\r\n            var oldPrice = $('.totals_2:last-child').text().replace(\/[^0-9|\\.]\/g,'')\r\n            var newPrice = $('.totals_2:last-child', responseHTML).text().replace(\/[^0-9|\\.]\/g,'')\r\n            var discount = parseFloat(oldPrice) - parseFloat(newPrice);\r\n            if(discount){\r\n                return{\r\n                    success:true,\r\n                    savings: discount\r\n                }\r\n            }\r\n            return{\r\n                success:false,\r\n                savings:0.00\r\n            }\r\n    },\r\n\r\n    complete: function(bestCode,bestSavings){\r\n        location.reload();\r\n    }\r\n    \r\n}",
	"canvasworldmobile": "var ExternalProvider = {\r\n\r\n    prepare: function(requestType,code){\r\n        if(requestType == 'applyCouponUrl') {\r\n            var payload = {};\r\n            $(\"input[name*='qty']\").each(function(){\r\n                payload[$(this).attr('name')] = $(this).val();\r\n            });\r\n            payload['action'] = 'set_discount';\r\n            payload['value'] = code;\r\n            payload['is_sample_only'] = '';\r\n            payload['is_reorder_only'] = '';\r\n            payload['force'] = false;\r\n            return payload;\r\n        }\r\n    },\r\n\r\n    parse: function(response,status,$xhr,code){\r\n            var responseHTML = $.parseHTML(response)\r\n            var oldPrice = $('#total_dollar_amt').text().replace(\/[^0-9|\\.]\/g,'')\r\n            var newPrice = $('#total_dollar_amt', responseHTML).text().replace(\/[^0-9|\\.]\/g,'')\r\n            var discount = parseFloat(oldPrice) - parseFloat(newPrice);\r\n            if(discount){\r\n                return{\r\n                    success:true,\r\n                    savings: discount\r\n                }\r\n            }\r\n            return{\r\n                success:false,\r\n                savings:0.00\r\n            }\r\n    },\r\n\r\n    complete: function(bestCode,bestSavings){\r\n        location.reload();\r\n    }\r\n    \r\n}",
	"cardfactory": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.Result.Discount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"cardpool": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = Math.abs(response.promoCodeSavings);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"cardstore": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var data = JSON.parse(response);\r\n        var savings = parseFloat(data.orderSummaryDisplayModel.totalPromo.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        location.reload(true);\r\n    }\r\n};",
	"carhartt": "var ExternalProvider = {\r\n  oldTotal: parseFloat($('#estimated-total').text().replace(\/[^0-9|\\.]\/g, '')),\r\n  serializeObjectPolyfill: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n      for (var i = 0; i < data.length; i++){\r\n          object[data[i]['name']] = data[i]['value'];\r\n      }\r\n      \r\n      return object;\r\n    };\r\n  },\r\n  init: function () {\r\n    if ($('#applied-promo-code .promo-code').length) {\r\n      $('input[name=\"taskType\"]').val(\"R\");\r\n      var formData = $('#promo-code-form').find('form').serialize();\r\n      jQuery.ajaxSetup({ async: false });\r\n      $.get('https:\/\/www.carhartt.com\/PromotionCodeManage?' + formData, function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        ExternalProvider.oldTotal = parseFloat($('#estimated-total', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n      });\r\n    }\r\n  },\r\n  prepare: function (action, code) {\r\n    var formData = $('#promo-code-form').find('form').serializeObject();\r\n    formData.taskType = \"A\";\r\n    formData.promoCode = code;\r\n\r\n    if (action === \"clearCouponUrl\") {\r\n      formData.taskType = \"R\";\r\n    }\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var newTotal = parseFloat($('#estimated-total', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.serializeObjectPolyfill();",
	"carid": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = $('.item .price.red-light').text().replace(\/[^0-9|\\.]\/g, '');\r\n        var newTotal = $('.item .price.red-light', responseHTML).text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"cariloha": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = Math.abs(response.totals.discount_amount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"entityId\", window.checkoutConfig.quoteData.entity_id);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n    $('<input>').attr({\r\n      type: 'hidden',\r\n      id: 'jp_entity',\r\n      value: $('body').attr('entityid')\r\n    }).appendTo('body');\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"carloh": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.panel--td.column--total-price.block:contains(\"-\"):eq(0)', responseHTML).text().replace(\/,\/g, '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.add-voucher--field').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        }\r\n    }\r\n};",
	"carolinarustica": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#shopping-cart-totals-table tbody tr > td:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"carolsdaughter": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.value:contains(\"-$\") ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"carolynpollack": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.subtotal', responseHTML).filter(function(el){return $(this).html().indexOf('Discount:') > -1}).next('.subtotal');\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"carolynpollackjewelry": "var ExternalProvider = {\r\n    parse: function(response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.subtotal', responseHTML).filter(function(el){return $(this).html().indexOf('Discount:') > -1}).next('.subtotal');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"carouselchecks": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart_item_subtotal:contains(-$)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n\r\n      var clickEvent = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n\r\n      $('a[onclick=\"update();\"]').get(0).dispatchEvent(clickEvent);\r\n    }\r\n  }\r\n};",
	"carsondellosa": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.Products[\"0\"].DiscountedPrice.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"carsons": "var ExternalProvider = {\r\n\tbasketTotal: 0.00,\r\n    init: function()\r\n    {\r\n        this.basketTotal = parseFloat($('.orderTotal').text().replace(\/[^0-9|\\.]\/g, ''))\r\n    },\r\n\tparse: function(response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response.responseText);\r\n        var oldPrice = this.basketTotal,\r\n\t\tnewPrice = parseFloat($('.orderTotal',responseHTML).text().replace(\/[^0-9|\\.]\/g, ''))     \r\n\t\tif (newPrice < oldPrice) {\r\n\t\t\tvar discount = oldPrice - newPrice\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: discount\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n    complete: function(bestCode, bestSavings) {\r\n        location.reload();\r\n    }\r\n}",
	"carters": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                'bubbles': true,\r\n                'cancelable': true\r\n            });\r\n\r\n            $('#dwfrm_cart_couponCode').get(0).dispatchEvent(changeEvent);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                'view': window,\r\n                'bubbles': true,\r\n                'cancelable': true\r\n            });\r\n\r\n            $('#add-coupon').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"cartridgemonkey": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#voucherValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#voucher-code').val(bestCode);\r\n            $('#apply-voucher').click();\r\n        }\r\n    }\r\n};",
	"cartridgepeople": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('td~td strong').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('td~td strong', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"caseable": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = Math.abs(response.discount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"case-mate": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat(response.cart.subtotal.replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat(response.cart.grand_total.replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var s = document.createElement('script');\r\n            var code = `jQuery('#discount-code, #coupon_code').val('`+ bestCode +`').trigger('change');jQuery('button[value=\"Apply Discount\"]').click();`;\r\n\r\n            s.type = 'text\/javascript';\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n};",
	"casetify": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.data.voucherDiscount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#voucher-text').val(bestCode);\r\n            var s = document.createElement('script');\r\n            s.type = 'text\/javascript';\r\n            var code = `$('#voucher-text').trigger('change');$('#submit-btn').click();`;\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n};",
	"cashmereboutique": "var ExternalProvider = {\r\n  securityParam: {},\r\n  initSecurity: function () {\r\n    var cart = $('script:contains(\"wc_cart_params\")').text();\r\n    var checkoutConfigString = cart.length ? cart : $('script:contains(\"wc_checkout_params\")').text();\r\n\r\n    checkoutConfigString = checkoutConfigString.substring(checkoutConfigString.indexOf('{\"ajax_url\":'));\r\n    checkoutConfigString = checkoutConfigString.substring(0, checkoutConfigString.indexOf('\"};') + 2);\r\n    this.securityParam = JSON.parse(checkoutConfigString);\r\n  },\r\n  prepare: function (action, code) {\r\n    var data = false;\r\n\r\n    if (action === 'applyCouponUrl' || action === 'clearCouponUrl') {\r\n      data = {\r\n        security: this.securityParam.apply_coupon_nonce,\r\n        coupon_code: code\r\n      };\r\n    } else if (action === 'resultUrl' && !this.isCartPage()) {\r\n      data = {\r\n        security: this.securityParam.update_order_review_nonce,\r\n        payment_method: 'stripe',\r\n        country: 'US',\r\n        state: '',\r\n        postcode: '',\r\n        city: '',\r\n        address: '',\r\n        address_2: '',\r\n        s_country: 'US',\r\n        s_state: '',\r\n        s_postcode: '',\r\n        s_city: '',\r\n        s_address: '',\r\n        s_address_2: '',\r\n        has_full_address: 'false',\r\n        post_data: 'billing_first_name=&billing_last_name=&billing_company=&billing_country=US&billing_address_1=&billing_address_2=&billing_city=&billing_state=&billing_postcode=&billing_phone=&billing_email=&account_password=&ship_to_different_address=1&shipping_first_name=&shipping_last_name=&shipping_company=&shipping_country=US&shipping_address_1=&shipping_address_2=&shipping_city=&shipping_state=&shipping_postcode=&order_comments=&payment_method=authorize_net_cim_credit_card&wc-authorize-net-cim-credit-card-expiry=&wc-authorize-net-cim-credit-card-payment-nonce=&wc-authorize-net-cim-credit-card-payment-descriptor=&wc-authorize-net-cim-credit-card-last-four=&wc-authorize-net-cim-credit-card-card-type=&terms-field=1&woocommerce-process-checkout-nonce='\r\n          + $(\"#woocommerce-process-checkout-nonce\").val() + '&_wp_http_referer=%2Fcheckout%2F%3Fwc-ajax%3Dupdate_order_review'\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savings = 0;\r\n\r\n    if (!this.isCartPage()) {\r\n      var responseHTML = $.parseHTML(response.fragments['.woocommerce-checkout-review-order-table']);\r\n      savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      $.ajax({\r\n        url: 'https:\/\/www.cashmereboutique.com\/cart\/',\r\n        type: 'GET',\r\n        async: false,\r\n        success: function (result) {\r\n          savings = parseFloat($('.cart-discount td', $.parseHTML(result)).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n      });\r\n    }\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCartPage: function () {\r\n    return \/cart\/.test(location.href);\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.initSecurity();",
	"castoramafr": "var ExternalProvider = {\r\n    parse: function (res, a, $b, code) {\r\n        var resHTML = $.parseHTML(res);\r\n        var savings = $('.basket-totals-special .pricing', resHTML).attr('data-value').replace(\/[^.0-9|]\/g, '');\r\n\r\n        if (!$('.voucher-details', resHTML).eq(0).text().includes(code)) {\r\n            savings = 0.00;\r\n        } else {\r\n            var couponCode = 'coupon' + code;\r\n            var _dcoupon = '_D:coupon' + code;\r\n            var _dsvcoupon = '_DSV:coupon' + code;\r\n            var dataRem = {\r\n                _dyncharset: $('input[name=\"_dyncharset\"]').val(),\r\n                _dynSessConf: $('input[name=\"_dynSessConf\"]').val(),\r\n                count: $('#count').val(),\r\n                price: $('#price').val(),\r\n                '_D:\/diy\/checkout\/order\/CouponFormHandler.couponCode': '',\r\n                '_D:\/diy\/checkout\/order\/CouponFormHandler.claimCoupon': '',\r\n                '\/diy\/checkout\/order\/CouponFormHandler.claimCoupon': 'Ajouter une r\u00e9duction'\r\n            };\r\n\r\n            dataRem[couponCode] = 'Supprimer';\r\n            dataRem[_dcoupon] = '';\r\n            dataRem[_dsvcoupon] = code;\r\n\r\n            $.ajax({\r\n                url: 'https:\/\/www.castorama.fr\/common\/checkout\/basket.jsp?_DARGS=\/common\/checkout\/basket.jsp.baskets-form-id',\r\n                type: 'POST',\r\n                data: dataRem\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"catfootwear": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = $('.body-callout', responseHTML).text().replace(\/[^0-9|.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"catherines": "var ExternalProvider = {\r\n  cartTotal: 0,\r\n  _prepareUrl: function () {\r\n    var urls = JSON.parse($('#endpoints').text());\r\n    var applyUrlInput = $('#__jpCouponUrl');\r\n    var applyUrl = !this.isCartPage() ? urls.data.endpoints.validatePromo : urls.data.endpoints.updateCart;\r\n    var clearCouponInput = $('#__jpClearCouponUrl');\r\n    var clearCouponUrl = urls.data.endpoints.removePromo;\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n\r\n    if (!clearCouponInput.length) {\r\n      clearCouponInput = document.createElement('input');\r\n      clearCouponInput.id = '__jpClearCouponUrl';\r\n      clearCouponInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(clearCouponInput);\r\n      clearCouponInput = $('#__jpClearCouponUrl');\r\n    }\r\n\r\n    clearCouponInput.attr('value', clearCouponUrl);\r\n  },\r\n  init: function () {\r\n    this.cartTotal = parseFloat($('.asc-total-value').text().replace('$', ''));\r\n  },\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n\r\n    data.sessionConfirmationNumber = $('input[name=\"_dynSessConf\"]').val();\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      data.Action = $('#promoCode').length ? 'Payment.validatePromo' : 'Cart.validatePromo';\r\n      data.promoCode = code;\r\n\r\n      return data;\r\n    } else if (action === 'clearCouponUrl') {\r\n      data.Action = $('#promoCode').length ? 'Payment.removePromo' : 'Cart.removeDiscountAction';\r\n      data.discountID = code;\r\n\r\n      return data;\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var savings = 0;\r\n    var oldSavings = 0;\r\n    var newSavings = 0;\r\n\r\n    if (this.isCartPage()) {\r\n      oldSavings = ($('.asc-discounts-display.float--right:contains(\"-\")').text().replace(\/[^0-9|.]\/g, ''));\r\n      newSavings = parseFloat(response.data.cartSummary.newSavings);\r\n      savings = newSavings - oldSavings;\r\n    } else {\r\n      oldSavings = ($('.order-summary-content-right:contains(\"-\")').text().replace(\/[^0-9|.]\/g, ''));\r\n      newSavings = parseFloat(response.data.cartSummary.newSavings);\r\n      savings = newSavings - oldSavings;\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCartPage: function () {\r\n    return \/cart\/.test(location.href);\r\n  },\r\n  applyCoupon: function (bestCode) {\r\n    if (this.isCartPage()) {\r\n      $('#mar-cart-promo-code').val(bestCode);\r\n      $('#mar-cart-promo-apply').click();\r\n    } else {\r\n      $('input[name=\"promo-code\"]').val(bestCode);\r\n      $('.apply-promo-btn').removeAttr('disabled').click();\r\n    }\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      this.applyCoupon(bestCode);\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"cathkidston": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#applied_promotions .value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"catholiccompany": "var ExternalProvider = {\r\n    parseAmount: function (string) {\r\n        return string.replace(\/[^0-9|.]\/g, '');\r\n    },\r\n    parse: function (response) {\r\n        var $response = $.parseHTML(response),\r\n            subTotal = 0,\r\n            $ele;\r\n        $('#cart_listing .subtotal').each(function () {\r\n            $ele = $(this);\r\n            if ($('.tiny_txt', $ele).text().indexOf('Subtotal') !== -1 || $('.tiny_txt', $ele).text().indexOf('Estimated Shipping') !== -1) {\r\n                subTotal += ExternalProvider.parseAmount($('.price', $ele).text());\r\n            }\r\n        });\r\n        var totalPrice = this.parseAmount($('.est_total', $response).text());\r\n        var savings = parseFloat(subTotal) - parseFloat(totalPrice);\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"cbazaar": "var ExternalProvider = {\r\n  cookieName: \"\",\r\n  init: function () {\r\n    var name = \"_GoogleClient\" + '=';\r\n    var ca = document.cookie.split(';');\r\n    var c = ca[2];\r\n    this.cookieName = decodeURIComponent(c.substring(name.length, c.length)).replace(\"=\", \"\");\r\n  },\r\n  retrieveWindowVariable: function (name, variable) {\r\n    var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\r\n    var script = document.createElement('script');\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var value = $('body').attr('tmp_' + name);\r\n    $('body').removeAttr('tmp_' + name);\r\n\r\n    return value;\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data =\r\n        {\r\n          \"PromoDiscountPercentage\": 0,\r\n          \"UniqueID\": this.cookieName,\r\n          \"Command\": this.retrieveWindowVariable('gCountryBasedEstoreID', 'window.gCountryBasedEstoreID'),\r\n          \"CurrencyCode\": \"usd\",\r\n          \"CurrencySymbol\": \"$\",\r\n          \"EStoreID\": this.retrieveWindowVariable('gCountryBasedEstoreID', 'window.gCountryBasedEstoreID'),\r\n          \"GrandTotal\": $(\".shoppingprice_info\").text().replace(\/[^0-9|.]\/g, ''),\r\n          \"SubTotal\": $(\".shoppingprice_info\").text().replace(\/[^0-9|.]\/g, ''),\r\n          \"IsCODEligible\": false,\r\n          \"IsEDS\": false,\r\n          \"CartItemID\": 0,\r\n          \"Email\": this.retrieveWindowVariable('gUserLoginId', 'window.gUserLoginId'),\r\n          \"PromotionCode\": code,\r\n          \"Quantity\": 0,\r\n          \"UserID\": this.retrieveWindowVariable('gUserId', 'window.gUserId'),\r\n          \"ShippingCountryID\": this.retrieveWindowVariable('gStrShipCountryCode', 'window.gStrShipCountryCode'),\r\n          \"ProductCode\": 0,\r\n          \"Region\": \"NA\",\r\n          \"ShippingCost\": 0,\r\n          \"LoginSource\": this.retrieveWindowVariable('gUserName', 'window.gUserName'),\r\n          \"CurrencyFactor\": this.retrieveWindowVariable('gStrCurrMonFactor', 'window.gStrCurrMonFactor'),\r\n          \"UserBusinessType\": this.retrieveWindowVariable('gEsBusType', 'window.gEsBusType'),\r\n        }\r\n      return JSON.stringify(data);\r\n    }\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.CartSummaries.PromotionDiscount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    }\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promo_offers_checkout').click();\r\n      setTimeout(function () {\r\n        $('#txtPromoCode').val(bestCode);\r\n        $('#btnPromoCode').click();\r\n        setTimeout(function () {\r\n          $('#PromoCodeModalClose')[0].click();\r\n        }, 1000);\r\n      }, 2000);\r\n    }\r\n  }\r\n};",
	"cbcrabcakes": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.summary);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"cbsstore": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"cdiscount": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.opRecap tr:eq(2) td:contains(\"-\")', responseHTML).text().split(\"\u20ac\")[0].replace(\/[^0-9|.]\/g, ''))\/100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#VoucherId').val(bestCode);\r\n            $('#VoucherId~input').click();\r\n        }\r\n    }\r\n};",
	"cecilde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('checkout-price-total div div strong').text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat(response.priceTotal);\r\n    var savings = parseFloat(oldTotal - newTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if(bestCode) location.reload();\r\n  }\r\n};",
	"celiofr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('strong.c-cart-v2_promo:eq(0)', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n  \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n      if (bestCode) location.reload();\r\n  }\r\n};",
	"cellphonecases": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        if (!$('.error', responseHTML).length) {\r\n            var savings = parseFloat($('.checkout_input_right:eq(1)', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n}",
	"cellphonecases.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        if ($('.checkout_input_title:eq(3)', responseHTML).text().indexOf('Coupon') !== -1) {\r\n            var savings = parseFloat($('.checkout_input_right:eq(2)', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n}",
	"cellularcountry": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        if (response != -1) {\r\n            var $response = $.parseHTML(response);\r\n            \/\/transversing this way because there are duplicated #ids on the response html\r\n            var discount = parseFloat($(\":contains('Discount Coupon')\", $response)\r\n                .parent().find('#newsubtotaltotal_right')\r\n                .text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            if (discount > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: discount\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        var clickEvent = new MouseEvent('click', {\r\n           'view': window,\r\n           'bubbles': true,\r\n           'cancelable': true\r\n        });\r\n        if (bestCode) {\r\n            if ($('#disc-ot_coupon').length) {\r\n                $('#disc-ot_coupon').val(bestCode);\r\n            } else {\r\n                $('#promotion_code').val(bestCode);\r\n                $('a.view_btn').get(0).dispatchEvent(clickEvent);\r\n            }\r\n        }\r\n    }\r\n};",
	"cellularcountry.mobile": "var ExternalProvider = {\r\n    _prepareUrl: function() {\r\n        var applyUrlInput = jQuery('#__jpCouponUrl');\r\n        var applyUrl = location.protocol + '\/\/www.cellularcountry.com\/ajaxCouponValidCart.php';\r\n        if(!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement(\"input\");\r\n            applyUrlInput.id = '__jpCouponUrl';\r\n            applyUrlInput.style.display = \"none\";\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = jQuery('#__jpCouponUrl');\r\n        }\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        if (response != -1) {\r\n            var $response = $.parseHTML(response);\r\n            \/\/transversing this way because there are duplicated #ids on the response html\r\n            var discount = parseFloat($(\":contains('Discount Coupon')\", $response)\r\n                .parent().find('#newsubtotaltotal_right')\r\n                .text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            if (discount > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: discount\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($('#disc-ot_coupon').length) {\r\n                $('#disc-ot_coupon').val(bestCode);\r\n            } else {\r\n                $('#promotion_code').val(bestCode);\r\n                $('a.view_btn').click();\r\n            }\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"cellularoutfitter": "var ExternalProvider = {\r\n  chdataobject: {},\r\n  cid: '',\r\n  token: '',\r\n  __prepareUrl: function () {\r\n    var data;\r\n\r\n    if (this.isSecureUI()) {\r\n      var script = document.createElement('script');\r\n\r\n      script.appendChild(document.createTextNode('$(\"body\").attr(\"data\", JSON.stringify(window.CHDataObject));'));\r\n      script.id = 'tempScript';\r\n      (document.body || document.head || document.documentElement).appendChild(script);\r\n      data = JSON.parse($('body').attr('data'));\r\n      $('body').removeAttr('data');\r\n      $('#tempScript').remove();\r\n\r\n      this.cid = data.checkout_session;\r\n      this.token = data.partial_encoded;\r\n    }\r\n\r\n    var applyUrlInput = $('#__dynamicUrl');\r\n    var applyUrl = this.isSecureUI() ? 'https:\/\/api.c.carthook.com\/api\/v1\/coupons\/calculate\/' + this.token + '?cid=' + this.cid : ' ';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__dynamicUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__dynamicUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = null;\r\n\r\n    if (type === 'applyCouponUrl' && this.isSecureUI()) {\r\n      var script = document.createElement('script');\r\n\r\n      script.appendChild(document.createTextNode('$(\"body\").attr(\"chdataobject\", JSON.stringify(window.CHDataObject));'));\r\n      script.id = 'tempScript';\r\n      (document.body || document.head || document.documentElement).appendChild(script);\r\n      this.chdataobject = JSON.parse($('body').attr('chdataobject'));\r\n      $('body').removeAttr('chdataobject');\r\n      $('#tempScript').remove();\r\n\r\n      this.chdataobject.cart_data.customer_email = $('#customer_email')[0].value;\r\n\r\n      data = {\r\n        cart_data: this.chdataobject.cart_data,\r\n        checkout_session: this.chdataobject.checkout_session,\r\n        coupon_code: code,\r\n        selected_shipping_rate: null\r\n      };\r\n\r\n      return data;\r\n    } else if (type === 'applyCouponUrl' && !this.isSecureUI()) {\r\n      data = $('.edit_checkout.animate-floating-labels:nth(1)').serializeArray();\r\n\r\n      data.forEach(function (item) {\r\n        if (item.name === 'checkout[reduction_code]') {\r\n          item.value = code;\r\n        }\r\n      });\r\n\r\n      return data;\r\n    }\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var parseHTML = $.parseHTML(response);\r\n    var savings = this.isSecureUI() ? response.total_coupons_amount : parseFloat($('.order-summary__section.order-summary__section--total-lines .total-line.total-line--reduction .total-line__price > span', parseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isSecureUI: function () {\r\n    return \/a\\\/secure\\\/checkout\/.test(location.href);\r\n  },\r\n  complete: function (bestCode) {\r\n    var clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n    if (bestCode && this.isSecureUI()) {\r\n      $('#gift-link').click();\r\n      $('#coupon_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#coupon_code').trigger('input').trigger('change');\r\n      $('.btn-coupon').get(0).dispatchEvent(clickEvent);\r\n    } else if (bestCode) {\r\n      $('#gift-link').click();\r\n      $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#checkout_reduction_code').trigger('input').trigger('change');\r\n      $('.field__input-btn.btn').get(0).dispatchEvent(clickEvent);\r\n    }\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"celticandco": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('.align-right.cell-subtotal').text().replace(\/[A-Z.0-9,]\/g, '').trim();\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (selector === \"\u20ac\") {\r\n            locale = localeMapping['FR'];\r\n            currency = \"EUR\";\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.basket-checkout-discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"centurynovelty": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"cgproprints": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply Coupon\"]').click();\r\n        }\r\n    }\r\n};",
	"chacos": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.coupon-subtotal span', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"chadwicks": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('#cartotals', responseHTML).text().indexOf('Coupon Applied') >= 0;\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('#totalprice').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('#totalprice', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        $('input[name=\"COUPON\"]').val(bestCode);\r\n        $('form[name=\"frmCoupon\"]').submit();\r\n    }\r\n\r\n}",
	"chainreactioncycles": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n        var selector = location.pathname.match('basket') ? $('#localpicker option[selected]').val() : $('.summary__section_total .currency__transact').text();\r\n\r\n        if (selector === 'GB' || selector.match('\u00a3')) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector === 'DE' || selector === 'FR' || selector.match('\u20ac')) {\r\n            locale = selector === 'FR' ? localeMapping.FR : localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.order.promotions[0].priceInfo.price);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"championusa": "var ExternalProvider = {\r\n  prepare: function (actionType, couponCode) {\r\n    var serializedObj = $('#PromotionCodeForm').serializeArray();\r\n    var formData = this.serializeFormObject(serializedObj);\r\n\r\n    if (actionType !== 'resultUrl') {\r\n      var inputCode = $('#promoCode');\r\n\r\n      formData.promoCode = couponCode;\r\n      formData.taskType = (actionType === 'applyCouponUrl') ? 'A' : 'R';\r\n      formData.requestType = 'ajax';\r\n      formData.finalView = 'AjaxOrderItemDisplayView';\r\n\r\n      inputCode.val(couponCode);\r\n      inputCode.attr('value', couponCode);\r\n      inputCode.value = couponCode;\r\n    }\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = $(this.getOldTotal).text().replace(this.regularExpression, '');\r\n    var newTotal = $(this.getNewTotal, responseHTML).text().replace(this.regularExpression, '');\r\n\r\n    this.discount = parseFloat(oldTotal) - parseFloat(newTotal);\r\n\r\n    return {\r\n      success: this.discount > 0,\r\n      savings: Number.isNaN(this.discount) ? 0.00 : this.discount\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  serializeFormObject: function (object) {\r\n    var data = {};\r\n\r\n    $.each(object, function () {\r\n      data[this.name] = this.value || '';\r\n    });\r\n\r\n    return data;\r\n  },\r\n  regularExpression: \/[^0-9|.]\/g,\r\n  getOldTotal: '#WC_SingleShipmentOrderTotalsSummary_td_2',\r\n  getNewTotal: '#WC_SingleShipmentOrderTotalsSummary_td_13',\r\n  discount: 0.00\r\n};",
	"champssports": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    const script = document.createElement('script');\r\n    let scriptContent = `\r\n      fetch('https:\/\/www.champssports.com\/api\/session').then(response => {\r\n        response.json().then(json => {\r\n          let data = json;\r\n          if(document.getElementById(\"csrf\") === null) {\r\n            let csrfInput = document.createElement(\"input\");\r\n            csrfInput.id = 'csrf';\r\n            csrfInput.setAttribute('type', 'hidden');\r\n            csrfInput.setAttribute('value', data.data.csrfToken);\r\n            (document.body || document.head || document.documentElement).appendChild(csrfInput);\r\n          }\r\n        });\r\n      });\r\n    `;\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n    this.initEventInstance();\r\n  },\r\n  parse: function (response) {\r\n    let savings = parseFloat(response.orderDiscounts.value);\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if ($('input[name=\"voucherId\"]').length < 1 && bestCode) {\r\n      const toggleCodeField = $('.c-checkout-promo-code button.Link');\r\n      toggleCodeField.get(0).dispatchEvent(this.clickEvent);\r\n    }\r\n    setTimeout(function () {\r\n      const codeField = $('input[name=\"voucherId\"]');\r\n      const submitButton = $('#PromoCode button').last();\r\n      codeField.val(bestCode);\r\n      codeField.get(0).dispatchEvent(ExternalProvider.changeEvent);\r\n      submitButton.last().get(0).dispatchEvent(ExternalProvider.clickEvent);\r\n    }, 500);\r\n  },\r\n  initEventInstance: function () {\r\n    this.clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n    this.changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  },\r\n};\r\nExternalProvider._prepareUrl();",
	"chaptersindigo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.DefaultOrder.PricingSummary.PromotionDiscount;\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if ($('#cartpage-coupontext').length) {\r\n            var keydownEvent = document.createEvent('KeyboardEvent');\r\n            var observer = new MutationObserver(function (mutations) {\r\n                mutations.forEach(function () {\r\n                    var clickEvent = document.createEvent('MouseEvents');\r\n                    clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\r\n                    $('.cartpage-applycouponlink').get(0).dispatchEvent(clickEvent);\r\n                });\r\n            });\r\n            var target = document.getElementsByClassName('cartpage-applycouponlink')[0];\r\n            $('#cartpage-coupontext').val(bestCode);\r\n            keydownEvent.initKeyboardEvent('keydown', true, true);\r\n            $('#cartpage-coupontext').get(0).dispatchEvent(keydownEvent);\r\n            if (bestCode) {\r\n                observer.observe(target, { attributes: true, attributeFilter: ['style'] });\r\n            }\r\n        } else {\r\n            $('input[name=\"couponCode\"]').val(bestCode);\r\n            if (bestCode) {\r\n                $('.buttonCouponApply').show();\r\n                var clickEvent = document.createEvent('MouseEvents');\r\n                clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\r\n                $('.buttonCouponApply').get(0).dispatchEvent(clickEvent);\r\n            }\r\n        }\r\n    }\r\n};",
	"charbroil": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        \r\n        \r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\t\r\n\t\tvar codeFound = false;\r\n\t\tvar savings = 0.0;\r\n\t\t\r\n\t\t$(\"tr.totalrow-discount span\",responseHTML ).each(function(index,el){\r\n\r\n\t\t\tsavings = Number($(el).text().replace( \/^\\D+\/g, ''));\r\n\t\t\tif(savings>0){\r\n\t\t\t\tcodeFound = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\treturn {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n\t\t\r\n\r\n        \r\n       \r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\r\n        $('#coupon_code').val(bestCode);\r\n        \r\n        $('button[title=\"Apply\"]').click();\r\n        \r\n\r\n    }\r\n    \r\n}",
	"chargrilled": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"Discounts Apply\")~td', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"charlesandcolvard": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, couponCode) {\r\n        var match = response.match('original_discount_amount(.*)base_original_discount_amount')[0];\r\n        var savings = match.replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            if (window.location.pathname === \"\/checkout\/\") {\r\n                location.reload();\r\n            }\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                'view': window,\r\n                'bubbles': true,\r\n                'cancelable': true\r\n            });\r\n\r\n            $('#coupon_code').val(bestCode);\r\n            $('#coupon_code').trigger('input').trigger('change');\r\n            $('button.apply').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    },\r\n}",
	"charleskeithde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"charleskeith": "var ExternalProvider = {\r\n    parse: function (response) {\r\n\r\n        var parseHTML = $.parseHTML(response)\r\n        var savings = parseFloat($('#shopping-cart-totals-table > tbody > tr.summary-total > td:nth-child(2) > span',parseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"charlotterusse": "var ExternalProvider = {\r\n    init: function () {\r\n        $('.promo-title').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0;\r\n        if (!this.isCartPage()) {\r\n            $.ajax({\r\n                url: 'https:\/\/www.charlotterusse.com\/on\/demandware.store\/Sites-charlotte-russe-Site\/default\/Cart-AddCouponJson?couponCode=' + code + '&format=ajax',\r\n                type: 'GET',\r\n                async: false\r\n            });\r\n            $.ajax({\r\n                url: 'https:\/\/www.charlotterusse.com\/on\/demandware.store\/Sites-charlotte-russe-Site\/default\/COBilling-UpdateSummary',\r\n                type: 'GET',\r\n                success: function (result) {\r\n                    savings = parseFloat($('.discount:first td', $.parseHTML(result)).text().replace(\/[^.0-9]\/g, ''));\r\n                },\r\n                async: false\r\n            });\r\n        } else {\r\n            savings = parseFloat($('.value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#dwfrm_billing_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n            if ($('#dwfrm_billing_couponCode').length) {\r\n                location.reload();\r\n            }\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        return $('#cart-items-form').length === 1;\r\n    }\r\n};",
	"charmingcharlie": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"chaussea": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount .price', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"cheapair": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'injectCoupon') {\r\n            $('span:contains(\"Gift Card\/Promotional Certificate\")').click();\r\n            $('form input').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('form input').trigger('input').trigger('change');\r\n            $('form button')[0].click();\r\n        } else {\r\n            $('table button').click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        setTimeout(function () {\r\n            var maxWait = 200;\r\n            var waited = 0;\r\n            var waitForClose = setInterval(function () {\r\n                var confirmed = step === 'injectCoupon' ? $('table button').length : !$('table button').length;\r\n\r\n                if ((confirmed) || (waited > maxWait)) {\r\n                    clearInterval(waitForClose);\r\n                    setTimeout(function () {\r\n                        next();\r\n                    }, 500);\r\n                }\r\n\r\n                waited++;\r\n            }, 10);\r\n        }, 50);\r\n    },\r\n    parse: function () {\r\n        var savings = parseFloat($('td strong:contains(\"-\")').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('span:contains(\"Gift Card\/Promotional Certificate\")').click();\r\n            $('form input').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('form input').trigger('input').trigger('change');\r\n            $('form button')[0].click();\r\n        }\r\n    }\r\n};",
	"cheapcaribbean": "var ExternalProvider = {\r\n\r\n    _initialDiscount: 0,\r\n\r\n    init: function () {\r\n        var $discountEl = $(\"#discountValue\");\r\n\r\n        if ($discountEl.length > 0) {\r\n            this._initialDiscount = parseFloat($discountEl.text().replace(\/[^0-9|\\.,]\/g, '').replace(',', '.'));\r\n        }\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type == \"applyCouponUrl\") {\r\n            data.checkInDate = $('#checkInDateInput').val();\r\n            data.checkOutDate = $('#checkOutDateInput').val();\r\n            data.departureAirport = $('[name=\"searchParameters.departureAirport\"]').val();\r\n            data.leaveDate = $('[name=\"searchParameters.leaveDate\"]').val();\r\n            data.resortId = $('[name=\"priceAndBook.resortId\"]').val();\r\n            data.returnDate = $(\"[name='searchParameters.returnDate']\").val();\r\n            data.isPackageBookingType = $(\"input[name*='searchParameters.bookingType']\")[0].value == 'P';\r\n            data.discount = this._initialDiscount;\r\n            var totalSumText = $(\"#totalValue\").text();\r\n            data.totalSum = totalSumText.substring(totalSumText.indexOf(\"$\") + 1);\r\n\r\n            data.roomAgeList = getRoomAges($(\"input[name*='priceAndBook.flightId']\").parent()[1].children);\r\n\r\n            data.promoCode = code;\r\n            \/\/otherwise data is sent as formData\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return null;\r\n\r\n\r\n        function getRoomAges(form) {\r\n            var ageArray = [];\r\n            for (var i = 0; i < form.length; i++) {\r\n                if (form[i].name !== undefined) {\r\n                    if (form[i].name.indexOf('searchParameters.rooms') > -1) {\r\n                        ageArray.push(form[i].value);\r\n                    }\r\n                }\r\n            }\r\n            return ageArray;\r\n        }\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        if (response.valid) {\r\n            var discount = response.discount.replace(\/[^0-9|\\.,]\/g, '').replace(',', '.');\r\n            var discountDiff = discount - this._initialDiscount;\r\n            if(discountDiff > 0){\r\n                return {\r\n                    success: true,\r\n                    savings: discount\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if(bestCode){\r\n            $('#promoCodeInput').val(bestCode);\r\n            $('#applyBtn').click();\r\n        }\r\n    }\r\n};",
	"cheapoair": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var applyUrlInput = document.createElement('input');\r\n\r\n        applyUrlInput.id = '___jpCouponUrl';\r\n        applyUrlInput.style.display = 'none';\r\n        (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n\r\n        if (this.isCarPage()) {\r\n            var carID = $('#divPrepaidupgCars .divUpgradeCar, #divPostpaidupgCars .divUpgradeCar').attr('id').replace(\/[^0-9|.]\/g, '');\r\n            var country = $('#BillingDetails_Country option[selected]').val();\r\n\r\n            $('#___jpCouponUrl').attr('value', 'https:\/\/www.cheapoair.com\/carnext\/Payment\/ApplyPromoCodeCoupon\/s\/1?carID_=' + carID + '&promoCode_=CLAIMCODE&country_=' + country + '&state_');\r\n        } else if (this.isHotelPage()) {\r\n            $('#___jpCouponUrl').attr('value', 'https:\/\/www.cheapoair.com\/FPNextHotel\/Payment\/AddOrRemovePromoDiscount\/s\/1');\r\n        } else if (this.isFlightPage()) {\r\n            $('#___jpCouponUrl').attr('value', 'https:\/\/www.cheapoair.com\/fpnext\/Payment\/ApplyPromoCode\/s\/1?promocode=CLAIMCODE');\r\n        } else if (this.isVacationPage()) {\r\n            $('#___jpCouponUrl').attr('value', 'https:\/\/www.cheapoair.com\/Package\/CrossSellV2\/CrossSellV2Service.asmx\/ApplyPromoCodeV1');\r\n        }\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl' && this.isHotelPage()) {\r\n            data.promoCode = code;\r\n            data.supplierCode = $('#hdnSupplierCode').val();\r\n            data.hotelPropCode = $('#hdnHotelPropCode').val();\r\n            data.roomCode = $('#hdnRoomCode').val();\r\n            data.isRemove = 'false';\r\n            data.EID = $('#hdnEid').val();\r\n        } else if (type === 'applyCouponUrl' && this.isVacationPage()) {\r\n            data.promoCode_ = code;\r\n        }\r\n\r\n        return JSON.stringify(data);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0;\r\n\r\n        if (this.isCarPage()) {\r\n            var responseJSON = JSON.parse(response);\r\n\r\n            responseHTML = $.parseHTML(responseJSON.htmlView);\r\n            savings = parseFloat($('.redtag .currencyPayment', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        } else if (this.isHotelPage()) {\r\n            savings = parseFloat($('#CouponSection .currencyPayment', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        } else if (this.isFlightPage()) {\r\n            var oldTotal = parseFloat($('#GrandTotal > span').text().replace(\/[^0-9|.]\/g, ''));\r\n            var newTotal = parseFloat($('#GrandTotal > span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n            savings = oldTotal - newTotal;\r\n        } else if (this.isVacationPage()) {\r\n            $.ajax({\r\n                url: 'https:\/\/www.cheapoair.com\/Package\/CrossSellV2\/CrossSellV2Service.asmx\/GetCartHTML',\r\n                method: 'POST',\r\n                contentType: 'application\/json',\r\n                data: JSON.stringify({\r\n                    isFullHtml_: true\r\n                }),\r\n                dataType: 'json',\r\n                success: function (data) {\r\n                    responseHTML = $.parseHTML(data.d);\r\n\r\n                    savings = parseFloat($('#lblPromoDiscount .fpamount.fpRoundToFixDecimal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n                },\r\n                async: false\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCarPage()) {\r\n                location.reload();\r\n            } else if (this.isHotelPage()) {\r\n                $('#tbCpnCode').val(bestCode);\r\n                $('#btnApply').click();\r\n            } else if (this.isFlightPage()) {\r\n                $('#PromoCode').val(bestCode);\r\n                $('#promodiv a')[0].click();\r\n            } else if (this.isVacationPage()) {\r\n                $('#txtPromoCode').val(bestCode);\r\n                $('#btnPromoCode').click();\r\n            }\r\n        }\r\n    },\r\n    isFlightPage: function () {\r\n        return \/fpnext\/.test(location.href);\r\n    },\r\n    isHotelPage: function () {\r\n        return \/FPNextHotel\/.test(location.href);\r\n    },\r\n    isCarPage: function () {\r\n        return \/carnext\/.test(location.href);\r\n    },\r\n    isVacationPage: function () {\r\n        return \/Package\/.test(location.href);\r\n    }\r\n};\r\n\r\nExternalProvider.__prepareUrl();",
	"cheapoairca": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var applyUrlInput = document.createElement('input');\r\n        applyUrlInput.id = '___jpCouponUrl';\r\n        applyUrlInput.style.display = 'none';\r\n        (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n\r\n        if (this.isCarPage()) {\r\n            var carID = $('#divPrepaidupgCars .divUpgradeCar, #divPostpaidupgCars .divUpgradeCar').attr('id').replace(\/[^0-9|.]\/g, '');\r\n            var country = $('#BillingDetails_Country option[selected]').val();\r\n            $('#___jpCouponUrl').attr('value', 'https:\/\/www.cheapoair.ca\/carnext\/Payment\/ApplyPromoCodeCoupon\/s\/1?carID_=' + carID + '&promoCode_=CLAIMCODE&country_=' + country + '&state_');\r\n        }\r\n        else if (this.isHotelPage()) {\r\n            $('#___jpCouponUrl').attr('value', 'https:\/\/www.cheapoair.ca\/fpnexthotel\/Payment\/AddOrRemovePromoDiscount\/s\/3');\r\n        }\r\n        else if (this.isFlightPage()) {\r\n            $('#___jpCouponUrl').attr('value', 'https:\/\/www.cheapoair.ca\/fpnext\/Payment\/ApplyPromoCode\/s\/1?promocode=CLAIMCODE');\r\n        }\r\n\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl' && this.isHotelPage()) {\r\n            data['promoCode'] = code;\r\n            data['supplierCode'] = $('#hdnSupplierCode').val();\r\n            data['hotelPropCode'] = $('#hdnHotelPropCode').val();\r\n            data['roomCode'] = $('#hdnRoomCode').val();\r\n            data['isRemove'] = 'false';\r\n            data['EID'] = $('#hdnEid').val();;\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0;\r\n\r\n        if (this.isCarPage()) {\r\n            var responseJSON = JSON.parse(response);\r\n            responseHTML = $.parseHTML(responseJSON.htmlView);\r\n            savings = parseFloat($('.redtag .currencyPayment', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n        else if (this.isHotelPage()) {\r\n            savings = parseFloat($('#CouponSection .currencyPayment', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n        else if (this.isFlightPage()) {\r\n            var oldTotal = parseFloat($('#GrandTotal > span').text().replace(\/[^0-9|\\.]\/g, ''));\r\n            var newTotal = parseFloat($('#GrandTotal > span', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            var savings = oldTotal - newTotal;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCarPage()) {\r\n                location.reload();\r\n            }\r\n            else if (this.isHotelPage()) {\r\n                $('#tbCpnCode').val(bestCode);\r\n                $('#btnApply').click();\r\n            }\r\n            else if (this.isFlightPage()) {\r\n                $('#PromoCode').val(bestCode);\r\n                $('#promodiv a')[0].click();\r\n            }\r\n        }\r\n    },\r\n    isFlightPage: function () {\r\n        return \/fpnext\/.test(location.href);\r\n    },\r\n    isHotelPage: function () {\r\n        return \/fpnexthotel\/.test(location.href);\r\n    },\r\n    isCarPage: function () {\r\n        return \/carnext\/.test(location.href);\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"cheaptickets": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n        var data = {};\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data = {\r\n                couponCode: code,\r\n                tripid: $('body').attr('data-tripid'),\r\n                tlCouponAttach: 1,\r\n                tlCouponCode: code,\r\n                productType: 'destinationservice',\r\n                binPrefix: ''\r\n            };\r\n            return data;\r\n        } else {\r\n            data = {\r\n                tripid: $('body').attr('data-tripid'),\r\n                tlCouponRemove: 1,\r\n                tlCouponCode: code,\r\n                productType: 'destinationservice',\r\n                binPrefix: ''\r\n            };\r\n            return data;\r\n        }\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        if(response.couponModel && response.couponModel.couponDiscount){\r\n            var savings = response.couponModel.couponDiscount.value.replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"checksinthemail": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var couponData = {};\r\n\r\n        var formInputs = [].slice.call($('#Form1 input:not([type=\"radio\"]), #Form1 select, #Form1 input[type=\"radio\"]:checked'))\r\n            .filter(function (el) {\r\n                return $(el).attr('type') !== 'checkbox' || $(el).attr('checked');\r\n            });\r\n\r\n        formInputs.forEach(function (e) {\r\n            couponData[$(e).attr('name')] = $(e).val();\r\n        });\r\n\r\n        couponData.__EVENTTARGET = 'ctl00$ContentPlaceHolder1$ctlCart$ucPromotions$lbPromoCode';\r\n        couponData.ctl00$ContentPlaceHolder1$ctlCart$ucPromotions$txtPromotionCode = code;\r\n\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            return couponData;\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#ctl00_ContentPlaceHolder1_ctlCart_Discount', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        $('#ctl00_ContentPlaceHolder1_ctlCart_ucPromotions_txtPromotionCode').val(bestCode);\r\n        $('#ctl00_ContentPlaceHolder1_ctlCart_ucPromotions_lbPromoCode')[0].click();\r\n    }\r\n};",
	"checkssuperstore": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isCartPage() ? 'https:\/\/www.checks-superstore.com\/Cart.aspx' : 'https:\/\/www.checks-superstore.com\/shippingselection.aspx';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl' && this.isCartPage()) {\r\n            var form = $('#form1');\r\n            $('#MainContent_ShoppingCart_PromotionTextBox').val(code);\r\n            form.find('#__EVENTTARGET').val('ctl00$MainContent$ShoppingCart$PromotionApplyLink');\r\n        } else if (type === 'applyCouponUrl' && !this.isCartPage()) {\r\n            var form = $('#form1');\r\n            $('#MainContent_ShoppingCart_PromotionTextBox').val(code);\r\n            form.find('#__EVENTTARGET').val('ctl00$MainContent$ShoppingCart$PromotionApplyLink');\r\n        }\r\n        return form.serializeArray();\r\n    },\r\n    isCartPage: function () {\r\n        return location.pathname === '\/Cart.aspx';\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.promoSavingsAmount', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#MainContent_ShoppingCart_PromotionTextBox').val(bestCode);\r\n            $('#MainContent_ShoppingCart_PromotionApplyLink')[0].click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"chemicalguys": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#v65-cart-table > tbody > tr.colors_backgroundlight.v65-cart-giftcert-details-row > td:nth-child(4) > table > tbody > tr > td.v65-cart-details-cell > div > font', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"chemistdirect": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var selector = $(\"#cd-basket-amount\").text().replace(\/[0-9.,]\/g, '').trim();\r\n        var locale = '';\r\n\r\n        switch (selector) {\r\n            case '\u20ac':\r\n                locale = localeMapping['FR'];\r\n                currency = \"EUR\";\r\n                break;\r\n            case '$':\r\n                locale = localeMapping['US'];\r\n                currency = \"USD\";\r\n                break;\r\n            case String.fromCharCode('163'):\r\n                locale = localeMapping['GB'];\r\n                currency = \"GBP\";\r\n                break;\r\n            default:\r\n                locale = localeMapping['DE'];\r\n                currency = \"EUR\";\r\n                break;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('dd:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountCode').val(bestCode);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#discountCodeValidation').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"cherrybrook": "var ExternalProvider = {\r\n\tprepare: function(type,code){\r\n        \r\n        \r\n        if(type === \"applyCouponUrl\"){\r\n\t\t\tvar data = {};\r\n\t\t\t\r\n\t\t\tdata[\"itemcount\"]=$(\"input[name='itemcount']\").val();\r\n\t\t\tdata[\"quantity1\"]=$(\"input[name='quantity1']\").val();\r\n\t\t\tdata[\"oldquantity1\"]=$(\"input[name='oldquantity1']\").val();\r\n\t\t\tdata[\"idcartitem1\"]=$(\"input[name='idcartitem1']\").val();\r\n\t\t\tdata[\"promotioncode\"]=code;\r\n\t\t\t\r\n\t\t\treturn data;\r\n\t\t\r\n\t\t}\r\n\t\r\n\t\treturn null;\r\n\t},\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n\t\t\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\t\r\n\t\t\r\n\t\tvar codeFound = $(\"#cart div.coupon\",responseHTML).text().toLowerCase().indexOf(code.toLowerCase())>=0;\r\n\t\t\r\n\t\tvar savings = 0.0;\r\n\t\t\r\n\t\tif(codeFound){\r\n\r\n\t\t\tsavings = Number($(\"#tax_dl dd.discount\",responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\t\r\n\t\t\r\n\t\t\r\n\t\treturn {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n        \r\n       \r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\t\t\r\n\t\t$(\"#promotion\").val(bestCode);\r\n\t\t$(\".promotion_btn input\").click();\r\n\t\t\r\n\r\n    }\r\n    \r\n}",
	"cheryls": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var a = this.serializeArray();\r\n\r\n      $.each(a, function () {\r\n        if (object[this.name] !== undefined) {\r\n          if (!object[this.name].push) {\r\n            object[this.name] = [object[this.name]];\r\n          }\r\n\r\n          object[this.name].push(this.value || '');\r\n        } else {\r\n          object[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action !== 'applyCouponUrl') return false;\r\n\r\n    var formData = $('#PromotionCodeForm').serializeObject();\r\n\r\n    formData = Object.assign(formData, {\r\n      appliedPromoCode: code,\r\n      promoCode: code\r\n    });\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHtml = $.parseHTML(response);\r\n    var savings = parseFloat($('#promotionDiscount', responseHtml).next().text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"chewy": "var ExternalProvider = {\r\n  prepare: function (action, code, type) {\r\n    if (action === 'injectCoupon') {\r\n      $('#cw-form-field-15').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#cw-form-field-15').trigger('input').trigger('change');\r\n      $('button:contains(\"Apply\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.cw-margin__start').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 600);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = $('span:contains(\"-$\")').first().text().replace(\/[^0-9.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"mychicagosteak": "var ExternalProvider = {\r\n  prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var id = $('.product-cart-info a').attr('href').match('uenc\/(.*)\/')[1];\r\n    var applyUrl = 'https:\/\/www.mychicagosteak.com\/orbacheckout\/ajaxCoupon\/add\/uenc\/' + id + '\/';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat($('.price:contains(\"-\")', response.summary).text().replace(\/[^.0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('.apply-button').click();\r\n      location.reload();\r\n    }\r\n  }\r\n};\r\nExternalProvider.prepareUrl();",
	"chiccoshop": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount > td:eq(1)', responseHTML).html().replace('-', '').replace('$', '').replace(\/[^0-9|\\.]\/g, ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n\r\n        location.reload(true);\r\n\r\n    }\r\n\r\n};",
	"chichiclothing": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping['GB'];\r\n    var selector = $('.currency-dropdown').eq(0).text().replace(\/[().A-z.0-9.,]\/g, '').trim();\r\n    if (selector === \"\u20ac\") {\r\n      currency = 'EUR';\r\n      locale = localeMapping['DE'];\r\n    } else if (selector === \"$\") {\r\n      currency = 'USD';\r\n      locale = localeMapping['US'];\r\n    } else if (selector === \"\u20ac\") {\r\n      locale = localeMapping['FR'];\r\n      currency = \"EUR\";\r\n    }\r\n    return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n  },\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n      $('#discount-code').val(code);\r\n      $('#discount-code').get(0).dispatchEvent(changeEvent);\r\n      $('button:contains(\"Apply\")').click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('button:contains(\"Cancel\")').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 2000);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 50);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('td:contains(\"-\u00a3\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  }\r\n};",
	"chicme": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var resultUrlInput = $('#__clientID');\r\n        var resultUrl = document.cookie.split('; ').map(function (a, b) {\r\n            if (a.match('clientId')) {\r\n                return a.split('=')[1];\r\n            }\r\n\r\n            return '';\r\n        }).join().replace(\/[,]\/g, '');\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '__clientID';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#__clientID');\r\n        }\r\n\r\n        resultUrlInput.attr('value', resultUrl);\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.result.orderSummary.couponDiscount.amount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var data = {\r\n                'code': bestCode\r\n            };\r\n\r\n            $.ajax({\r\n                url: 'https:\/\/www.chicme.com\/v7\/coupon\/anon\/use-coupon-by-code',\r\n                type: 'POST',\r\n                data: data,\r\n                async: false\r\n            });\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"chicos": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isCartPage() ? 'https:\/\/www.chicos.com\/store\/common\/json\/cart.jsp?_DARGS=\/store\/common\/checkout\/cart.jsp.couponForm' : 'https:\/\/www.chicos.com\/store\/common\/checkout\/order_json.jsp?_DARGS=\/store\/common\/checkout\/cart_order_summary.jsp';\r\n\r\n        \/\/ Append apply url input\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function(action, code) {\r\n       \r\n        if(['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n        \r\n        if(action == 'applyCouponUrl') {\r\n            \r\n            var formData = this.isCartPage() ? $('form[name=\"couponForm\"]').serialize() : $('form[name=\"coupon\"]').serialize();\r\n            if (this.isCartPage()) {\r\n                formData = formData.replace(\/claimCodeField[^&]+&\/, 'claimCodeField=' + code + '&');\r\n            } else {\r\n                formData = formData.replace(\/couponClaimCode[^&]+&\/, 'couponClaimCode=' + code + '&');\r\n            }\r\n            \r\n            return formData;\r\n        } else {\r\n            \r\n            var isCartUrl = \/checkout\\\/cart\\.jsp\/gi.test(location.href);\r\n            return {\r\n                _DARGS      : isCartUrl ? '\/store\/common\/flex\/checkout\/cart.jsp_A' : '\/store\/include\/order_summary.jsp.1_A',\r\n                _DAV        : code,\r\n                _dynSessConf: $('input[name=\"_dynSessConf\"]').val(),\r\n                task        : 'remPromo',\r\n                reprice     : true\r\n            }\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        return window.location.href.indexOf('cart') !== -1;\r\n    },\r\n    parseAmount: function(string) {\r\n        return parseFloat(string.replace(\/[^0-9.]\/g, ''));\r\n    },\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        if (this.isCartPage()) {\r\n            var data = response.cart ? response.cart : response;\r\n            if(!response || data.formErrors.cart.length || data.formErrors.coupon.length) {\r\n                \r\n                return {\r\n                    success: false,\r\n                    savings: 0.00\r\n                };\r\n            }\r\n            \r\n            return {\r\n                success: true,\r\n                savings: this.parseAmount(data.usdItemsSubtotal) - this.parseAmount(data.usdItemsTotalNoShipping)\r\n            };\r\n           \r\n        } else {\r\n            var discount = this.parseAmount(response.order.coupon.promoDiscounts[0].discountAmount);\r\n            if (response.order.coupon.formErrors[0] === undefined) {\r\n                return {\r\n                    success: true,\r\n                    savings: discount\r\n                };\r\n            }\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n    },\r\n    \r\n    complete: function(bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true)\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"chicos.mobile": "var ExternalProvider = {\r\n    \r\n    prepare: function(action, code) {\r\n        if(['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n        \r\n        if(action == 'applyCouponUrl') {\r\n            \r\n            var formData = $piggyJq('form[name=\"couponForm\"]').serialize();\r\n            formData = formData.replace(\/claimCodeField[^&]+&\/, 'claimCodeField=' + code + '&');\r\n            return formData;\r\n        } else {\r\n            \r\n            var isCartUrl = \/checkout\\\/cart\\.jsp\/gi.test(location.href);\r\n            return {\r\n                _DARGS      : isCartUrl ? '\/store\/common\/flex\/checkout\/cart.jsp_A' : '\/store\/include\/order_summary.jsp.1_A',\r\n                _DAV        : code,\r\n                _dynSessConf: $piggyJq('input[name=\"_dynSessConf\"]').val(),\r\n                task        : 'remPromo',\r\n                reprice     : true\r\n            }\r\n        }\r\n    },\r\n    \r\n    parseAmount: function(string) {\r\n        return parseFloat(string.replace(\/[^0-9.]\/g, ''));\r\n    },\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        var data = response.cart ? response.cart : response;\r\n        if(!response || data.formErrors.cart.length || data.formErrors.coupon.length) {\r\n            \r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n        \r\n        return {\r\n            success: true,\r\n            savings: this.parseAmount(data.usdItemsSubtotal) - this.parseAmount(data.usdItemsTotalNoShipping)\r\n        };\r\n    },\r\n    \r\n    complete: function(bestCode) {\r\n        if (!bestCode) return;\r\n        $piggyJq('#claimCodeField').val(bestCode);\r\n        $piggyJq('input[name=\"\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon\"]').click();\r\n    }\r\n};",
	"chiefsupply": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.order-summary__emphasis').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.order-summary__emphasis', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = parseFloat(oldTotal - newTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"childrensplace": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('.discount-bubble p', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n        if(codeFound) {\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('.total-row.estimate span.label-right').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('.total-row.estimate span.label-right', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings){\r\n\r\n        $('#promoCode').val(bestCode);\r\n        $('.apply-code a').click();\r\n\r\n        setTimeout(function(){\r\n            window.location.reload();\r\n        }, 2000)\r\n\r\n    }\r\n}",
	"chineselaundry": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var link = document.createElement('input');\r\n\r\n        link.id = 'links';\r\n        document.body.appendChild(link);\r\n\r\n        if (this.isCartPage()) {\r\n            $('#links').attr('apply', $('#cart-items-form').attr('action'));\r\n            $('#links').attr('clear', $('#cart-items-form').attr('action'));\r\n        } else {\r\n            $('#links').attr('apply', 'https:\/\/www.chineselaundry.com\/on\/demandware.store\/Sites-chineseLaundry-Site\/default\/Cart-AddCouponJson?couponCode=CLAIMCODE&format=ajax');\r\n            $('#links').attr('clear', '');\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.order-subtotal td:contains(\"$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = (!this.isCartPage()) ? response.baskettotal : parseFloat($('.order-subtotal:contains(\"$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('#dwfrm_cart_couponCode').val(bestCode);\r\n                $('#add-coupon').click();\r\n            } else {\r\n                location.reload();\r\n            }\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        if ($('#dwfrm_cart_couponCode').length) return true;\r\n\r\n        return false;\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"chocolatetradingco": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var s = document.createElement('script');\r\n        s.type = 'text\/javascript';\r\n        s.id = 'token';\r\n        var code = \"document.querySelector('body').setAttribute('token', window.gfxx.Shopping.Token);\";\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.Data.ShopOrder.DiscountGross;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#basket_discountentry, input[placeholder=\"Enter your discount code\"]').val(bestCode);\r\n            $('button:contains(\"Apply\")').eq(0).click();\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"chocolissimo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.summary-content strong:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n     \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"choicefurnituresuperstore": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('p:contains(\"- \u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#vCouponCode').val(bestCode);\r\n            $('button:contains(\"APPLY\")').click();\r\n        }\r\n    }\r\n};",
	"choies": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var success = response.success;\r\n\r\n        if (success > 0) {\r\n            var savings = parseFloat(response.save.replace('$', ''));\r\n\r\n            return {\r\n                success: savings > 0,\r\n                savings: isNaN(savings) ? 0.00 : savings\r\n            };\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code1').val(bestCode);\r\n            $('.btn.btn-default.btn-xs.fll').click();\r\n        }\r\n    }\r\n};",
	"chrislie": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('tr.summary-total > td:eq(1) > span', responseHTML).html().replace('-', '').replace('$', ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n\r\n};",
	"christde": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            return {\r\n                'cartFormular:casVoucherCode': '',\r\n                'cartFormular:casVoucherPin': '',\r\n                'cartFormular:bsw-code': '',\r\n                'cartFormular:voucherCode': code,\r\n                'cartFormular:j_id_4l:0:quantity': $('div#form > table.cart > tbody > tr:eq(0) > td.first > select').val(),\r\n                'cartFormular:j_id_4l:1:quantity': $('div#form > table.cart > tbody > tr:eq(1) > td.first > select').val(),\r\n                'cartFormular:qa-standardOrExpress': $('input[name=\"cartFormular:qa-standardOrExpress\"]').val(),\r\n                cartFormular_SUBMIT: $('input[name=\"cartFormular_SUBMIT\"]').val(),\r\n                'javax.faces.ViewState': $('input[name=\"javax.faces.ViewState\"]').val(),\r\n                'cartFormular:_idcl': 'cartFormular:redeemVoucherButtonFooter'\r\n            };\r\n        }\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('td.price > strong').text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('td.price > strong', $.parseHTML(response)).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"christopherandbanks": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount .value:eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"cigarsinternational": "var ExternalProvider = {\r\n    parseAmount: function(string) {\r\n\r\n        return parseFloat(string.replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code){\r\n        var $response = $.parseHTML(response),\r\n            codeApplied = $('.cart-item-discount .promo-name', $response),\r\n            codeFound = false;\r\n\r\n        codeApplied.each(function() {\r\n            if($(this).text().toLowerCase().indexOf(code.toLowerCase())) codeFound = true;\r\n        });\r\n\r\n        if(codeFound) {\r\n\r\n            var selector = '.cart-ordertotal .price-amount',\r\n                preAmount = this.parseAmount($(selector).text()),\r\n                afterAmount = this.parseAmount($(selector, $response).text()),\r\n                savings = preAmount - afterAmount;\r\n\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode){\r\n        if(bestCode) location.reload(true);\r\n    }\r\n};",
	"cigavette": "var ExternalProvider = {\r\n\r\n    init: function () {\r\n        this.originalTotal = parseFloat($('#cart table.total tbody tr:last td:last').text().replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        if (response.totals && response.totals.length > 0) {\r\n            var newTotal = parseFloat(response.totals[response.totals.length - 1].text.replace(\/[^0-9|\\.]\/g, ''));\r\n            var discount = this.originalTotal - newTotal;\r\n            if (discount > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: discount\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n\r\n};",
	"citychiconline": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('.button[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"claires": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = Number($('.discount span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"clareflorist": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.sc-discounttotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"clarinsusa": "var ExternalProvider = {\r\n\tparse: function (response) {\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\tvar savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: savings > 0,\r\n\t\t\tsavings: isNaN(savings) ? 0.00 : savings\r\n\t\t};\r\n\t},\r\n\tcomplete: function (bestCode) {\r\n\t\tif (bestCode) location.reload();\r\n\t}\r\n};",
	"clarisonic": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode, #dwfrm_couponcode_couponCode').val(bestCode);\r\n            $('#add-coupon, button[name=\"dwfrm_couponcode_applyCoupon\"]').click();\r\n        }\r\n    }\r\n};",
	"clarksde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.data.totalVoucherDiscounts.replace(\/[^0-9.]\/g, '')) \/ 100;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#vouhcerCode').val(bestCode);\r\n            $('.button.btn.btn-apply.js-apply-promo-code').click();\r\n        }\r\n    }\r\n};",
	"clarks": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.data.totalVoucherDiscounts.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#vouhcerCode').val(bestCode);\r\n      $('button:contains(\"APPLY CODE\")').click();\r\n      setTimeout(function () { window.location.reload() }, 2000);\r\n    }\r\n  }\r\n};",
	"clarksusa": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseJson = $.parseJSON(response.responseText);\r\n        var discount = parseFloat(responseJson.data.totalVoucherDiscounts.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: discount > 0,\r\n            savings: discount\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#vouhcerCode').val(bestCode);\r\n            $('.js-apply-promo-code').click();\r\n        }\r\n    }\r\n};",
	"classicfootballshirts": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};",
	"classmates": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#item_discount_0', responseHTML).text().replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#code').val(bestCode);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('a:contains(\"Apply\")').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"clearlyca": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data;\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = 'callCount=1\\nc0-scriptName=shoppingCartAjaxController\\nc0-methodName=updateCoupon' +\r\n                '\\nc0-param0=null:null' +\r\n                '\\nc0-param1=string:' + code +\r\n                '\\nc0-param2=string:' +\r\n                '\\nc0-param3=boolean:false' +\r\n                '\\nxml=true';\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseText = response.responseText;\r\n        var responseHTML = $.parseHTML(responseText);\r\n        var savings = parseFloat($('#cartitem-discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var data = 'callCount=1\\nc0-scriptName=shoppingCartAjaxController\\nc0-methodName=updateCoupon' +\r\n                '\\nc0-param0=null:null' +\r\n                '\\nc0-param1=string:' + bestCode +\r\n                '\\nc0-param2=string:' +\r\n                '\\nc0-param3=boolean:false' +\r\n                '\\nxml=true';\r\n\r\n            $.ajax({\r\n                url: 'https:\/\/www.clearly.ca\/dwr\/exec\/shoppingCartAjaxController.updateCoupon.dwr',\r\n                data: data,\r\n                method: 'POST',\r\n                dataType: 'json',\r\n                async: false\r\n            });\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"clinique": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount .price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"cliniquede": "var ExternalProvider = {\r\n  prepare: function (requestType, code) {\r\n    var formData = {};\r\n\r\n    if (requestType === 'applyCouponUrl') {\r\n      formData = Object.assign(formData, {\r\n        JSONRPC: '[{\"method\":\"logic.checkout--viewcart\",\"id\":2,\"params\":[{\"_SUBMIT\":\"offer_code\",\"OFFER_CODE\":\"' + code + '\"}]}]'\r\n      });\r\n    }\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('#subtotal-row-total').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat(response[0].result.value.transaction.formattedItemsAppliedPrice.replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#form--offer_code--field--OFFER_CODE').val(bestCode);\r\n      $('input[data-test-id=\"form_offer_code_apply\"]').click();\r\n    }\r\n  }\r\n};",
	"cliradex": "var ExternalProvider = {\r\n\tinit: function () {\r\n\t\tthis.oldTotal = parseFloat($('.order-total .woocommerce-Price-amount').text().replace(\/[^0-9.]\/g, ''));\r\n\t},\r\n\tparse: function (response) {\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\tvar newTotal = parseFloat($('.order-total .woocommerce-Price-amount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\t\tvar savings = this.oldTotal - newTotal;\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: savings > 0,\r\n\t\t\tsavings: isNaN(savings) ? 0.00 : savings\r\n\t\t};\r\n\t},\r\n\tisCartPage: function () {\r\n        return !\/checkout\/.test(location.href);\r\n    },\r\n\tcomplete: function (bestCode) {\r\n        if (bestCode) {\r\n\t\t\tvar applyButton = this.isCartPage() ? 'input[name=\"apply_coupon\"]' : 'button[name=\"apply_coupon\"]';\r\n            $('#coupon_code').val(bestCode);\r\n\t\t\t$(applyButton).click();\r\n        }\r\n    }\r\n};",
	"clothingshoponline": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"entity_id\", window.checkoutConfig.quoteData.entity_id);';\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var entityid = $('body').attr('entity_id');\r\n    var active = 'guest-carts\/' + entityid;\r\n    \r\n    if ($(\".authentication-wrapper[style='display: none;'], .customer-welcome\").length > 0) {\r\n      active = 'carts\/mine'\r\n    }\r\n\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/www.clothingshoponline.com\/rest\/default\/V1\/' + active + '\/coupons\/CLAIMCODE';\r\n    var resultUrl = 'https:\/\/www.clothingshoponline.com\/rest\/default\/V1\/' + active + '\/payment-information?';\r\n    var clearUrl = 'https:\/\/www.clothingshoponline.com\/rest\/default\/V1\/' + active + '\/coupons';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    applyUrlInput.attr('data-value', resultUrl);\r\n    applyUrlInput.attr('data-clear', clearUrl);\r\n  },\r\n  parse: function (response) {\r\n    var savings = 0.00;\r\n    var oldTotal = parseFloat($(\".grand.totals\").text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = Math.abs(response.totals.base_subtotal_with_discount);\r\n\r\n    if (oldTotal > newTotal) {\r\n      savings = Math.abs(response.totals.discount_amount);\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode && location.pathname === \"\/checkout\/cart\/\") {\r\n      $(\"#block-discount-heading\").click();\r\n      $(\"#coupon_code\").val(bestCode);\r\n      $(\".action.apply.primary\").click();\r\n    } else if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"cloud9living": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.discount_amount * -1);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"clubmonaco": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.order-discount.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"coals2u": "var PopUpExtension = {\r\n  init: function() {\r\n    this.waitForSelector(this.shouldPopExtension);\r\n  },\r\n  waitForSelector: function (isResolved) {\r\n    let detectSelector = setInterval(function () {\r\n      if (isResolved()) {\r\n        clearInterval(detectSelector);\r\n        if ($('#_jpPopUpIndicator').length < 1) {\r\n          const popUpIndicator = $('<div><\/div>', {id: '_jpPopUpIndicator'});\r\n          $('body').append(popUpIndicator);\r\n        }\r\n      }\r\n    }, 2000);\r\n  },\r\n  shouldPopExtension: function() {\r\n    \/\/set selector when piggy should pop\r\n    return $('#payment:visible').length > 0;\r\n  }\r\n};\r\nPopUpExtension.init();",
	"coastal": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    if (action === 'injectCoupon') {\r\n        $(\"div[data-clyauto-id='cart-coupon-trigger']\").click();\r\n        $(\".cart-page-coupon\").val(code);\r\n        $(\".postfix.co-coupon-code-submit\")[0].click();\r\n        $(\"div[data-clyauto-id='cart-coupon-trigger']\").click(); \r\n    } else if (action === 'removeInjectedCoupon') {\r\n        $(\".cart-page-coupon\").val(\"\");\r\n        $(\".postfix.co-coupon-code-submit\")[0].click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 500);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 50);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('#co-discount-total').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $(\"div[data-clyauto-id='cart-coupon-trigger']\").click();\r\n      $(\".cart-page-coupon\").val(bestCode);\r\n      $(\".postfix.co-coupon-code-submit\")[0].click();\r\n    }\r\n  }\r\n};",
	"coastalscents": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"coastuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('dd.promo', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"cocoonbysealy": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var applyUrlInput = $('#__applyUrl');\r\n        var applyUrl = this.getCookie(\"csrftoken\");\r\n\r\n        applyUrlInput = document.createElement('input');\r\n        applyUrlInput.id = '__applyUrl';\r\n        applyUrlInput.style.display = 'none';\r\n        (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n        applyUrlInput = $('#__applyUrl');\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        if (type === 'applyCouponUrl') {\r\n            return JSON.stringify({\r\n                vouchercode: code\r\n            });\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var savings = (response.voucher_discounts[0].amount);\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    getCookie: function (cookieName) {\r\n        var name = cookieName + '=';\r\n        var ca = document.cookie.split(';');\r\n\r\n        for (var i = 0; i < ca.length; i++) {\r\n            var c = ca[i];\r\n\r\n            while (c.charAt(0) === ' ') {\r\n                c = c.substring(1);\r\n            }\r\n\r\n            if (c.indexOf(name) === 0) {\r\n                return decodeURIComponent(c.substring(name.length, c.length));\r\n            }\r\n        }\r\n\r\n        return '';\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"coffeebean": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"entityid\", window.checkoutConfig.quoteData.entity_id);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var entityid = $('body').attr('entityid');\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/store.coffeebean.com\/rest\/default\/V1\/guest-carts\/' + entityid + '\/coupons\/CLAIMCODE';\r\n\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n\r\n    var resultUrlInput = $('#___jpresultUrl');\r\n    var resultUrl = 'https:\/\/store.coffeebean.com\/rest\/default\/V1\/guest-carts\/' + entityid + '\/payment-information?';\r\n\r\n\r\n    if (!resultUrlInput.length) {\r\n      resultUrlInput = document.createElement('input');\r\n      resultUrlInput.id = '___jpresultUrl';\r\n      resultUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n      resultUrlInput = $('#___jpresultUrl');\r\n    }\r\n\r\n    resultUrlInput.attr('value', resultUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = response.totals.discount_amount;\r\n    var savings = parseFloat(Math.abs(responseHTML));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"coffeeforless": "var ExternalProvider = {\r\n\r\n\tparse: function (response, status, $xhr, code) {\r\n\t\tif (response.success && response.message.toLowerCase().indexOf(code.toLowerCase()) != -1) {\r\n\r\n\t\t\tvar $summary = $.parseHTML(['<div>', response.summary, '<\/div>'].join('')),\r\n\t\t\t\t$totals = $('table.onestepcheckout-totals', $summary),\r\n\t\t\t\tcodeFound = false,\r\n\t\t\t\tsavings = 0.00;\r\n\r\n\t\t\t$('tr', $totals).each(function () {\r\n\r\n\t\t\t\tif ($('.title', $(this)).text().indexOf('Discount') != -1) {\r\n\r\n\t\t\t\t\tcodeFound = true;\r\n\t\t\t\t\tsavings = parseFloat($('.price', $(this)).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: codeFound,\r\n\t\t\t\tsavings: savings\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t};\r\n\t},\r\n\r\n\tcomplete: function (bestCode) {\r\n\t\tif (bestCode) location.reload();\r\n\t}\r\n};",
	"coffeeorg": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    prepare: function (type, code) {\r\n        if(type == 'applyCouponUrl'){\r\n            var form = $('form.shopping_cart_form').clone();\r\n            form.find('input[name=\"coupon_code\"]').val(code);\r\n            return form.serialize();\r\n        }\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsText = $('div.row.shopping-cart-totals > div.small-3.columns.savings', responseHTML).text();\r\n        var savings = parseFloat(savingsText.replace(this.nonPriceRegex, '').toString());\r\n        if(savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n};",
	"coffeewholesale": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"coggles": "function retrieveWindowVariable(variable) {\r\n\r\n    var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { $('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + \")); }\\n\";\r\n    var script = document.createElement('script');\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n    var value = $(\"body\").attr(\"tmp_\" + variable);\r\n    $(\"body\").removeAttr(\"tmp_\" + variable);\r\n\r\n    return JSON.parse(value);\r\n\r\n}\r\n\r\nvar ExternalProvider = {\r\n    currentOffer: 0,\r\n    prepare: function(type, code){\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            return {\r\n                discountCode: code\r\n            };\r\n        } else {\r\n            return {\r\n                section: 'checkout',\r\n                page: 'basket',\r\n                removeOffer: this.currentOffer\r\n            };\r\n        }\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('#total-basket-value').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('#total-basket-value', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var offerMatch = $('.auto-basketaction-removeOffer', responseHTML).attr('href').match(\/removeOffer=([^&=\\?]*)$\/);\r\n\r\n        \/\/ Used by the clearCoupon section in the prepare() method\r\n        this.currentOffer = (offerMatch && offerMatch[1]) ? offerMatch[1] : 0;\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.replace(retrieveWindowVariable('siteObj.siteBasketURL'));\r\n    }\r\n};",
	"cokesbury": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (action, code) {\r\n        var formData = $('#shopping-cart-form').serializeObject();\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                discountcouponcode: code,\r\n                applydiscountcouponcode: 'Apply'\r\n            });\r\n        } else if (action === 'clearCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                discountcouponcode: null,\r\n                'removediscount-29': null\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount-total .value-summary', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (location.href.includes('cart') && bestCode) {\r\n            $('#discountcouponcode').val(bestCode);\r\n            $('#applydiscountcouponcode').click();\r\n        } else if (bestCode) {\r\n            $('.coupon-box-panel input').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('.coupon-box-panel input').trigger('input').trigger('change');\r\n            $('.coupon-box-panel button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        }\r\n    }\r\n};",
	"coldwatercreek": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.order-total>.order-totals-value').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.order-total>.order-totals-value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"colehaan": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0;\r\n        if ($('#dwfrm_copayment_couponCode').length) {\r\n            $.ajax({\r\n                url: 'https:\/\/www.colehaan.com\/on\/demandware.store\/Sites-ColeHaan_US-Site\/en_US\/Cart-AddCoupon?couponCode=' + code + '&format=ajax',\r\n                type: 'GET',\r\n                async: false\r\n            });\r\n            $.ajax({\r\n                url: 'https:\/\/www.colehaan.com\/on\/demandware.store\/Sites-ColeHaan_US-Site\/en_US\/COBilling-UpdateSummary',\r\n                type: 'GET',\r\n                success: function (result) {\r\n                    savings = parseFloat($('.order-discount', $.parseHTML(result)).text().replace(\/[^.0-9|]\/g, ''));\r\n                },\r\n                async: false\r\n            });\r\n        } else {\r\n            savings = parseFloat(response.totals.orderLevelDiscountTotal.value);\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($('#dwfrm_cart_couponCode').length) {\r\n                $('#dwfrm_cart_couponCode').val(bestCode);\r\n                $('#add-coupon').removeAttr('disabled');\r\n                $('#add-coupon').click();\r\n            } else {\r\n                location.reload();\r\n            }\r\n        }\r\n    }\r\n};",
	"coleman": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldPrice = parseFloat($('.order-total .order-value').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = response.baskettotal;\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"collectionsetc": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('#txtPromotion', responseHTML).val().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('#OrderTotal').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('#OrderTotal', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"collectionsetc.mobile": "var ExternalProvider = {\r\n  _numberCleanRegexp: \/[^\\d.]\/g,\r\n  _originalTotal: 0,\r\n\r\n  _sortDesc: function (a, b) {\r\n    return b - a;\r\n  },\r\n  _parseNodeFloat: function (node) {\r\n    return parseFloat(node.innerText.replace(ExternalProvider._numberCleanRegexp, '')) || 0;\r\n  },\r\n\r\n  _makeRequest: function (code) {\r\n    return JSON.stringify({\r\n      Target: 'Coupon',\r\n      Cart: {\r\n        CouponCode: {\r\n          Code: code\r\n        }\r\n      }\r\n    });\r\n  },\r\n\r\n  init: function () {\r\n    this._originalTotal = $('.cart-total .total')\r\n      .toArray()\r\n      .map(this._parseNodeFloat)\r\n      .sort(this._sortDesc)[0];\r\n  },\r\n\r\n  prepare: function (type, code) {\r\n    if (type === 'applyCouponUrl') {\r\n      return this._makeRequest(code);\r\n    }\r\n  },\r\n\r\n  parse: function (response, status, $xhr, code) {\r\n    var fail = {\r\n      success: false,\r\n      savings: 0.00\r\n    };\r\n\r\n    if (!response || response.success !== true || !response.resultset || !response.resultset.Cart) {\r\n      return fail;\r\n    }\r\n\r\n    var cart = response.resultset.Cart;\r\n    if (!cart.CouponCode || !cart.CouponCode.Success) {\r\n      return fail;\r\n    }\r\n    if (!cart.Summary || !cart.Summary.Total || typeof cart.Summary.Total.Value !== 'number') {\r\n      return fail;\r\n    }\r\n\r\n    var savings = this._originalTotal - cart.Summary.Total.Value;\r\n    if (savings <= 0) {\r\n      return fail;\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      savings: savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode, bestSaving) {\r\n    $.ajax({\r\n      url: '\/json\/cartdetail',\r\n      method: 'POST',\r\n      cache: false,\r\n      data: this._makeRequest(bestCode),\r\n      contentType: 'application\/json',\r\n      dataType: 'json'\r\n    })\r\n      .always(function () {\r\n        window.location.reload();\r\n      });\r\n  }\r\n};",
	"collectplus": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var s = document.createElement('script');\r\n        var guid;\r\n        var code;\r\n\r\n        s.id = 'tempScript';\r\n        code = \"document.querySelector('body').setAttribute('guid', JSON.parse(localStorage['ngStorage-order']).guid)\";\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n\r\n        guid = $('body').attr('guid');\r\n        $('#tempScript').remove();\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/api.collectplus.co.uk\/api\/v2\/orders\/' + guid + '\/apply_promo_code',\r\n            type: 'OPTIONS',\r\n            async: false\r\n        });\r\n    },\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('.total-price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = 0;\r\n        var savings;\r\n\r\n        response.parcels.map(function (parcel) {\r\n            newTotal += parcel.price;\r\n\r\n            return null;\r\n        });\r\n        savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider.__prepareUrl();",
	"colleenrothschild": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"colorfulimages": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\".*\/g)[0].split(':')[1].replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"columbia": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var holder = ($('.table tbody tr td:eq(1) span', responseHTML).text()).match(\/\\((.*)\\)\/).pop();\r\n        var savings = holder.replace(\/[^0-9.]\/g, '');\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"comboink": "var ExternalProvider = {\r\n    prepare: function(action, code) {\r\n        if(action !== 'clearCouponUrl') return false;\r\n\r\n        return {\r\n            form_key: $('input[name=\"form_key\"]').val(),\r\n            all_coupon_code: code,\r\n            remove_coupon_code: code\r\n        };\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var $response = $.parseHTML(response),\r\n            $checkoutRow = $('#shopping-cart-totals-table .checkout-table-row', $response),\r\n            codeFound = false, savings = 0.00, $item;\r\n\r\n        $checkoutRow.each(function() {\r\n\r\n            $item = $(this);\r\n            if($('div:first-child', $item).text().toLowerCase().indexOf('coupon ' + code.toLowerCase()) !== -1) {\r\n                codeFound = true;\r\n                savings = parseFloat($('.price', $item).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"comboink.mobile": "var ExternalProvider = {\r\n    $: window.$piggyJq,\r\n\r\n    prepare: function(action, code) {\r\n        if(action !== 'clearCouponUrl') return false;\r\n\r\n        return {\r\n            form_key: this.$('input[name=\"form_key\"]').val(),\r\n            all_coupon_code: code,\r\n            remove_coupon_code: code\r\n        };\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var $response = this.$.parseHTML(response),\r\n            $checkoutRow = this.$('#shopping-cart-totals-table .checkout-table-row', $response),\r\n            codeFound = false, savings = 0.00, $item;\r\n\r\n        $checkoutRow.each(function() {\r\n\r\n            $item = ExternalProvider.$(this);\r\n\r\n            if(ExternalProvider.$('div:first-child', $item).text().toLowerCase().indexOf('coupon ' + code.toLowerCase()) !== -1) {\r\n                codeFound = true;\r\n                savings = parseFloat(ExternalProvider.$('.price', $item).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"commastore": "var ExternalProvider = {\r\n  isCartPage: function () {\r\n    return !$('.jsCheckoutForm').length;\r\n  },\r\n  prepare: function (type, code) {\r\n    var cartData = {};\r\n    var checkoutData = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      cartData = {\r\n        view: 'ajax',\r\n        dwfrm_cart_couponCode: code,\r\n        dwfrm_cart_addCoupon: 'Add'\r\n      };\r\n\r\n      checkoutData = {\r\n        view: 'ajax',\r\n        dwfrm_cov2checkout_billing_couponCode: code,\r\n        dwfrm_cov2checkout_billing_giftcardPrefix: $('#dwfrm_cov2checkout_billing_giftcardPrefix').val(),\r\n        dwfrm_cov2checkout_expresscheckout: true,\r\n        dwfrm_cov2checkout_billing_addcoupon: ''\r\n      };\r\n    } else if (type === 'clearCouponUrl') {\r\n      cartData = {\r\n        view: 'ajax',\r\n        dwfrm_cart_coupons_i0_deleteCoupon: ''\r\n      };\r\n\r\n      checkoutData = {\r\n        view: 'ajax',\r\n        dwfrm_cov2checkout_billing_giftcardPrefix: $('#dwfrm_cov2checkout_billing_giftcardPrefix').val(),\r\n        dwfrm_cov2checkout_expresscheckout: true,\r\n        dwfrm_cov2checkout_billing_coupons_i0_deletecoupon: code\r\n      };\r\n    }\r\n\r\n    return this.isCartPage() ? cartData : checkoutData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = this.isCartPage() ? parseFloat($('.minicart__totaldiscountvalue', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100 : parseFloat($('.ta_orderSummaryDiscounts', responseHTML).first().text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && !this.isCartPage()) {\r\n      $.ajax({\r\n        url: $('.jsCheckoutForm').attr('action'),\r\n        type: 'POST',\r\n        data: {\r\n          view: 'ajax',\r\n          dwfrm_cov2checkout_billing_giftcardPrefix: $('#dwfrm_cov2checkout_billing_giftcardPrefix').val(),\r\n          dwfrm_cov2checkout_expresscheckout: true,\r\n          dwfrm_cov2checkout_billing_coupons_i0_deletecoupon: bestCode\r\n        },\r\n        async: false\r\n      });\r\n\r\n      $('#dwfrm_cov2checkout_billing_couponCode').val(bestCode);\r\n      $('#dwfrm_cov2checkout_billing_addcoupon').removeAttr('disabled').removeClass('disabled disabledButton').click();\r\n    } else if (bestCode) {\r\n      location.reload();\r\n    }\r\n  }\r\n};",
	"compactappliance": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var discount = response.couponTotal;\r\n\r\n        return {\r\n            success: discount > 0,\r\n            savings: discount\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon-number').val(bestCode);\r\n            $('#apply-coupon').click();\r\n        }\r\n    }\r\n};",
	"competitivecyclist": "var ExternalProvider = {\r\n    checkoutType: '',\r\n    initializeProvider: function () {\r\n        this.setCheckoutType();\r\n        this.prepareUrl();\r\n    },\r\n    prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl;\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var resultUrl = location.href;\r\n\r\n        if (this.checkoutType === 'CART') {\r\n            applyUrl = 'https:\/\/www.competitivecyclist.com\/Store\/services\/coupon\/CLAIMCODE';\r\n        } else if (this.checkoutType === 'CHECKOUT') {\r\n            applyUrl = 'https:\/\/www.competitivecyclist.com\/Store\/checkout\/checkout.jsp?_DARGS=\/Store\/checkout\/includes\/checkoutAjaxForms.jsp.ajaxform-redeemCoupon';\r\n        }\r\n\r\n        resultUrl = 'https:\/\/www.competitivecyclist.com\/Store\/cart\/currentOrderDetails.json.jsp';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        resultUrlInput.attr('value', resultUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = false;\r\n\r\n        if (this.checkoutType === 'CHECKOUT') {\r\n            data = {\r\n                _dyncharset: 'UTF - 8',\r\n                _dynSessConf: $(\"input[name='_dynSessConf']\").val(),\r\n                '\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode': code,\r\n                '_D:\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode': null,\r\n                '\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponSuccessURL': 'https:\/\/www.competitivecyclist.com\/Store\/checkout\/includes\/coupon\/couponSuccess.json.jsp',\r\n                '_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponSuccessURL': null,\r\n                '\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponErrorURL': 'https:\/\/www.competitivecyclist.com\/Store\/checkout\/includes\/coupon\/couponError.json.jsp',\r\n                '_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponErrorURL': null,\r\n                '_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon': null,\r\n                '_DARGS: \/Store\/checkout\/includes\/checkoutAjaxForms.jsp.ajaxform-redeemCoupon': null,\r\n                '\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon': null\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = JSON.parse(response).attributes.promotionSavings.replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    },\r\n    setCheckoutType: function () {\r\n        this.checkoutType = location.href.contains('checkout') ? 'CHECKOUT' : 'CART';\r\n    }\r\n};\r\n\r\nExternalProvider.initializeProvider();",
	"computeruniverse": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.js-orderTotal').data('ordertotalvalue'));\r\n        var newTotal = parseFloat($('.js-orderTotal', responseHTML).data('ordertotalvalue'));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"comtech": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = $('div.panel--td.column--total-price.block.is--align-right', $.parseHTML(response)).text().replace(\/[^0-9.]\/g,'') \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode){\r\n            $('input[name=\"sVoucher\"]').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        };\r\n    }\r\n};",
	"condor": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n        var newCurrency;\r\n        var selector = location.pathname;\r\n\r\n        if (selector.match('\/de\/')) {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        } else {\r\n            locale = localeMapping.US;\r\n            newCurrency = currency;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n};",
	"conradde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('div.ccpCartOverview__list__item--large > div.ccpCartOverview__list__item__cell.ccpCartOverview__list__item__cell--right > font').text().split('\u20ac')[0].replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n        var savings = parseFloat($('.ccpCartOverview__list div:eq(2)', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        savings = oldTotal === savings ? 0 : savings;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"contactlensking": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = !this.isCheckOutPage() ? '\/cart.aspx' : '\/Secure\/Checkout\/step4.aspx';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    serializeObject: function (a) {\r\n        var o = {};\r\n\r\n        $.each(a, function () {\r\n            o[this.name] = this.value || '';\r\n        });\r\n\r\n        return o;\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = this.serializeObject($('#aspnetForm').serializeArray());\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data.ctl00$cphMasterBody$txtCoupon = code;\r\n\r\n            if (this.isCheckOutPage()) {\r\n                data.ctl00$cphMasterBody$btnCoupon = 'Apply';\r\n            }\r\n\r\n            return data;\r\n        }\r\n\r\n        if (type === 'clearCouponUrl') {\r\n            data.__EVENTTARGET = 'ctl00$cphMasterBody$btnRemoveCoupon';\r\n            data.ctl00$cphMasterBody$hdnCoupon = code;\r\n\r\n            return data;\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var discount = this.isCheckOutPage() ? '#ctl00_cphMasterBody_lblCouponValue' : '#ctl00_cphMasterBody_lblCoupon';\r\n\r\n        var savings = parseFloat($(discount, responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCheckOutPage: function () {\r\n        return \/Checkout\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#ctl00_cphMasterBody_txtCoupon').val(bestCode);\r\n            $('#ctl00_cphMasterBody_btnCoupon').click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"contactlensking.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($(\".btn-text div:contains(Coupon details: \" + code + \") + div\", responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"contactsdirect": "var ExternalProvider = {\r\n    init: function() {\r\n        this.dom_data = {};\r\n    },\r\n    prepare: function(type, code) {\r\n        if (type === 'clearCouponUrl') {\r\n            var formData = {},\r\n                savedHTML = this.dom_data[code],\r\n                offercodeId = $('.remove_promo', savedHTML).attr('href').split('=')[1];\r\n            formData[\"offerCodeId\"] = offercodeId;\r\n            return formData;\r\n        }\r\n    },\r\n    parse: function(response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response),\r\n            savings = parseFloat($('.discount', responseHTML).text().replace('$', ''));\r\n        this.dom_data[code] = responseHTML;\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSavings) {\r\n        location.reload(true);\r\n    }\r\n}",
	"containerstore": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = $('.float-right.bem-text--bold:eq(0)').text().replace(\/[^0-9|.]\/g, '');\r\n    var newTotal = $('.bem-title-regular.padding-bottom .float-right.bem-text--bold', responseHTML).text().replace(\/[^0-9|.]\/g, '');\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"contentmart": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        if(response.status == 'OK'){\r\n            return {\r\n                success: true,\r\n                savings: Number(response.discount)\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        \/\/apply success code this way, so there's a visual feedback on the site.\r\n        $('.discountCode').val(bestCode);\r\n        $('.discountCode + button').click();\r\n    }\r\n};",
	"gocontigo": "var ExternalProvider = {\r\n\r\n  parse: function (response) {\r\n    var htmlResponse = $.parseHTML(response.body.totals_block)\r\n    var savings = parseFloat(($(\".summary-total .price\",htmlResponse)[0].innerHTML.replace(\/[^0-9|.]\/g,'')));\r\n\r\n    return {\r\n        success: savings > 0,\r\n        savings: isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n      if (bestCode) location.reload();\r\n  }\r\n};",
	"converse": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var url = window.location.pathname;\r\n\r\n        if (isEUR = url.match(\/(de|fr)\/g)) {\r\n            currency = 'EUR';\r\n            locale = localeMapping[isEUR.shift().toUpperCase()];\r\n        } else if (url.match(\/en\/g)) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"cookiesbydesign": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var object = {};\r\n            var data = this.serializeArray();\r\n            $.each(data, function () {\r\n                object[this.name] = this.value || '';\r\n            });\r\n            return object;\r\n        };\r\n    },\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var checkoutUrl = $('#Form1').attr('action');\r\n        var applyUrl = this.isCartPage() ? 'https:\/\/www.cookiesbydesign.com\/cart.aspx' : 'https:\/\/www.cookiesbydesign.com' + checkoutUrl;\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    isCartPage: function () {\r\n        return location.pathname === \"\/cart.aspx\";\r\n    },\r\n    prepare: function (action, code) {\r\n\r\n        if (action === \"applyCouponUrl\") {\r\n            var formData = this.isCartPage() ? $('#form1').serializeArray() : $('#Form1').serializeArray();\r\n            for (var i = formData.length - 1; i >= 0; i--) {\r\n                if (formData[i].name == 'Cart_PromoCode' || formData[i].name == 'BP_PromoCode') {\r\n                    formData[i].value = code;\r\n                } else if (formData[i].name == '__EVENTTARGET') {\r\n                    formData[i].value = \"lnkApplyPromo\";\r\n                }\r\n            }\r\n            return formData;\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var codeFound = this.isCartPage() ? $('#pnlPromoApplied > div', responseHTML).text().replace(\/\\r?\\n|\\r\/g, \"\") : $('#Cart_AppliedPromo_Value', responseHTML).text().replace(\/\\r?\\n|\\r\/g, \"\");\r\n        var codeFoundConcat = codeFound + \"DiscountEnd\";\r\n        var match = codeFoundConcat.match('Discount(.*)DiscountEnd')[0];\r\n        var savings = match.replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"cookieskids": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n     if (type === 'injectCoupon' && $('#MasterMiddle_Billing1_BillingControl_txtCreditCardNumber').length) {\r\n      $('#MasterMiddle_wf_CouponCode').val(code);\r\n      $('#MasterMiddle_wf_CouponCode').get(0).dispatchEvent(changeEvent);\r\n      $('#MasterMiddle_UpdateCouponButton')[0].click();\r\n    } else  if (type === 'injectCoupon') {\r\n      $('#MasterMiddle_CartListView1_wf_CouponCode').val(code);\r\n      $('#MasterMiddle_CartListView1_wf_CouponCode').get(0).dispatchEvent(changeEvent);\r\n      $('#apply-button').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1500);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('#MasterMiddle_CartListView1_lblTotal_Discount').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCartPage: function () {\r\n      return \/Cart.aspx\/.test(location.pathname);\r\n    },\r\n  complete: function (bestCode) {\r\n      if (bestCode && $('#MasterMiddle_Billing1_BillingControl_txtCreditCardNumber').length) {\r\n          $('#MasterMiddle_wf_CouponCode').val(bestCode);\r\n          $('#MasterMiddle_UpdateCouponButton')[0].click();\r\n        } else  if (bestCode) {\r\n          $('#MasterMiddle_CartListView1_wf_CouponCode').val(bestCode);\r\n          $('#apply-button').click();\r\n        }\r\n    }\r\n};",
	"coolglow": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHMTL = $.parseHTML(response);\r\n        var savings = parseFloat($('#coupon_value', responseHMTL).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) { location.reload(); }\r\n    }\r\n};",
	"corelle": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        function serializeObject(a) {\r\n            var o = {};\r\n\r\n            $.each(a, function () {\r\n                o[this.name] = this.value || '';\r\n            });\r\n\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('#CheckoutCartForm').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        data.dwfrm_cart_updateCart = 'dwfrm_cart_updateCart';\r\n\r\n        \/\/ If data needs to be prepared\r\n        if (type === 'applyCouponUrl') {\r\n            data.dwfrm_cart_couponCode = code;\r\n        } else {\r\n            data.dwfrm_cart_couponCode = '';\r\n            data.dwfrm_cart_coupons_i0_deleteCoupon = 'Remove';\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var $savings = $('.order-discount.discount .subtotal-value', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if ($savings.length) {\r\n            var savings = parseFloat($savings.text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n            return {\r\n                success: savings > 0,\r\n                savings: isNaN(savings) ? 0.00 : savings\r\n            }\r\n        }\r\n    }\r\n};",
	"corgisocks": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savingsLoc = response.match('Discount(.*)');\r\n        var savings = parseFloat(savingsLoc[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon').val(bestCode);\r\n            $('#button').click();\r\n        }\r\n    }\r\n};",
	"corsetdeal": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var discount = parseFloat($('[data-checkout-discount-amount-target]', response.responseText).html()\r\n            .replace(\/[^0-9|\\.]\/g, '').trim()\r\n        );\r\n\r\n        if (discount > 0) {\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if(bestCode){\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"cosabella": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-info td:contains(\"Promo Discount\")+td', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"cosbar": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"cosmede": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.lines[0].disc_price.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon-code').val(bestCode);\r\n      $('.btn.btn-cool.btn-sm.btn-coupon').click();\r\n    }\r\n  }\r\n};",
	"cosmeticamerica": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.carttext.colors_text:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#v65-cart-coupon-entry-details-input, input[name=\"CouponCode\"]').val(bestCode);\r\n      $('#v65-cart-coupon-entry-details-button, input[name=\"btnCouponCode\"]').click();\r\n    }\r\n  }\r\n};",
	"cosstoresfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.orderTotals.tealiumTotalDiscount.replace(\/[^0-9.]\/g, ''));\r\n    \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"costcouk": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n      $('#voucherCode').val(code);\r\n      $('#voucherCode').get(0).dispatchEvent(changeEvent);\r\n      $('#js-apply-voucher').click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.remove-from-cart-lbl').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1500);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat($('.voucher.voucher-unit-price.discount-minus-sign.price-value').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"worldmarket": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.ml-basket-total-value.ml-discount-value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"costumediscounters": "var ExternalProvider = {\r\n\tinit: function () {\r\n\t\tthis._cartTotal = $('tfoot td').text().replace('$', '');\r\n\t},\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar newTotal = parseFloat($('tfoot td').text().replace('$', ''));\r\n    \tvar savings = this._cartTotal - newTotal;\r\n    \tif (savings) {\r\n    \t\treturn {\r\n    \t\t\tsuccess: true,\r\n    \t\t\tsavings: savings\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"costumekingdom": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.right:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"costumesupercenter": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var resultUrlInput = $('#___jpResultUrl');\r\n    var resultUrl = this.isCheckoutPage() ? 'https:\/\/www.costumesupercenter.com\/checkout\/addresses' : 'https:\/\/www.costumesupercenter.com\/cart';\r\n\r\n    if (!resultUrlInput.length) {\r\n      resultUrlInput = document.createElement('input');\r\n      resultUrlInput.id = '___jpResultUrl';\r\n      resultUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n      resultUrlInput = $('#___jpResultUrl');\r\n    }\r\n\r\n    resultUrlInput.attr('value', resultUrl);\r\n  },\r\n  isCheckoutPage: function () {\r\n    return location.pathname === '\/addresses';\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('strong:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"costway": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response.blocks.review_cart);\r\n        var savings = parseFloat($('tfoot .a-right .price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#aw-onestepcheckout-coupon-code-apply-btn').click();\r\n        }\r\n    }\r\n};",
	"cottonon": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n\r\n      $('#promo-code').val(code);\r\n      $('#promo-code').get(0).dispatchEvent(changeEvent);\r\n      $('#add-coupon').click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.underline.align-text.remove-promo-code').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1000);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.subheader.order-discount.order-discount-amount').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"cottontraders": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var dynamicKey = $('input[placeholder=\"Enter your code\"]').attr('id');\r\n        var formData = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            formData.dwfrm_sourcecode_addSourceCode = 'Submit';\r\n            formData.currentPage = $('#pageContextField').val();\r\n            formData[dynamicKey] = code;\r\n\r\n            return formData;\r\n        }\r\n\r\n        return true;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.b-order-totals_discount-price:contains(\"\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[placeholder=\"Enter your code\"]').val(bestCode);\r\n            $('button[name=\"dwfrm_sourcecode_addSourceCode\"]').click();\r\n        }\r\n    }\r\n};",
	"coupaw": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML($xhr.responseText);\r\n\r\n        var success, savings;\r\n\r\n        success = $('.subtotals small:contains(\"Coupon\")', responseHTML)[0].textContent.toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n        if (success) {\r\n            savings = $('.discount', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        }\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n\r\n    complete: function()\r\n    {\r\n        location.reload();\r\n    }\r\n};",
	"courirfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discounts.discount-total', responseHTML).text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"couturecandy": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().split(\"$\")[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"coxandcox": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match(\/\"discount_amount\":\"-[0-9|.]*\/).toString().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($('#coupon_code').length) {\r\n                $('#coupon_code').val(bestCode);\r\n                $('button.apply').click();\r\n            } else {\r\n                var s = document.createElement('script');\r\n                var code = \"jQuery('#discount-code').val('\" + bestCode + \"').trigger('change');jQuery('.action-apply').trigger('click');\";\r\n\r\n                s.appendChild(document.createTextNode(code));\r\n                document.body.appendChild(s);\r\n            }\r\n        }\r\n    }\r\n};",
	"cr8rec": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var success = $('.cartcoupon .value', responseHTML).text().indexOf(code) >= 0;\r\n\r\n        var savings;\r\n\r\n        if (success) {\r\n            savings = $('.discount .value', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        }\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings ? parseFloat(savings) : 0.00\r\n        }\r\n    },\r\n\r\n    complete: function()\r\n    {\r\n        location.reload();\r\n    }\r\n};",
	"crabtree-evelyn": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var existingCoupon = parseFloat($('.discount .valuealign').text().replace(\/[^.0-9]\/g, '')) || 0;\r\n    var newCoupon = parseFloat($('.discount .valuealign', responseHTML).text().replace(\/[^.0-9|.]\/g, ''));\r\n    \r\n    if (existingCoupon < newCoupon) {\r\n      var savings = parseFloat($('.discount .valuealign', responseHTML).text().replace(\/[^.0-9|.]\/g, ''));\r\n    }\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"crateandbarrel": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.merchandiseDiscount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};",
	"cratejoy": "var ExternalProvider = {\r\n  init: function () {\r\n    this.oldTotal = parseFloat($('.cart-total').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action === 'injectCoupon') {\r\n      this.inputCodeField(code);\r\n    } else {\r\n      $('#checkout-cart .checkout-cart-coupon-pill-button')[0].click();\r\n    }\r\n  },\r\n  isLoaded: function () {\r\n    return $('.coupon-apply-spinner').length < 1;\r\n  },\r\n  whenReady: function (step, next) {\r\n    if (step === 'injectCoupon') {\r\n      this.waitForSelector(this.isLoaded, this.getDiscount.bind(this, next), 200);\r\n    } else if (step === 'removeInjectedCoupon') {\r\n      this.waitForSelector(this.isLoaded, function () {\r\n        next();\r\n      }, 200);\r\n    }\r\n  },\r\n  getDiscount: function (next) {\r\n    ExternalProvider.promoCodeSavings = $('.cart-total').text();\r\n    next();\r\n  },\r\n  parse: function () {\r\n    var newTotal = parseFloat(this.promoCodeSavings.replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      this.inputCodeField(bestCode);\r\n    }\r\n  },\r\n  inputCodeField: function (code) {\r\n    $('#checkout-cart .checkout-cart-coupon-input').val(code);\r\n    $('#checkout-cart .checkout-cart-coupon-input~a')[0].click();\r\n  },\r\n  waitForSelector: function (isResolved, runNext, maxWait) {\r\n    let waited = 0;\r\n    let waitForClose = setInterval(function () {\r\n      if (waited > maxWait || isResolved()) {\r\n        clearInterval(waitForClose);\r\n        runNext();\r\n      }\r\n      waited++;\r\n    }, 10);\r\n  },\r\n};",
	"crayola": "var ExternalProvider = {\r\n  parse: function (response, status, xhr, code) {\r\n    var savings = 0;\r\n    var responseHTML = $.parseHTML(response);\r\n    var discountField = $('.summary dd:contains(\"-\")', responseHTML);\r\n    if (discountField.prev().text() === 'Order Discount') {\r\n      savings = parseFloat(discountField.text().replace(\/[^0-9|.]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"crazymass": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        function retrieveWindowVariable(variable) {\r\n            var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + ')); }\\n';\r\n            var script = document.createElement('script');\r\n\r\n            script.id = 'tmpScript';\r\n            script.appendChild(document.createTextNode(scriptContent));\r\n            (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n            var value = jQuery('body').attr('tmp_' + variable);\r\n\r\n            jQuery('body').removeAttr('tmp_' + variable);\r\n\r\n            return JSON.parse(value);\r\n        }\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                security: this.isCartPage() ? retrieveWindowVariable('wc_cart_params.apply_coupon_nonce') : retrieveWindowVariable('wc_checkout_params.apply_coupon_nonce'),\r\n                coupon_code: code\r\n            };\r\n        } else {\r\n            data = {\r\n                security: retrieveWindowVariable('wc_cart_params.remove_coupon_nonce'),\r\n                coupon: code\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-discount .woocommerce-Price-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"createandcraft": "var ExternalProvider = {\r\n  _prepareAuthCookie: function () {\r\n    var authCookie = document.cookie.toString().split(';').filter(function (item) {\r\n      return \/dtPC\/g.exec(item);\r\n    });\r\n    var auth = authCookie.toString().split('=')[1];\r\n    var token = $('#dtPC');\r\n\r\n    if (!token.length) {\r\n      token = document.createElement('input');\r\n      token.id = 'dtPC';\r\n      token.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(token);\r\n      token = $('dtPC');\r\n    }\r\n\r\n    token.attr('value', auth);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.BasketSummaryModel.PromotionalDiscount).replace(\/[^0-9|.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareAuthCookie();",
	"creationsandcollections": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^.0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"creativeirishgifts": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^.0-9]\/g, ''));\r\n    var savings = parseFloat(oldTotal - newTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"crewclothing": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.basketitemlisttotals .bsktminval:contains(\"\u00a3\")').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.basketitemlisttotals .bsktminval:contains(\"\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"crockPot": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"crocs-us": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldSavings = parseFloat($(\"#estimatedTotal\").text().replace(\/[^0-9|.]\/g, ''));\r\n        var newSavings = parseFloat(response.data.cartTotalDisplay.replace(\/[^0-9|.]\/g, ''));\r\n        var savings = 0.00;\r\n\r\n        if (oldSavings > newSavings) {\r\n         savings = parseFloat(Math.abs(response.data.cartPromos.couponItemPromos[0].discount));\r\n        }\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.crocs.com\/on\/demandware.store\/Sites-crocs_us-Site\/default\/Cart-API',\r\n            method: 'POST',\r\n            data: {\r\n                action: 'removecoupon',\r\n                updates: 'approaching|promos|shipping|delivery',\r\n                uuid: response.data.cartPromos.couponItemPromos[0].uuid\r\n            },\r\n            success: function () {},\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"crocs": "var ExternalProvider = {\r\n\tbasketTotal: 0.00,\r\n    init: function()\r\n    {\r\n\r\n        this.basketTotal = Number($('#estimatedTotal').text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n    },\r\n    parse: function(response, status, $xhr, code) {\r\n\t\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\t\r\n        var oldPrice = this.basketTotal,\r\n\t\t\tnewPrice = Number($('#estimatedTotal', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')),\r\n\t\t\tsavings = (oldPrice - newPrice);\r\n\t\t\r\n\t\tif (newPrice < oldPrice) {\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: savings\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t};\r\n\r\n    },\r\n    complete: function(bestCode, bestSavings) {\r\n\r\n\t\twindow.location.reload();\r\n\r\n    }\r\n}",
	"crocsde": "var ExternalProvider = {\r\n  prepare: function (type) {\r\n    if (type === 'clearCouponUrl') {\r\n      $.ajax({\r\n        url: location.href,\r\n        type: 'GET',\r\n        async: false,\r\n        success: function (result) {\r\n          var resultUuid = result.match('uuid\":\"(.*)\",\"promoClass')[1];\r\n\r\n          $.ajax({\r\n            url: 'https:\/\/www.crocs.de\/on\/demandware.store\/Sites-crocs_de-Site\/de_DE\/Cart-API',\r\n            type: 'POST',\r\n            async: false,\r\n            data: {\r\n              action: 'removecoupon',\r\n              updates: 'approaching|promos|shipping|delivery',\r\n              uuid: resultUuid\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('#estimatedTotal').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat(response.data.cartTotalDisplay.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"crocsuk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('#estimatedTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat(response.data.cartTotal);\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"croscill": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"crumplerde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code__text:contains(\"\u20ac\")', responseHTML).text().split('\u20ac')[1].replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"cruzee": "var ExternalProvider = {\r\n    getVariable: function (variable) {\r\n        var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + \")); }\\n\";\r\n        var script = document.createElement('script');\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n        var value = $(\"body\").attr(\"tmp_\" + variable);\r\n        $(\"body\").removeAttr(\"tmp_\" + variable);\r\n\r\n        return JSON.parse(value);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = null, wc_params;\r\n        if ($('.cart_totals').length) {\r\n            wc_params = this.getVariable('wc_cart_params');\r\n        } else {\r\n            wc_params = this.getVariable('wc_checkout_params');\r\n        }\r\n        if (type == 'applyCouponUrl') {\r\n            data = {\r\n                security: wc_params.apply_coupon_nonce,\r\n                coupon_code: code\r\n            }\r\n        }\r\n        if (type == 'clearCouponUrl') {\r\n            data = {\r\n                security: wc_params.remove_coupon_nonce,\r\n                coupon_code: code\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-discount .amount', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"cruzee.mobile": "var ExternalProvider = {\r\n    getVariable: function (variable) {\r\n        var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + \")); }\\n\";\r\n        var script = document.createElement('script');\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n        var value = $piggyJq(\"body\").attr(\"tmp_\" + variable);\r\n        $piggyJq(\"body\").removeAttr(\"tmp_\" + variable);\r\n\r\n        return JSON.parse(value);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = null, wc_params;\r\n        if ($piggyJq('.cart_totals').length) {\r\n            wc_params = this.getVariable('wc_cart_params');\r\n        } else {\r\n            wc_params = this.getVariable('wc_checkout_params');\r\n        }\r\n        if (type == 'applyCouponUrl') {\r\n            data = {\r\n                security: wc_params.apply_coupon_nonce,\r\n                coupon_code: code\r\n            }\r\n        }\r\n        if (type == 'clearCouponUrl') {\r\n            data = {\r\n                security: wc_params.remove_coupon_nonce,\r\n                coupon_code: code\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n        var savings = parseFloat($piggyJq('.cart-discount .amount', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"csvape": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"Checkout\", window.checkoutConfig.quoteData.entity_id);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var Checkout = $('body').attr('Checkout');\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/csvape.com\/rest\/default\/V1\/guest-carts\/' + Checkout + '\/coupons\/CLAIMCODE';\r\n    var clearUrl = 'https:\/\/csvape.com\/rest\/default\/V1\/guest-carts\/' + Checkout + '\/coupons';\r\n    var resultUrl = 'https:\/\/csvape.com\/rest\/default\/V1\/guest-carts\/' + Checkout + '\/payment-information';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    applyUrlInput.attr('result-value', resultUrl);\r\n    applyUrlInput.attr('clear-value', clearUrl);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(Math.abs(response.totals.base_discount_amount));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"ctshirts": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($(\".totals__container .item__price--large:contains('To pay')\").next().text().replace(\/[^0-9.]\/g, ''));\r\n        var newPrice = parseFloat($(\".totals__container .item__price--large:contains('To pay')\", responseHTML).next().text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"cuddlduds": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"cufflinks": "var ExternalProvider = {\r\n  prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = location.pathname === '\/checkout\/cart\/' ? 'https:\/\/www.cufflinks.com\/checkout\/cart\/couponPost\/' : 'https:\/\/www.cufflinks.com\/onestepcheckout\/checkout\/couponPost\/';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = '';\r\n    var savings = 0;\r\n\r\n    if (location.pathname === \"\/checkout\/cart\/\") {\r\n      $.ajax({\r\n        type: 'GET',\r\n        url: 'https:\/\/www.cufflinks.com\/checkout\/cart\/',\r\n        cache: false,\r\n        contentType: 'application\/x-www-form-urlencoded',\r\n        dataType: 'html',\r\n        async: false,\r\n        success: function (result) {\r\n          responseHTML = $.parseHTML(result);\r\n          savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n      });\r\n    } else {\r\n      responseHTML = $.parseHTML(response.update_section.html);\r\n      savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.prepareUrl();",
	"culturesforhealth": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', $.parseHTML(response)).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"cupshe": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"- $\")', responseHTML).text().split(\"$\")[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"currentbody": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = (oldTotal - newTotal) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"currentbodyfr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = parseFloat(oldTotal - newTotal);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"currentcatalog": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.responseText.match(\/\"discount_amount\":\"-[0-9|.]*\/).toString().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"currentelliott": "var $ = jQuery;\r\nvar ExternalProvider = {\r\n    queryFromHtml: function (selector, htmlString) {\r\n        var el = document.createElement( 'html' );\r\n        el.innerHTML = htmlString;\r\n        return [].slice.apply(el.querySelectorAll(selector), null);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        \/\/workaround when jquery is not available\r\n        var savings = parseFloat(this.queryFromHtml('.discount-amount .subtotal', response)[0].innerHTML.replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"currys": "var ExternalProvider = {\r\n    init: function () {\r\n        $('a:contains(\"Redeem\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('#input-offerCode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#input-offerCode').trigger('input').trigger('change');\r\n            $('button:contains(\"Apply\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('.dc-icon.dc-icon-cross-circle ').click();\r\n            $('#input-offerCode').val('');\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 500);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('div[data-element=\"Price\"]', responseHTML).eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n};",
	"curtainworks": "var ExternalProvider = {\r\n\tparse: function(response, status, $xhr, code){\r\n\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\r\n\t\tvar $savings = $('#discountsDiv', responseHTML);\r\n\r\n\t\t\/\/ If the element containing the savings value exists\r\n\t\tif($savings.length){\r\n\t\t\tvar savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: parseFloat(savings)\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t}\r\n\t},\r\n\r\n\tcomplete: function(bestCode, bestSaving){\r\n\r\n\t\tlocation.reload(true);\r\n\t}\r\n};",
	"curvykate": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = 'USD';\r\n        var selector = $('#current_store_currency')[0].value;\r\n\r\n        if (selector === 'GBP') {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector === 'EUR') {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        } else if (selector === 'EUR') {\r\n            locale = localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('p:contains(\"Subtotal\"):eq(0)').text().replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('p:contains(\"Subtotal\"):eq(0)', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcouponcode').val(bestCode);\r\n            $('#bt-applydiscountcode').click();\r\n        }\r\n    }\r\n};",
	"cutterbuck": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var result = response.replace(\/\\r?\\n|\\r\/g, \"\");\r\n        var matchResult = result.match('>Remove<\/a>(.*)gift-certificate-add')[0];\r\n        var savings = matchResult.replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"cvs": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n      $('#couponsField, #coupon_id').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#couponsField, #coupon_id').trigger('input').trigger('change');\r\n      $('.cart__coupons-apply, #apply_coupon_btn').get(0).dispatchEvent(clickEvent);\r\n      $('.cart__savings-summary, #apply_coupon_btn').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1500);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('#promo_and_credit_savings').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"cwhemp": "var ExternalProvider = {\r\n   \r\n    parse: function (response, status, $xhr, code) {\r\n         var responseHTML = $.parseHTML(response);\r\n         var savings = parseFloat($('#shopping-cart-totals-table span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n     \r\n         return {\r\n             success: savings > 0,\r\n             savings: isNaN(savings) ? 0.00 : savings\r\n         };\r\n    },\r\n    \r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n };",
	"cwsellors": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.order-summary__section__content .reduction-code__text', responseHTML).text().match(\/\u00a3.*\\d\/)[0].replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"cyberlink": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        return '\/*{\"request\":{\"action\":\"verifyCoupon\",\"couponCode\":\"' + code + '\"}}*\/';\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseJSON = $.parseJSON(response.responseText.slice(2, -2));\r\n\r\n        var responseHTML = $.parseHTML(responseJSON.response.cart);\r\n        var savings = parseFloat($('.anx-row-orderrebate .anx-cell-price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"cyberportde": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        'voucherId': code,\r\n        ':cq_csrf_token': $('input[name=\":cq_csrf_token\"]').val()\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savings = 0;\r\n\r\n    if (response.status.success === true) {\r\n      savings = parseFloat(response.data.vouchers[0].voucherValue.analyticsFormat);\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"cyberpowersystem": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#promotionMsg', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"dailysteals": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    const script = document.createElement('script');\r\n    let scriptContent = `\r\n      fetch('\/checkout', {\r\n        method: 'GET',\r\n      }).then(response => {\r\n        let applyCouponUrl = new URL(response.url).pathname;\r\n        if(document.getElementById(\"__jpCouponUrl\") === null) {\r\n          let couponUrlInput = document.createElement(\"input\")\r\n          couponUrlInput.id = '__jpCouponUrl';\r\n          couponUrlInput.setAttribute('type', 'hidden');\r\n          couponUrlInput.setAttribute('value', applyCouponUrl);\r\n          (document.body || document.head || document.documentElement).appendChild(couponUrlInput);\r\n        }\r\n      });\r\n    `;\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n    $('#tmpScript').remove();\r\n  },\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.reduction-code__text', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      if (location.pathname === '\/cart') {\r\n        const codeField = $('input[data-rcs=\"NA7xSGLodPHEmFfEz\"]');\r\n        codeField.val(bestCode);\r\n        codeField.get(0).dispatchEvent(new Event('change', {\r\n          bubbles: true,\r\n          cancelable: true\r\n        }));\r\n        $('button[data-id=\"NA7xSGLodPHEmFfEz\"]').click();\r\n      } else {\r\n        location.reload();\r\n      }\r\n    };\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"damartuk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.zones.basketAmountsListZone);\r\n        var oldTotal = parseFloat($('.total .price').text().replace(\/[^0-9.]\/g, ''));\r\n        var newTotal = parseFloat($('.total .price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"dancingdeer": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n    \tvar params = this.serializeObject($('form#myForm').serializeArray());\r\n    \tparams.source_code = type === 'applyCouponUrl' ? code : '';\r\n    \treturn params;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n    \tvar $response = $.parseHTML(response),\r\n            selector = '.cart-total .label-right',\r\n            oldPrice = parseFloat($(selector).text().replace(\/[^0-9|\\.]\/g, '')),\r\n            newPrice = parseFloat($(selector, $response).text().replace(\/[^0-9|\\.]\/g, '')),\r\n            savings = oldPrice - newPrice;\r\n\r\n    \tif(savings > 0){\r\n    \t\treturn {\r\n\t            success: true,\r\n\t            savings: savings\r\n\t        }\r\n    \t}\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    },\r\n\r\n    serializeObject: function(a) {\r\n\t    var o = {};\r\n\t    $.each(a, function() {\r\n\t        o[this.name] = this.value || '';\r\n\t    });\r\n\t    return o;\r\n\t}\r\n}",
	"dangoproducts": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"daniel-wellington": "var ExternalProvider = {\r\n    tableTotals: '',\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        if(!response || response.error || !response.result || !response.totals) {\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            }\r\n        }\r\n        \r\n        this.tableTotals = $.parseHTML(response.totals.html.trim());\r\n        var discountRow = $('tbody tr:last-child', this.tableTotals).prev();\r\n        \r\n        return {\r\n            success: true,\r\n            savings: Number($('td:last-child', discountRow).text().replace(\/[^0-9|\\.]\/g, ''))\r\n        };\r\n    },\r\n    \r\n    complete: function(bestCode) {\r\n        location.reload();\r\n    }\r\n};",
	"daenischesbettenlagerde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat($('.totals-discount', $.parseHTML(response)).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"danskin": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        var savings = parseFloat(oldTotal - newTotal);\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"dare2b": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const htmlContainer = $('<div><\/div>');\r\n    const responseHTML = htmlContainer.html(response.cart.discount_amount);\r\n    let savings = parseFloat($('.price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"dartagnan": "var ExternalProvider = {\r\n    checkoutType: '',\r\n    initializeProvider: function () {\r\n        \/\/ init only doesn't work\r\n        this.setCheckoutType();\r\n        this.prepareUrl();\r\n    },\r\n    prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl;\r\n\r\n        var clearUrlInput = $('#___jpClearCouponUrl');\r\n        var clearUrl;\r\n\r\n        \/\/ if in cart\r\n        if (this.checkoutType === 'CART') {\r\n            applyUrl = $('form[id=\"cart-items-form\"]').attr('action');\r\n            clearUrl = $('form[id=\"cart-items-form\"]').attr('action');\r\n        } else if (this.checkoutType === 'CHECKOUT') {\r\n            applyUrl = 'https:\/\/www.dartagnan.com\/on\/demandware.store\/Sites-dartagnan-Site\/default\/Cart-AddCoupon';\r\n            clearUrl = 'https:\/\/www.dartagnan.com\/on\/demandware.store\/Sites-dartagnan-Site\/default\/Cart-AddCoupon';\r\n        }\r\n\r\n        \/\/ Append apply url input\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n\r\n        if (!clearUrlInput.length) {\r\n            clearUrlInput = document.createElement('input');\r\n            clearUrlInput.id = '___jpClearCouponUrl';\r\n            clearUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n            clearUrlInput = $('#___jpClearCouponUrl');\r\n        }\r\n\r\n        clearUrlInput.attr('value', clearUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        \/\/ if in cart\r\n        if (this.checkoutType === 'CART') {\r\n            data = {\r\n                dwfrm_cart_shipments_i0_items_i0_quantity: $('input[name=\"dwfrm_cart_shipments_i0_items_i0_quantity\"]').val(),\r\n                dwfrm_cart_updateCart: 'dwfrm_cart_updateCart',\r\n                dwfrm_cart_couponCode: null\r\n\r\n            };\r\n\r\n            if (type === 'applyCouponUrl') {\r\n                data.dwfrm_cart_couponCode = code;\r\n                data.dwfrm_cart_addCoupon = 'dwfrm_cart_addCoupon';\r\n            }\r\n\r\n            if (type === 'clearCouponUrl') {\r\n                data.dwfrm_cart_coupons_i0_deleteCoupon = 'Remove';\r\n            }\r\n\r\n            return data;\r\n        } else if (this.checkoutType === 'CHECKOUT') {\r\n            data = {\r\n                couponCode: code,\r\n                format: 'ajax'\r\n            };\r\n\r\n            if (type === 'clearCouponUrl') {\r\n                data.couponCode = null;\r\n            }\r\n\r\n            return data;\r\n        }\r\n\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0;\r\n\r\n        if (this.checkoutType === 'CART') {\r\n            savings = parseFloat($('span:contains(\"-$\")', $.parseHTML(response)).text().replace(\/[^0-9|.]\/g, ''));\r\n        } else if (this.checkoutType === 'CHECKOUT') {\r\n            $.ajax({\r\n                url: 'https:\/\/www.dartagnan.com\/on\/demandware.store\/Sites-dartagnan-Site\/default\/COBilling-UpdateSummary',\r\n                success: function (result) {\r\n                    savings = parseFloat($('td:contains(\"- $\")', $.parseHTML(result)).text().replace(\/[^0-9.]\/g, ''));\r\n                },\r\n                async: false\r\n            });\r\n        }\r\n\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.checkoutType === 'CART') {\r\n                $('#dwfrm_cart_couponCode').val(bestCode);\r\n                $('#add-coupon').click();\r\n            } else {\r\n                location.reload();\r\n            }\r\n        }\r\n    },\r\n    setCheckoutType: function () {\r\n        var title = document.getElementsByTagName('title')[0].innerHTML;\r\n\r\n        this.checkoutType = title.toUpperCase().contains('CART') ? 'CART' : 'CHECKOUT';\r\n    }\r\n};\r\n\r\nExternalProvider.initializeProvider();",
	"darty": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var s = document.createElement('script');\r\n        var code = \"document.body.setAttribute('token', window.operator);\";\r\n\r\n        s.id = 'tempScript';\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n        $('#tempScript').remove();\r\n\r\n        var nonPhotoPrnt = 'https:\/\/www.darty.com\/nav\/extra\/basket_add\/json?basket_update=&advantageCode=CLAIMCODE';\r\n        var photoPrintToken = 'https:\/\/as.photoprintit.com\/web\/' + $('body').attr('token');\r\n        var applyUrlInput = $('#__applyUrl');\r\n        var resultUrlInput = $('#__resultUrl');\r\n        var applyUrl = location.pathname.includes('\/nav\/extra\/basket_add') ? nonPhotoPrnt : photoPrintToken + '\/orderwizardSetCoupon.do?redirect=true';\r\n        var resultUrl = location.pathname.includes('\/nav\/extra\/basket_add') ? '' : photoPrintToken + '\/orderwizardStartOrder.do';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__applyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#__applyUrl');\r\n        }\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '__resultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#__resultUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        resultUrlInput.attr('value', resultUrl);\r\n    },\r\n    prepare: function (action, code) {\r\n        if (action === 'applyCouponUrl' && !location.pathname.includes('\/nav\/extra\/basket_add')) {\r\n            var data = { 'coupon-code': code };\r\n\r\n            return data;\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var respHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#coupon-value, .total-all .value').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('#coupon-value, .total-all .value', respHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"datavision": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().split('$')[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"davidscookies": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('input[placeholder=\"Discount Code\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[placeholder=\"Discount Code\"]').trigger('input').trigger('change');\r\n      $('.ApplyDiscount_body button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.ApplyDiscount_coupons .ApplyDiscount_coupon').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = $('.ApplyDiscount_coupons .ApplyDiscount_coupon').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 500);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 50);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.CartSummary_line:eq(1)').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  }\r\n};",
	"dayspring": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response), savings;\r\n        if ($('.success-msg', responseHTML).text().indexOf(code) !== -1) {\r\n            var savings = parseFloat($('.cart-subtotal-row', responseHTML).siblings().children('td:eq(1)').text().replace(\/[^0-9|\\.]\/g, ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n}",
	"dazadi": "var ExternalProvider = {\r\n  prepare: function (type) {\r\n    if (type === 'clearCouponUrl') {\r\n      this.sendAjax(\"https:\/\/www.dazadi.com\/cart.php\", \"GET\", this.clearCoupon.bind(ExternalProvider));\r\n    }\r\n  },\r\n  clearCoupon: function (responseHTML) {\r\n    var couponURL = $('.cart-total-label a', responseHTML).attr('href');\r\n    return this.sendAjax(couponURL, \"GET\");\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  sendAjax: function (url, method, callback = null) {\r\n    var responseHTML = '';\r\n    $.ajax({\r\n      url: url,\r\n      type: method,\r\n      async: false,\r\n      success: function (response) {\r\n        responseHTML = $.parseHTML(response);\r\n      }\r\n    });\r\n    return callback !== null ? callback(responseHTML) : true;\r\n  }\r\n};",
	"dcshoes": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount-amt', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('button[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"deadlegacy": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-discount', responseHTML).text().split('-')[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"deandeluca": "var ExternalProvider = {\r\n    init: function () {\r\n        this.oldTotal = $('#shopping-cart-totals-table > tfoot > tr > td:nth-child(2) > strong > span').text().replace(\/[^0-9.]\/g, '');\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = $('#shopping-cart-totals-table > tfoot > tr > td:nth-child(2) > strong > span', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply Coupon\"]').click();\r\n        }\r\n    }\r\n};",
	"dearfoams": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.baskettotal - response.adjustedBaskettotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_billing_couponCode').val(bestCode);\r\n            $('#coupon-save').click();\r\n        }\r\n    }\r\n};",
	"debenhams": "var ExternalProvider = {\r\n  oldTotal: '',\r\n  init: function () {\r\n    this.oldTotal = parseFloat($('tr.pw-ledger__row.pw--total.dbh-subtotal').text().replace(\/[^0-9.]\/g, ''));\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('input[name=\"promoCode\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[name=\"promoCode\"]').trigger('input').trigger('change');\r\n      $('span:contains(\"Apply\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('div.u-display-flex.remove-button > button > div').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    var counter = 0;\r\n    var codeApplyTime = setInterval(function () {\r\n      counter += 1;\r\n\r\n      if ($('div.u-display-flex.remove-button > button > div').get(0) || counter > 10) {\r\n        clearInterval(codeApplyTime);\r\n        next();\r\n      }\r\n    }, 350);\r\n  },\r\n  parse: function () {\r\n    var newTotal = parseFloat($('tr.pw-ledger__row.pw--total.dbh-subtotal').text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"promoCode\"]').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[name=\"promoCode\"]').trigger('input').trigger('change');\r\n      $('span:contains(\"Apply\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  }\r\n};",
	"deco-anniversaire": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#total_discount:contains(\"-\")', responseHTML).text().replace(',', '.');\r\n\r\n        savings = parseFloat(savings.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"decorisland": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type == 'applyCouponUrl') {\r\n            var data = $('[name=\"info\"]').serializeObject();\r\n            data.coupon = code;\r\n            return data;\r\n        }\r\n        return null;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td b:contains(\"Coupon Savings:\")', responseHTML).parent('td').find('+td').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon').val(bestCode);\r\n            $('[name=\"submit_updatecart\"]').click();\r\n        }\r\n    }\r\n};",
	"decorplanet": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response && response.d && response.d.DiscountTotal ? parseFloat(response.d.DiscountTotal) : 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"deepdiscount": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response && response.PromoCodeAmount ? parseFloat(response.PromoCodeAmount) : 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"deergear": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary .label-value-container .value.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('.promo-code-input').val(bestCode);\r\n            $('input[name=\"submitPromotionCode\"]').click();\r\n            $('#promoCode').val(bestCode);\r\n            $('input[onclick=\"updatePromoCode(false);\"]').click();\r\n        }\r\n    }\r\n};",
	"degustabox": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var url = window.location.pathname;\r\n        var locale;\r\n\r\n        if (url.match(\/de\/g)) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (url.match(\/en\/g)) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (url.match(\/fr\/g)) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['FR'];\r\n        } else {\r\n            locale = localeMapping['US'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    __prepareUrl: function () {\r\n        var url = this.ifUsStore() ? 'https:\/\/www.degustabox.com\/us\/register' : 'https:\/\/www.degustabox.com\/de\/bestellen';\r\n        var applyUrlInput = document.createElement('input');\r\n\r\n        applyUrlInput.id = '___jpCouponUrl';\r\n        applyUrlInput.style.display = 'none';\r\n        (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n        $('#___jpCouponUrl').attr('value', url);\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            if (this.ifUsStore()) {\r\n                return {\r\n                    'ProfileForm[couponCode]': code,\r\n                    ondiscount: 'Apply',\r\n                    'ProfileForm[subscriptionTypeId]': $('input[name=\"ProfileForm[subscriptionTypeId]\"]').val()\r\n                };\r\n            }\r\n\r\n            return {\r\n                'ProfileForm[couponCode]': code,\r\n                ondiscount: 'redeem',\r\n                'ProfileForm[subscriptionTypeId]': $('input[name=\"ProfileForm[subscriptionTypeId]\"]').val()\r\n            };\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount_amount', responseHTML).text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('a:contains(\"Enter a promotional code\")').attr('style', 'display: none');\r\n            $('#promo-input').attr('style', 'display: block');\r\n            $('a:contains(\"Enter a promotional code\")').click();\r\n            $('#coupon-code').val(bestCode);\r\n            $('input[value=\"Apply\"], input[name=\"ondiscount\"]').click();\r\n        }\r\n    },\r\n    ifUsStore: function () {\r\n        return location.href.match('degustabox.com\/us');\r\n    }\r\n};\r\n\r\nExternalProvider.__prepareUrl();",
	"delife": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.data[0]);\r\n        var savings = parseFloat($('.-gutschein .-name', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"dell": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.Coupons[0].Amount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#appendedInputButton').val(bestCode);\r\n      $('#applyCouponButton').click();\r\n    }\r\n  }\r\n};",
	"dellrefurbished": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      jQuery(\"#coupon_code\").val(bestCode);\r\n      jQuery(\".button-wrapper button\").click();\r\n    }\r\n  }\r\n}",
	"delsey": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.text-right:eq(1) .text-red:eq(0)', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var inputEvent = new Event('input', { bubbles: true });\r\n            inputEvent.simulated = true;\r\n            document.querySelector('input[name=\"code\"]').value = bestCode;\r\n            document.querySelector('input[name=\"code\"]').dispatchEvent(inputEvent);\r\n            $('input[value=\"APPLY\"]').click();\r\n        }\r\n    }\r\n};",
	"deluxebusinessproducts": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.data.discountTotalAmount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"txt_couponcode\"]').val(bestCode);\r\n      $('#btn_coupon').click();\r\n    };\r\n  }\r\n};",
	"denbypottery": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var visitId = window.localStorage.visitId;\r\n        var visitorId = window.localStorage.visitorId;\r\n        var visitIdInput = $('#visitId');\r\n\r\n        if (!visitIdInput.length) {\r\n            visitIdInput = document.createElement('input');\r\n            visitIdInput.id = '___jpvisitIdUrl';\r\n            visitIdInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(visitIdInput);\r\n            visitIdInput = $('#___jpvisitIdUrl');\r\n        }\r\n\r\n        visitIdInput.attr('value', visitId);\r\n        visitIdInput.attr('data-value', visitorId);\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            var data = {\r\n                shoppingCart: {\r\n                    items: [{\r\n                        productId: JSON.parse(localStorage.getItem('shoppingCart')).items[0].productId,\r\n                        quantity: JSON.parse(localStorage.getItem('shoppingCart')).numberOfItems,\r\n                        repositoryId: JSON.parse(localStorage.getItem('shoppingCart')).items[0].id,\r\n                        availabilityDate: null,\r\n                        catRefId: JSON.parse(localStorage.getItem('shoppingCart')).items[0].catRefId,\r\n                        expanded: false,\r\n                        stockStatus: true,\r\n                        stockState: 'IN_STOCK',\r\n                        orderableQuantityMessage: '',\r\n                        commerceItemQuantity: JSON.parse(localStorage.getItem('shoppingCart')).numberOfItems,\r\n                        orderableQuantity: 99999,\r\n                        selectedOptions: [],\r\n                        selectedSkuProperties: [],\r\n                        discountInfo: [],\r\n                        rawTotalPrice: JSON.parse(localStorage.getItem('shoppingCart')).items[0].rawTotalPrice,\r\n                        detailedItemPriceInfo: [{\r\n                            discounted: false,\r\n                            secondaryCurrencyTaxAmount: 0,\r\n                            amount: JSON.parse(localStorage.getItem('shoppingCart')).amount,\r\n                            quantity: JSON.parse(localStorage.getItem('shoppingCart')).numberOfItems,\r\n                            tax: 0,\r\n                            orderDiscountShare: 0,\r\n                            detailedUnitPrice: JSON.parse(localStorage.getItem('shoppingCart')).items[0].detailedItemPriceInfo,\r\n                            currencyCode: 'GBP'\r\n                        }],\r\n                        externalData: [],\r\n                        addOnItem: false,\r\n                        displayName: '',\r\n                        invalid: false,\r\n                        commerceItemId: JSON.parse(localStorage.getItem('shoppingCart')).items[0].commerceItemId,\r\n                        priceListGroupId: 'pricegroup_GBP',\r\n                        giftWithPurchaseCommerceItemMarkers: []\r\n                    }],\r\n                    coupons: [{\r\n                        code: code,\r\n                        description: '',\r\n                        status: '',\r\n                        level: '',\r\n                        id: ''\r\n                    }]\r\n                },\r\n                combineLineItems: 'yes',\r\n                payments: []\r\n\r\n\r\n            };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = response.discountInfo.orderDiscount;\r\n        var savings = parseFloat(responseHTML);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#CC-promotionDetails-promoCode').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#CC-promotionDetails-promoCode').get(0).dispatchEvent(changeEvent);\r\n            document.getElementById('CC-promotion-applyCode').click();\r\n        }\r\n    },\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n        var selector = this.isEmpty() ? $('.country-selector-name:eq(0)').text() : $('.address-field:eq(6)').text();\r\n\r\n        if (selector === 'Germany' || selector === 'France') {\r\n            locale = selector === 'Germany' ? localeMapping.DE : localeMapping.FR;\r\n            currency = 'EUR';\r\n        } else if (selector === 'UK' || selector === 'United Kingdom') {\r\n            locale = localeMapping.GB;\r\n            currency = 'GBP';\r\n        } else {\r\n            locale = localeMapping.US;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: currency, minimumFractionDigits: 2 });\r\n    },\r\n    isEmpty: function () {\r\n        return $('.address-field:eq(6)').text() === '';\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"dentsgloves": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('tr:contains(\"Discount\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"denydesigns": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"dermstore": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.order.order_total_discount;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestSavings, bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"designbyhumans": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.totals.couponAmount * -1);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"designerpaint": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n        var selector = $('.d-inline-block.mb-0.mr-2.align-middle.text-nowrap strong')[0].innerText.replace(\/[0-9|.]\/g, '');\r\n\r\n        if (selector === '\u00a3') {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector === '\u20ac') {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        } else if (selector === '\u20ac') {\r\n            locale = localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"design-staples": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var coupon = $('.promo-description .promo-code', responseHTML).text();\r\n        if (coupon === code) {\r\n            var savings = parseFloat($('.total-charge--breakdown:eq(0) p', responseHTML).text().replace(\/[$-]\/g, ''));\r\n            if (savings) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        $('#ctl00_ctl00_pageContent_BodyContent_promoPrepaid_txtPromoCode').val(bestCode);\r\n        $('#ctl00_ctl00_pageContent_BodyContent_promoPrepaid_ApplyPromoButton').click();\r\n    }\r\n};",
	"designtoscano": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    $.ajax({\r\n      url: 'https:\/\/www.designtoscano.com\/basket.do?method=applySourceCode',\r\n      type: 'POST',\r\n      async: false,\r\n      data: { sourceCode: code }\r\n    });\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var savings = 0;\r\n\r\n    $.ajax({\r\n      url: 'https:\/\/www.designtoscano.com\/basket.do',\r\n      type: 'GET',\r\n      async: false,\r\n      success: function (result) {\r\n        savings = parseFloat($('.discount:contains(\"-\")', $.parseHTML(result)).text().replace(\/[^.0-9|]\/g, ''));\r\n      }\r\n    });\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#sourceCode').val(bestCode);\r\n      $('input[value=\"Apply\"]').click();\r\n    }\r\n  }\r\n};",
	"desigual": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = Math.abs(response.summary.discount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkbox_id_code').click();\r\n\r\n            $('input[name=\"currentPromoCode\"]').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('input[name=\"currentPromoCode\"]').get(0).dispatchEvent(changeEvent);\r\n\r\n            $('.promo-btn').click();\r\n        }\r\n    }\r\n};",
	"destinationmaternity": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var currentTotal = parseFloat($('.order-total .order-value').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.order-total .order-value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = currentTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($('#dwfrm_billing_couponCode'), length) {\r\n                location.reload();\r\n            }\r\n            else if ($('#dwfrm_cart_couponCode').length) {\r\n                $('#dwfrm_cart_couponCode').val(bestCode);\r\n                $('#add-coupon').click();\r\n            }\r\n        }\r\n    }\r\n}",
	"destinationxl": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = 0;\r\n\r\n    if (response.cartItemList[0].discount !== response.discount) {\r\n      savings = response.discount;\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      var clickEvent = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n\r\n      $('input[name=\"coupon\"]').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[name=\"coupon\"]').trigger('input').trigger('change');\r\n      $('button:contains(\"APPLY\")').get(0).dispatchEvent(clickEvent);\r\n    }\r\n  }\r\n};",
	"dezzal": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response), savings;\r\n        if ($('#apply_msg', responseHTML).text().indexOf('Sorry') === -1) {\r\n            savings = parseFloat($('.cartTotal ul li .my_shop_price:eq(1)', responseHTML).text().replace('$', ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode) {\r\n        $('#promotion_code').val(bestCode);\r\n        $('#applybtn').click();\r\n    }\r\n}",
	"dezzal.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings;\r\n        if (response.status) {\r\n            savings = response.data.total.save;\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        $('#promotion_code').val(bestCode);\r\n        $('#js_promotionCodeForm button').click();\r\n    }\r\n}",
	"dhccare": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = Math.abs(response.totals.base_discount_amount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && location.pathname === \"\/checkout\/cart\/\") {\r\n      $(\"#coupon_code\").val(bestCode);\r\n      $(\".action.apply.primary\").click();\r\n    } else if (bestCode) location.reload();\r\n  }\r\n};",
	"dhgate": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-US\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"dhgate.mobile": "var ExternalProvider = {\r\n    couponId: '',\r\n    maxDiscount: 0,\r\n    parse: function (response) {\r\n        var discount = parseFloat(response.CUT_PRICE);\r\n\r\n        if (discount && discount > 0) {\r\n            if (this.maxDiscount < discount) {\r\n                this.maxDiscount = discount;\r\n                this.couponId = response.couponid;\r\n            }\r\n\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var formValue = $('[data-orderid]').attr('data-orderid') + ',' + this.couponId + ';';\r\n\r\n            $('#couponForm').find('#selectedSellerCoupon').val(formValue);\r\n            $('#couponForm').find('#selectedDHCoupon').val(formValue);\r\n            $('#couponForm').submit();\r\n        }\r\n    }\r\n};",
	"diamondcbd": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-total-line-value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"dickssportinggoods": "var ExternalProvider = {\r\n    oldTotal: 0,\r\n\r\n    init: function () {\r\n        this.oldTotal = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13').text().replace('$', ''));\r\n\r\n        $.fn.extend({\r\n            getSerializeData: function () {\r\n                var formData = $(this).serializeArray();\r\n                var data = {};\r\n\r\n                $.each(formData, function () {\r\n                    data[this.name] = this.value || '';\r\n                });\r\n\r\n                return data;\r\n            }\r\n        });\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        if (['applyCouponUrl', 'clearCouponUrl'].indexOf(type) !== -1) {\r\n            var formData = $('#PromotionCodeForm').getSerializeData();\r\n\r\n            formData.promoCode = code;\r\n\r\n            if (type === 'clearCouponUrl') {\r\n                formData = Object.assign(formData, {\r\n                    isRemoveCode: 'Y',\r\n                    taskType: 'R'\r\n                });\r\n            }\r\n\r\n            return formData;\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13', responseHTML).text().replace('$', ''));\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"diecastmodelswholesale": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.ProductPrice:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && location.href.includes('cart')) {\r\n      location.reload();\r\n    } else if (bestCode && location.href.includes('checkout')) {\r\n      $('#couponcode').val(bestCode);\r\n      $('#apply_code').click();\r\n    }\r\n  }\r\n};",
	"diedruckereide": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('input[name=\"input_voucher\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[name=\"input_voucher\"]').trigger('input').trigger('change');\r\n      $('input[name=\"button_voucher\"]').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('input[name=\"button_voucher_delete\"]').click();\r\n    }\r\n  },\r\n\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = $('.basketVoucherRest').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 400);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 50);\r\n    }\r\n  },\r\n\r\n  parse: function () {\r\n    var savings = parseFloat($('.basket_footer_price.globalDINWebProBold:contains(\"-\")').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"input_voucher\"]').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[name=\"input_voucher\"]').trigger('input').trigger('change');\r\n      $('input[name=\"button_voucher\"]').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  }\r\n};",
	"direct2mum": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary-title:contains(\"Discount\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#Discount_VoucherCode').val(bestCode);\r\n            $('input[name=\"submitButton\"]').click();\r\n        }\r\n    }\r\n};",
	"directstoves": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"discountcontactlenses": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHtml = $.parseHTML(response);\r\n\r\n        var discount = parseFloat($('.discount-tag .discount-code-amount span', responseHtml).text()\r\n            .replace(\/[^0-9|\\.|,]\/g, '')\r\n            .replace(',', '.'));\r\n\r\n        if(discount > 0){\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if(bestCode){\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"discountdance": "var ExternalProvider = {\r\n  parse: function (response, status, $xhr, code) {\r\n    var savings = 0;\r\n    var oldTotal = 0;\r\n    var newTotal = 0;\r\n\r\n    if (!this.isCheckoutPage()) {\r\n      var responseHTML = $.parseHTML(response);\r\n\r\n      oldTotal = parseFloat($('#TotalContainer').text().replace(\/[^0-9|.]\/g, ''));\r\n      newTotal = parseFloat($('#TotalContainer', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n      if (oldTotal > newTotal) {\r\n        savings = parseFloat($('.redError.biggerCheckoutPrice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n      }\r\n    } else {\r\n      $.ajax({\r\n        url: 'https:\/\/www.discountdance.com\/checkout_stage2.php3',\r\n        type: 'POST',\r\n        data: {\r\n          NewCouponCode: code\r\n        },\r\n        success: function (result) {\r\n          oldTotal = parseFloat($('#miniBagOrderTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n          newTotal = parseFloat($('#miniBagOrderTotal', $.parseHTML(result)).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n          if (oldTotal > newTotal) {\r\n            savings = $('#miniBagDiscountBox', $.parseHTML(result)).text().replace(\/[^.0-9|.]\/g, '');\r\n          }\r\n        },\r\n        async: false\r\n      });\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCheckoutPage: function () {\r\n    return \/checkout_stage2\/.test(location.href);\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $(\"#CouponCode, input[name='NewCouponCode']\").val(bestCode);\r\n      $('.infoSubmit').trigger('click');\r\n    }\r\n  }\r\n};",
	"discountfilters": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type == 'applyCouponUrl') {\r\n            $('#cart_promo_code').val(code);\r\n            $('.cartPromo .button').click();\r\n        }\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.Totals.discount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) $('#cart_promo_code').focus().val(bestCode).blur();\r\n    }\r\n};",
	"discountfilterstore": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        if ($(\"#coupon_code\").length) {\r\n            \/\/apply\r\n            var applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            $(\"#___jpCouponUrl\").attr('value', 'https:\/\/www.discountfilterstore.com\/checkout\/cart\/couponPost');\r\n\r\n            \/\/result\r\n            var resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultCouponUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            $(\"#___jpResultCouponUrl\").attr('value', 'https:\/\/www.discountfilterstore.com\/checkout\/cart\/');\r\n        }\r\n        else if ($(\"#id_couponcode\").length) {\r\n            \/\/apply\r\n            var applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            $(\"#___jpCouponUrl\").attr('value', 'https:\/\/www.discountfilterstore.com\/onestepcheckout\/ajax\/add_coupon\/');\r\n\r\n            \/\/result\r\n            var resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultCouponUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            $(\"#___jpResultCouponUrl\").attr('value', 'https:\/\/www.discountfilterstore.com\/onestepcheckout\/');\r\n        }\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        if ($(\"#coupon_code\").length && type == 'applyCouponUrl') {\r\n            data = {\r\n                remove: 0,\r\n                coupon_code: code\r\n            }\r\n        }\r\n        else if ($(\"#id_couponcode\").length && type == 'applyCouponUrl') {\r\n            data = {\r\n                remove: 0,\r\n                code: code\r\n            }\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($(\".price:contains(-$)\", responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($(\"#coupon_code\").length) {\r\n                $(\"#coupon_code\").val(bestCode);\r\n                $(\"button[value='Apply Coupon']\").click();\r\n            }\r\n            else if ($(\"#id_couponcode\").length) {\r\n                $(\"#id_couponcode\").val(bestCode);\r\n                $(\"#onestepcheckout-coupon-add\").click();\r\n            }\r\n        }\r\n    }\r\n}\r\nExternalProvider.__prepareUrl();",
	"discountglasses": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        $newSubtotal = [];\r\n\r\n        for(var i = 0; i < responseHTML.length; i++){\r\n            var $newSubtotal = $(responseHTML[i]);\r\n            if($newSubtotal[0].id == 'couponSubTotal')break;\r\n        }\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($newSubtotal.length){\r\n            var oldSubtotal = parseFloat($('#cartSubTotal').val().replace(\/[^0-9|\\.]\/g, ''));\r\n            var newSubtotal = parseFloat($newSubtotal.text().replace(\/[^0-9|\\.]\/g, ''));\r\n            var savings = oldSubtotal - newSubtotal;\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"discountlens": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.col-xs-4.right:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"gv_redeem_code\"]').val(bestCode);\r\n            $('#checkout-shipping')[0].click();\r\n        }\r\n    }\r\n};",
	"discountmags": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('td').filter(function(){return $(this).text().indexOf('Total:') > -1}).next('td').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('td', responseHTML).filter(function(){return $(this).text().indexOf('Total:') > -1}).next('td').text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n        \/\/ If the element containing the savings value exists\r\n        if(savings > 0.00){\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        location.reload(true);\r\n    }\r\n};",
	"discountmedicalsupplies": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.summary-total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"discountmerchant": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n\r\n        var couponData = {},\r\n            clearCouponData = {};\r\n\r\n        var formInputs = [].slice.call($('#form1 input:not([type=\"submit\"])'));\r\n\r\n        formInputs.forEach(function(e){\r\n            couponData[$(e).attr('name')] = $(e).val();\r\n        })\r\n\r\n        couponData[\"ctl00$scrptMgr\"] = \"ctl00$scrptMgr|ctl00$PageContent$OnePageCheckout1$Promotions$btnAddPromotion\";\r\n        couponData[\"__ASYNCPOST\"] = true;\r\n        couponData[\"ctl00$PageContent$OnePageCheckout1$Promotions$btnAddPromotion\"] = \"Add\";\r\n        couponData[\"ctl00$PageContent$OnePageCheckout1$Promotions$txtPromotionCode\"] = code;\r\n\r\n        delete couponData[\"ctl00$PageContent$OnePageCheckout1$PaymentView$PaymentMethod\"];\r\n        delete couponData[\"ctl00$siteSearch$SearchButton\"];\r\n\r\n        \r\n        if (type === \"applyCouponUrl\") {\r\n            return couponData;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('.promotion-list-item-code', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('#PageContent_OnePageCheckout1_MiniCartCartSummary_Total').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('#PageContent_OnePageCheckout1_MiniCartCartSummary_Total', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"discountschoolsupply": "var ExternalProvider = {\r\n  init: function () {\r\n    if ($('.js-release-voucher').length > 0) {\r\n      $.ajax({\r\n        url: 'https:\/\/www.discountschoolsupply.com\/cart\/voucher\/remove',\r\n        type: 'POST',\r\n        data: {\r\n          voucherCode: $('input[name=\"voucherCode\"]').val(),\r\n          CSRFToken: $('input[name=\"CSRFToken\"]').val()\r\n        }\r\n      });\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.item-row.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"disneystore": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var orderId = $('body script:contains(\"bagOrderId\")')[0].text.split(\/var(.+)\/)[1].replace(\/[^0-9|\\.]\/g, '');\r\n        if (type === \"resultUrl\") {\r\n            var data = {\r\n                \"orderId\": orderId\r\n            }\r\n            return data;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var orderGrandTotal = response.orderSummary.orderGrandTotal.replace(\/[^0-9|\\.]\/g, ''),\r\n            originalSubtotal = response.orderSummary.originalSubtotal.replace(\/[^0-9|\\.]\/g, '');\r\n        $savings = parseFloat(orderGrandTotal - originalSubtotal);\r\n\r\n        try {\r\n\r\n            if ($savings > 0.00) {\r\n                return {\r\n                    success: true,\r\n                    savings: $savings\r\n                }\r\n            }\r\n\r\n        }\r\n        catch (err) {\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        $('input[type=promoCode]').val(bestCode);\r\n        $('a.applyPromo')[0].click();\r\n    }\r\n}",
	"disneystore.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('#orderSummary .listContents', responseHTML).filter(function(){\r\n            return $(this).html().indexOf('Discount') > -1;\r\n        });\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = 0.00;\r\n\r\n            $savings.each(function(){\r\n                var strSaving = $(this).find('span').text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n                savings += parseFloat(strSaving);\r\n            });\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"diyanu": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings)? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"dl1961": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"dockers": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.discount .sale-price', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"dockers.mobile": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0.00;\r\n\r\n        if (response && response.summary && response.summary && Array.isArray(response.summary.promos)\r\n            && response.summary.promos.length > 0 && response.summary.promos[0].value) {\r\n            savings = parseFloat(response.summary.promos[0].value.replace(\/[^0-9|.]\/g, ''));\r\n\r\n            if (savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        location.reload(true);\r\n    }\r\n\r\n};",
	"dockersshoes": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"docmorris": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.cart-amount .cart-total').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = response.totalPrice;\r\n    var savings = (oldTotal - newTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"doerrwerk": "var ExternalProvider = {\r\n    isCartPage: function () {\r\n        return location.pathname.match('\/cart');\r\n    },\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isCartPage() ? 'https:\/\/www.doerrwerk.de\/checkout\/addVoucher\/sTargetAction\/cart' : 'https:\/\/www.doerrwerk.de\/checkout\/addVoucher\/sTargetAction\/confirm';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (action, code) {\r\n        if (['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n        var data = {};\r\n\r\n        if (this.isCartPage()) {\r\n            data = {\r\n                sVoucher: code,\r\n                __csrf_token: $('input[name=\"__csrf_token\"]').val()\r\n            };\r\n        } else {\r\n            data = {\r\n                sAGB: 0,\r\n                sVoucher: code,\r\n                __csrf_token: $('input[name=\"__csrf_token\"]').val()\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.panel--td.column--total-price:contains(-)', responseHTML).eq(0).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"sVoucher\"]').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"dog": "var ExternalProvider = {\r\n  prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = this.isCartPage() ? 'https:\/\/www.dog.com\/Cart.aspx' : 'https:\/\/www.dog.com\/BillingShipping.aspx';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl' && this.isCartPage()) {\r\n      data = {\r\n        __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n        __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n        _forgeryToken: $('#_forgeryToken').val(),\r\n        ctl00$ctl00$CenterContentArea$MainContent$ctl00$btnPromoCode: '',\r\n        ctl00$ctl00$CenterContentArea$MainContent$ctl00$txtPromoCode: code,\r\n        ctl00$ctl00$CenterContentArea$MainContent$ctl00$ddlDonationAmount: $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_ddlDonationAmount option[selected=\"selected\"]').val(),\r\n        ctl00$ctl00$CenterContentArea$MainContent$ctl00$hidCartItemId: ''\r\n      };\r\n    } else if (type === 'applyCouponUrl' && !this.isCartPage()) {\r\n      data = {\r\n        __EVENTTARGET: '',\r\n        __EVENTARGUMENT: '',\r\n        __LASTFOCUS: '',\r\n        __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n        __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n        _forgeryToken: $('#_forgeryToken').val(),\r\n        ctl00$MainContent$billingShipping$txtPromoCode: code,\r\n        hidUpgradeEligible: true,\r\n        ctl00$MainContent$billingShipping$btnPromoCode: ''\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldSavings = Number.isNaN(parseFloat($('.cart-discount-price:contains(\"-$\"), .promo-amount-value:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, ''))) ? 0.00\r\n      : parseFloat($('.cart-discount-price:contains(\"-$\"),.promo-amount-value:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = parseFloat($('.cart-discount-price:contains(\"-$\"), .promo-amount-value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    if (oldSavings > savings) {\r\n      savings = 0.00;\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCartPage: function () {\r\n    return \/Cart.aspx\/.test(location.href);\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      if (this.isCartPage()) {\r\n        $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_txtPromoCode').val(bestCode);\r\n        $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_btnPromoCode').click();\r\n      } else {\r\n        $('#ctl00_MainContent_billingShipping_txtPromoCode').val(bestCode);\r\n        $('#ctl00_MainContent_billingShipping_btnPromoCode').click();\r\n      }\r\n    }\r\n  }\r\n};\r\nExternalProvider.prepareUrl();",
	"dolcevita": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"dollardays": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n\r\n        var couponData = {};\r\n\r\n        var formInputs = [].slice.call($('#aspnetForm input:not([type=\"radio\"]), #aspnetForm input[type=\"radio\"]:checked'));\r\n\r\n        formInputs.forEach(function(e){\r\n            $(e).attr('name') !== undefined ? (couponData[$(e).attr('name')] = $(e).val()) : false;\r\n        })\r\n\r\n        couponData[\"__EVENTTARGET\"] = \"ctl00$cphContent$btnApplyCode\";\r\n\r\n        couponData[\"ctl00$cphContent$txtCouponCode\"] = code;\r\n        \r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return couponData;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('#ctl00_cphContent_txtCouponCode', responseHTML).val().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('tr.grand-tot td.mobile-right').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('tr.grand-tot td.mobile-right', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"dollargeneral": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseJSON = $.parseJSON(response);\r\n        var savings = responseJSON.items[0].discount_amount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"domain": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n      $('#couponCodeInput').val(code);\r\n      $('#couponCodeInput').get(0).dispatchEvent(changeEvent);\r\n      $('button[name=\"apply_coupon\"]').removeAttr('disabled');\r\n      $('button[name=\"apply_coupon\"]').click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.text-muted.au-remove-coupon')[0].click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1500);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('#cart-discount').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#couponCodeInput').val(bestCode);\r\n      $('button[name=\"apply_coupon\"]').removeAttr('disabled');\r\n      $('button[name=\"apply_coupon\"]').click();\r\n    }\r\n  }\r\n};",
	"domino": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n\r\n        var params = {\r\n\t        \"shipping_address\":false,\r\n            \"billing_address\":false\r\n        };\r\n\r\n        if(type === 'applyCouponUrl') {\r\n            params = Object.assign(params, {\r\n\t            coupon_code: {\r\n\t                code: code\r\n                }\r\n            })\r\n        }\r\n\r\n        return JSON.stringify(params);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        return {\r\n            success: response.coupon_details.code.toLowerCase() === code.toLowerCase(),\r\n            savings: response.total_savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(!bestCode) return false;\r\n\r\n        var $containerMeta = $('.order-meta-container'), $this, $input;\r\n\t    var event = new Event('input', { bubbles: true });\r\n        $containerMeta.each(function() {\r\n            $this = $(this);\r\n\r\n            if($('header', $this).text().indexOf('Coupon Code') !== -1) {\r\n\r\n\t            $input = $('.input-with-button input', $this).get(0);\r\n\t            $input.value = bestCode;\r\n\t            $input.dispatchEvent(event);\r\n\r\n                $('.input-with-button button', $this).get(0).click();\r\n            }\r\n        })\r\n    }\r\n};",
	"domino.tablet": "var ExternalProvider = {\r\n\r\n\t$: window.$piggyJq,\r\n\r\n    prepare: function (type, code) {\r\n\r\n        var params = {\r\n\t        \"shipping_address\":false,\r\n            \"billing_address\":false\r\n        };\r\n\r\n        if(type === 'applyCouponUrl') {\r\n            params = Object.assign(params, {\r\n\t            coupon_code: {\r\n\t                code: code\r\n                }\r\n            })\r\n        }\r\n\r\n        return JSON.stringify(params);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        return {\r\n            success: response.coupon_details.code.toLowerCase() === code.toLowerCase(),\r\n            savings: response.total_savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(!bestCode) return false;\r\n\r\n        var $containerMeta = this.$('.order-meta-container'), $this, $input;\r\n\t    var event = new Event('input', { bubbles: true });\r\n        $containerMeta.each(function() {\r\n            $this = ExternalProvider.$(this);\r\n\r\n            if(ExternalProvider.$('header', $this).text().indexOf('Coupon Code') !== -1) {\r\n\r\n\t            $input = ExternalProvider.$('.input-with-button input', $this).get(0);\r\n\t            $input.value = bestCode;\r\n\t            $input.dispatchEvent(event);\r\n\r\n                ExternalProvider.$('.input-with-button button', $this).get(0).click();\r\n            }\r\n        })\r\n    }\r\n};",
	"domino.mobile": "var ExternalProvider = {\r\n    $: window.$piggyJq,\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var $response = this.$.parseHTML(response),\r\n            $cartItem = this.$('.list-unstyled.type-case-lower .row', $response),\r\n            codeFound = false, savings = 0.00, $this;\r\n\r\n        $cartItem.each(function() {\r\n            $this = ExternalProvider.$(this);\r\n            if(ExternalProvider.$('p:first-child', $this).text().indexOf('Discount') !== -1) {\r\n                codeFound = true;\r\n                savings = parseFloat(ExternalProvider.$('p:last-child', $this).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            }\r\n        });\r\n\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(!bestCode) return false;\r\n\r\n        this.$('#mobile_site_models_forms_checkout_SettingsForm_coupon_code').val(bestCode);\r\n        this.$('form button').click();\r\n    }\r\n}",
	"dominos": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    if (action === 'injectCoupon') {\r\n      $('#Coupon_Code_Cart').val(code);\r\n      $('.js-hiddenCouponField .btn').click();\r\n    } else if (action === 'removeInjectedCoupon') {\r\n      if ($('.js-removeCoupon').length) $('.js-removeCoupon')[0].click();\r\n      else $('.js-closeButton').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    setTimeout(function () {\r\n      var maxWait = 200, waited = 0;\r\n      var selector = $('#genericOverlay').length;\r\n      var waitForClose = setInterval(function () {\r\n        var confirmed = step === 'injectCoupon' ? selector : !selector;\r\n        if ((confirmed) || (waited > maxWait)) {\r\n          clearInterval(waitForClose);\r\n          setTimeout(function () {\r\n            next();\r\n          }, 500);\r\n        }\r\n        waited++;\r\n      }, 10);\r\n    }, 50);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount.js-total:eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#Coupon_Code_Cart').val(bestCode);\r\n      $('.js-hiddenCouponField .btn').click();\r\n    }\r\n  }\r\n};",
	"domu": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var selector = $('.price_currency_code').first().text();\r\n        var locale = '';\r\n\r\n        switch (selector) {\r\n            case 'USD':\r\n                locale = localeMapping['US'];\r\n                currency = \"USD\";\r\n                break;\r\n            case 'EUR':\r\n                locale = localeMapping['DE'];\r\n                currency = \"EUR\";\r\n                break;\r\n            default:\r\n                locale = localeMapping['GB'];\r\n                currency = \"GBP\";\r\n                break;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"donnakaran": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#sourceCode').val(bestCode);\r\n\r\n            var keyChangeEvent = document.createEvent('KeyboardEvent');\r\n\r\n            keyChangeEvent.initKeyboardEvent('change', true, true);\r\n            $('#sourceCode').get(0).dispatchEvent(keyChangeEvent);\r\n            $('.ml-payment-source-code-apply .ml-secondary-button-understated').click();\r\n            $('.sourceCodeApplyBtn').click();\r\n        }\r\n    }\r\n};",
	"dorcousa": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"dorcousa.mobile": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var s = document.createElement('script');\r\n\r\n        s.type = 'text\/javascript';\r\n\r\n        var CID = $('script:contains(\"CHECKOUT_ID\")').text().match(\/'CHECKOUT_ID', '(.*)'\/)[1];\r\n        var code = \"document.querySelector('body').setAttribute('params', '\" + CID + \"')\";\r\n\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n        s.remove();\r\n    },\r\n    parse: function (response) {\r\n        \r\n        var savings = response.coupons[0].discountedAmount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('body').removeAttr('params');\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"dotandbo": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.cart.discounts);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"douglas": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.cart.summary.multiVoucher.relativeVoucherValues[0].totalVoucherValue.price;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"dowerandhall": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match('original_discount_amount(.*)base_original_discount_amount')[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"doyoursports": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart_discount_price .price-discount', responseHTML).text().replace(\/[^0-9|,]\/g, ''));\r\n\r\n        $.ajax({\r\n            url: $('.price_discount_delete-discount', responseHTML).attr('href'),\r\n            mode: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discount_name').val(bestCode);\r\n            $('button[name=\"submitAddDiscount\"]').click();\r\n        }\r\n    }\r\n};",
	"dplantes": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.price:contains(\"-\"):eq(0)', responseHTML).text().replace(',', '.');\r\n\r\n        savings = parseFloat(savings.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"drbrandtskincare": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().split(\"$\")[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"dreamproductscatalog": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var couponUrlInput = $('#_jpCouponUrl');\r\n    var couponUrl = this.isCartPage() ? 'http:\/\/www.dreamproducts.com\/checkout\/cart\/couponPost\/' : 'https:\/\/www.dreamproducts.com\/po_ccc\/onepage\/applyCoupon\/';\r\n    var resUrl = this.isCartPage() ? 'http:\/\/www.dreamproducts.com\/checkout\/cart\/' : 'https:\/\/www.dreamproducts.com\/checkout\/cart\/';\r\n\r\n    if (couponUrlInput.length < 1) {\r\n      $('<input>', {\r\n        id: '_jpCouponUrl',\r\n        value: couponUrl,\r\n        type: 'hidden'\r\n      }).appendTo('body');\r\n\r\n      $('<input>', {\r\n        id: '_jpResultUrl',\r\n        value: resUrl,\r\n        type: 'hidden'\r\n      }).appendTo('body');\r\n    }\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = false;\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        coupon_code: code\r\n      };\r\n\r\n      if (this.isCartPage() === true) {\r\n        data = {\r\n          remove: 0,\r\n          coupon_code: code\r\n        };\r\n      }\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#shopping-cart-totals-table > tbody > tr > td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      if (this.isCartPage() === true) {\r\n        $('#coupon_code').val(bestCode);\r\n        $('.button-wrapper .button2').click();\r\n      } else {\r\n        $('#po_ccc_coupon_code').val(bestCode);\r\n        $('#po_ccc-apply').click();\r\n      }\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/checkout\/cart\/';\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"dressbarn": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.data.cartSummary.savingsNew[0].value);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"dressforless": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.order_total.separated > div.col4.align_right > font > font').text().replace(\/[^0-9.]\/g, ''));\r\n        var newTotal = parseFloat($('.order_total .align_right', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n        var savings = parseFloat(oldTotal - newTotal);\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"dresslily": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.total-coupon-save .my-shop-price', responseHTML).attr('data-orgp');\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#cart_summary_promotion_code').val(bestCode);\r\n            $('#apply_cart_coupon').click();\r\n        }\r\n    }\r\n};",
	"dresslily.mobile": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n        var savings = parseFloat($piggyJq('#coupon_amount', responseHTML).text());\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"dresslink": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var discount = parseFloat(response.info.coupon_amount);\r\n        if(discount){\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n};",
	"drfuhrman": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-total-value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $(\"#couponcode\").val(bestCode);\r\n      $(\"#apply_code, .coupon-form > .button.button--primary\").click();\r\n    }\r\n  }\r\n};",
	"drizly": "var ExternalProvider = {\r\n\r\n    prepare: function(requestType,code){\r\n        var params = this.serializeFormObject($('form#cart_form').serializeArray());\r\n        if(requestType == 'applyCouponUrl') {\r\n            params['redemption_code'] = code;\r\n        }\r\n        return params;\r\n    },\r\n    \r\n    parse: function(response, status, $xhr, code, some){\r\n        if(response && response.cart_contents){\r\n            var responseHTML = $.parseHTML(response.cart_contents);\r\n            var oldTotal = parseFloat($('.order-total tr:last-child td:last-child').text().replace(\/[^0-9|\\.]\/g, ''));\r\n            var newTotal = parseFloat($('.order-total tr:last-child td:last-child', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            var savings = oldTotal - newTotal;\r\n\r\n            if(savings){\r\n                return {\r\n                    success: true,\r\n                    savings: parseFloat(savings)\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        location.reload(true);\r\n    },\r\n    \r\n    serializeFormObject: function(obj){\r\n        var data={}\r\n        $.each(obj,function(){\r\n            data[this.name] = this.value||''\r\n        })\r\n        return data\r\n    }\r\n};",
	"drleonards": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cartSubTotalsRight .errorMsg', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"coupon_code\"]').val(bestCode);\r\n      $('input[name=\"CouponSubmit\"]').click();\r\n      $('input[name=\"coupon_code\"]').val('');\r\n    }\r\n  }\r\n};",
	"dronenerds": "var ExternalProvider = {\r\n    prepareUrl: function () {\r\n        var clearUrlInput = $('#___jpClearUrl');\r\n        var clearUrl = this.isCheckoutPage() ? 'https:\/\/www.dronenerds.com\/onestepcheckout\/ajax\/applyCoupon\/' : 'https:\/\/www.dronenerds.com\/checkout\/cart\/couponPost\/';\r\n\r\n        if (!clearUrlInput.length) {\r\n            clearUrlInput = document.createElement('input');\r\n            clearUrlInput.id = '___jpClearUrl';\r\n            clearUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n            clearUrlInput = $('#___jpClearUrl');\r\n        }\r\n\r\n        clearUrlInput.attr('value', clearUrl);\r\n    },\r\n    prepare: function (action, code) {\r\n        var data = {};\r\n\r\n        if (action === 'clearCouponUrl') {\r\n            if (!this.isCheckoutPage()) {\r\n                data = {\r\n                    remove: 1,\r\n                    coupon_code: code\r\n                };\r\n            } else {\r\n                data = {\r\n                    coupon_code: ''\r\n                };\r\n            }\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCheckoutPage: function () {\r\n        return \/onestepcheckout\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#coupon_code').get(0).dispatchEvent(changeEvent);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            if ($('#aw-onestepcheckout-coupon-code-apply-btn').length) {\r\n                $('#aw-onestepcheckout-coupon-code-apply-btn').get(0).dispatchEvent(clickEvent);\r\n            } else {\r\n                $('.buttoncoupon').get(0).dispatchEvent(clickEvent);\r\n            }\r\n        }\r\n    }\r\n};\r\nExternalProvider.prepareUrl();",
	"dtlr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestcode) {\r\n    if (bestcode) location.reload();\r\n  }\r\n};",
	"dualens": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.s_r_r_proceed_r.price_save:not(:first)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"duinrellde": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = 'USD';\r\n        var url = location.host;\r\n\r\n        if (url.match(\/de|fr\/g)) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping[url.match(\/de|fr\/g).shift().toUpperCase()];\r\n        } else if (url.match(\/en\/g)) {\r\n            newCurrency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n};",
	"dunelm": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data ={};\r\n        \r\n        if(type == 'applyCouponUrl'){\r\n            \r\n            data = {\r\n                promoCode: code,\r\n                taskType: 'A',\r\n                tabView: 'ROCS',\r\n                calculationUsage: '-1,-2,-3,-4,-5,-6,-7',\r\n                catalogId: $('#header-search input[name=\"catalogId\"]').val(),\r\n                storeId: $('#header-search input[name=\"storeId\"]').val(),\r\n                langId: $('#header-search input[name=\"langId\"]').val(),\r\n                orderId: $('#js-homeDeliveryBtn').attr('data-new-checkout-url').match('orderId=(.*)&')[1],\r\n            }\r\n\r\n            return data\r\n\r\n        }else if(type == 'clearCouponUrl'){\r\n\r\n            data = {\r\n                promoCode: code,\r\n                taskType: 'R',\r\n                tabView: 'ROCS',\r\n                calculationUsage: '-1,-2,-3,-4,-5,-6,-7',\r\n                catalogId: $('#header-search input[name=\"catalogId\"]').val(),\r\n                storeId: $('#header-search input[name=\"storeId\"]').val(),\r\n                langId: $('#header-search input[name=\"langId\"]').val(),\r\n                orderId: $('#js-homeDeliveryBtn').attr('data-new-checkout-url').match('orderId=(.*)&')[1],\r\n            }\r\n\r\n            return data\r\n\r\n        }\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td[data-pricing=\"orderDiscounts\"]', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#vouchercode > a > span:nth-child(1)').click();\r\n            $('#voucher-code').val(bestCode);\r\n            $('#VoucherCodeForm > div > button').click();\r\n        }\r\n    }\r\n};",
	"dunelondon": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.align-right:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));    \r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#voucher').val(bestCode);\r\n            $('button[onclick=\"return apply_voucher()\"]').click();\r\n        }\r\n    }\r\n};",
	"dunkindonuts": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.CartTotalDiscountPrice', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0.00,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"dwr": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isCartPage() ? $('#cart-items-form')[0].action : 'https:\/\/www.dwr.com\/on\/demandware.store\/Sites-dwr-Site\/en_US\/Cart-AddCouponJson?couponCode=CLAIMCODE&format=ajax';\r\n\r\n        \/\/ Append apply url input\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (this.isCartPage()) {\r\n            if (type === 'applyCouponUrl') {\r\n                data = {\r\n                    dwfrm_cart_couponCode: code,\r\n                    dwfrm_cart_updateCart: $('input[name=\"dwfrm_cart_updateCart\"]').val(),\r\n                    dwfrm_cart_addCoupon: $('#add-coupon').val()\r\n                };\r\n\r\n                return data;\r\n            }\r\n        } else\r\n            if (type === 'applyCouponUrl') {\r\n                data = {\r\n                    couponCode: code,\r\n                    format: 'ajax'\r\n                };\r\n\r\n                return data;\r\n            }\r\n\r\n        return false;\r\n    },\r\n\r\n    isCartPage: function () {\r\n        return $('#cart-items-form')[0] !== undefined;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount.rowcoupons td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (code) {\r\n        if (code) {\r\n            var inputField = this.isCartPage ? $('#dwfrm_cart_couponCode') : $('#dwfrm_billing_couponCode');\r\n            inputField.val(code);\r\n            $('#add-coupon').click()\r\n        }\r\n    }\r\n\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"dx": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('.currency-span').attr('data-currency');\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (selector === \"\u20ac\") {\r\n            locale = localeMapping['FR'];\r\n            currency = \"EUR\";\r\n        }\r\n         return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.DiscountPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.hand-coupon').val(bestCode);\r\n            $('.hand-coupon-btn').click();\r\n        }\r\n    }\r\n};",
	"dyn": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"dynamiteclothing": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                _dyncharset: 'UTF-8',\r\n                _dynSessConf: $(\"input[name='_dynSessConf']\").val(),\r\n                '\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponSuccessURL': '\/us\/json\/applyCouponResponseJSON.jsp',\r\n                '_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponSuccessURL': '',\r\n                '\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponErrorURL': '\/us\/json\/applyCouponResponseJSON.jsp',\r\n                '_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponErrorURL': '',\r\n                '\/atg\/commerce\/promotion\/CouponFormHandler.lang': 'en',\r\n                '_D:\/atg\/commerce\/promotion\/CouponFormHandler.lang': '',\r\n                '\/atg\/commerce\/promotion\/CouponFormHandler.userId': $(\"input[name='\/atg\/commerce\/promotion\/CouponFormHandler.userId']\").val(),\r\n                '_D:\/atg\/commerce\/promotion\/CouponFormHandler.userId': '',\r\n                applyCouponButton: 'Apply',\r\n                '_D:applyCouponButton': '',\r\n                promoCodeEntry: code,\r\n                '_D:promoCodeEntry': '',\r\n                _DARGS: '\/site\/checkout\/cartSummary.jsp'\r\n            };\r\n\r\n            return data;\r\n        } else if (type === 'clearCouponUrl') {\r\n            data = {\r\n                _dyncharset: 'UTF-8',\r\n                _dynSessConf: $(\"input[name='_dynSessConf']\").val(),\r\n                '\/gdi\/ui\/handler\/RemoveCouponFormHandler.couponCode': code,\r\n                '_D:\/gdi\/ui\/handler\/RemoveCouponFormHandler.couponCode': '',\r\n                '\/gdi\/ui\/handler\/RemoveCouponFormHandler.claimCouponErrorURL': '\/us\/json\/removeCouponResponseJSON.jsp',\r\n                '_D:\/gdi\/ui\/handler\/RemoveCouponFormHandler.claimCouponErrorURL': '',\r\n                '\/gdi\/ui\/handler\/RemoveCouponFormHandler.claimCouponSuccessURL': '\/us\/json\/removeCouponResponseJSON.jsp',\r\n                '_D:\/gdi\/ui\/handler\/RemoveCouponFormHandler.claimCouponSuccessURL': '',\r\n                '\/gdi\/ui\/handler\/RemoveCouponFormHandler.removeCoupon': 'submit',\r\n                '_D:\/gdi\/ui\/handler\/RemoveCouponFormHandler.removeCoupon': '',\r\n                _DARGS: '\/site\/checkout\/cartSummary.jsp.removeCouponForm'\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: 'https:\/\/www.dynamiteclothing.com\/us\/json\/removeCouponResponseJSON.jsp?_requestid=',\r\n            cache: false,\r\n            contentType: 'application\/json',\r\n            dataType: 'html'\r\n        });\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHMTL = $.parseHTML(response);\r\n        var savings = 0;\r\n\r\n        if (($('div[class*=\"promoName\"]:contains(\"% OFF\")', responseHMTL).text()).length > 0) {\r\n            savings = parseFloat($('div[class*=\"cartSummaryAmounts\"]:contains(\"-$\")', responseHMTL).text().replace(\/[^0-9|.]\/g, ''));\r\n        } else {\r\n            savings = 0.00;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"eaglecreek": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.amounts.adjustments[1].formattedAmount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"eaglemoss": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'applyCouponUrl') {\r\n            if (location.pathname.match('shopping-basket')) {\r\n                return {\r\n                    __EVENTTARGET: 'ctl00$FeaturedContent$lnkApplyPromo',\r\n                    __EVENTARGUMENT: null,\r\n                    __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n                    __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n                    __VIEWSTATEENCRYPTED: null,\r\n                    __EVENTVALIDATION: $('#__EVENTVALIDATION').val(),\r\n                    ctl00$FeaturedContent$inc_navbar$searchbox: null,\r\n                    ctl00$FeaturedContent$Country: null,\r\n                    ctl00$FeaturedContent$txtPromoCode: code,\r\n                    ctl00$txtEmail: null,\r\n                    hiddenInputToUpdateATBuffer_CommonToolkitScripts: 1\r\n                };\r\n            }\r\n\r\n            return {\r\n                __EVENTTARGET: 'ctl00$FeaturedContent$LinkButton2',\r\n                __EVENTARGUMENT: null,\r\n                __LASTFOCUS: null,\r\n                __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n                __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n                __VIEWSTATEENCRYPTED: null,\r\n                __EVENTVALIDATION: $('#__EVENTVALIDATION').val(),\r\n                ctl00$FeaturedContent$PromoCode: code,\r\n                ctl00$FeaturedContent$delivery: $('#ctl00_FeaturedContent_PostageOption1').val(),\r\n                ctl00$FeaturedContent$txtPostcode_Delivery: $('#ctl00_FeaturedContent_txtPostcode_Delivery').val(),\r\n                ctl00$FeaturedContent$paymentType: null,\r\n                ctl00$FeaturedContent$txtCardType: null,\r\n                ctl00$FeaturedContent$txtCardNumber: null,\r\n                ctl00$FeaturedContent$selExpiry_Month: null,\r\n                ctl00$FeaturedContent$selExpiry_Year: null,\r\n                ctl00$FeaturedContent$txtCvsNumber: null,\r\n                ctl00$txtEmail: null\r\n            };\r\n        }\r\n\r\n        if (action === 'clearCouponUrl' && !location.pathname.match('shopping-basket')) {\r\n            return {\r\n                __EVENTTARGET: 'ctl00$FeaturedContent$LinkButton2',\r\n                __EVENTARGUMENT: null,\r\n                __LASTFOCUS: null,\r\n                __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n                __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n                __VIEWSTATEENCRYPTED: null,\r\n                __EVENTVALIDATION: $('#__EVENTVALIDATION').val(),\r\n                ctl00$FeaturedContent$PromoCode: null,\r\n                ctl00$FeaturedContent$delivery: $('#ctl00_FeaturedContent_PostageOption1').val(),\r\n                ctl00$FeaturedContent$txtPostcode_Delivery: $('#ctl00_FeaturedContent_txtPostcode_Delivery').val(),\r\n                ctl00$FeaturedContent$paymentType: null,\r\n                ctl00$FeaturedContent$txtCardType: null,\r\n                ctl00$FeaturedContent$txtCardNumber: null,\r\n                ctl00$FeaturedContent$selExpiry_Month: null,\r\n                ctl00$FeaturedContent$selExpiry_Year: null,\r\n                ctl00$FeaturedContent$txtCvsNumber: null,\r\n                ctl00$txtEmail: null\r\n            };\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#ctl00_FeaturedContent_TotalDiscount, #ctl00_FeaturedContent_VoucherCode', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"eastbay": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    const script = document.createElement('script');\r\n    let scriptContent = `\r\n      fetch('\/api\/session').then(response => {\r\n        response.json().then(json => {\r\n          let data = json;\r\n          if(document.getElementById(\"csrf\") === null) {\r\n            let csrfInput = document.createElement(\"input\");\r\n            csrfInput.id = 'csrf';\r\n            csrfInput.setAttribute('type', 'hidden');\r\n            csrfInput.setAttribute('value', data.data.csrfToken);\r\n            (document.body || document.head || document.documentElement).appendChild(csrfInput);\r\n          }\r\n        });\r\n      });\r\n    `;\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n    $('#tmpScript').remove();\r\n  },\r\n  parse: function (response) {\r\n    let savings = Math.abs(response.orderDiscounts.value);\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"eastdane": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var preDiscountTotal = parseFloat($('#subTotal .toggleOff').text().replace(\/[^0-9.]\/g, ''));\r\n        var postDiscountTotal = parseFloat($('#subTotal .toggleOff', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = preDiscountTotal - postDiscountTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ems": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var getSavings = $('.coupon-fields .coupon-left-part .promo-codes-list .info-left:contains(\"-$\")', responseHTML).text();\r\n        var getAmount = getSavings.match('activated(.*)');\r\n        var savings = parseFloat(getAmount[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_billing_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"easton": "var ExternalProvider = {\r\n    _elToNumber: function (el) {\r\n        return parseFloat(el.text().replace(\/[^0-9|.]\/g, ''));\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        response = JSON.parse(response);\r\n\r\n        if (!response.error) {\r\n\r\n            var responseHTML = $(response.review_html);\r\n            var originalTotal = this._elToNumber($('#checkout-review-table-wrapper .price:last, #amount-totals .price:last')),\r\n                newTotal = this._elToNumber($(responseHTML).find('.price:last')),\r\n                savings = originalTotal - newTotal;\r\n\r\n            if (savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"eastpak": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n        var newCurrency;\r\n        var url = location.pathname;\r\n\r\n        if (url.match('uk-en')) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (url.match('de-de') || url.match('fr-fr')) {\r\n            locale = url.match('de-de') ? localeMapping.DE : localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        } else {\r\n            locale = localeMapping.US;\r\n            newCurrency = 'USD';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"easy2name": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('#discount-coupon-form button[title=\"Apply\"]').click();\r\n    }\r\n  }\r\n};",
	"easycosmeticde": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      data = {\r\n        ctl00$ctl00$AjaxToolkitControl$ScriptManager: 'ctl00$ctl00$CartControl$cart|cart',\r\n        ScriptManager_HiddenField: null,\r\n        __EVENTTARGET: 'cart',\r\n        __EVENTARGUMENT: 'AddDiscount:value=' + code,\r\n        searchbox: null,\r\n        quantity1: $('#quantity1').val(),\r\n        discount: code,\r\n        SessionID: $('#SessionID').val(),\r\n        Query: null,\r\n        __SCROLLPOSITIONX: 0,\r\n        __SCROLLPOSITIONY: 0,\r\n        __ASYNCPOST: true\r\n      };\r\n    } else {\r\n      data = {\r\n        ctl00$ctl00$AjaxToolkitControl$ScriptManager: 'ctl00$ctl00$CartControl$cart|cart',\r\n        ScriptManager_HiddenField: null,\r\n        searchbox: null,\r\n        quantity1: $('#quantity1').val(),\r\n        discount: code,\r\n        SessionID: $('#SessionID').val(),\r\n        Query: null,\r\n        __VIEWSTATE: null,\r\n        __SCROLLPOSITIONX: 0,\r\n        __SCROLLPOSITIONY: 0,\r\n        __EVENTTARGET: 'cart',\r\n        __EVENTARGUMENT: 'Restore:id=' + $('#SessionID').val(),\r\n        __ASYNCPOST: true\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price.total:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"easylunettes": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.orderInfo.discount_amount.replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.radio-icon').click();\r\n            $('#promo-code').val(bestCode);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                'view': window,\r\n                'bubbles': true,\r\n                'cancelable': true\r\n            });\r\n            $('.update-total').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"easyspirit": "var $ = $;\r\n\r\n\/\/ Helper functions borrowed\r\n\/\/ from jquery.simulate.js\r\n\/\/ https:\/\/github.com\/jquery\/jquery-simulate\/blob\/master\/jquery.simulate.js\r\n\r\nvar createEvent = function (type, options) {\r\n    var event;\r\n\r\n    options = $.extend({\r\n        bubbles: true,\r\n        cancelable: true,\r\n        view: window,\r\n        ctrlKey: false,\r\n        altKey: false,\r\n        shiftKey: false,\r\n        metaKey: false,\r\n        keyCode: 0,\r\n        charCode: undefined\r\n    }, options);\r\n\r\n    if (document.createEvent) {\r\n        try {\r\n            event = document.createEvent('KeyEvents');\r\n            event.initKeyEvent(type, options.bubbles, options.cancelable, options.view,\r\n                options.ctrlKey, options.altKey, options.shiftKey, options.metaKey,\r\n                options.keyCode, options.charCode);\r\n            \/\/ initKeyEvent throws an exception in WebKit\r\n            \/\/ see: http:\/\/stackoverflow.com\/questions\/6406784\/initkeyevent-keypress-only-works-in-firefox-need-a-cross-browser-solution\r\n            \/\/ and also https:\/\/bugs.webkit.org\/show_bug.cgi?id=13368\r\n            \/\/ fall back to a generic event until we decide to implement initKeyboardEvent\r\n        } catch (err) {\r\n            event = document.createEvent('Events');\r\n            event.initEvent(type, options.bubbles, options.cancelable);\r\n            $.extend(event, {\r\n                view: options.view,\r\n                ctrlKey: options.ctrlKey,\r\n                altKey: options.altKey,\r\n                shiftKey: options.shiftKey,\r\n                metaKey: options.metaKey,\r\n                keyCode: options.keyCode,\r\n                charCode: options.charCode\r\n            });\r\n        }\r\n    } else if (document.createEventObject) {\r\n        event = document.createEventObject();\r\n        $.extend(event, options);\r\n    }\r\n\r\n    if (!!\/msie [\\w.]+\/.exec(navigator.userAgent.toLowerCase()) || (({}).toString.call(window.opera) === '[object Opera]')) {\r\n        event.keyCode = (options.charCode > 0) ? options.charCode : options.keyCode;\r\n        event.charCode = undefined;\r\n    }\r\n\r\n    return event;\r\n};\r\n\r\nvar dispatchEvent = function (elem, type, event) {\r\n    if (elem.dispatchEvent) {\r\n        elem.dispatchEvent(event);\r\n    } else if (type === 'click' && elem.click && elem.nodeName.toLowerCase() === 'input') {\r\n        elem.click();\r\n    } else if (elem.fireEvent) {\r\n        elem.fireEvent('on' + type, event);\r\n    }\r\n};\r\nvar simulateEvent = function (elem, type, options) {\r\n    var event = createEvent(type, options);\r\n\r\n    dispatchEvent(elem, type, event, options);\r\n};\r\n\r\nvar ExternalProvider = {\r\n    userId: '',\r\n\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"userid\", window.checkoutConfig.quoteData.entity_id);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('userid');\r\n\r\n        this.userId = value;\r\n        $('body').removeAttr(name);\r\n    },\r\n    isCartPage: function () {\r\n        return !\/checkout\\.cart\/.test(location.href);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.totals.items[0].discount_amount;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            if (this.isCartPage()) {\r\n                location.reload(true);\r\n            }\r\n\r\n            var $couponCodeField = $('#discount-code');\r\n\r\n            $couponCodeField.val(bestCode);\r\n            simulateEvent($couponCodeField[0], 'change');\r\n            simulateEvent($couponCodeField[0], 'input');\r\n            $couponCodeField.change();\r\n            $('#add_coupon_code_button').click();\r\n            $('.action.apply.primary').click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"ebags": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#discountsavingstotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#enterMeCode').val(bestCode).closest('form').submit();\r\n    }\r\n  }\r\n};",
	"ebookde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('form[name=\"orderDeleteCouponForm\"] .last-coupon', responseHTML).text().split('=')[1].replace(\/[^0-9|]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ebookers": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.couponModel.couponDiscount.amount.replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    $('input[name=\"couponCode\"]').val(bestCode);\r\n    $('#apply_coupon_button').click();\r\n  }\r\n};",
	"ebookersfr": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data.couponCode = code;\r\n      data.tripid = $('body').attr('data-tripid');\r\n      data.tlCouponAttach = 1;\r\n      data.tlCouponCode = code;\r\n      data.productType = 'multiitem';\r\n      data.binPrefix = null;\r\n    } else if (type === 'clearCouponUrl') {\r\n      data.tripid = $('body').attr('data-tripid');\r\n      data.tlCouponRemove = 1;\r\n      data.tlCouponCode = code;\r\n      data.productType = 'multiitem';\r\n      data.binPrefix = null;\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.couponModel.couponDiscount.amount.replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    $('input[name=\"couponCode\"]').val(bestCode);\r\n    $('#apply_coupon_button').click();\r\n  }\r\n};",
	"ebookersuk": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data.couponCode = code;\r\n            data.tripid = $('body').attr('data-tripid');\r\n            data.tlCouponAttach = 1;\r\n            data.tlCouponCode = code;\r\n            data.productType = 'multiitem';\r\n            data.binPrefix = null;\r\n        } else if (type === 'clearCouponUrl') {\r\n            data.tripid = $('body').attr('data-tripid');\r\n            data.tlCouponRemove = 1;\r\n            data.tlCouponCode = code;\r\n            data.productType = 'multiitem';\r\n            data.binPrefix = null;\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.couponModel.couponDiscount.amount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        $('input[name=\"couponCode\"]').val(bestCode);\r\n        $('#apply_coupon_button').click();\r\n    }\r\n};",
	"ebooks": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var newCurrency = 'USD';\r\n    var selector = document.cookie.match(\/CountryCode=([A-z]+)\/)[1];\r\n\r\n    if (selector === 'UK') {\r\n      locale = localeMapping.GB;\r\n      newCurrency = 'GBP';\r\n    } else if (selector === 'FR') {\r\n      locale = localeMapping.FR;\r\n      newCurrency = 'EUR';\r\n    } else if (selector === 'DE') {\r\n      locale = localeMapping.DE;\r\n      newCurrency = 'EUR';\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.cart_review_html);\r\n    var savings = parseFloat($('#discount-info-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ebuyer": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.inc>.red', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ecampus": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#__jpCouponUrl');\r\n        var applyUrl = $('#frmCheckout').length ? 'https:\/\/www.ecampus.com\/checkout\/review' : 'https:\/\/www.ecampus.com\/shoppingcart?action=update';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#__jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type !== 'applyCouponUrl') return null;\r\n\r\n        var couponData = {};\r\n\r\n        if ($('#frmCheckout').length) {\r\n            var formInputs = [].slice.call($('#frmCheckout input:not([type=\"radio\"]), #frmCheckout input[type=\"radio\"]:checked, #frmCheckout select'));\r\n\r\n            formInputs.forEach(function (e) {\r\n                if ($(e).attr('name') !== undefined) {\r\n                    couponData[$(e).attr('name')] = $(e).val();\r\n                } else {\r\n                    couponData[$(e).attr('name')] = false;\r\n                }\r\n            });\r\n            couponData.action = 'promo';\r\n            couponData.txtPromo = code;\r\n        } else {\r\n            couponData = $('#updatecheck').serializeArray();\r\n            $.grep(couponData, function (e) {\r\n                if (e.name === 'txtPromo') e.value = code;\r\n                if (e.name === 'couponaction') e.value = 'promo';\r\n            });\r\n        }\r\n\r\n        return couponData;\r\n    },\r\n\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0;\r\n\r\n        if ($('#frmCheckout').length) {\r\n            var savingsText = $('.row.coupon.credit-line', responseHTML).find('div:contains(\"Coupon:\")').next().text();\r\n\r\n            if (savingsText.length > 0) {\r\n                savings = parseFloat(savingsText.replace(\/[^0-9|.]\/g, ''));\r\n            }\r\n        } else if ($('.success', responseHTML).length) {\r\n            savings = parseFloat($('.coupon.value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#txtPromo').val(bestCode);\r\n            $('.promo .apply').click();\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"edcskincare": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#__jpCouponUrl'),\r\n    applyUrl = this.isCartPage() ? 'https:\/\/www.edcskincare.com\/recalculate.asp' : 'https:\/\/www.edcskincare.com\/ship_ajax.asp';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement(\"input\");\r\n      applyUrlInput.id = '__jpCouponUrl';\r\n      applyUrlInput.style.display = \"none\";\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  isCartPage: function () {\r\n    return $('#coupon').length == 0;\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action === 'applyCouponUrl') {\r\n      if (this.isCartPage()) {\r\n        return {\r\n          qty0: $('input[name=\"qty0\"]').val(),\r\n          colid0: $('input[name=\"colid0\"]').val(),\r\n          coupon_code: code\r\n        }\r\n      } else {\r\n        return {\r\n          id: -1,\r\n          action: 'total',\r\n          coupon: code,\r\n          k: '',\r\n          wid: ''\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  },\r\n\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.shoppingCartTotal > div.item-total:eq(1)', responseHTML).html().replace('$', ''));\r\n\r\n    if (!this.isCartPage()) {\r\n      for (var i = 0; i < responseHTML.length; i++) {\r\n        if (responseHTML[i]['className'] && responseHTML[i]['className'] === 'total_discount') {\r\n          savings = parseFloat(responseHTML[i].innerHTML.replace('-', '').replace('$', ''));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"eddiebauer": "var ExternalProvider = {\r\n    init: function () {\r\n        if ($('.promo-order-summary').length === 0) {\r\n            $('#addPromoCodeClosed').click();\r\n        }\r\n    },\r\n    prepare: function (actionType, couponCode) {\r\n        if (actionType === 'injectCoupon') {\r\n            this.injectCoupon(couponCode);\r\n        }\r\n        return null;\r\n    },\r\n whenReady: function (step, next) {\r\n        var injectCouponTimeout;\r\n        var counter = 0;\r\n\r\n        if (step === 'injectCoupon') {\r\n            injectCouponTimeout = setInterval(function () {\r\n                var $inputCoupon = $('#chkPromoCode');\r\n\r\n                if ($inputCoupon.length === 0 || ++counter > 5) {\r\n                    clearInterval(injectCouponTimeout);\r\n                    next();\t\r\n                }\t \r\n            }, 300);\r\n        } else {\r\n            injectCouponTimeout = setInterval(function () {\r\n                var $inputCoupon = $('#chkPromoCode');\r\n\r\n                 if ($inputCoupon.length || $('#chkPromoCode').length) {\t\r\n                    clearInterval(injectCouponTimeout);\t\r\n                    next();\t\r\n                }\t\r\n            }, 300);\t\r\n        }\r\n    },\r\n    parse: function () {\r\n        var savings;\r\n\r\n        if ($('.success-pro-code').length) {\r\n            savings = $('.summaryDetailsHolder .summaryDetailsHolder-element:eq(1) .right').text().replace(\/[^0-9.]\/g, '');\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    dispatchEvent: function (element, event) {\r\n        var evt = document.createEvent('HTMLEvents');\r\n\r\n        evt.initEvent(event, true, true);\r\n        element.get(0).dispatchEvent(evt);\r\n\r\n        return this;\r\n    },\r\n    injectCoupon: function (couponCode) {\r\n        var $input = $('#chkPromoCode');\r\n\r\n        if (!$input.length) {\r\n            $('#addPromoCodeClosed').click();\r\n        }\r\n\r\n        $input = $('#chkPromoCode');\r\n\r\n        this.dispatchEvent($input, 'focus');\r\n        $input.val(couponCode);\r\n        this.dispatchEvent($input, 'blur');\r\n        $('[data-formid=\"apply-promo-code\"]')[0].click();\r\n    }\r\n};",
	"edplace": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('td:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('#coupon_button').click();\r\n    }\r\n  }\r\n};",
	"edureka": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#order_total_desktop').text().replace(\/[^0-9]\/g, ''));\r\n        var newTotal = parseFloat($('#order_total_desktop', responseHTML).text().replace(\/[^0-9]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#user-coupon').val(bestCode);\r\n            $('#cpn_sub_clik').click();\r\n        }\r\n    }\r\n};",
	"eeuroparts": "var ExternalProvider = {\r\n  \r\n  parse: function(response, status, $xhr, code) {\r\n\r\n    if (response && response.CartDiscount && response.CartDiscount.DiscountAmount && parseFloat(response.CartDiscount.DiscountAmount) > 0) {\r\n      return {\r\n        success: true,\r\n        savings: parseFloat(response.CartDiscount.DiscountAmount)\r\n      }\r\n    }\r\n\r\n    return {\r\n      success: false,\r\n      savings: 0.00\r\n    }\r\n\r\n  },\r\n\r\n  complete: function(bestCode, bestSaving) {\r\n\r\n    location.reload(true);\r\n    \r\n  }\r\n};",
	"efaucets": "var ExternalProvider = {\r\n    serializeFormObject: function (obj) {\r\n        var data = {};\r\n        $.each(obj, function () {\r\n            data[this.name] = this.value || ''\r\n        });\r\n        return data;\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type == 'applyCouponUrl' || type == 'clearCouponUrl') {\r\n            var data = this.serializeFormObject($('#frmQty').serializeArray());\r\n            data.PromoCode = code;\r\n            if (type == 'clearCouponUrl') {\r\n                data.PromoCode = 'XPIGGYX';\r\n            }\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#DiscountAmount', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        if (savings > 0.00) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"effyjewelry": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"eggie": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"eglobalcentralfr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.html.checkout_totals);\r\n        var savings = parseFloat($('.discount-price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        $.ajax({\r\n            url: $('.discount-info a', responseHTML).attr('href'),\r\n            method: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"egoshoes": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var s = document.createElement('script');\r\n\r\n        s.type = 'text\/javascript';\r\n        s.id = 'eid';\r\n\r\n        var code = \"document.querySelector('body').setAttribute('eid', window.checkoutConfig.quoteData.entity_id);\";\r\n\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n\r\n        s.remove();\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.totals.base_discount_amount * -1;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('body').removeAttr('eid');\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"eibmarkt": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('.SelectCountry option:selected').text().replace(\/[0-9.,]\/g, '').trim();\r\n\r\n        if ($.inArray(selector, ['Germany', 'Deutschland']) >= 0) {\r\n            currency = 'EUR';\r\n            locale = localeMapping.DE;\r\n        } else if ($.inArray(selector, ['Great Britain (UK)', 'Grossbritannien']) >= 0) {\r\n            currency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        } else if ($.inArray(selector, ['France', 'Frankreich']) >= 0) {\r\n            currency = 'EUR';\r\n            locale = localeMapping.FR;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"elaineturner": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match(\/base_discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"elderbeerman": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var oldTotal = parseFloat($('.orderTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = 0;\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.elder-beerman.com\/AjaxOrderCalculateSecure',\r\n            data: {\r\n                estimateTax: true,\r\n                calculationUsageId: -7,\r\n                updatePrices: 1,\r\n                updateMiniCartCookie: true,\r\n                calculateTax: true,\r\n                errorViewName: 'AjaxOrderItemDisplayView',\r\n                orderId: $('input[name=\"orderId\"]').val(),\r\n                notStorePrice: true,\r\n                URL: 'donothing'\r\n            },\r\n            success: function () {\r\n                $.ajax({\r\n                    url: 'https:\/\/www.elder-beerman.com\/AjaxOrderItemDisplayView',\r\n                    data: {\r\n                        doInventory: 'N',\r\n                        catalogId: $('input[name=\"catalogId\"]').val(),\r\n                        orderId: $('input[name=\"orderId\"]').val(),\r\n                        langId: $('input[name=\"langId\"]').val(),\r\n                        storeId: $('input[name=\"storeId\"]').val(),\r\n                        requesttype: 'ajax'\r\n                    },\r\n                    success: function (result) {\r\n                        newTotal = parseFloat($('.orderTotal', $.parseHTML(result)).text().replace(\/[^0-9|.]\/g, ''));\r\n                    },\r\n                    async: false\r\n                });\r\n            },\r\n            async: false\r\n        });\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"electriccalifornia": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"elektronikstarde": "var ExternalProvider = {\r\n  __prepareURL: function () {\r\n    var self = this;\r\n    var applyUrlInput = $('#__jpCouponUrl');\r\n    var sTokenInput = $('#__sToken');\r\n    \r\n    if (!applyUrlInput.length || !sTokenInput.length) {\r\n      $.ajax({\r\n        url: 'https:\/\/www.elektronik-star.de',\r\n        async: false,\r\n        success: function (response) {\r\n          var responseHTML = $.parseHTML(response);\r\n          var applyUrl = $('div#paypalExpressCheckoutMiniBasketBox form', responseHTML).attr('action');\r\n          var sToken = $('input[name=\"stoken\"]', responseHTML).val();\r\n\r\n          self.__createCustomDOM(applyUrlInput, '__jpCouponUrl', applyUrl);\r\n          self.__createCustomDOM(sTokenInput, '__sToken', sToken);\r\n        }\r\n      });\r\n    }\r\n  },\r\n  __createCustomDOM: function (jpInput, jpID, domSelector) {\r\n    jpInput = document.createElement(\"input\");\r\n    jpInput.id = jpID;\r\n    jpInput.style.display = \"none\";\r\n    (document.body || document.head || document.documentElement).appendChild(jpInput);\r\n    jpInput = $('#' + jpID);\r\n\r\n    return jpInput.attr('value', domSelector);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var clearCoupon = $('.summary-totalWrapper a.controlIcon.controlIcon--black', responseHTML);\r\n    var savings = parseFloat($('span[data-qa=\"spn-cartVoucherValue\"]', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    if (clearCoupon.length) {\r\n      $.ajax({\r\n        url: clearCoupon.attr('href'),\r\n        async: false,\r\n      });\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('.voucher-input').val(bestCode);\r\n      $('input[data-qa=\"btn-voucherSubmit\"]').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider.__prepareURL();",
	"elementalherbology": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('#shopping-cart-totals-table td:contains(\"Discount\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"elemis": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale;\r\n\r\n    if ($('script:contains(\\'\"currencyCode\":\"GBP\"\\')').length) {\r\n      locale = localeMapping['GB'];\r\n      currency = 'GBP';\r\n    } else if ($('script:contains(\\'\"currencyCode\":\"EUR\"\\')').length) {\r\n      locale = localeMapping['DE'];\r\n      currency = 'EUR';\r\n    } else {\r\n      locale = localeMapping['US'];\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits: 2 });\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\") ', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"elevtd": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat($('[data-checkout-discount-amount-target]', response.responseText).html()\r\n            .replace(\/[^0-9|.]\/g, '').trim());\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if(bestCode) location.reload();\r\n        \r\n    }\r\n};",
	"elfcosmetics": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = Number($('.order-discount.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"elizabetharden": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = '';\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.elizabetharden.com\/on\/demandware.store\/Sites-ElizabethArden-Site\/default\/Cart-Show',\r\n            success: function (d) {\r\n                var responseHTML = $.parseHTML(d);\r\n\r\n                savings = parseFloat($('.order-discount.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n            },\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var couponField = $('#dwfrm_cart_couponCode').length !== 0 ? '#dwfrm_cart_couponCode' : '#dwfrm_billing_couponCode';\r\n\r\n            $(couponField).val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"ellaparadis": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\">-(.*)Your\")[1].replace(\/[^0-9|.]\/g, ''))\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"eloquii": "var ExternalProvider = {\r\n\r\n    origPrice: 0,\r\n\r\n    init: function () {\r\n        this.origPrice = parseFloat($('.cartordertotals .font-demi~.font-demi').text().replace(\/[^0-9.]\/g, ''));\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newPrice = parseFloat($('.cartordertotals .font-demi~.font-demi', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        var savings = this.origPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.mt-4 #promo-input-box').val(bestCode);\r\n            $('.mt-4 button[name=\"dwfrm_cart_addOmniCode\"]').click();\r\n        }\r\n    }\r\n};",
	"elvde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.panel--td.column--total-price.block.is--align-right:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"embroideryonline": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.coupon.currency-amt', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"empasa": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.row--voucher .column--total-price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"sVoucher\"]').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        }\r\n    }\r\n};",
	"empirecovers": "var ExternalProvider = {\r\n\r\n\tinit: function() {\r\n\r\n\t\t$.fn.serializeObject = function()\r\n\t\t{\r\n\t\t\tvar o = {};\r\n\t\t\tvar a = this.serializeArray();\r\n\t\t\t$.each(a, function() {\r\n\t\t\t\tif (o[this.name] !== undefined) {\r\n\t\t\t\t\tif (!o[this.name].push) {\r\n\t\t\t\t\t\to[this.name] = [o[this.name]];\r\n\t\t\t\t\t}\r\n\t\t\t\t\to[this.name].push(this.value || '');\r\n\t\t\t\t} else {\r\n\t\t\t\t\to[this.name] = this.value || '';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn o;\r\n\t\t};\r\n\t},\r\n\r\n\tprepare: function(action, code) {\r\n\t\tif(['applyCouponUrl', 'clearCouponUrl'].indexOf(action) == -1) return false;\r\n\r\n\t\tvar formData = $('#aspnetForm').serializeObject();\r\n\r\n\t\tformData = Object.assign(formData, {\r\n\t\t\tctl00$HeaderBar$ScriptManager  : (action == 'applyCouponUrl') ? 'ctl00$maincontent$upCart|ctl00$maincontent$btnApply' : 'ctl00$maincontent$upCart|ctl00$maincontent$btnClearCoupon',\r\n\t\t\tctl00$maincontent$txtCouponCode: code,\r\n\t\t\t__EVENTTARGET                  : (action == 'applyCouponUrl') ? 'ctl00$maincontent$btnApply' : 'ctl00$maincontent$btnClearCoupon'\r\n\t\t});\r\n\r\n\t\treturn formData;\r\n\t},\r\n\r\n\tparse: function(response, status, $xhr, code) {\r\n\r\n\t\tvar $response = $.parseHTML(response);\r\n\t\tvar couponLabel = $('#ctl00_maincontent_pnlPromoContainer #ctl00_maincontent_couponLabel', $response).text();\r\n\r\n\t\tif(couponLabel.toLowerCase().indexOf('coupon code ' + code.toLowerCase() + ' has been applied') == -1) {\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: false,\r\n\t\t\t\tsavings: 0.00\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar basketContainer = $('.basket-total-container', $response),\r\n\t\t\tsavings = 0.00;\r\n\t\t$('tr', basketContainer).each(function(idx, ele) {\r\n\r\n\t\t\tif($('td:eq(0)', ele).text().toLowerCase() == 'you saved') {\r\n\t\t\t\tsavings = parseFloat($('td:eq(1)', ele).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: true,\r\n\t\t\tsavings: savings\r\n\t\t};\r\n\t},\r\n\t\r\n\tcomplete: function(bestCode) {\r\n\t\tif(bestCode) location.reload();\r\n\t}\r\n};",
	"english-heritageshop": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total:contains(\"- \u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#disccode').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#disccode').trigger('input').trigger('change');\r\n      $('#submit_promo')[0].click();\r\n    }\r\n  }\r\n};",
	"enjoyflowers": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.rendered_item);\r\n        var savings = parseFloat($('.price_column.currency.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var currentHTML;\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.enjoyflowers.com\/checkout',\r\n            success: function (result) {\r\n                currentHTML = $.parseHTML(result);\r\n            },\r\n            async: false\r\n        });\r\n\r\n        $.ajax({\r\n            url: $('.rem_coupon_form', currentHTML).attr('action'),\r\n            method: 'POST',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#id_coupon_code').val(bestCode);\r\n            $('#add_coupon_code').click();\r\n        }\r\n    }\r\n};",
	"entertainment": "var ExternalProvider = {\r\n    _cartTotal: 0,\r\n\r\n    init: function () {\r\n        this._cartTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n    \r\n    parse: function(response, status, $xhr, code, some){\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var savings = this._cartTotal - newTotal;\r\n\r\n        if(savings){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        location.reload(true);\r\n    },\r\n    \r\n    whenReady: function(step, next)\r\n    {\r\n        if (step == 'removeInjectedCoupon') {\r\n            setTimeout(function() {\r\n                next();\r\n            }, 300);\r\n            return;\r\n        }\r\n\r\n        if (step == 'injectCoupon') {\r\n            var isError = $('#checkout_reduction_code').closest('.field').hasClass('field--error');\r\n            var cartTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|\\.]\/g, ''));\r\n            var S = setInterval(function() {\r\n                if ($('#checkout_reduction_code').closest('.field').hasClass('field--error') != isError \r\n                        || cartTotal != parseFloat($('.payment-due__price').text().replace(\/[^0-9|\\.]\/g, ''))) {\r\n                    next();\r\n                    clearInterval(S);\r\n                }\r\n            }, 100);\r\n        }\r\n    }\r\n};",
	"entertainmentearth": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#discount', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"entirelypets": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n\r\n      this.dispatchEvent($('#promoGift'), 'focus');\r\n      $('#promoGift').val(code);\r\n      this.dispatchEvent($('#promoGift'), 'blur');\r\n      $('input[name=\"eventName.updateGiftCertDataEvent\"]')[0].click();\r\n    }\r\n  },\r\n  dispatchEvent: function (element, event) {\r\n    var evt = document.createEvent('HTMLEvents');\r\n\r\n    evt.initEvent(event, true, true);\r\n    element.get(0).dispatchEvent(evt);\r\n\r\n    return this;\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 700);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('span:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      this.dispatchEvent($('#promoGift'), 'focus');\r\n      $('#promoGift').val(bestCode);\r\n      this.dispatchEvent($('#promoGift'), 'blur');\r\n      $('input[name=\"eventName.updateGiftCertDataEvent\"]').click();\r\n    }\r\n  }\r\n};",
	"entirelypetspharmacy": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'injectCoupon') {\r\n            $('#promoGift').val(code);\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n            $('#promoGift').get(0).dispatchEvent(changeEvent);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n            $('input[value=\"Apply\"]').get(0).dispatchEvent(clickEvent);\r\n\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 400);\r\n    },\r\n    parse: function (response) {\r\n        var savings = $('#orderSummaryPanel div:nth-child(3) > div.col-md-4.col-sm-4.col-xs-4.text-right > span').text().replace(\/[^0-9|.]\/g, '');\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promoGift').val(bestCode);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#promoGift').trigger('input').trigger('change');\r\n            $('.btn.btn-primary').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"enzojeans": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('.dropdown-toggles').text();\r\n\r\n        if (selector.match(\"Europe\") || selector.match(\"Germany\")) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\" || selector.match(\"GBP\")) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (selector === \"\u20ac\" || selector.match(\"France\")) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['FR'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('#coupon_code').val(bestCode);\r\n                $('button[value=\"Apply Coupon\"]').click();\r\n            } else {\r\n                $('#couponcode').val(bestCode);\r\n                $('button:contains(\"Apply Coupon\")').click();\r\n            }\r\n        }\r\n    }\r\n};",
	"eplanters": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = $('.price:contains(\"-\")', responseHTML).first().text().replace(\/[^0-9|.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      jQuery('#discount-coupon-form h2').click();\r\n      jQuery('#coupon_code').val(bestCode);\r\n      jQuery('.buttons-set button:eq(2)').click();\r\n    }\r\n  }\r\n};",
	"epson": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.totals span').text().replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.totals span', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        var savings = parseFloat(oldTotal - newTotal);\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"equiderma": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"equipmentfr": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.summary-block-row .summary-block-row-value:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"ericdress": "var setCookie = function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {\r\n  if (!sKey || \/^(?:expires|max\\-age|path|domain|secure)$\/i.test(sKey)) {\r\n    return false;\r\n  }\r\n\r\n  var sExpires = '';\r\n\r\n  if (vEnd) {\r\n    switch (vEnd.constructor) {\r\n    case Number:\r\n      sExpires = vEnd === Infinity ? '; expires=Fri, 31 Dec 9999 23:59:59 GMT' : '; max-age=' + vEnd;\r\n      break;\r\n    case String:\r\n      sExpires = '; expires=' + vEnd;\r\n      break;\r\n    case Date:\r\n      sExpires = '; expires=' + vEnd.toUTCString();\r\n      break;\r\n    }\r\n  }\r\n\r\n  document.cookie = encodeURIComponent(sKey) + '=' + encodeURIComponent(sValue) + sExpires + (sDomain ? '; domain=' + sDomain : '') + (sPath ? '; path=' + sPath : '') + (bSecure ? '; secure' : '');\r\n\r\n  return true;\r\n};\r\n\r\nfunction retrieveWindowVariable(variable) {\r\n  var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { $('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + ')); }\\n';\r\n  var script = document.createElement('script');\r\n\r\n  script.id = 'tmpScript';\r\n  script.appendChild(document.createTextNode(scriptContent));\r\n  (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n  var value = $('body').attr('tmp_' + variable);\r\n\r\n  $('body').removeAttr('tmp_' + variable);\r\n\r\n  return value;\r\n}\r\n\r\nvar ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'applyCouponUrl') {\r\n      var cultureId = retrieveWindowVariable('window.Culture.id');\r\n      var cultureName = retrieveWindowVariable('window.Culture.name');\r\n\r\n      var data = {\r\n        cultureId: cultureId,\r\n        cultureName: cultureName\r\n      };\r\n\r\n      setCookie('EricDressCouponCode', code.toLowerCase(), Infinity, '\/', 'ericdress.com');\r\n\r\n      return data;\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var savings = response.Data.ActiveResultModel.CouponReductionMoney;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && location.pathname !== '\/guestAddress.html') {\r\n      $('#textCouponCode').val(bestCode);\r\n      $('#buttonUseCoupon').click();\r\n    } else if (bestCode) {\r\n      $('#textCoupon').val(bestCode);\r\n      $('#btnCoupon').click();\r\n    }\r\n  }\r\n};",
	"ernestjones": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.product-summary__save-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ernolaszlo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.cart_html);\r\n        var savings = parseFloat($('.price:contains(\"-\") ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"erwinmullerde": "var ExternalProvider = {\r\n    prepare: function (type, code){\r\n        if (type === \"applyCouponUrl\"){\r\n            return { \r\n                timestamp: Date.now(),\r\n                aktion: 'addGutschein',\r\n                ajax: true,\r\n                status: 'save',\r\n                'artikel[gutschein_code]': code,\r\n                'zusatzinfo[0][name]': 'gMonoFeld1.0',\r\n                'zusatzinfo[0][value]': '',\r\n                'zusatzinfo[1][name]': 'gMonoFeld2.0',\r\n                'zusatzinfo[1][value]': '',\r\n                'zusatzinfo[2][name]': 'gMonoFeld3.0',\r\n                'zusatzinfo[2][value]': '',\r\n                'zusatzinfo[3][name]': 'gMonoFeld4.0',\r\n                'zusatzinfo[3][value]': '' \r\n            };\r\n        } else if (type === \"clearCouponUrl\") {\r\n            return {\r\n                aktion: 'delProduct',\r\n                'artikel[wk_pos]': '0',\r\n                'artikel[wk_art]': '1',\r\n                'artikel[wk_typ]': 'GU',\r\n                'artikel[nr]': '0'\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat($('.abzglgutschein_wk', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n            $('#gutscheinCode').val(bestCode);\r\n            $('.button_blue.b-einloesen').get(0).dispatchEvent(clickEvent);\r\n            setTimeout(function () {\r\n                if($('#hinweisMeldung[style=\"display: block;\"]')) {\r\n                    $('#hinweisMeldung a:eq(2)').get(0).click();\r\n                }\r\n            },2000);\r\n        }\r\n    }\r\n};",
	"espritde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.fltVoucherReduction);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"espritfr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.fltVoucherReduction;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"essayedge": "'use strict';\r\n\r\nvar ExternalProvider = {\r\n    SAVINGS_REGEX: \/-\\$[\\d.]+\/,\r\n\r\n    init: function() {\r\n        $('#show-coupon-code').click();\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        if(response.orderSummary){\r\n            var cartInfo = response.orderSummary;\r\n            \/\/actual savings are prefixed with '-$' with bunch of other numbers\r\n            var savingsInfo = cartInfo.match(this.SAVINGS_REGEX).toString();\r\n            var savings = savingsInfo.replace(\/-\\$\/, \"\");\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"essentialapparel": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart_coupon_row > div:last-child', responseHTML).text().replace(\/[$-]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('input[name=\"coupon\"]').val(bestCode);\r\n            $('.cart_coupon_row form').submit();\r\n        }\r\n    }\r\n};",
	"esteelauder": "var ExternalProvider = {\r\n    prepare: function (requestType, code) {\r\n        var formData = {};\r\n\r\n        if (requestType === 'applyCouponUrl') {\r\n\r\n            formData = Object.assign(formData, {\r\n                JSONRPC: '[{\"method\":\"logic.checkout--viewcart\",\"id\":1,\"params\":[{\"_SUBMIT\":\"offer_code\",\"OFFER_CODE\":\"' + code + '\"}]}]'\r\n            });\r\n\r\n            return formData;\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response[0].result.value.transaction.trans.formatted.TOTAL_ITEMS_DISCOUNT.replace(\/[^0-9|\\.]\/g, '');\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestSavings, bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"esteelauderuk": "var ExternalProvider = {\r\n    prepare: function (requestType, code) {\r\n        var formData = {};\r\n\r\n        if (requestType === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                JSONRPC: '[{\"method\":\"logic.checkout--viewcart\",\"id\":2,\"params\":[{\"_SUBMIT\":\"offer_code\",\"OFFER_CODE\":\"' + code + '\"}]}]'\r\n            });\r\n\r\n            return formData;\r\n        }\r\n\r\n        return formData;\r\n    },\r\n\r\n    parse: function (response) {\r\n        var savings = parseFloat(response[0].result.value.transaction.formattedItemsDiscount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#form--offer_code--field--OFFER_CODE').val(bestCode);\r\n            $('input[data-test-id=\"form_offer_code_apply\"]').click();\r\n        }\r\n    }\r\n};",
	"etam": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price-discount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#dwfrm_cart_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n    }\r\n  }\r\n};",
	"eternade": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.text-right:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#basket_add_voucher').val(bestCode);\r\n            $('.cart-summarybox div.cart-footer-left.mbm > div > div > div > form > div > span > button').click();\r\n        }\r\n    }\r\n};",
	"ethelm": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl;\r\n\r\n    if (this.isCheckoutPage()) {\r\n      var str = jQuery('#returnUrl').val();\r\n      var index = str.lastIndexOf('\/');\r\n      var result = str.substring(index + 1);\r\n\r\n      applyUrl = 'https:\/\/www.ethelm.com\/api\/commerce\/orders\/' + result;\r\n    } else {\r\n      applyUrl = 'https:\/\/www.ethelm.com\/api\/commerce\/carts\/' + $(\"input[name='id']\").val();\r\n    }\r\n\r\n    applyUrl += '\/coupons\/CLAIMCODE';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.orderDiscounts[0].impact);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCheckoutPage: function () {\r\n    return \/checkout\/.test(location.href);\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"etojeans": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($(('.price:contains(-)'), responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"etsy": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.regions.multi_shop_cart_payment.regions.costs.regions.discount.regions.display_discount_money.data['currency-value']);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"etundra": "var ExternalProvider = {\r\n    prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var resultUrl = this.isCartPage() ? 'https:\/\/www.etundra.com\/cart\/cartsummary\/' : 'https:\/\/www.etundra.com\/checkout\/ordersummary\/';\r\n        var applyUrl = this.isCartPage() ? 'https:\/\/www.etundra.com\/cart\/coupon\/' : 'https:\/\/www.etundra.com\/checkout\/couponedit\/';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        resultUrlInput.attr('value', resultUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl' && this.isCartPage()) {\r\n            data = {\r\n                'couponCode': code\r\n            };\r\n\r\n            return JSON.stringify(data);\r\n        } else if (type === 'applyCouponUrl' && !this.isCartPage()) {\r\n            data = {\r\n                'code': code\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0;\r\n\r\n        if (this.isCartPage()) {\r\n            savings = parseFloat($('.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        } else {\r\n            var data = {\r\n                'code': code\r\n            };\r\n\r\n            $.ajax({\r\n                url: 'https:\/\/www.etundra.com\/checkout\/couponedit\/',\r\n                type: 'POST',\r\n                data: data,\r\n                async: false\r\n            });\r\n            $.ajax({\r\n                url: 'https:\/\/www.etundra.com\/checkout\/ordersummary\/',\r\n                type: 'GET',\r\n                success: function (result) {\r\n                    savings = parseFloat($('.checkout-discount-text', $.parseHTML(result)).text().replace(\/[^0-9|.]\/g, ''));\r\n                },\r\n                async: false\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('input[name=\"couponcode\"]').val(bestCode);\r\n                $('button:contains(\"Apply\")').click();\r\n            } else {\r\n                var clickEvent = new MouseEvent('click', {\r\n                    view: window,\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n\r\n                $('#js-appcheckout-stepcoupon > div.panel-heading > span.pull-right > a').get(0).dispatchEvent(clickEvent);\r\n                setTimeout(function () {\r\n                    $('#checkout-coupon-code').val(bestCode);\r\n                    $('#coupon-apply-btn').click();\r\n                }, 2000);\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider.prepareUrl();",
	"eurocarparts": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.jsonCartData.discountAmount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"eurofloristde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(',','.').replace(\/[^.0-9]\/g,''));\r\n\r\n        return {\r\n            success: savings > 0.00,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"europa-apotheek": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#entryPrice-kmly1hhvb21', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"eurostylelighting": "var ExternalProvider = {\r\n\r\n    init: function() {\r\n\r\n        $.fn.serializeObject = function()\r\n        {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function() {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n\r\n    prepare: function(action, code) {\r\n        if(['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n        var formData = $('#form1').serializeObject();\r\n\r\n        if(action === 'applyCouponUrl') {\r\n\r\n            formData = Object.assign(formData, {\r\n                'ctl00$MainContent$txtPromo'      : code,\r\n                'ctl00$MainContent$btnPromoCode.x': 13,\r\n                'ctl00$MainContent$btnPromoCode.y': 16\r\n            });\r\n        } else {\r\n\r\n            formData = Object.assign(formData, {\r\n                __EVENTTARGET               : 'ctl00$MainContent$btnRemovePromoCode',\r\n                'ctl00$MainContent$txtPromo': ''\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var $response = $.parseHTML(response),\r\n            codeApplied = $('#MainContent_lblPromoCode', $response),\r\n            cartTable = $('.cartPriceTable tr', $response),\r\n            codeFound = codeApplied.text().toLowerCase() === code.toLowerCase(), savings = 0.00, $item;\r\n\r\n        if(codeFound) {\r\n\r\n            cartTable.each(function() {\r\n\r\n                $item = $(this);\r\n                if($('td:first-child', $item).text().indexOf('Promotional Discount') !== -1) {\r\n                    savings = parseFloat($('td:last-child', $item).text().replace(\/[^0-9|\\.]\/g, ''));\r\n                }\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload(true);\r\n    }\r\n};",
	"eurostylelighting.mobile": "var ExternalProvider = {\r\n\r\n    init: function() {\r\n\r\n        $.fn.serializeObject = function()\r\n        {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function() {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n\r\n    prepare: function(action, code) {\r\n        if(['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n        var formData = $('#form1').serializeObject();\r\n\r\n        if(action === 'applyCouponUrl') {\r\n\r\n            formData = Object.assign(formData, {\r\n                __EVENTTARGET               : 'ctl00$MainContent$btnPromoCode',\r\n                'ctl00$MainContent$txtPromo': code\r\n            });\r\n        } else {\r\n\r\n            formData = Object.assign(formData, {\r\n                __EVENTTARGET               : 'ctl00$MainContent$btnRemovePromoCode',\r\n                'ctl00$MainContent$txtPromo': ''\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var $response = $.parseHTML(response),\r\n            codeApplied = $('#MainContent_lblPromoCode', $response),\r\n            cartTable = $('.cartPriceTable tr', $response),\r\n            codeFound = codeApplied.text().toLowerCase() === code.toLowerCase(), savings = 0.00, $item;\r\n\r\n        if(codeFound) {\r\n\r\n            cartTable.each(function() {\r\n\r\n                $item = $(this);\r\n                if($('td:first-child', $item).text().indexOf('Discount') !== -1) {\r\n                    savings = parseFloat($('td:last-child', $item).text().replace(\/[^0-9|\\.]\/g, ''));\r\n                }\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload(true);\r\n    }\r\n};",
	"eurotops": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('li~li .basket-summary--price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('li~li .basket-summary--price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $(\"input[name='mediacode']\").val(bestCode);\r\n            $('.checkout-voucher__btn').click();\r\n        }\r\n    }\r\n};",
	"evanmoor": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0;\r\n\r\n        for (var x = 0; x < response.Products.length; x++) {\r\n            savings += response.Products[x].DiscountValue;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#couponCode').val(bestCode);\r\n\r\n            var buttonSelector = location.href.includes('checkout') ? 'a' : 'button';\r\n\r\n            var s = document.createElement('script');\r\n\r\n            s.type = 'text\/javascript';\r\n\r\n            var code = \"$('#couponCode').trigger('change');$(\\\"\" + buttonSelector + \":contains('Apply')\\\").click();\";\r\n\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n};",
	"evans": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    var data = {\r\n      promotionId: code,\r\n      responseType: 'basket'\r\n    };\r\n\r\n    return JSON.stringify(data);\r\n  },\r\n  parse: function (response) {\r\n    var savings = (response.discounts[0].value);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"evanscycles": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var selector = $('#angular-app').attr('data-currency-iso-code');\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n\r\n        if (selector === 'GBP') {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector === 'EUR') {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: 2 });\r\n    },\r\n    prepare: function (action, code) {\r\n        var data = {};\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            data = {\r\n                voucherRequest: code,\r\n                CSRFToken: $(\"input[name='CSRFToken']\").val()\r\n            };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var parseResponse = response.cart.appliedProductPromotions['0'].totalDiscount;\r\n        var savings = parseFloat(parseResponse);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"evelom": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#dwfrm_cart_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n    }\r\n  }\r\n};",
	"eventdecordirect": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('td:contains(\"-$\")', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            $('#coupon').val(bestCode);\r\n            $('#applycoupon').click();\r\n            $('#coupon').val('');\r\n        }\r\n    }\r\n};",
	"everlywell": "var ExternalProvider = {\r\n  init: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"auth\",\"Bearer \"+ window.data.auth_token);';\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var value = $('body').attr('auth');\r\n\r\n    this.userId = value;\r\n    $('body').removeAttr(name);\r\n  },\r\n  parse: function (response) {\r\n    var data = JSON.parse(response);\r\n    var savings = parseFloat(data.promo_total.replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"evermine": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = response.DISCOUNT;\r\n        var savings = parseFloat(responseHTML);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.paymodify')[0].click();\r\n            $('#COUPON').val(bestCode);\r\n            $('#APPLYCOUPON').click();\r\n        }\r\n    }\r\n};",
	"everprettygarmentinc": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"everyonedoesit": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response.responseText);\r\n        var savings = parseFloat($('.total-line.total-line--reduction .total-line__price', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function () {\r\n            location.reload();\r\n    }\r\n};",
	"everyonedoesit.mobile": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $piggyJq.parseHTML(response.responseText);\r\n        var savings = parseFloat($piggyJq('.total-line.total-line--reduction .total-line__price', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function () {\r\n            location.reload();\r\n    }\r\n};",
	"everything-led": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('strong:contains(\"\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.offerInput').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('.offerInput').trigger('input').trigger('change');\r\n            $('.applyButton')[0].click();\r\n        }\r\n    }\r\n};",
	"everything5pounds": "var ExternalProvider = {\r\n    CSRFToken: '',\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"CSRFToken\", window.ACC.config.CSRFToken);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('CSRFToken');\r\n\r\n        this.CSRFToken = value;\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl' || type === 'clearCouponUrl') {\r\n            data = {\r\n                CSRFToken: this.CSRFToken,\r\n                voucher: code\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n\r\n    parse: function (response) {\r\n        var savings = parseFloat(response[0].value);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"evisu": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n        var selector = $('#custom-currency-selector option[selected=\"selected\"]').text().trim();\r\n\r\n        if (selector === 'EUR') {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === 'GBP') {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else {\r\n            locale = localeMapping['US'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"exantediet": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigitsParam) {\r\n        var newCurrency = currency;\r\n        var locale = localeMapping.US;\r\n        var selector = $('.js-sessionSettingsButton').text();\r\n\r\n        if (selector.match('DE')) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.DE;\r\n        } else if (selector.match('GB')) {\r\n            newCurrency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        } else if (selector.match('FR')) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.FR;\r\n        }\r\n\r\n        var currencyObj = { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigitsParam };\r\n\r\n        return amount.toLocaleString(locale, currencyObj);\r\n    }\r\n};",
	"expedia": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                __RequestVerificationToken: $('input[name=\"__RequestVerificationToken\"]').val(),\r\n                LockedOut: $('input[name=\"LockedOut\"]').val(),\r\n                Submitted: $('input[name=\"Submitted\"]').val(),\r\n                PromoCode: code\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.responseText);\r\n        var savings = $('.promo-code-description-mobile', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"expediade": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.couponModel.couponDiscount.amount.replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"expediafr": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data.couponCode = code;\r\n      data.tripid = $('body').attr('data-tripid');\r\n      data.tlCouponAttach = 1;\r\n      data.tlCouponCode = code;\r\n      data.productType = $('body').attr('data-producttype');\r\n      data.binPrefix = null;\r\n    } else if (type === 'clearCouponUrl') {\r\n      data.tripid = $('body').attr('data-tripid');\r\n      data.tlCouponRemove = 1;\r\n      data.tlCouponCode = code;\r\n      data.productType = $('body').attr('data-producttype');\r\n      data.binPrefix = null;\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.couponModel.couponDiscount.value.replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"expediauk": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data.couponCode = code;\r\n            data.tripid = $('body').attr('data-tripid');\r\n            data.tlCouponAttach = 1;\r\n            data.tlCouponCode = code;\r\n            data.oldTripTotal = $('.old-trip-total').val();\r\n            data.oldTripGrandTotal = $('.old-trip-grand').val();\r\n            data.productType = 'window.google_tag_params.producttype';\r\n            data.binPrefix = null;\r\n        } else if (type === 'clearCouponUrl') {\r\n            data.tripid = $('body').attr('data-tripid');\r\n            data.tlCouponRemove = 1;\r\n            data.tlCouponCode = code;\r\n            data.productType = 'window.google_tag_params.producttype';\r\n            data.oldTripTotal = $('.old-trip-total').val();\r\n            data.oldTripGrandTotal = $('.old-trip-grand').val();\r\n            data.binPrefix = null;\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.couponModel.couponDiscount.value.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#couponId').val(bestCode);\r\n            $('#apply_coupon_button').click();\r\n        }\r\n    }\r\n};",
	"xcaretexperiencias": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      data = {\r\n        callback: $('#script').attr('action').split('=')[1].split('&')[0],\r\n        dsCoupon: code,\r\n        mobile: false\r\n      };\r\n\r\n      return JSON.stringify(data);\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    savings = parseFloat(response.d.match(\/\\\"coupon\\\":\\\"\\$ ([0-9|.]+)\\.\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"exploretrip": "var ExternalProvider = {\r\n  data: {},\r\n  _prepareUrl: function () {\r\n    var applyUrl = localStorage.getItem('AccessToken_et');\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var selectedItinerary = localStorage.getItem('SELECTED_ITINERARY');\r\n    var etSearchRequest = localStorage.getItem('ET_SEARCH_REQUEST');\r\n    var etUserInfo = localStorage.getItem('ET_USER_INFO');\r\n\r\n    var itinerary = $.parseJSON(selectedItinerary);\r\n    var searchRequest = $.parseJSON(etSearchRequest);\r\n    var userInfo = $.parseJSON(etUserInfo);\r\n\r\n    this.data = {\r\n      Airline: itinerary.ValidatingCarrierCode,\r\n      Code: code,\r\n      Origin: searchRequest.OriginDestination[0].DepartureLocationCode,\r\n      CorporateAccountId: userInfo.corporateAccountId,\r\n      Destination: searchRequest.OriginDestination[0].ArrivalLocationCode,\r\n      IsLowestFareExist: itinerary.IsLowestFareExist,\r\n      ItinGuid: itinerary.ItineraryId,\r\n      MsFare: localStorage.getItem('MSFARE_et'),\r\n      TotalAmount: $('#totalAmount').text().substring(1),\r\n      TpUserId: userInfo.userId\r\n    };\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      return JSON.stringify(this.data);\r\n    }\r\n\r\n    return true;\r\n  },\r\n\r\n  parse: function (response) {\r\n    var responseJson = $.parseJSON(response);\r\n    var savings = responseJson.Savings;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCodeId').val(bestCode);\r\n      $('#promoCodeApplyId').click();\r\n    }\r\n  }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"express": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        $('body').attr('cacheKey', localStorage.expCustId + localStorage.expCustId);\r\n        $('body').attr('requestId', localStorage.cto_lwid);\r\n    },\r\n    prepare: function (action, code) {\r\n        if (action === 'applyCouponUrl') {\r\n            return JSON.stringify({\r\n                operationName: 'addPromoCode',\r\n                variables: {\r\n                    code: code\r\n                },\r\n                query: 'mutation addPromoCode($code: String!) {\\n  addPromoCode(code: $code) {\\n    errors {\\n      code\\n      message\\n      additionalDetails {\\n        productName\\n        color\\n        size\\n        availableQuantity\\n        giftCardPresent\\n        __typename\\n      }\\n      __typename\\n    }\\n    orderId\\n    status\\n    bopisEligibleStatus\\n    contactInfo {\\n      email\\n      phone\\n      firstName\\n      lastName\\n      __typename\\n    }\\n    billingAddress {\\n      addressId\\n      firstName\\n      lastName\\n      title\\n      line1\\n      line2\\n      line3\\n      city\\n      state\\n      country\\n      postalCode\\n      preferredAddress\\n      __typename\\n    }\\n    lineItems {\\n      lineId\\n      giftWrapSelected\\n      internationalShippingAvailable\\n      internationalShippingDisclaimer\\n      itemPromotionDiscount {\\n        displayAmount\\n        specialDiscountMessage\\n        __typename\\n      }\\n      itemPromotions {\\n        name\\n        __typename\\n      }\\n      price {\\n        displayAmount\\n        amount\\n        __typename\\n      }\\n      product {\\n        listPrice\\n        name\\n        productId\\n        productImage\\n        productURL\\n        promoMessage\\n        salePrice\\n        sku {\\n          backOrderable\\n          backOrderDate\\n          skuId\\n          sizeName\\n          sizeCode\\n          colorCode\\n          colorName\\n          colorFamilyName\\n          displayPrice\\n          displayMSRP\\n          giftBox\\n          sizeExtension1\\n          sizeExtension2\\n          originalPrice\\n          currentPrice\\n          displayMSRP\\n          displayPrice\\n          bopisEligible\\n          __typename\\n        }\\n        __typename\\n      }\\n      quantity\\n      __typename\\n    }\\n    promotions {\\n      code\\n      promotionDiscount {\\n        displayAmount\\n        specialDiscountMessage\\n        __typename\\n      }\\n      __typename\\n    }\\n    rewards {\\n      rewardId\\n      displayAmount\\n      expirationDate\\n      __typename\\n    }\\n    shippingDestinations {\\n      shippingAddress {\\n        addressId\\n        firstName\\n        lastName\\n        title\\n        line1\\n        line2\\n        line3\\n        city\\n        state\\n        country\\n        postalCode\\n        preferredAddress\\n        __typename\\n      }\\n      shippingMethod {\\n        name\\n        estimatedDelivery\\n        estimatedDeliveryMessage\\n        __typename\\n      }\\n      __typename\\n    }\\n    orderHasGiftCard\\n    giftCards {\\n      cards\\n      eCards\\n      total\\n      __typename\\n    }\\n    payments {\\n      paymentType\\n      paymentgroupID\\n      attributes {\\n        GIFT_CARD_NUMBER\\n        APPLIED_AMOUNT\\n        BALANCE_AMOUNT\\n        CREDIT_CARD_NUMBER\\n        CREDIT_CARD_TENDER_TYPE\\n        __typename\\n      }\\n      __typename\\n    }\\n    customerStoreInfo {\\n      orderStore {\\n        storeId\\n        storeNumber\\n        name\\n        addressLine1\\n        city\\n        state\\n        postalCode\\n        country\\n        phoneNumber\\n        hoursOfOperation\\n        weeklyHoursOfOperation {\\n          monday\\n          tuesday\\n          wednesday\\n          thursday\\n          friday\\n          saturday\\n          sunday\\n          __typename\\n        }\\n        bopisEligible\\n        bopisMessage\\n        distance\\n        skus {\\n          sku\\n          quantity\\n          availabilityMessage\\n          bopisMessage\\n          atgInventoryQuantity\\n          backOrderable\\n          __typename\\n        }\\n        __typename\\n      }\\n      preferredStore {\\n        bopisEligible\\n        __typename\\n      }\\n      __typename\\n    }\\n    priceDetails {\\n      giftCardTotal {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      orderPromotionTotal {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      orderTransactionalSavings {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      enccPromotionTotal {\\n        amount\\n        displayAmount\\n        specialDiscountMessage\\n        __typename\\n      }\\n      processingFee {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      salesTaxes {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      shippingPrice {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      subTotalAmount {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      totalAmount {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      giftWrapAmount {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      paymentDueAmount {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      __typename\\n    }\\n    deliveryType\\n    pickupOrderInformation {\\n      firstName\\n      lastName\\n      email\\n      phone\\n      otherPersonPickup\\n      sendEmailNotifications\\n      sendSmsNotifications\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n'\r\n            });\r\n        }\r\n\r\n        return JSON.stringify({\r\n            operationName: 'removePromoCode',\r\n            variables: {\r\n                code: code\r\n            },\r\n            query: 'mutation removePromoCode($code: String!) {\\n  removePromoCode(code: $code) {\\n    errors {\\n      code\\n      message\\n      additionalDetails {\\n        productName\\n        color\\n        size\\n        availableQuantity\\n        giftCardPresent\\n        __typename\\n      }\\n      __typename\\n    }\\n    orderId\\n    status\\n    bopisEligibleStatus\\n    contactInfo {\\n      email\\n      phone\\n      firstName\\n      lastName\\n      __typename\\n    }\\n    billingAddress {\\n      addressId\\n      firstName\\n      lastName\\n      title\\n      line1\\n      line2\\n      line3\\n      city\\n      state\\n      country\\n      postalCode\\n      preferredAddress\\n      __typename\\n    }\\n    lineItems {\\n      lineId\\n      giftWrapSelected\\n      internationalShippingAvailable\\n      internationalShippingDisclaimer\\n      itemPromotionDiscount {\\n        displayAmount\\n        specialDiscountMessage\\n        __typename\\n      }\\n      itemPromotions {\\n        name\\n        __typename\\n      }\\n      price {\\n        displayAmount\\n        amount\\n        __typename\\n      }\\n      product {\\n        listPrice\\n        name\\n        productId\\n        productImage\\n        productURL\\n        promoMessage\\n        salePrice\\n        sku {\\n          backOrderable\\n          backOrderDate\\n          skuId\\n          sizeName\\n          sizeCode\\n          colorCode\\n          colorName\\n          colorFamilyName\\n          displayPrice\\n          displayMSRP\\n          giftBox\\n          sizeExtension1\\n          sizeExtension2\\n          originalPrice\\n          currentPrice\\n          displayMSRP\\n          displayPrice\\n          bopisEligible\\n          __typename\\n        }\\n        __typename\\n      }\\n      quantity\\n      __typename\\n    }\\n    promotions {\\n      code\\n      promotionDiscount {\\n        displayAmount\\n        specialDiscountMessage\\n        __typename\\n      }\\n      __typename\\n    }\\n    rewards {\\n      rewardId\\n      displayAmount\\n      expirationDate\\n      __typename\\n    }\\n    shippingDestinations {\\n      shippingAddress {\\n        addressId\\n        firstName\\n        lastName\\n        title\\n        line1\\n        line2\\n        line3\\n        city\\n        state\\n        country\\n        postalCode\\n        preferredAddress\\n        __typename\\n      }\\n      shippingMethod {\\n        name\\n        estimatedDelivery\\n        estimatedDeliveryMessage\\n        __typename\\n      }\\n      __typename\\n    }\\n    orderHasGiftCard\\n    giftCards {\\n      cards\\n      eCards\\n      total\\n      __typename\\n    }\\n    payments {\\n      paymentType\\n      paymentgroupID\\n      attributes {\\n        GIFT_CARD_NUMBER\\n        APPLIED_AMOUNT\\n        BALANCE_AMOUNT\\n        CREDIT_CARD_NUMBER\\n        CREDIT_CARD_TENDER_TYPE\\n        __typename\\n      }\\n      __typename\\n    }\\n    customerStoreInfo {\\n      orderStore {\\n        storeId\\n        storeNumber\\n        name\\n        addressLine1\\n        city\\n        state\\n        postalCode\\n        country\\n        phoneNumber\\n        hoursOfOperation\\n        weeklyHoursOfOperation {\\n          monday\\n          tuesday\\n          wednesday\\n          thursday\\n          friday\\n          saturday\\n          sunday\\n          __typename\\n        }\\n        bopisEligible\\n        bopisMessage\\n        distance\\n        skus {\\n          sku\\n          quantity\\n          availabilityMessage\\n          bopisMessage\\n          atgInventoryQuantity\\n          backOrderable\\n          __typename\\n        }\\n        __typename\\n      }\\n      preferredStore {\\n        bopisEligible\\n        __typename\\n      }\\n      __typename\\n    }\\n    priceDetails {\\n      giftCardTotal {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      orderPromotionTotal {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      orderTransactionalSavings {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      enccPromotionTotal {\\n        amount\\n        displayAmount\\n        specialDiscountMessage\\n        __typename\\n      }\\n      processingFee {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      salesTaxes {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      shippingPrice {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      subTotalAmount {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      totalAmount {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      giftWrapAmount {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      paymentDueAmount {\\n        amount\\n        displayAmount\\n        __typename\\n      }\\n      __typename\\n    }\\n    deliveryType\\n    pickupOrderInformation {\\n      firstName\\n      lastName\\n      email\\n      phone\\n      otherPersonPickup\\n      sendEmailNotifications\\n      sendSmsNotifications\\n      __typename\\n    }\\n    __typename\\n  }\\n}\\n'\r\n        });\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.data.addPromoCode.promotions['0'].promotionDiscount.displayAmount.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"eyebuydirect": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.data.totalDetails);\r\n    var savings = parseFloat($('.prices:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"eyeconic": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-promotion.discount td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"eyedictive": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    $('body').removeAttr('securityId');\r\n\r\n    if (location.pathname === '\/checkout\/') {\r\n      scriptContent += 'body.setAttribute(\"securityId\", wc_checkout_params.apply_coupon_nonce);';\r\n    } else {\r\n      scriptContent += 'body.setAttribute(\"securityId\", wc_cart_params.apply_coupon_nonce);';\r\n    }\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-discount td', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"eyeglasses": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var $savings = $('.you-save', responseHTML);\r\n        if ($savings.length > 0) {\r\n            var savings = parseFloat($savings.text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            if (savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"eyekous": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var newCurrency = $('.broadwayHeader_sessionSettings .sessionSettings_button-active').text().split('-')[1].trim();\r\n\r\n    if (newCurrency === 'GBP') {\r\n      locale = localeMapping.GB;\r\n    } else if (newCurrency === 'EUR') {\r\n      locale = localeMapping.FR;\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.responsiveBasket_discountValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#discountcode').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#discountcode').trigger('input').trigger('change');\r\n      $('#add-discount-code')[0].click();\r\n    }\r\n  }\r\n};",
	"eyewearbrands": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('#disc_code').val(code);\r\n            $('#disc_btn').click();\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('.remove-disc').click();\r\n            $('#disc_code').val('');\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 500);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#discount_total_', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#disc_code').val(bestCode);\r\n            $('#disc_btn').click();\r\n        }\r\n    }\r\n};",
	"ezprints": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.toString().match('\"discount_amount\":\"(.+?)\",\"')[1]);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ezup": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match(\/\"discount_amount\":\"-[0-9|.]*\/).toString().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($('#discount-code').length) {\r\n                $('#discount-code').val(bestCode);\r\n\r\n                var changeEvent = new Event('change', {\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n\r\n                $('#discount-code').get(0).dispatchEvent(changeEvent);\r\n\r\n                var clickEvent = new MouseEvent('click', {\r\n                    view: window,\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n\r\n                $('button[value=\"Apply\"]').get(0).dispatchEvent(clickEvent);\r\n            } else {\r\n                $('#coupon_code').val(bestCode);\r\n                $('button[value=\"Apply\"]').click();\r\n            }\r\n        }\r\n    }\r\n};",
	"fabfitfun": "var ExternalProvider = {\r\n    checkPlan: function(){\r\n        return $('input[data-recurly=\"plan\"]')[0].value === 'fffvip';\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = this.checkPlan() ? response.discount_amount : response.discount_amount_annual;\r\n        if (response.success === 'true' && savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#coupontext').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#coupontext').trigger('input').trigger('change').trigger('blur');\r\n            $('#refreshcoupon').trigger('click').get(0).dispatchEvent(clickEvent);\r\n            document.getElementById('getstarted').scrollIntoView();\r\n        }\r\n    }\r\n};",
	"fabled": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('#voucher-input').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#voucher-input').trigger('input').trigger('change');\r\n            $('.UI.KIT-form__button button').click()\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('button[data-test=\"button-remove-item\"]').click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if ($('button[data-test=\"button-remove-item\"]').get(0) || counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 200);\r\n    },\r\n    parse: function () {\r\n        var savings = parseFloat($('label[for=\"voucher-input\"]').text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"fabric": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n\r\n      for (var i = 0; i < data.length; i++) {\r\n        object[data[i].name] = data[i].value;\r\n      }\r\n\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    var formData = {};\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      formData = $('form[name=\"Checkout\"]').serializeObject();\r\n\r\n      formData = Object.assign(formData, {\r\n        ctlCheckout$ctlCoupons$txtCouponCode: code,\r\n        __EVENTTARGET: 'ctlCheckout$ctlCoupons$btnApplyCoupon'\r\n      });\r\n    }\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('td:contains(\"-\") > span:contains(\"$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"factorydirectfilters": "var ExternalProvider = {\r\n  applyUrl: '',\r\n  prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    this.applyUrl = this.isCartPage() ? 'https:\/\/www.factorydirectfilters.com\/checkout\/cart\/couponPost\/' : 'https:\/\/www.factorydirectfilters.com\/firecheckout\/index\/saveCoupon\/';\r\n\r\n    if (!applyUrlInput.length) {\r\n      $('<input>').attr({\r\n        id: '___jpCouponUrl',\r\n        type: 'hidden',\r\n        value: this.applyUrl\r\n      }).appendTo('body');\r\n    }\r\n  },\r\n  prepare: function (type, code) {\r\n    return this.arrangeData(code);\r\n  },\r\n  arrangeData: function (code) {\r\n    var data = {\r\n      remove: 0,\r\n      coupon_code: code\r\n    };\r\n\r\n    if (!this.isCartPage()) {\r\n      data = {\r\n        'billing[address_id]': $('#billing:address_id').val(),\r\n        'coupon[code]:': code,\r\n        'coupon[remove]': 0,\r\n        'review': 1\r\n      };\r\n    }\r\n    \r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savings = 0;\r\n    var responseHTML = {};\r\n\r\n    if (this.isCartPage()) {\r\n      $.ajax({\r\n        url: 'https:\/\/www.factorydirectfilters.com\/checkout\/cart\/',\r\n        async: false,\r\n        success: function (result) {\r\n          responseHTML = $.parseHTML(result);\r\n        }\r\n      });\r\n    } else {\r\n      var couponDiscountString = JSON.parse(response).update_section.review;\r\n      responseHTML = $.parseHTML(couponDiscountString);\r\n    }\r\n    savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $.ajax({\r\n        url: this.applyUrl,\r\n        type: 'POST',\r\n        data: this.arrangeData(bestCode),\r\n        success: function () {\r\n          location.reload();\r\n        }\r\n      })\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return \/checkout\\\/cart\/.test(location.pathname);\r\n  }\r\n};\r\nExternalProvider.prepareUrl();",
	"fahertybrand": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"fairyseason": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.total.bonus);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#bonus_sn').val(bestCode);\r\n      $('#use_bouns').click();\r\n      $('#bonus_sn').val('');\r\n    }\r\n  }\r\n};",
	"faithgateway": "var ExternalProvider = {\r\n    cartTotal: 0,\r\n    init: function () {\r\n        this.cartTotal = parseFloat($('#shopping-cart-totals-table tfoot .price').text().replace('$', ''));\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = parseFloat($('#shopping-cart-totals-table tfoot .price', responseHTML).text().replace('$', ''));\r\n        var savings = this.cartTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#discount-coupon-form button').click();\r\n        }\r\n    }\r\n};",
	"fameandpartners": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.display_promotion_total.replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n}",
	"familychristian": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = jQuery.parseHTML(response),\r\n            codeFound = jQuery('#content > div > div > div.cart-actions > div.deals > div.discount > table > tbody > tr > td:nth-child(1)', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n                \r\n        if(codeFound) {\r\n\r\n            var savings = Number(jQuery('#shopping-cart-totals-table > tbody > tr.summary-details-amrules.summary-details > td:nth-child(2) > span' , responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            \r\n            if (savings > 0){\r\n                \r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n            }\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"famous-design": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#table2 td:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"codepromo\"]').val(bestCode);\r\n            $('.row.relative input[type=\"submit\"]').click();\r\n        }\r\n    }\r\n};",
	"famousfootwear": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('.order-summary-module > div > div:nth-child(2) > div.right.discount-text', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"famoussmoke": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"fanatics": "var ExternalProvider = {\r\n    isCartPage: function () {\r\n        return location.pathname === '\/cart';\r\n    },\r\n    prepare: function (action, code) {\r\n        var clickEvent = new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        });\r\n\r\n        if (action === 'injectCoupon') {\r\n            if (this.isCartPage()) {\r\n                $('#coupon-code-medium').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n                $('#coupon-code-medium').trigger('input').trigger('change');\r\n                $('#main-content-wrp > div > section > div > div > div:nth-child(2) > div.cart-right > div.checkout-container > div.coupon-giftcard-container.show-for-medium > div > div.description-box-content > div > form > div.coupon-entry-apply > button').get(0).dispatchEvent(clickEvent);\r\n            } else {\r\n                $('#couponCode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n                $('#couponCode').trigger('input').trigger('change');\r\n                $('#main-content-wrp > div > section > div > div > div.xo-container > div:nth-child(2) > div.xo-right-cnt.column.small-12.medium-5.large-4 > div > div > div:nth-child(1) > div.coupon-giftcard-container > div > div.description-box-content > div > form > div.coupon-entry-apply > button').get(0).dispatchEvent(clickEvent);\r\n            }\r\n        }\r\n\r\n        return null;\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 500);\r\n    },\r\n    parse: function () {\r\n        var savings = parseFloat($('span[data-talos=\"labelCouponDiscountAmount\"]').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('#coupon-code-medium').val(bestCode);\r\n                $('#main-content-wrp > div > section > div > div > div:nth-child(2) > div.cart-right > div.checkout-container > div.coupon-giftcard-container.show-for-medium > div > div.description-box-content > div > form > div.coupon-entry-apply > button').click();\r\n            } else {\r\n                $('#couponCode').val(bestCode);\r\n                $('#main-content-wrp > div > section > div > div > div.xo-container > div:nth-child(2) > div.xo-right-cnt.column.small-12.medium-5.large-4 > div > div > div:nth-child(1) > div.coupon-giftcard-container > div > div.description-box-content > div > form > div.coupon-entry-apply > button').click();\r\n            }\r\n        }\r\n    }\r\n};",
	"fanatics.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var currentTotal = parseFloat($('.estimatedTotalAmount').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat(response.CartData.OrderTotals.OrderTotal);\r\n        var savings = currentTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"fandango": "var ExternalProvider={\r\n    oldDiscount:0.0,\r\n    init: function(){\r\n        try{\r\n            var discountString = $('#discountTotal').text();\r\n            if(discountString)\r\n                this.oldDiscount = discountString.replace(\/[^0-9|\\.]\/g,'')\r\n        }\r\n        catch(err){\r\n            this.oldDiscount = 0;\r\n        }\r\n        if(this.oldDiscount == NaN)\r\n            this.oldDiscount = 0;\r\n        \r\n    },\r\n    prepare: function(requestType,code){\r\n        var data ={}\r\n        if(requestType=='applyCouponUrl'){\r\n            var email = $('#customerEmailTxtBox').val();\r\n            data['claimcode'] = code\r\n            data['email'] = email\r\n            data['op'] = 'promocode'\r\n            data['ordNo'] = Math.random()*10000000000000000000;\r\n\r\n            return data\r\n        }\r\n    },\r\n    parse:function(response,status,$xhr,code){\r\n       var jqObj = $.parseHTML(response.OrderDetailHtml)\r\n       var newDiscount = parseFloat($('#discountTotal',jqObj).text().replace(\/[^0-9|\\.]\/g,''))\r\n       var discount = newDiscount - this.oldDiscount\r\n       if(discount>0){\r\n           return{\r\n               success:true,\r\n               savings:discount\r\n           }\r\n       }\r\n       return{\r\n           success:false,\r\n           savings:0.0\r\n       }\r\n    },\r\n    complete:function(bestCode,bestSavings){\r\n        location.reload()\r\n    }\r\n\r\n}",
	"fandango.mobile": "var ExternalProvider={\r\n    oldDiscount:0.0,\r\n    init: function(){\r\n        try{\r\n            var discountString = $('#discountTotal').text();\r\n            if(discountString)\r\n                this.oldDiscount = discountString.replace(\/[^0-9|\\.]\/g,'')\r\n        }\r\n        catch(err){\r\n            this.oldDiscount = 0;\r\n        }\r\n        if(this.oldDiscount == NaN)\r\n            this.oldDiscount = 0;\r\n        \r\n    },\r\n    prepare: function(requestType,code){\r\n        var data ={}\r\n        if(requestType=='applyCouponUrl'){\r\n            var email = $('#Email').val();\r\n            data['PromoCode'] = code\r\n            data['PromoCodeEmail'] = email\r\n            data['X-Requested-With'] = 'XMLHttpRequest';\r\n\r\n            return data\r\n        }\r\n    },\r\n    parse:function(response,status,$xhr,code){\r\n       var jqObj = $.parseHTML(response.ReturnData.ReceiptHTML)\r\n       var newDiscount = parseFloat($('#discountTotal',jqObj).text().replace(\/[^0-9|\\.]\/g,''))\r\n       var discount = newDiscount - this.oldDiscount;\r\n       if(discount>0){\r\n           return{\r\n               success:true,\r\n               savings:discount\r\n           }\r\n       }\r\n       return{\r\n           success:false,\r\n           savings:0.0\r\n       }\r\n    },\r\n    complete:function(bestCode,bestSavings){\r\n        window.location.href = window.location.href.replace(\/#.*\/g,'')\r\n    }\r\n\r\n}",
	"fandangofanshop": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        if(response.totals){\r\n            var savings = Math.abs(response.totals.discount_amount);\r\n            if (savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n            }\r\n\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"fandangonow": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type !== 'applyCouponUrl') {\r\n            return null;\r\n        }\r\n        var utag_data = $('script:contains(\"utag_data\")').text();\r\n        utag_data = JSON.parse(utag_data.substring(utag_data.indexOf('=')+2, utag_data.indexOf('||')));\r\n        var mgoData = $('script:contains(\"window.mgo.data =\")').text();\r\n        mgoData = mgoData.substring(mgoData.indexOf('data =')+6);\r\n        mgoData = JSON.parse(mgoData.substring(0, mgoData.indexOf(';')));\r\n        var data = {\r\n            \"adjustments\": [{\"redeemCode\": code}],\r\n            \"contentName\": utag_data.contentName,\r\n            \"details\": mgoData.details,\r\n            \"offer\": mgoData.offer,\r\n            \"rewardPoints\": utag_data.rewardPoints,\r\n            \"_csrf\": $('input[name=\"_csrf\"]').val()\r\n        };\r\n        return JSON.stringify(data);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        if (response.result_data) {\r\n            for (var i in response.result_data.adjustments) {\r\n                if (response.result_data.adjustments[i].redeemCode.toLowerCase() === code.toLowerCase()) {\r\n                    return {\r\n                        success: true,\r\n                        savings: response.result_data.adjustments[i].amount\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        location.reload(true);\r\n    }\r\n};",
	"fanniemay": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n\r\n        var result;\r\n\t\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('#PromotionCodeForm > div.appliedPromoDetails', responseHTML).text().indexOf(code) >= 0;\r\n        if (codeFound) {\r\n\r\n            var discount = parseFloat($('#promotionDiscount + div', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\t\t\tif (discount > 0) {\r\n\r\n\t\t\t\tresult = {\r\n\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\tsavings: discount\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tsuccess: false,\r\n\t\t\t\t\tsavings: 0.00\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n            return result;\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\r\n\t\tif(bestCode){\r\n            $('#BP-InnerPromoBoxArea').css('display', \"\");\r\n            $('#promoCode').val(bestCode);\r\n            $('#divApplyBtnStatic > a > img').click();\r\n        }\r\n    }\r\n}",
	"fanniemay.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n\r\n        var result;\r\n    \r\n        var responseHTML = $piggyJq.parseHTML(response),\r\n            codeFound = $piggyJq('#PromotionCodeForm > div.appliedPromoDetails', responseHTML).text().indexOf(code) >= 0;\r\n        if (codeFound) {\r\n\r\n            var discount = parseFloat($piggyJq('#promotionDiscount + div', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            if (discount > 0) {\r\n\r\n                result = {\r\n                    success: true,\r\n                    savings: discount\r\n                }\r\n\r\n            }\r\n            else {\r\n\r\n                return {\r\n                    success: false,\r\n                    savings: 0.00\r\n                };\r\n                \r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\r\n        if(bestCode){\r\n            $piggyJq('#BP-InnerPromoBoxArea').css('display', \"\");\r\n            $piggyJq('#promoCode').val(bestCode);\r\n            $piggyJq('#divApplyBtnStatic > a > img').click();\r\n        }\r\n    }\r\n}",
	"fanzz": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        const responseHTML = $.parseHTML(response);\r\n        const savings = parseFloat($('#shopping-cart-totals-table .summary-total .price', responseHTML).text().replace('$', '').replace('-', ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"farebuzz": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.totdiscount:contains(\"$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#promoclick').get(0).dispatchEvent(clickEvent);\r\n            $('#PromoCode').val(bestCode);\r\n            $(\"#promodiv a:contains('Apply')\").get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"farmfreshtoyou": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.ResponseData.DefaultDiscountValue);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promoCodeInputBox').val(bestCode);\r\n            $('#btnPromo').click();\r\n        }\r\n    }\r\n};",
	"fashionesta": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = 'USD';\r\n        var url = window.location.pathname;\r\n\r\n        if (url.match(\/de\/g)) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.DE;\r\n        } else if (url.match(\/en\/g)) {\r\n            newCurrency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        } else if (url.match(\/fr\/g)) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.FR;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"fashioneyewear": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match('discount_amount(.*)base_discount_amount')[0].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                location.reload();\r\n            } else {\r\n                $('#discount-code').val(bestCode);\r\n\r\n                var s = document.createElement('script');\r\n\r\n                s.id = 'tempScript';\r\n                s.type = 'text\/javascript';\r\n\r\n                var code = \"var jq = document.createElement('script'); jq.src = 'https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/2.1.4\/jquery.min.js'; document.getElementsByTagName('head')[0].appendChild(jq); jQuery('#discount-code').trigger('change'); jQuery('.action-apply').click();\";\r\n\r\n                s.appendChild(document.createTextNode(code));\r\n                document.body.appendChild(s);\r\n                $('#tempScript').remove();\r\n            }\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    }\r\n};",
	"fashionmia": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.data.discount_amount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"fashiontofigure": "var ExternalProvider = {\r\n    oldTotal:0.00,\r\n    init: function(){\r\n        this.setOldTotal();\r\n    },\r\n    parse: function(response,status,$xhr,code){\r\n        var jqObj = $.parseHTML(response.responseText)\r\n        var newTotal= $(\"#shopping-cart-totals-table tfoot :nth-child(2)\",jqObj).find('.price').text().replace(\/[^0-9|\\.]\/g,'')\r\n        var discount = this.oldTotal-parseFloat(newTotal);\r\n        if(discount>0){\r\n            return{\r\n                success:true,\r\n                savings:discount\r\n            }\r\n        }\r\n        return{\r\n            success:false,\r\n            savings:0.00\r\n        } \r\n    },\r\n    complete: function(bestCode,bestSavings){\r\n        location.reload()\r\n    },\r\n    setOldTotal(){\r\n        var total = 0.00;\r\n        if(location.pathname.match(\/\\\/checkout\\\/cart\/g)){\r\n            total =   parseFloat($(\"#shopping-cart-totals-table tfoot :nth-child(2)\").find('.price').text().replace(\/[^0-9|\\.]\/g,''))\r\n        }\r\n        else{\r\n             $(\".order-product-detail\").each(function(){\r\n                 var qty = parseFloat($(this).find(\".qty-details\").text().replace(\/[^0-9]\/g,''))\r\n                 var basePrice = parseFloat($(this).find(\".order-price > .price\").text().replace(\/[^0-9|\\.]\/g,''))\r\n                 var discountedPrice = parseFloat($(this).find(\".order-price > .discount\").text().replace(\/[^0-9|\\.]\/g,''))\r\n                 var netPrice = (discountedPrice>0)?qty*discountedPrice:qty*basePrice;\r\n                 if(netPrice >0)\r\n                    total+=netPrice;\r\n             })\r\n        }            \r\n        this.oldTotal = total\r\n    }\r\n}",
	"fashiontofigure.mobile": "var ExternalProvider = {\r\n    oldTotal:0.00,\r\n    init: function(){\r\n        this.setOldTotal();\r\n    },\r\n    parse: function(response,status,$xhr,code){\r\n        var jqObj = $.parseHTML(response.responseText)\r\n        var newTotal= $(\"#shopping-cart-totals-table tfoot :nth-child(2)\",jqObj).find('.price').text().replace(\/[^0-9|\\.]\/g,'')\r\n        var discount = this.oldTotal-parseFloat(newTotal);\r\n        if(discount>0){\r\n            return{\r\n                success:true,\r\n                savings:discount\r\n            }\r\n        }\r\n        return{\r\n            success:false,\r\n            savings:0.00\r\n        } \r\n    },\r\n    complete: function(bestCode,bestSavings){\r\n        location.reload()\r\n    },\r\n    setOldTotal(){\r\n        var total = 0.00;\r\n        if(location.pathname.match(\/\\\/checkout\\\/cart\/g)){\r\n            total =   parseFloat($(\"#shopping-cart-totals-table tfoot :nth-child(2)\").find('.price').text().replace(\/[^0-9|\\.]\/g,''))\r\n        }\r\n        else{\r\n             $(\".order-product-detail\").each(function(){\r\n                 var qty = parseFloat($(this).find(\".qty-details\").text().replace(\/[^0-9]\/g,''))\r\n                 var basePrice = parseFloat($(this).find(\".order-price > .price\").text().replace(\/[^0-9|\\.]\/g,''))\r\n                 var discountedPrice = parseFloat($(this).find(\".order-price > .discount\").text().replace(\/[^0-9|\\.]\/g,''))\r\n                 var netPrice = (discountedPrice>0)?qty*discountedPrice:qty*basePrice;\r\n                 if(netPrice >0)\r\n                    total+=netPrice;\r\n             })\r\n        }            \r\n        this.oldTotal = total\r\n    }\r\n}",
	"fashionworld": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.savings-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n}",
	"fatbraintoys": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(parseFloat(response).toFixed(2));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promo_code').val(bestCode);\r\n            $('#promo_add').click();\r\n        };\r\n    }\r\n};",
	"fatface": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.b-coupons__items .b-coupons__cell_discount strong', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"fathead": "var ExternalProvider = {\r\n  init: function () {\r\n    var dataType = 'application\/x-www-form-urlencoded';\r\n\r\n    if (this.isCheckOutPage()) {\r\n      dataType = 'application\/json';\r\n    }\r\n\r\n    $.ajaxSetup({\r\n      beforeSend: function (xhr) {\r\n        xhr.setRequestHeader('Content-Type', dataType);\r\n      }\r\n    });\r\n  },\r\n  _init: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = this.isCheckOutPage() ? 'https:\/\/www.fathead.com\/shoppingcart\/checkout\/ApplyPromo' : 'https:\/\/www.fathead.com\/shoppingcart';\r\n    var clearUrlInput = $('#___jpClearUrl');\r\n    var clearUrl = this.isCheckOutPage() ? 'https:\/\/www.fathead.com\/shoppingcart\/checkout\/RemovePromo' : 'https:\/\/www.fathead.com\/shoppingcart';\r\n\r\n    this.__createCustomDOM(applyUrlInput, '___jpCouponUrl', applyUrl);\r\n    this.__createCustomDOM(clearUrlInput, '___jpClearUrl', clearUrl);\r\n\r\n  },\r\n  __createCustomDOM: function (jpInput, jpID, domSelector) {\r\n    if (!jpInput.length) {\r\n      jpInput = document.createElement(\"input\");\r\n      jpInput.id = jpID;\r\n      jpInput.style.display = \"none\";\r\n      (document.body || document.head || document.documentElement).appendChild(jpInput);\r\n      jpInput = $('#' + jpID);\r\n    }\r\n\r\n    return jpInput.attr('value', domSelector);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n    var _this = this;\r\n\r\n    if (type === 'applyCouponUrl' && !this.isCheckOutPage()) {\r\n      data = _this._applyCouponUrl(code);\r\n    }\r\n\r\n    if (type === 'clearCouponUrl' && !this.isCheckOutPage()) {\r\n      data = _this._clearCouponUrl();\r\n    }\r\n\r\n    if (type === 'applyCouponUrl' && this.isCheckOutPage()) {\r\n      data = {\r\n        promotionCode: code\r\n      };\r\n\r\n      return JSON.stringify(data);\r\n    }\r\n\r\n    return data;\r\n  },\r\n  _applyCouponUrl: function (code) {\r\n    var couponData = {};\r\n    var formInputs = [].slice.call($('#form1 input'));\r\n    formInputs.forEach(function (e) {\r\n      couponData[$(e).attr('name')] = $(e).val();\r\n    });\r\n\r\n    couponData.actionType = 'Apply';\r\n    couponData.promocode = code;\r\n\r\n    return couponData;\r\n  },\r\n  _clearCouponUrl: function () {\r\n    var clearCouponData = {};\r\n    var clearCouponFormInputs = [].slice.call($('#removeCoupon input'));\r\n\r\n    clearCouponFormInputs.forEach(function (e) {\r\n      clearCouponData[$(e).attr('name')] = $(e).val();\r\n    });\r\n\r\n    clearCouponData.actionType = 'Remove';\r\n\r\n    return clearCouponData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.summary-price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    if (this.isCheckOutPage()) {\r\n      $.ajax({\r\n        url: 'https:\/\/www.fathead.com\/shoppingcart\/checkout\/GetCheckoutSummary',\r\n        success: function (result) {\r\n          savings = parseFloat(result.CheckoutSummary.Discount);\r\n        },\r\n        async: false\r\n      });\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) this._complete(bestCode);\r\n  },\r\n  isCheckOutPage: function () {\r\n    return \/checkout\/.test(location.href);\r\n  },\r\n  _complete: function (bestCode) {\r\n    if (!this.isCheckOutPage()) {\r\n      $('input[name=\"promocode\"]').val(bestCode);\r\n      $('#enterPromo').click();\r\n    } else {\r\n      location.reload();\r\n    }\r\n  }\r\n};\r\nExternalProvider._init();",
	"fcmoto": "var ExternalProvider = {\r\n    init: function () {\r\n        $.ajaxSettings.beforeSend = function (xhr) {\r\n            xhr.setRequestHeader('X-Requested-With', {\r\n                toString: function () {\r\n                    return '';\r\n                }\r\n            });\r\n        };\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.SeparateColumn.Money:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"feedcofr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var self = this;\r\n    var validCoupon = response.success;\r\n    var savings = 0.00;\r\n\r\n    if (validCoupon) {\r\n      $.ajax({\r\n        url: 'https:\/\/shop.feed.co\/eu_' + $('html').attr('lang') + '\/checkout',\r\n        type: 'GET',\r\n        async: false,\r\n        success: function (res) {\r\n          self._savings = parseFloat(res.match(\/base_discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n        }\r\n      });\r\n\r\n      savings = self._savings;\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && $('#checkout-progress-bar').length > 0) { \r\n      location.href = 'https:\/\/shop.feed.co\/fr\/checkout\/#payment';\r\n    } else if (bestCode) {\r\n      location.href = 'https:\/\/shop.feed.co\/fr\/checkout\/';\r\n    }\r\n  }\r\n};",
	"femailcreations": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"fieldsupply": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply Coupon\"]').click();\r\n        }\r\n    }\r\n};",
	"fifthsun": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"figleaves": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var newCurrency = 'USD';\r\n    var url = window.location.pathname;\r\n    if (url.match(\/uk\/g)) {\r\n      newCurrency = 'GBP';\r\n      locale = localeMapping.GB;\r\n    }\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.value:contains(-)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#dwfrm_cart_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n    };\r\n  }\r\n};",
	"fila": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('.order-discount td:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"filofaxuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.summary-total td:contains(\"Discount\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"filthyfragrance": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"finestationery": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"fingerhut": "var ExternalProvider = {\r\n    basketTotal: 0.00,\r\n    init: function () {\r\n        this.basketTotal = parseFloat($('#checkoutOrderSummaryOrderTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n    },\r\n    parse: function (response) {\r\n\r\n        if (response.orderSummary.orderTotal) {\r\n            var savings = parseFloat(this.basketTotal - response.orderSummary.orderTotal);\r\n\r\n            return {\r\n                success: savings > 0,\r\n                savings: isNaN(savings) ? 0.00 : savings\r\n            }\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"finishline": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var success = !!$('.text-right span span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        var savings = $('.text-right span span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n\r\n};",
	"finishline.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        if (response.cartBean) {\r\n            var savings = response.cartBean.couponAmount;\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"firebox": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping['US'];\r\n    var selector;\r\n    if (location.href.includes('checkout')) {\r\n      selector = $('.basket__summary-total').text().replace(\/[A-z.0-9,]\/g, '');\r\n    }\r\n    else {\r\n      selector = $('li.nav-currency-container > ul > li > span').text().replace(\/[A-Z.0-9,]\/g, '').trim();\r\n    }\r\n\r\n    if (selector === \"\u20ac\") {\r\n      currency = 'EUR';\r\n      locale = localeMapping['DE'];\r\n    } else if (selector === \"\u00a3\") {\r\n      currency = 'GBP';\r\n      locale = localeMapping['GB'];\r\n    }\r\n    else if (selector === \"\u20ac\") {\r\n      currency = 'EUR';\r\n      locale = localeMapping['FR'];\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    let promoId = response.checkout.state.promotions[0].id;\r\n    let savings = (response.checkout.totals.deferredPromoSavings === 0) ? response.checkout.totals.nonDeferredPromoSavings: response.checkout.totals.deferredPromoSavings;\r\n    this.removeCoupon(promoId);\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  removeCoupon: function (promoId) {\r\n    $.ajax({\r\n      url: \"https:\/\/www.firebox.com\/checkout\/remove-promotion\",\r\n      type: \"POST\",\r\n      data: JSON.stringify({ id: promoId }),\r\n      dataType: 'json'\r\n    });\r\n  }\r\n};",
	"firstaidbeauty": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var checkoutConfig = \/window\\.checkoutConfig\\s=\\s([^;]+)\\;\/gim.exec(response);\r\n    var savings = checkoutConfig[1] ? Math.abs(parseFloat(checkoutConfig.totalsData.discount_amount)) : 0.00;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"firstchoice": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.promotionalCodeViewData.promotionalDiscount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"firstleaf": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        const locale = localeMapping['GB'];\r\n        currency = \"GBP\";\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $(\".checkout-basket__totals.col-sm-5.pull-right >div:contains('Voucher') .totals__value\", responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"fitfresh": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $(\"#checkout_reduction_code\").val(bestCode);\r\n      $(\"button[data-trekkie-id='apply_discount_button']\").removeAttr(\"disabled\").click();\r\n    }\r\n  }\r\n};",
	"fitflop": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.cart.totalDiscounts.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"fitmart": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('strong:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        $.ajax({\r\n            url: $('.removeFn', responseHTML).attr('href'),\r\n            type: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"fivepawns": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    let savings = Math.abs(response.totals.discount_amount);\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      if (location.pathname === '\/checkout\/cart\/') {\r\n        const codeField = $('#coupon_code');\r\n        codeField.val(bestCode);\r\n        codeField.get(0).dispatchEvent(this.changeEvent);\r\n        $('#discount-coupon-form').submit();\r\n      } else {\r\n        const codeField = $('#discount-code');\r\n        codeField.val(bestCode);\r\n        codeField.get(0).dispatchEvent(this.changeEvent);\r\n        $('#discount-form button').click();\r\n      }\r\n    }\r\n  },\r\n  initEventInstance: function () {\r\n    this.changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  }\r\n};\r\nExternalProvider.initEventInstance();",
	"fiverr": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = false;\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        code: code,\r\n        payment_token_id: $('input[name=\"payment_token_id\"]').val(),\r\n        client_time: Date()\r\n      };\r\n      return data;\r\n    }\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    let responseHTML = $.parseHTML(response);\r\n    let elements = $('.item-content div.price.js-str-currency.js-no-rounding', responseHTML);\r\n    let totalDiscountPrice = parseFloat(elements.last().text().replace(\/[^0-9|.]\/g, ''));\r\n    let totalPrice = 0;\r\n    let savings = 0;\r\n    elements.each(function(elementKey) {\r\n      if (elementKey !== (elements.length - 1)) {\r\n        let itemPrice = parseFloat($(this).text().replace(\/[^0-9|.]\/g, ''));\r\n        totalPrice += itemPrice;\r\n      }\r\n    });\r\n    savings = totalPrice - totalDiscountPrice;\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $(\"input[placeholder='Enter promo code']\").val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $(\"input[placeholder='Enter promo code']\").trigger('input').trigger('change');\r\n      $('.btn-standard.btn-white-grad.js-btn-enter-coupon')[0].click();\r\n    }\r\n  }\r\n};",
	"fivestardirect": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('dd:contains(-()', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"flaconi": "var ExternalProvider = {\r\n    origPrice: 0,\r\n    init: function () {\r\n        this.origPrice = parseFloat($('.cart-total-price-value').text().replace(\/[^0-9.]\/g, ''));\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newPrice = parseFloat($('.cart-total-price-value', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        var savings = (this.origPrice - newPrice) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"flexispot": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|.]\/g,\r\n    oldTotal: 0,\r\n    init: function () {\r\n        this.oldTotal = parseFloat($('span.woocommerce-Price-amount.amount:first').text().replace(this.nonPriceRegex, ''));\r\n    },\r\n    prepare: function (type, code) {\r\n        var cartParams = this.convertJSVariableToJsonObject(\"wc_cart_params\");\r\n        if (type === \"clearCouponUrl\") {\r\n            return {\r\n                security: cartParams.remove_coupon_nonce,\r\n                coupon_code: code\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    convertJSVariableToJsonObject: function (variableName) {\r\n        var scriptContents = $('script[type=\"text\/javascript\"]:contains(\"' + variableName + '\")')\r\n            .html()\r\n            .match(new RegExp('(\\\\s)var ' + variableName + ' = (?:(?!;).)*?;')).toString();\r\n\r\n        var toReplace = [\r\n            \"var \" + variableName + \" = \",\r\n            \";\"\r\n        ];\r\n        var jsonString = scriptContents;\r\n\r\n        for (x = 0; x < toReplace.length; x++) {\r\n            jsonString = jsonString.replace(toReplace[x], '');\r\n        }\r\n        jsonString = jsonString.trim();\r\n\r\n        if (jsonString.charAt(jsonString.length - 1) === \",\") {\r\n            \/\/idk why sometimes there is comma at the end\r\n            jsonString = jsonString.substring(0, jsonString.length - 1);\r\n        }\r\n        return JSON.parse(jsonString);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-discount .woocommerce-Price-amount.amount', responseHTML)[0].innerHTML.replace(this.nonPriceRegex, ''))\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode)\r\n            $('input[name=\"apply_coupon\"]').click()\r\n        }\r\n    }\r\n};",
	"floom": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    let locale;\r\n\r\n    if ($('html').attr('lang') === 'en_gb' || $('script:contains(\"currency: \\'GBP\\'\")').length) {\r\n      currency = 'GBP';\r\n      locale = localeMapping['GB'];\r\n    } else {\r\n      locale = localeMapping['US'];\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits: 2 });\r\n  },\r\n  parse: function (response) {\r\n    var savings = response.cart.totalDiscount * -1;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"flora2000": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(jQuery('#disc_promo_div ~ .rowCrt:eq(2) .alignL').text().replace(\/[$-]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var codeApplyTime;\r\n        var counter = 0;\r\n        codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n            if (jQuery('#promo_code').val() === 'ENTER HERE' || counter > 100) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 100);\r\n    }\r\n}",
	"flora2000.mobile": "var ExternalProvider = {\r\n    prepare: function (type, code){\r\n        if (type !== 'applyCouponUrl') return false;\r\n        var hiddCid = jQuery('#hiddCid').val();\r\n        var totalPrice = jQuery('#totalPrice').val();\r\n        var totalProdPrice = jQuery('#totalProdPrice').val();\r\n        var totalSalePrice = jQuery('#totalSalePrice').val();\r\n        var deliveryPrice = jQuery('#deliveryPrice').val();\r\n        var surchargePrice = jQuery('#surchargePrice').val();\r\n        var data = {};\r\n        data['layout'] = 'ajax';\r\n        data['passVal'] = 'hiddCid='+ hiddCid + '&totalPrice=' + totalPrice + '&totalProdPrice=' + totalProdPrice + '&totalSalePrice=' + totalSalePrice + '&deliveryPrice=' + deliveryPrice + '&surchargePrice=' + surchargePrice + '&promo_code=' + code + '&discotype=promocodes';\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        if (!response.errorStatus) {\r\n            var savings = parseFloat(jQuery('#totalPrice').val()) - response.finalPrice;\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n}",
	"floraqueen": "$(document).ready(function(){\r\n    var url = $(document).attr('URL')\r\n    var spanHTML = '<span id = \"sm-res-url\" display= \"none\" data-url=\"'+url+'\"><\/span>'\r\n    $('body').append(spanHTML)\r\n})\r\nvar ExternalProvider={\r\n    oldCartPrice:0,\r\n    initialCoupon:\"\",\r\n    init: function(){\r\n        var price = $('.bouquet-size-list .active .price').text().replace(\/[^0-9|\\.]\/g,'')\r\n        if(price)\r\n           this.oldCartPrice = parseFloat(price)\r\n        if(isNaN(this.oldCartPrice))\r\n           this.oldCartPrice = 0\r\n        this.initialCoupon = $('#pc').val()    \r\n    },\r\n    prepare:function(requestType,code){\r\n         if(requestType != 'resultUrl'){\r\n             var data ={}\r\n             data['code'] = requestType=='applyCouponUrl'?code:(\"\"+(parseInt(Math.random()*10000)))\r\n             data['delivery_country'] = $('#select-delivery-country').attr('data-selected')||''\r\n             data['delivery_date'] = $('.title_delivery_date + div .active').attr('data-date')||'\/\/'\r\n             data['product_id'] = $('input[name=\"product_id\"]').val()||''\r\n             data['size'] = $('.bouquet-sizes-ul .active').attr('id')||''\r\n             return data\r\n         }\r\n    },\r\n    parse:function(response,status,$xhr,code){\r\n        var jqObj = $.parseHTML(response.responseText)\r\n        var newPrice = parseFloat($('.bouquet-size-list .active .price',jqObj).text().replace(\/[^0-9|\\.]\/g,''))\r\n        var discount = this.oldCartPrice - newPrice\r\n        if(discount > 0){\r\n            return{\r\n                success:true,\r\n                savings:discount\r\n            }\r\n        }\r\n        return{\r\n            success:false,\r\n            savings:0\r\n        }\r\n    },\r\n    complete:function(bestCode,bestSavings){\r\n        var couponCode = bestSavings >0?bestCode:this.initialCoupon\r\n        if(couponCode.length>0){\r\n             $('#pc').val(couponCode)\r\n             $('#promocode').click()\r\n        }\r\n    }\r\n}",
	"florsheim": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var result = response.replace(\/\\r?\\n|\\r\/g, '');\r\n        var matchResult = result.match('checkout:lblPromoAmount(.*)checkout:lblAdjustedCartSubtotal')[0];\r\n        var savings = parseFloat(matchResult.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"florsheimshoes": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                checkout: 'checkout',\r\n                'ice.window': 'k9jie5uz48',\r\n                'ice.view': $('input[name=\"ice.view\"]').val(),\r\n                'checkout:txtSearchbox': $('input[name=\"checkout:txtSearchbox\"]').val(),\r\n                'checkout:tblCartLines:0:lstQuantity': $('select[name=\"checkout:tblCartLines:0:lstQuantity\"]').find(':selected').val(),\r\n                'checkout:txtPromoCode': code,\r\n                'checkout:hdnStyleCategory': $('input[name=\"checkout:hdnStyleCategory\"]').val(),\r\n                'checkout:txtOptIn': $('input[name=\"checkout:txtOptIn\"]').val(),\r\n                icefacesCssUpdates: $('input[name=\"icefacesCssUpdates\"]').val(),\r\n                'javax.faces.ViewState': $('input[name=\"javax.faces.ViewState\"]').val(),\r\n                'javax.faces.source': 'checkout:btnUpdate',\r\n                'javax.faces.partial.event': 'click',\r\n                'javax.faces.partial.execute': 'checkout:btnUpdate checkout:txtPromoCode',\r\n                'javax.faces.partial.render': '@all',\r\n                'javax.faces.behavior.event': 'action',\r\n                'javax.faces.partial.ajax': 'true'\r\n\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0.00;\r\n\r\n        savings = parseFloat($('.row.cost.discount span:contains(\"$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"flowerdelivery": "var ExternalProvider = {\r\n\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            var $form = $('form[name=frmStep_Billing]');\r\n            $form.find('#txtSpecialOfferCode').val(code);\r\n            return $form.serialize();\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var specialOffer = response.match(\/Special Offer:(\\s)\\$(\\-|\\+)?([0-9]+(\\.[0-9]+)?)\/);\r\n\r\n        if (specialOffer.length > 0) {\r\n            return {\r\n                success: true,\r\n                savings: specialOffer[3]\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        location.reload();\r\n    }\r\n}",
	"florists": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var str = $('.reduction-code__text:contains(\"-$\")', responseHTML).text();\r\n        var pos = str.indexOf(\"(\") + 1;\r\n        str = str.slice(pos, str.lastIndexOf(\")\"));\r\n        var savings = parseFloat(str.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"flowershopping": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isCartPage() ? 'cart.aspx' : 'checkout.aspx';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    isCartPage: function () {\r\n        return \/store\\\/cart\/.test(location.href);\r\n    },\r\n    prepare: function (type, code) {\r\n        function serializeObject(a) {\r\n            var o = {};\r\n\r\n            $.each(a, function () {\r\n                o[this.name] = this.value || '';\r\n            });\r\n\r\n            return o;\r\n        }\r\n        var formDataArray = $('#main').serializeArray();\r\n        var data = serializeObject(formDataArray);\r\n\r\n        if (this.isCartPage()) {\r\n            if (type === 'applyCouponUrl') {\r\n                data.ctl12$txtPromotionCode = code;\r\n                data.ctl12$btnPromo = 'Update';\r\n\r\n                return data;\r\n            } else if (type === 'clearCouponUrl') {\r\n                data.ctl12$txtPromotionCode = '';\r\n                data.ctl12$btnPromo = 'Update';\r\n            }\r\n        } else {\r\n            if (type === 'applyCouponUrl') {\r\n                data.ctl12$ctl00$txtPromotionCode = code;\r\n                data.ctl12$ctl00$btnPromo = 'Update';\r\n\r\n                return data;\r\n            }\r\n            data.ctl12$ctl00$txtPromotionCode = '';\r\n            data.ctl12$ctl00$btnPromo = 'Update';\r\n        }\r\n\r\n        return true;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = '';\r\n\r\n        if (this.isCartPage()) {\r\n            var oldTotal = parseFloat($('.discountprice.totalSavings').text().replace(\/[^0-9|.]\/g, ''));\r\n            var cartNewTotal = parseFloat($('.discountprice.totalSavings', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n            savings = cartNewTotal - oldTotal;\r\n        } else {\r\n            var checkOldTotal = parseFloat($('.discountprice:eq(1)').text().replace(\/[^0-9|.]\/g, ''));\r\n            var convertCheckTotal = parseFloat($('.discountprice:eq(1)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n            savings = convertCheckTotal - checkOldTotal;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"flowerstation": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var discount = response.stepContent[0].content;\r\n        var savings = parseFloat($('.ProductPrice:contains(\"-\")', discount).text().replace(\/[^0-9.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#couponcode').val(bestCode);\r\n            $('#apply_code').click();\r\n        }\r\n    }\r\n};",
	"fnacfr": "var ExternalProvider = {\r\n  oldTotal: 0,\r\n  init: function () {\r\n    $('#promotion_enable-button, .payment__item-cta--secondary').click();\r\n    this.oldTotal = parseFloat($(\".basket-informations__price--total span\").text().replace(\"\u20ac\", \".\").replace(\/[^0-9|.]\/g, ''));\r\n  },\r\n  prepare: function (action, code) {\r\n    var inputEvent = new Event('input', { bubbles: true });\r\n    var selector = location.href.match('panier') ? '#promotion-input' : '.payment-secondary__fields-code';\r\n\r\n    inputEvent.simulated = true;\r\n\r\n    if (action === 'injectCoupon') {\r\n      document.querySelector(selector).value = code;\r\n      document.querySelector(selector).dispatchEvent(inputEvent);\r\n      $('.button-load--promotion').click();\r\n    } else if (action === 'removeInjectedCoupon') {\r\n      $('.button-load--promotionremove, .button-load--no-space').click();\r\n    }\r\n\r\n    return null;\r\n  },\r\n  whenReady: function (step, next) {\r\n    var counter = 0;\r\n    var codeApplyTime = setInterval(function () {\r\n      counter += 1;\r\n\r\n      if ($('.promotion__error-message').get(0) || counter > 10) {\r\n        clearInterval(codeApplyTime);\r\n        next();\r\n      }\r\n    }, 300);\r\n  },\r\n  parse: function () {\r\n    \r\n    var newTotal = parseFloat($(\".basket-informations__price--total span\").text().replace(\"\u20ac\", \".\").replace(\/[^0-9|.]\/g, ''));\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  }\r\n};",
	"focuscamera": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.totals);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.box-header:eq(0)').click();\r\n            $('#discount_code').val(bestCode);\r\n            $('#discount-coupon-form button:eq(0), #discount-form button:eq(0)').click();\r\n        }\r\n    }\r\n};",
	"food52": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n\r\n    baseObject: null,\r\n    retrieveBaseObject: function() {\r\n        if(!this.baseObject){\r\n            this.baseObject = this.convertJSVariableToJsonObject('base');\r\n        }\r\n        return this.baseObject;\r\n    },\r\n\r\n    shopCheckoutIndex: null,\r\n    retrieveShopCheckoutIndex: function() {\r\n        if(!this.shopCheckoutIndex){\r\n            this.shopCheckoutIndex = this.convertJSVariableToJsonObject('shopCheckoutIndex');\r\n        }\r\n        return this.shopCheckoutIndex;\r\n    },\r\n\r\n    convertJSVariableToJsonObject: function(variableName){\r\n        var scriptContents = $('script[type=\"text\/javascript\"]:contains(\"' + variableName + '\")')\r\n            .html()\r\n            .match(new RegExp('(\\\\s)var ' + variableName + ' = (?:(?!;).)*?;')).toString();\r\n\r\n        var toReplace = [\r\n            \"var \" + variableName + \" = \",\r\n            \";\",\r\n            \"\\u0026\"\r\n        ];\r\n        var jsonString = scriptContents;\r\n\r\n        for(x = 0; x < toReplace.length; x++){\r\n            jsonString = jsonString.replace(toReplace[x], '');\r\n        }\r\n        jsonString = jsonString.trim();\r\n\r\n        if(jsonString.charAt(jsonString.length - 1) === \",\"){\r\n            \/\/idk why sometimes there is comma at the end\r\n            jsonString = jsonString.substring(0, jsonString.length - 1);\r\n        }\r\n        return JSON.parse(jsonString);\r\n    },\r\n    prepare: function(type, code) {\r\n        var userBasketItems = this.getBasketItems().map(function (item) {\r\n            return {\r\n                id: item.id,\r\n                quantity: item.quantity\r\n            }\r\n        });\r\n        var shippingSurcharges = this.getBasketItems().map(function (item) {\r\n            return item.shippingSurcharge ? item.shippingSurcharge : 0\r\n        }).reduce(function (a, b) {\r\n            return a + b;\r\n        }, 0);\r\n        var data = {\r\n            promoCode: '',\r\n            userBasketItems: JSON.stringify(userBasketItems),\r\n            shippingSurcharges: shippingSurcharges,\r\n            shippingBaseRate: this.retrieveShopCheckoutIndex().shipPolicies.standardFlatRate,\r\n            shippingShipmentSurchargeTotal: shippingSurcharges,\r\n            addressID: $('#address-form-wrapper #addressID').val(),\r\n            shippingAddressType: this.retrieveShopCheckoutIndex().checkoutOptions.selectedAddressType\r\n        };\r\n        if (type === 'applyCouponUrl') {\r\n            data.promoCode = code;\r\n            return data;\r\n        } else if (type === 'clearCouponUrl') {\r\n            return data;\r\n        }\r\n        return null;\r\n    },\r\n    getBasketItems: function () {\r\n        var vendors = this.retrieveBaseObject().shop.prefetchedBasketBundle.basket.vendors;\r\n        return [].concat.apply([],\r\n            vendors.map(function (vendor) {\r\n                return vendor.items;\r\n            })\r\n        );\r\n    },\r\n    parse: function(response, status, $xhr, code) {\r\n        var savings = response.promoCode.amount;\r\n\t\tif (savings > 0) {\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: savings\r\n\t\t\t}\r\n\t\t}\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings) {\r\n\t\tlocation.reload(true);\r\n    }\r\n\r\n};",
	"foodsaver": "var ExternalProvider = {\r\n    init: function () {\r\n        this.oldTotal = $('.order-total td:eq(1)').text().replace(\/[^0-9.]\/g, '');\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = $('.order-total td:eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n            $('#enhancedCheckoutPromoAddCoupon').click();\r\n        }\r\n    }\r\n};",
	"footaction": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        $.ajax({\r\n            url: 'https:\/\/www.footaction.com\/api\/session',\r\n            method: 'GET',\r\n            async: false,\r\n            success: function (d) {\r\n                document.getElementsByTagName('body')[0].setAttribute('csrf', d.data.csrfToken);\r\n            }\r\n        });\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.orderDiscounts.value;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"footaction.mobile": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action !== 'injectCoupon') return false;\r\n        if ($('#estimator_sourcecode').length) {\r\n            $('#estimator_sourcecode').val(code);\r\n            var clickEvent = document.createEvent('MouseEvents');\r\n            clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\r\n            $('#cartestimator_form a').get(0).dispatchEvent(clickEvent);\r\n        } else {\r\n            $('#CPCOrSourceCode').val(code);\r\n            $('#applyPromo').click();\r\n        }\r\n    },\r\n\r\n    whenReady: function (step, next) {\r\n        var codeApplyTime;\r\n        var counter = 0;\r\n        if ($('#estimator_sourcecode').length) {\r\n            codeApplyTime = setInterval(function () {\r\n                counter += 1;\r\n                if ($('#cartestimator_form a:visible').length || counter > 200) {\r\n                    clearInterval(codeApplyTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        } else {\r\n            codeApplyTime = setInterval(function () {\r\n                counter += 1;\r\n                if ($('#inventoryCheck_loading:visible').length === 0 || counter > 200) {\r\n                    clearInterval(codeApplyTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        }\r\n    },\r\n\r\n    parse: function (response) {\r\n        var savings;\r\n        if ($('#estimator_sourcecode').length) {\r\n            savings = parseFloat($('#estimated_savings .block-b').text().replace('$', ''));\r\n        } else {\r\n            savings = parseFloat($('#reviewPaneDiscountTotal').text().replace(\/[$-]\/g, ''));\r\n        }\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    }\r\n};",
	"footasylum": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.align-right.f-discount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"footlocker": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function() {\r\n        retries++;\r\n        $(\".Link.remove\").click();\r\n        if (!$(\".Link.remove\").click().length && retries < 3) {\r\n          clearInterval(interval);          \r\n          resolve();\r\n        } else if (retries === 3) {\r\n          resolve();\r\n        }\r\n      }, 2000);\r\n    })\r\n  }, \r\n  __prepareUrl: function () {\r\n    $.ajax({\r\n      url: 'https:\/\/www.footlocker.com\/api\/session',\r\n      method: 'GET',\r\n      async: false,\r\n      success: function (d) {\r\n        document.getElementsByTagName('body')[0].setAttribute('csrf', d.data.csrfToken);\r\n      }\r\n    });\r\n  },\r\n  parse: function (response) {\r\n    var savings = response.totalDiscounts.value;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"footshopfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.voucher.value_real);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"footsmart": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n\r\n        var couponData = {};\r\n\r\n        var formInputs = [].slice.call($('#frmShoppingCart input:not([type=\"radio\"]), #frmShoppingCart select, #frmShoppingCart input[type=\"radio\"]:checked'));\r\n\r\n        formInputs.forEach(function(e){\r\n             $(e).attr('name') !== undefined ? (couponData[$(e).attr('name')] = $(e).val()) : false;\r\n        });\r\n\r\n        delete couponData[\"ctl00$MainContentPlaceHolder$btnCheckout\"];\r\n        delete couponData[\"ctl00$MainContentPlaceHolder$shoppingCartPanel$btnCheckout\"];\r\n        delete couponData[\"ctl00$EmailPopUpControl$btnSubmit\"];\r\n\r\n        couponData[\"ctl00$MainContentPlaceHolder$shoppingCartPromotion$hPromotionBoxInput\"] = \"\";\r\n        couponData[\"__EVENTTARGET\"] = \"ctl00$MainContentPlaceHolder$shoppingCartPromotion$lnkApplyPromotion\";\r\n        couponData[\"ctl00$MainContentPlaceHolder$shoppingCartPromotion$tbPromotionBox\"] = code;\r\n        \r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return couponData;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('#ctl00_MainContentPlaceHolder_shoppingCartPromotion_hPromotionBoxInput', responseHTML).val().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('#ctl00_MainContentPlaceHolder_shoppingCartPanel_shoppingCartPanel .summary tr:last-child td:last-child').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('.PromotionFormLabel.subtotalColumn', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings){\r\n\r\n        $('#ctl00_MainContentPlaceHolder_shoppingCartPromotion_tbPromotionBox').val(bestCode);\r\n        $('#ctl00_MainContentPlaceHolder_shoppingCartPromotion_lnkApplyPromotion')[0].click();\r\n    }\r\n}",
	"footsmart.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML(response),\r\n            codeApplied = $('.success', responseHTML).length == 1,\r\n            codeError = $('.error', responseHTML).length == 1;\r\n\r\n        if (codeApplied && !codeError)\r\n        {\r\n            var subtotal = Number($('div.checkout-order-summary.accordion .subtotal .price', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')),\r\n                total = Number($('div.checkout-order-summary.accordion .total .price', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')),\r\n                savings = (subtotal - total);\r\n\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\r\n        $('input[name=\"promo_code\"]').val(bestCode);\r\n        $('form.promo-code > button').click();\r\n    }\r\n}",
	"footwearetc": "var ExternalProvider = {\r\n    total: 0,\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n\r\n        this.total = parseFloat($('#theCartTotal').text().replace(\/[^0-9|.]\/, \"\"));\r\n\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        if (type == 'applyCouponUrl') {\r\n            data = $('#aspnetForm').serializeObject();\r\n            data[\"ctl00$ctl00$ctl00$BodyContent$BodyContent$BodyContent$ctl00$tcmTrapCodeManager$gvTrapCodes$ctl03$tbTrapCode\"] = code;\r\n            data['ctl00$ctl00$ctl00$BodyContent$BodyContent$BodyContent$ctl00$tcmTrapCodeManager$gvTrapCodes$ctl03$btnTrapCodeAdd'] =  '';\r\n            return data;\r\n        }else if (type == 'clearCouponUrl') {\r\n            data = $('#aspnetForm').serializeObject();\r\n            data[\"ctl00$ctl00$ctl00$BodyContent$BodyContent$BodyContent$ctl00$tcmTrapCodeManager$gvTrapCodes$ctl02$btnTrapCodeDelete\"] = \"\";\r\n            return data;\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responsHTML = $.parseHTML(response);\r\n        var newTotal = parseFloat($('#theCartTotal', responsHTML).text().replace(\/[^0-9|.]\/, \"\"));\r\n        var savings = this.total - newTotal;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"footwearunlimited": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#OrderDiscount', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#CustomerDiscountCode').val(bestCode);\r\n\r\n            if ($('.promoCodeApply').length) {\r\n                $('.promoCodeApply').click();\r\n            }\r\n            else if ($('#PromoCodeSubmit').length) {\r\n                $('#PromoCodeSubmit').click();\r\n            }\r\n        }\r\n    }\r\n}",
	"foreo": "var ExternalProvider = {\r\n    tempSavings: true,\r\n    prepare: function (type, code) {\r\n        var data = false;\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                'edit_quantity[0][quantity]': $('#edit-edit-quantity-0-quantity option:selected').text(),\r\n                form_build_id: $('input[name=\"form_build_id\"]:eq(0)').val(),\r\n                form_id: $('input[name=\"form_id\"]').val(),\r\n                'coupon_redemption[code]': code,\r\n                _triggering_element_name: 'apply_coupon',\r\n                _triggering_element_value: 'Apply',\r\n                _drupal_ajax: 1,\r\n                'ajax_page_state[theme]': 'jedi',\r\n                'ajax_page_state[theme_token]': '', \r\n                'ajax_page_state[libraries]': 'big_pipe\/big_pipe,classy\/base,classy\/messages,commerce_checkout\/checkout_progress,commerce_order\/total_summary,core\/html5shiv,core\/jquery.form,core\/normalize,jedi\/1-column,jedi\/2-columns,jedi\/3-columns,jedi\/4-columns,jedi\/5-columns,jedi\/6-columns,jedi\/checkout-styling,jedi\/global-styling,jedi\/jquery-countdown,jedi\/layout_1-column,jedi\/layout_2-columns,jedi\/layout_3-columns,jedi\/layout_4-columns,jedi\/layout_5-columns,jedi\/layout_6-columns,jedi\/picturefill,jedi\/product-display-styling,jedi\/slick-slider,jedi\/typeahead,jedi\/user-styling,lfi_datalayer\/helper,lfi_duty_notice\/lfi_duty_notice,lfi_pwa\/amazon_pay,system\/base,views\/views.module'\r\n            };\r\n        } else if (type === 'clearCouponUrl') {\r\n            if (!this.tempSavings) return null;\r\n            \r\n            data = {\r\n                'edit_quantity[0][quantity]': $('#edit-edit-quantity-0-quantity option:selected').text(),\r\n                form_build_id: $('input[name=\"form_build_id\"]:eq(0)').val(),\r\n                form_id: $('input[name=\"form_id\"]').val(),\r\n                _triggering_element_name: 'remove_coupon',\r\n                _triggering_element_value: 'Remove coupon',\r\n                _drupal_ajax: 1,\r\n                'ajax_page_state[theme]': 'jedi',\r\n                'ajax_page_state[theme_token]': '', \r\n                'ajax_page_state[libraries]': 'big_pipe\/big_pipe,classy\/base,classy\/messages,commerce_checkout\/checkout_progress,commerce_order\/total_summary,core\/html5shiv,core\/jquery.form,core\/normalize,jedi\/1-column,jedi\/2-columns,jedi\/3-columns,jedi\/4-columns,jedi\/5-columns,jedi\/6-columns,jedi\/checkout-styling,jedi\/global-styling,jedi\/jquery-countdown,jedi\/layout_1-column,jedi\/layout_2-columns,jedi\/layout_3-columns,jedi\/layout_4-columns,jedi\/layout_5-columns,jedi\/layout_6-columns,jedi\/picturefill,jedi\/product-display-styling,jedi\/slick-slider,jedi\/typeahead,jedi\/user-styling,lfi_datalayer\/helper,lfi_duty_notice\/lfi_duty_notice,lfi_pwa\/amazon_pay,system\/base,views\/views.module'\r\n            };\r\n        }\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-total-line-value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        this.tempSavings = (isNaN(savings)) ? false : true;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"forestrysuppliers": "var ExternalProvider = {\r\n\tparse: function (response, status, $xhr, code) {\r\n\t\tvar responseHTML = $.parseHTML(response),\r\n\t\t\tsavings = parseFloat($('#discountamt', responseHTML).attr('value'));\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: savings > 0,\r\n\t\t\tsavings: isNaN(savings) ? 0.00 : savings\r\n\t\t};\r\n\r\n\t},\r\n\r\n\tcomplete: function (bestCode, bestSavings) {\r\n\t\tif (bestCode) {\r\n\t\t\tlocation.reload(true)\r\n\t\t}\r\n\t}\r\n}",
	"forever21": "var ExternalProvider = {\r\n    userId: '',\r\n    init: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"userid\", fnGetUserId());';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('userid');\r\n\r\n        this.userId = value;\r\n        $('body').removeAttr(name);\r\n    },\r\n    prepare: function (action, code) {\r\n        var data = {};\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            data = { userId: this.userId.toString(),\r\n                promoCode: code,\r\n                restrictedCodeName: code,\r\n                creditCardListName: '' };\r\n\r\n            return data;\r\n        }\r\n\r\n        if (action === 'clearCouponUrl') {\r\n            data = { userId: this.userId.toString(),\r\n                creditCardListName: '' };\r\n\r\n            return data;\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var summary;\r\n        var savings = 0.0;\r\n\r\n        if (response.ErrorMessage !== 'Invalid code.') {\r\n            summary = response.Summary;\r\n\r\n            if ('PromoText' in summary !== null) {\r\n                savings = summary.TotalAdjustment;\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"fossil": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = response.adjustments[0].amount;\r\n        var savings = parseFloat((responseHTML).replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    },\r\n    displayCurrency: function (amount, currency, localeMapping) {\r\n        var locale = localeMapping.US;\r\n\r\n        if (\/uk\/.test(location.href) === true) {\r\n            locale = localeMapping.GB;\r\n            currency = 'GBP';\r\n        } else if (\/de\/.test(location.href) === true || \/fr\/.test(location.href) === true) {\r\n            locale = \/fr\/.test(location.href) ? localeMapping.FR : localeMapping.DE;\r\n            currency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: currency, minimumFractionDigits: 2 });\r\n    }\r\n};",
	"foto": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#total_amount').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('#total_amount', responseHTML).text().match(\/\\)(.*)\/)[1].replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"found4you": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($(\".price:contains('-')\", responseHTML).first().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"fourimprint": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response.d.StatusString);\r\n\r\n        \/\/ Below are functional hacks to get the price change\r\n        var oldPrice = Number($('#cartSubtotal').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n            newPrice = Number($('.cartsummary_view li:nth(1) div:nth(1)', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n            savings = (oldPrice - newPrice)\/100;\r\n\r\n\r\n        if (savings > 0){\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings){\r\n\r\n        $('#cphMain_btnOpenCpnCode')[0].click();\r\n        setTimeout(function(){\r\n            $('#cphMain_txtCpnCode').val(bestCode);\r\n        }, 500);\r\n        setTimeout(function(){\r\n            $('#cphMain_btnAddCpnCode')[0].click();\r\n        }, 1000);\r\n    }\r\n}",
	"fourwheelparts": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#price_totalSavings', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#cartPromoCode').val(bestCode);\r\n            $('#cartPromoCodeSubmit').click();\r\n        }\r\n    }\r\n};",
	"fractureme": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.coupon_total * -1;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n}",
	"fragrancedirect": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount.discount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"fragrancenet": "var ExternalProvider = {\r\n  parse: function (response, error, $xhr, code) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var validCoupon = $('#validCoupon', responseHTML).val();\r\n    var currentItems = $('#basket .tableBody .table-row.item', responseHTML);\r\n    var currentTotal = 0;\r\n    var savings = 0;\r\n\r\n    if (validCoupon.toLowerCase() === code.toLowerCase()) {\r\n      currentItems.each(function (idx, ele) {\r\n        currentTotal += parseFloat($('.subtotal.table-cell.wide.price .price:eq(0)', ele).text().replace(\/[^0-9.]\/g, ''));\r\n      });\r\n\r\n      savings = currentTotal - parseFloat($('#totalsBox .subtotalPrice', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"fragrancex": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var codeFound = false;\r\n\r\n        $('.ybb th', responseHTML).each(function (idx, el) {\r\n            if ($(el).text() === 'Coupon Discount') {\r\n                codeFound = true;\r\n            }\r\n        });\r\n\r\n        if (codeFound) {\r\n\r\n            var savings = 0;\r\n\r\n            $('.ybb th', responseHTML).each(function (idx, el) {\r\n                if ($(el).text() === 'Coupon Discount') {\r\n                    savings = Number($(el).next().text().replace(\/[^0-9|.]\/g, ''));\r\n                }\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n\r\n};",
	"framedenim": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.order-summary__emphasis:contains(\"$\"):eq(0)').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.order-summary__emphasis:contains(\"$\"):eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"framesdirect": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n\r\n      $.each(data, function () {\r\n        if (object[this.name] !== undefined) {\r\n          if (!object[this.name].push) {\r\n            object[this.name] = [object[this.name]];\r\n          }\r\n\r\n          object[this.name].push(this.value || '');\r\n        } else {\r\n          object[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return object;\r\n    };\r\n  },\r\n  __prepareUrl: function () {\r\n    var applyUrl = this.isCartPage() ? 'https:\/\/www.framesdirect.com\/ssl\/cart_summary.aspx' : 'https:\/\/shopping.framesdirect.com\/ssl\/checkout_billing.aspx';\r\n    var applyUrlElement = $('#__jpApplyCouponUrl');\r\n\r\n    if (applyUrlElement.length < 1) {\r\n      $('<input>').attr({\r\n        id: '__jpApplyCouponUrl',\r\n        value: applyUrl,\r\n        type: 'hidden'\r\n      }).appendTo('body');\r\n    }\r\n  },\r\n  prepare: function (action, code) {\r\n    var formData = $('#aspnetForm').serializeObject();\r\n\r\n    if (action === 'applyCouponUrl' && this.isCartPage()) {\r\n      formData.ctl00$ContentPlaceHolderProductDisplay$txtPromotionCode = code;\r\n    } else if (action === 'applyCouponUrl' && !this.isCartPage()) {\r\n      formData.ctl00$ContentPlaceHolderBody$wuc_promotion_gift_card_info$txtPromoCode = code;\r\n      formData.ctl00$ContentPlaceHolderBody$wuc_promotion_gift_card_info$ibPromoCodeUpdate = 'Apply Promo';\r\n    } else {\r\n      formData = false;\r\n    }\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = this.isCartPage() ? parseFloat($('#cart-saved-frame:contains(\"Savings\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) : parseFloat($('#cart-saved-total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings >= this.getOldSavings(),\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && this.isCartPage()) {\r\n      $('#ctl00_ContentPlaceHolderProductDisplay_txtPromotionCode').val(bestCode);\r\n      $('#ctl00_ContentPlaceHolderProductDisplay_imgbtnPromotionCode').click();\r\n    } else if (bestCode && !this.isCartPage()) {\r\n      $('#ctl00_ContentPlaceHolderBody_wuc_promotion_gift_card_info_txtPromoCode').val(bestCode);\r\n      $('#ctl00_ContentPlaceHolderBody_wuc_promotion_gift_card_info_ibPromoCodeUpdate').click();\r\n    }\r\n  },\r\n  getOldSavings: function () {\r\n    var oldSavings = $('#cart-saved-frame:contains(\"Savings\")').length ? parseFloat($('#cart-saved-frame:contains(\"Savings\")').text().replace(\/[^0-9|.]\/g, '')) : 0;\r\n\r\n    if (!this.isCartPage()) {\r\n      oldSavings = $('#cart-saved-total').length ? parseFloat($('#cart-saved-total').text().replace(\/[^0-9|.]\/g, '')) : 0;\r\n    }\r\n\r\n    return oldSavings;\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/ssl\/cart_summary.aspx';\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"francescas": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.ml-basket-column.ml-basket-total-value.ml-basket-you-saved-value', responseHTML).html().replace('$', ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n\r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n\r\n};",
	"francosarto": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.right.discount-text', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  isCartPage: function () {\r\n    return \/Cart\/.test(location.href);\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      if (this.isCartPage()) {\r\n        $('#PromoCode').val(bestCode);\r\n        $('#submitPromoCode')[0].click();\r\n        setTimeout(location.reload.bind(location), 1500);\r\n      }\r\n      else {\r\n        $('.icon.icon-arrow')[0].click();\r\n        $('#promoCodeInput').val(bestCode);\r\n        $('.button.js-submit-promo-btn')[0].click();\r\n        setTimeout(location.reload.bind(location), 1500);\r\n      }\r\n    }\r\n  }\r\n};",
	"frankandoak": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $(\"#discount\").val(code);\r\n      $(\"#apply_discount\").click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.checkout__discount__remove').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 3700);\r\n          }\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($(\".checkout__totals tbody > tr:eq(1) > td:contains('Discount')\").next().text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#discount').val(bestCode);\r\n      $('#apply_discount').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"franklinplanner": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/shop.franklinplanner.com\/store\/checkout\/includes\/promotionalCodeClaim.jsp';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n    if (action === 'applyCouponUrl') {\r\n      data = {\r\n        _DARGS: '\/store\/checkout\/includes\/promotionalCodeClaim.jsp',\r\n        _dyncharset: 'UTF-8',\r\n        _dynSessConf: $(\"input[name='_dynSessConf']\").val(),\r\n        '\/atg\/commerce\/promotion\/CouponFormHandler.jsonRequest': 'true',\r\n        '_D:\/atg\/commerce\/promotion\/CouponFormHandler.jsonRequest': '',\r\n        '\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode': code,\r\n        '_D:\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode': '',\r\n        '\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon': 'true',\r\n        '_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon': '',\r\n        '_DARGS: \/store\/checkout\/includes\/promotionalCodeClaim.jsp': ''\r\n      };\r\n\r\n      return data;\r\n    }\r\n    \r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.productTotalTableNew td:contains(\"Order Discount\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"frankonia": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.fr-basket-summary__value:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"fredericks": "var ExternalProvider = {\r\n    waitTimeout: null,\r\n\r\n    prepare: function (type, code) {\r\n\r\n        if(type === 'injectCoupon') {\r\n            $('.apply-coupon-text:contains(\"Apply Coupon\")').click();\r\n\r\n            var $couponCode = $('input[name=\"couponCode\"]');\r\n            $couponCode.val(code);\r\n            $couponCode.get(0).dispatchEvent(new Event(\"input\", { bubbles: true }));\r\n            $('.cart-coupon button.btn').click();\r\n        } else {\r\n            $('.apply-coupon-text:contains(\"Remove Coupon\")').click();\r\n        }\r\n    },\r\n\r\n    whenReady: function(step, next) {\r\n\r\n        setTimeout(function() {\r\n\r\n            if($('.cart-submit > div').eq(0).hasClass('ng-hide')) next();\r\n            else ExternalProvider.whenReady(step, next);\r\n        }, 200);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var $response = $.parseHTML(response),\r\n            $cartTotal = $('.cart-financials li', $response),\r\n            codeFound = false, savings = 0.00, $item;\r\n\r\n        $cartTotal.each(function() {\r\n            $item = $('span', $(this));\r\n\r\n            if($item.eq(0).text().toLowerCase().indexOf(code.toLowerCase()) !== -1) {\r\n\r\n                codeFound = true;\r\n                savings = parseFloat($item.eq(1).text().replace(\/[$-]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    }\r\n};",
	"fredmeyerjewelers": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.FMJ_cart-total-value').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.FMJ_cart-total-value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"freecountry": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"freeflyapparel": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"freemans": "var ExternalProvider = {\r\n  isCheckoutPage: function () {\r\n    return \/co_confirm.asp\/.test(location.pathname);\r\n  },\r\n  isCartPage: function () {\r\n    return \/bag.asp\/.test(location.pathname);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.totalsSummaryPriceContainer:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && this.isCartPage()) {\r\n      $('.offerTrigger').click();\r\n      $('#promoEntry').val(bestCode);\r\n      $('#promoApplyButton').click();\r\n    } else if (bestCode && this.isCheckoutPage()) {\r\n      $('#promoEntry').val(bestCode);\r\n      $('a.SecondaryButton').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  }\r\n};",
	"freepeople": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"freetaxusa": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    function serializeObject(a) {\r\n      var o = {};\r\n\r\n      $.each(a, function () {\r\n        o[this.name] = this.value || '';\r\n      });\r\n\r\n      return o;\r\n    }\r\n\r\n    var formDataArray = $('#taxForm ').serializeArray();\r\n    var data = serializeObject(formDataArray);\r\n\r\n    data.discount_code = code;\r\n    data.button_id = 'BUTTON_DONE';\r\n\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.summary_current:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#products > .box > div:eq(1) > a')[0].click();\r\n    }\r\n  }\r\n};",
	"frenchconnection": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var ApplyUrlInput = $('#___jpApplyUrl');\r\n    var ApplyUrl = this.isCartPage() ? 'https:\/\/usa.frenchconnection.com\/basket.htm' : 'https:\/\/usa.frenchconnection.com\/checkout\/order_summary.htm';\r\n\r\n    if (!ApplyUrlInput.length) {\r\n      ApplyUrlInput = document.createElement('input');\r\n      ApplyUrlInput.id = '___jpApplyUrl';\r\n      ApplyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n      ApplyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    ApplyUrlInput.attr('value', ApplyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      if (this.isCartPage()) {\r\n        data = {\r\n          __EVENTTARGET: 'ctl00$ctl00$globalmaincontent$mainContent$lbtnUpdateBasket',\r\n          __EVENTARGUMENT: $('#__EVENTARGUMENT').val(),\r\n          __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n          __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n          sli_search_1: '',\r\n          'mobile-search': '',\r\n          ctl00$ctl00$ctl05$txtLogonId: '',\r\n          ctl00$ctl00$ctl05$txtPassword: '',\r\n          ctl00$ctl00$ctl05$txtRegisterLogonId: '',\r\n          ctl00$ctl00$ctl05$ddlCustomerTitle: '',\r\n          ctl00$ctl00$ctl05$txtRegisterFirstName: '',\r\n          ctl00$ctl00$ctl05$txtRegisterLastName: '',\r\n          ctl00$ctl00$ctl05$txtDateOfBirth: '',\r\n          ctl00$ctl00$ctl05$txtRegisterTelephone: '',\r\n          ctl00$ctl00$ctl05$txtMobileNumber: '',\r\n          ctl00$ctl00$ctl05$txtRegisterPassword: '',\r\n          ctl00$ctl00$ctl05$txtRegisterConfirmPassword: '',\r\n          ctl00$ctl00$ctl05$txtPasswordHint: '',\r\n          ctl00$ctl00$ctl05$chkReceiveEmails: 'on',\r\n          ctl00$ctl00$globalmaincontent$mainContent$rptBasketLineItem$ctl01$ddlQuantity: $('.basketqty').find(':selected').text(),\r\n          ctl00$ctl00$globalmaincontent$mainContent$txtCouponsAndVouchers: code,\r\n          'wishlist-popup-move-input': ''\r\n        };\r\n\r\n        return data;\r\n      }\r\n\r\n      data = {\r\n        __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n        __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n        ctl00$ctl00$globalmaincontent$maincontent$promoCode: code,\r\n        ctl00$ctl00$globalmaincontent$maincontent$submitCode: 'Submit code'\r\n      };\r\n\r\n      return data;\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = 0;\r\n    var promoCodeCnt = $('.basket-promo-codes ~ul', responseHTML).length;\r\n\r\n    if (this.isCartPage()) {\r\n      savings = parseFloat($('#basket_dis', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    } else if (promoCodeCnt > 0) {\r\n      savings = parseFloat($('.summary_basket_table tr:eq(2)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCartPage: function () {\r\n    return \/basket\/.test(location.href);\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"frenchcustom": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"Checkout\", Shopify.Checkout.token);';\r\n        scriptContent += 'body.setAttribute(\"shopId\", __st.a);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var Checkout = $('body').attr('Checkout');\r\n        var shopId = $('body').attr('shopId');\r\n        var ApplyUrlInput = $('#___jpApplyUrl');\r\n        var ApplyUrl = 'https:\/\/frenchcustom.fr\/' + shopId + '\/checkouts\/' + Checkout;\r\n        var resultUrl = 'https:\/\/frenchcustom.fr\/' + shopId + '\/checkouts\/' + Checkout + '?step=contact_information';\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('input');\r\n            ApplyUrlInput.id = '___jpApplyUrl';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        ApplyUrlInput.attr('value', ApplyUrl);\r\n        ApplyUrlInput.attr('data-value', resultUrl);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.reduction-code__text:contains(\"-\") ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.field__input-btn.btn').removeAttr('disabled');\r\n            $('.field__input-btn.btn').click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"frenchtoast": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl;\r\n\r\n    if (this.isCheckoutPage()) {\r\n      var str = jQuery('#returnUrl').val();\r\n      var index = str.lastIndexOf('\/');\r\n      var result = str.substring(index + 1);\r\n\r\n      applyUrl = 'https:\/\/www.frenchtoast.com\/api\/commerce\/orders\/' + result;\r\n    } else {\r\n      applyUrl = 'https:\/\/www.frenchtoast.com\/api\/commerce\/carts\/' + $(\"input[name='id']\").val();\r\n    }\r\n\r\n    applyUrl += '\/coupons\/CLAIMCODE';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var savings = (response.discountTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCheckoutPage: function () {\r\n    return \/checkout\/.test(location.href);\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"freshpair": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.total-recap__final-price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.total-recap__final-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"freshtrends": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsRow = $('tr:contains('+code+')', responseHTML);\r\n        var savings = parseFloat(savingsRow.text().substring(savingsRow.text().indexOf(\"$\")).replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        if(savings){\r\n            \/\/ We get the clearCouponUrl in the response, so making an AJAX request here\r\n            $.ajax({\r\n                url: $('a', savingsRow).attr('href'),\r\n                type: 'GET',\r\n                async: false\r\n            })\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        if ($('.cart-totals').length) {\r\n            location.assign('https:\/\/www.freshtrends.com\/index.php?page=cart')\r\n        } else {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"fressnapf": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.orderDiscounts.value);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"voucherCode\"]').val(bestCode);\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n            $('input[name=\"voucherCode\"]').get(0).dispatchEvent(changeEvent);\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n            $('button[data-type=\"voucher\"]').get(0).dispatchEvent(clickEvent);\r\n\r\n        }\r\n    }\r\n};",
	"frette": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var oldTotal = parseFloat($('.total-amount-price-cart').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat(response.totals.grandTotal.replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.frette.com\/on\/demandware.store\/Sites-Frette-Site\/en_US\/Cart-RemoveCouponLineItem?code=' + code + '&uuid=' + response.totals.discounts[0].UUID,\r\n            type: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"frey": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n  \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.field__input-btn').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"fridgefilters": "var ExternalProvider = {\r\n    parse: function(response){\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function(bestCode){\r\n        if(bestCode){\r\n            location.reload();\r\n        }\r\n    }\r\n}",
	"fritzberger": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#cart_sum_actionvoucher', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $(\"#voucher-code\").val(bestCode);\r\n            $(\".checkout_code__aktionscode_submit\").click();\r\n        }\r\n    }\r\n};",
	"fruitbouquets": "var ExternalProvider = {\r\n  init: function () {\r\n    $piggyJq.fn.serializeObject = function () {\r\n      var o = {};\r\n      var a = this.serializeArray();\r\n      $piggyJq.each(a, function () {\r\n        if (o[this.name] !== undefined) {\r\n          if (!o[this.name].push) {\r\n            o[this.name] = [o[this.name]];\r\n          }\r\n          o[this.name].push(this.value || '');\r\n        } else {\r\n          o[this.name] = this.value || '';\r\n        }\r\n      });\r\n      return o;\r\n    };\r\n  },\r\n  prepare: function (actionType, code) {\r\n    var form = $('#cart-items-form');\r\n    var data = form.serializeObject();\r\n\r\n    if (actionType === 'applyCouponUrl') {\r\n      data.appliedPromoCodes = code;\r\n      data.promoCode = code;\r\n      return data;\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#promotionAmt', responseHTML).val().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCode').val(bestCode);\r\n      var s = document.createElement('script');\r\n      s.type = 'text\/javascript';\r\n      var code = `jQuery('#promoCode').trigger('change');jQuery('a[name=\"Apply Promotion Button\"]').click();`;\r\n      s.appendChild(document.createTextNode(code));\r\n      document.body.appendChild(s);\r\n    }\r\n  }\r\n};",
	"frys": "var ExternalProvider = {\r\n    prepare: function (actionType, code) {\r\n        var $form = $('form:has(#couponCode)');\r\n        var $button = $form.find('[type=submit]');\r\n        var data = this.serializeObject($form.serializeArray());\r\n\r\n        data['r=coupon,c=code'] = code;\r\n\r\n        if ($button.length) {\r\n            data[$button.attr('name')] = $button.attr('value');\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var selector = '#orderDetails .font_lg, #checkoutCon .text-left:contains(Total)';\r\n        var priceNode = $(selector);\r\n        var oldPrice;\r\n        var newPrice;\r\n\r\n        if (priceNode.hasClass('text-left')) {\r\n            oldPrice = parseFloat($(selector).next().text().replace(\/[^0-9|.]\/g, ''));\r\n            newPrice = parseFloat($(selector, responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n        } else {\r\n            oldPrice = parseFloat($(selector).text().replace(\/[^0-9|.]\/g, ''));\r\n            newPrice = parseFloat($(selector, responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#couponCode').val(bestCode)\r\n                .siblings('button')\r\n                .click();\r\n            $('input[name=\"a=APPLY_STORE_COUPON,w=CHECKOUT\"]').click();\r\n        }\r\n    },\r\n    serializeObject: function (a) {\r\n        var o = {};\r\n\r\n        $.each(a, function () {\r\n            o[this.name] = this.value || '';\r\n        });\r\n\r\n        return o;\r\n    }\r\n};",
	"fsastore": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.DiscountTotal * -1);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"functionalremedies": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"funkypigeon": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order_summary_line span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"furniturevillage": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-coupons>div:contains(-)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('a.cart-coupon-link')[0].click();\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n\r\n            var s = document.createElement('script');\r\n\r\n            s.type = 'text\/javascript';\r\n            s.id = 'apply';\r\n\r\n            var code = \"$('#dwfrm_cart_couponCode').trigger('change');$('#add-coupon').click();\";\r\n\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n            $('#apply').remove();\r\n        }\r\n    }\r\n};",
	"futterplatzde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n      var responseHTML = $.parseHTML(response);\r\n      var savings = parseFloat($('.color-green .ta-right', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100; \r\n\r\n      return {\r\n        success: savings > 0,\r\n        savings: Number.isNaN(savings) ? 0.00 : savings\r\n      };\r\n    },\r\n    complete: function (bestCode) {\r\n      if (bestCode) location.reload();\r\n    }\r\n  };",
	"fuxtecde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.panel--td.column--total-price.block.is--align-right', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.add-voucher--field').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        }\r\n    }\r\n};",
	"fye": "var ExternalProvider = {\r\n    queueName: '_cfq',\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var $response = $.parseHTML(response);\r\n        var $couponApplied = $('.codesearch-container .codeSearch', $response);\r\n        var codeFound = false;\r\n        var savings = 0.00;\r\n        var codeRemoveUrl = false;\r\n        var $this;\r\n\r\n        $couponApplied.each(function () {\r\n            $this = $(this);\r\n\r\n            if ($this.text().indexOf('Promotions') !== -1 && $this.text().toLowerCase().indexOf(code.toLowerCase()) !== -1) {\r\n                codeFound = true;\r\n                codeRemoveUrl = $('a', $this).attr('href');\r\n            }\r\n        });\r\n\r\n        if (codeFound) {\r\n            savings = parseFloat($('.codesearch-container', $response).eq(0).next().text()\r\n                .replace(\/[^0-9|,]\/g, '')\r\n                .replace(\/,\/g, '.'));\r\n        }\r\n\r\n        if (codeRemoveUrl) {\r\n            var queue = $(document).queue(this.queueName);\r\n\r\n            queue.unshift(function (next) {\r\n                $.ajax({\r\n                    type: 'GET',\r\n                    url: codeRemoveUrl,\r\n                    cache: false,\r\n                    dataType: 'html',\r\n                    success: function () {\r\n                        next();\r\n                    },\r\n                    error: function () {\r\n                        next();\r\n                    }\r\n                });\r\n            });\r\n\r\n            $(document).queue(this.queueName, queue);\r\n        }\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"gadventures": "var ExternalProvider = {\r\n  _prepareAuthCookie: function () {\r\n    var authCookie = document.cookie.toString().split(';');\r\n    var auth = authCookie.toString().split('=')[1].replace(', _dy_c_exps', '');\r\n    var token = $('#___jpToken');\r\n\r\n    if (!token.length) {\r\n      token = document.createElement('input');\r\n      token.id = '___jpToken';\r\n      token.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(token);\r\n      token = $('#___jpToken');\r\n    }\r\n\r\n    token.attr('value', auth);\r\n  },\r\n  parse: function (response) {\r\n    var discountPercent = (response[0].discount_percent) \/ 100;\r\n    var price = parseFloat($('.price:eq(0)').text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = price * discountPercent;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareAuthCookie();",
	"gaiam": "var ExternalProvider = {\r\n    prepare: function () {\r\n        this._oldTotal = parseFloat($('span[data-checkout-payment-due-target]').attr('data-checkout-payment-due-target')) \/ 100;\r\n\r\n        if ($('.tag__button').length > 0) {\r\n            var absOldTotal = parseFloat($('span[data-checkout-payment-due-target]').attr('data-checkout-payment-due-target')) \/ 100;\r\n\r\n            $.ajax({\r\n                url: $('.order-summary__section.order-summary__section--discount form:eq(0)').attr('action'),\r\n                type: 'POST',\r\n                async: false,\r\n                data: {\r\n                    authenticity_token: $('input[name=\"authenticity_token\"]').val(),\r\n                    utf8: $('input[name=\"utf8\"]').val(),\r\n                    'checkout[clear_discount]': 1,\r\n                    _method: 'patch'\r\n                },\r\n                success: function (res) {\r\n                    var resHTML = $.parseHTML(res);\r\n\r\n                    absOldTotal = parseFloat($('span[data-checkout-payment-due-target]', resHTML).attr('data-checkout-payment-due-target')) \/ 100;\r\n                }\r\n            });\r\n            this._oldTotal = absOldTotal;\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var validCoupon = $('.tags-list .reduction-code', responseHTML).text().toLowerCase().includes(code.toLowerCase());\r\n        var oldTotal = this._oldTotal;\r\n        var newTotal = parseFloat($('span[data-checkout-payment-due-target]', responseHTML).attr('data-checkout-payment-due-target')) \/ 100;\r\n        var savings = validCoupon ? oldTotal - newTotal : 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"galaxyperfume": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                MiniGender: $('input[name=\"MiniGender\"]').val(),\r\n                SubTotal: $('input[name=\"SubTotal\"]').val(),\r\n                Total: $('input[name=\"Total\"]').val(),\r\n                Shipping: $('input[name=\"Shipping\"]').val(),\r\n                IDList: $('input[name=\"IDList\"]').val(),\r\n                QtyList: $('input[name=\"QtyList\"]').val(),\r\n                TotalItems: $('input[name=\"TotalItems\"]').val(),\r\n                Cart_Items: $('input[name=\"Cart_Items\"]').val(),\r\n                CC: $('input[name=\"CC\"]').val(),\r\n                SUBMIT_Checkout: $('input[name=\"SUBMIT_Checkout\"]').val(),\r\n                Action: $('input[name=\"Action\"]').val(),\r\n                ShipFName: $('input[name=\"ShipFName\"]').val(),\r\n                ShipLName: $('input[name=\"ShipLName\"]').val(),\r\n                EMail: $('input[name=\"EMail\"]').val(),\r\n                CompanyName: $('input[name=\"CompanyName\"]').val(),\r\n                ShipAddress: $('input[name=\"ShipAddress\"]').val(),\r\n                ShipAddress2: $('input[name=\"ShipAddress2\"]').val(),\r\n                ShipCity: $('input[name=\"ShipCity\"]').val(),\r\n                ShipState: $('input[name=\"ShipState\"]').val(),\r\n                ShipZip: $('input[name=\"ShipZip\"]').val(),\r\n                ShipCountry: $('select[name=\"ShipCountry\"] option:first-child').val(),\r\n                Shipping_Display1: $('input[name=\"Shipping_Display1\"]').val(),\r\n                Shipping_Display2: $('input[name=\"Shipping_Display2\"]').val(),\r\n                Express_Display1: $('input[name=\"Express_Display1\"]').val(),\r\n                International_Display1: $('input[name=\"International_Display1\"]').val(),\r\n                Phone: $('input[name=\"Phone\"]').val(),\r\n                HowShip: $('select[name=\"HowShip\"] option:first-child').val(),\r\n                UseShippingForBilling: $('input[name=\"UseShippingForBilling\"]').val(),\r\n                FName: $('input[name=\"FName\"]').val(),\r\n                LName: $('input[name=\"LName\"]').val(),\r\n                Address: $('input[name=\"Address\"]').val(),\r\n                Zip: $('input[name=\"Zip\"]').val(),\r\n                CCNumber: $('input[name=\"CCNumber\"]').val(),\r\n                SecurityCode: $('input[name=\"SecurityCode\"]').val(),\r\n                CardMonth: $('select[name=\"CardMonth\"] option:first-child').val(),\r\n                CardYear: $('select[name=\"CardYear\"] option:first-child').val(),\r\n                CouponCode: code,\r\n                PEID: '',\r\n                comments: ''\r\n            };\r\n            return data;\r\n        }\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.checkout-subtotal:contains(\"(\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"CouponCode\"]').val(bestCode);\r\n            $('.continue').click();\r\n        }\r\n    }\r\n};",
	"galeriakaufhof": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.cart.lineItems[0].rebates[0].amount.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"galerieslafayette": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.article-number:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"galerieslafayettefr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.article-number:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"gallerycollection": "var ExternalProvider = {\r\n    prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"id\", window.ORDER_ITEMS[0].id);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var id = $('body').attr('id');\r\n\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = 'https:\/\/www.gallerycollection.com\/api\/cart\/update\/' + id + '\/priority-code\/CLAIMCODE';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('.col-sm-2.text-center.hidden-xs span').text().replace('$', ''));\r\n        var newTotal = parseFloat(response.itemCharge);\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider.prepareUrl();",
	"game": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.appliedAmount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"gamesdeal": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"gamestop": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n    \tconst responseHTML = $.parseHTML(response);\r\n    \tconst savings = parseFloat($('.discount td', responseHTML).text().replace('$', '').replace('-', ''));\r\n    \tconst isCodeValid = $('.valuevoidmsg strong', responseHTML).text() === code;\r\n    \tif (savings && isCodeValid) {\r\n    \t\treturn {\r\n    \t\t\tsuccess: true,\r\n    \t\t\tsavings: savings\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSaving){\r\n        location.reload(true)\r\n    }\r\n}",
	"gamiss": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.toCheckOut .row3 .my_shop_price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.toCheckOut .row3 .my_shop_price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload()\r\n        }\r\n    }\r\n};",
	"gandermountain": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('#code2', responseHTML).val().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('#updated-total-amount').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('#updated-total-amount', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings){\r\n\r\n        $('#code2').val(bestCode);\r\n        $('#apply-code-btn')[0].click();\r\n    }\r\n}",
	"gandermountain.mobile": "var ExternalProvider = {\r\n  _numberCleanRegexp: \/[^\\d.\\-]\/g,\r\n\r\n  _sortDesc: function (a, b) {\r\n    return b - a;\r\n  },\r\n  _parseNodeFloat: function (node) {\r\n    return parseFloat(node.innerText.replace(ExternalProvider._numberCleanRegexp, '')) || 0;\r\n  },\r\n\r\n  parse: function (response, status, $xhr, code) {\r\n    var fail = {\r\n      success: false,\r\n      savings: 0\r\n    };\r\n\r\n    var $response = $.parseHTML(response);\r\n    if ($('.promoError', $response).length) {\r\n      return fail;\r\n    }\r\n\r\n    var codeApplied = $('input[name=\"source_code\"]', $response)\r\n      .toArray()\r\n      .some(function (node) {\r\n        return (node.value + '').toUpperCase().trim() === code.toUpperCase();\r\n      });\r\n    if (!codeApplied) {\r\n      return fail;\r\n    }\r\n\r\n    var savings = $('.discount_amount', $response)\r\n      .toArray()\r\n      .map(this._parseNodeFloat)\r\n      .map(function (num) {\r\n        return num * -1;\r\n      })\r\n      .sort(this._sortDesc);\r\n\r\n    if (!savings.length || savings[0] <= 0) {\r\n      return fail;\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      savings: savings[0]\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode, bestSaving) {\r\n    var $input = $('input[name=\"source_code\"]');\r\n    $input.val(bestCode);\r\n    $input.closest('form').submit();\r\n  }\r\n};",
	"gandys": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('button[title=\"Apply Coupon\"]').click();\r\n    }\r\n  }\r\n};",
	"gap": "var ExternalProvider = {\r\n    prepareUrl: function () {\r\n        var id = this.getCookie('customerId').replace('|||', '') || this.getCookie('unknownShopperId').replace('|||', '');\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = 'https:\/\/secure-www.gap.com\/buy\/resources\/shoppingBag\/v1\/' + id;\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    getCookie: function (cookieName) {\r\n        var name = cookieName + '=';\r\n        var ca = document.cookie.split(';');\r\n        for (var i = 0; i < ca.length; i++) {\r\n            var c = ca[i];\r\n            while (c.charAt(0) === ' ') {\r\n                c = c.substring(1);\r\n            }\r\n            if (c.indexOf(name) === 0) {\r\n                return decodeURIComponent(c.substring(name.length, c.length));\r\n            }\r\n        }\r\n        return '';\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat((response.shoppingBag.activeItems[0].totalSavingsAmount.replace('$', '')));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCheckoutPage: function () {\r\n        return \/checkout\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (!this.isCheckoutPage()) {\r\n                $('.promotion-input').val(bestCode);\r\n                var changeEvent = new Event('change', {\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n                $('.promotion-input').get(0).dispatchEvent(changeEvent);\r\n\r\n                var clickEvent = new MouseEvent('click', {\r\n                    view: window,\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n                $('.apply-button').get(0).dispatchEvent(clickEvent);\r\n            } else {\r\n                $('#toggleForm').click();\r\n                $('input[name=\"code\"]').val(bestCode);\r\n                var changeEvent = new Event('change', {\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n                $('input[name=\"code\"]').get(0).dispatchEvent(changeEvent);\r\n\r\n                var clickEvent = new MouseEvent('click', {\r\n                    view: window,\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n                $('.button__redeem').get(0).dispatchEvent(clickEvent);\r\n            }\r\n        }\r\n    }\r\n};\r\nExternalProvider.prepareUrl();",
	"gapfactory": "var ExternalProvider = {\r\n    _init: function () {\r\n        var ShoppingId = this.getCookie('unknownShopperId').replace(\/[^a-z0-9]\/gi, '');\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = 'https:\/\/secure-www.gapfactory.com\/buy\/resources\/shoppingBag\/v1\/' + ShoppingId;\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    getCookie: function (cookieName) {\r\n        var name = cookieName + '=';\r\n        var ca = document.cookie.split(';');\r\n\r\n        for (var i = 0; i < ca.length; i++) {\r\n            var c = ca[i];\r\n\r\n            while (c.charAt(0) === ' ') {\r\n                c = c.substring(1);\r\n            }\r\n\r\n            if (c.indexOf(name) === 0) {\r\n                return decodeURIComponent(c.substring(name.length, c.length));\r\n            }\r\n        }\r\n\r\n        return '';\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.shoppingBag.appliedPromotions[0].promoDiscountTotal.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCheckoutPage: function () {\r\n        return \/checkout\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (!this.isCheckoutPage()) {\r\n                $('input[ng-model=\"promoCode\"]').val(bestCode);\r\n                var s = document.createElement('script');\r\n                s.type = 'text\/javascript';\r\n                var code = \"jQuery('input[ng-model=\\\"promoCode\\\"]').trigger('change');jQuery('input[value=\\\"APPLY\\\"]').click();\";\r\n                s.appendChild(document.createTextNode(code));\r\n                document.body.appendChild(s);\r\n            } else {\r\n                location.reload();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._init();",
	"garageclothing": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response.cartSummary),\r\n            codeFound = response.success;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('.estTotals .cartSummaryAmounts').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('.estTotals .cartSummaryAmounts', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"gardenbirduk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"garden": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var newCurrency = currency;\r\n    var selector = $('#polyglotLanguageSwitcher .current').text();\r\n\r\n    if (selector.match(\/(GBP)\/g)) {\r\n      locale = localeMapping.GB;\r\n      newCurrency = 'GBP';\r\n    } else if (selector.match(\/(EUR)\/g)) {\r\n      locale = localeMapping.DE;\r\n      newCurrency = 'EUR';\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  }\r\n};",
	"gardentrading": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\") ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.discount-form-toggler').click();\r\n            $('#code').val(bestCode);\r\n            $('#basket-discount-submit').click();\r\n        }\r\n    }\r\n};",
	"garmin": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.gc__cart__item__price-each__el.gc__cart__item__price-each__el--savings .amount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"gartentotal": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('.panel--td.column--total-price.block', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.add-voucher--field').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        }\r\n    }\r\n};",
	"gatineau": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.basket-amount').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('.basket-amount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"gbpostersuk": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = '';\r\n    var storeCurrency = '';\r\n\r\n    if ($('#website-changer').find(':selected').text() === 'GB') {\r\n      locale = localeMapping.GB;\r\n      storeCurrency = amount.toLocaleString(locale, { style: 'currency', currency: 'GBP', minimumFractionDigits: minimumFractionDigits });\r\n    } else {\r\n      locale = localeMapping.DE;\r\n      storeCurrency = amount.toLocaleString(locale, { style: 'currency', currency: currency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n\r\n    return storeCurrency;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(-)', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"gbyguess": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.estTotal .text-right').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('.estTotal .text-right', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSaving){\r\n\t\t$('#PromotionalCode').val(bestCode);\r\n        $('#promotionForm > input.btn-cta-secondary').click();\r\n    }\r\n}",
	"geapplianceparts": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n        function serializeObject(a) {\r\n            var o = {};\r\n            $.each(a, function() {\r\n                o[this.name] = this.value || '';\r\n            });\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('#shoppingCartForm').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        data['dealCodeMap'] = 'CCPROMO_DISCOUNT';\r\n        data['dealCodeFlag'] = 'Y';\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data['dealCode'] = code;\r\n            data['dealCodeInput'] = code;\r\n        } else {\r\n            data['dealCode'] = 'X___X';\r\n            data['dealCodeInput'] = 'X___X';\r\n        }\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('#cart-total-price').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('#cart-total-price', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            $('#dealCodeInput').val(bestCode);\r\n            $('#applyDiscount')[0].click();\r\n        }\r\n    }\r\n};",
	"gearbest": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var newCurrency = currency;\r\n    var locale = localeMapping.US;\r\n\r\n    if (document.cookie.match('gb_currencyCode=GBP')) {\r\n      newCurrency = 'GBP';\r\n      locale = localeMapping.GB;\r\n    } else if (document.cookie.match('gb_currencyCode=EUR')) {\r\n      newCurrency = 'EUR';\r\n      locale = document.cookie.match('gb_countryCode=FR') ? localeMapping.FR : localeMapping.DE;\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action === 'applyCouponUrl') {\r\n      var data = {\r\n        addressId: $(document).text().match(\/\"addressId\":([0-9]+)\/)[1],\r\n        couponCode: code\r\n      };\r\n\r\n      return JSON.stringify(data);\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var rawSavings = parseFloat(response.data.total.discountAmount);\r\n    var multiplier;\r\n    var criteria;\r\n    var selector = $('div[class*=\"totalPriceValue\"]').text().replace(\/[0-9|.|,|-]\/g, '');\r\n\r\n    switch (selector) {\r\n      case '\u20ac':\r\n        criteria = \/\"currencyRate\":([0-9|.]+),\"currencyCode\":\"EUR\",\/;\r\n        break;\r\n      case '\u00a3':\r\n        criteria = \/\"currencyRate\":([0-9|.]+),\"currencyCode\":\"GBP\",\/;\r\n        break;\r\n      default:\r\n        criteria = \/\"currencyRate\":([0-9|.]+),\"currencyCode\":\"USD\",\/;\r\n        break;\r\n    }\r\n\r\n    $.ajax({\r\n      url: 'https:\/\/order.gearbest.com\/multiple-lang',\r\n      type: 'GET',\r\n      async: false,\r\n      success: function (res) {\r\n        multiplier = parseFloat(res.match(criteria)[1]);\r\n      }\r\n    });\r\n\r\n    var savings = rawSavings * multiplier;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[placeholder=\"Enter Coupon Code\"]').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[placeholder=\"Enter Coupon Code\"]').trigger('input').trigger('change');\r\n      $('.ckDc_couponApply')[0].click();\r\n    }\r\n  }\r\n};",
	"geekbuying": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.ItemSubtotal - response.GrandTotal);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#txtCouponCode').val(bestCode);\r\n            $('.geekcoud_btn').click();\r\n        }\r\n    }\r\n};",
	"geekbuying.mobile": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.Basket.ItemSubtotal - response.Basket.GrandTotal);\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        $('#txtConponCode').val(bestCode);\r\n        if (bestCode) {\r\n            var clickEvent = document.createEvent('MouseEvents');\r\n            clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\r\n            $('#couponCurrent a').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"gefrode": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.cartSummaryItemValue:first').text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.cartSummaryItemValue:last', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n        var savings = parseFloat(oldTotal - newTotal);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"gid\"]').val(bestCode);\r\n            $('.actionButton:first').click();\r\n        }\r\n    }\r\n};",
	"geileweine": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.row--voucher .column--total-price.block:contains(\"-\")', responseHTML).text().replace(\/,\/g, '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.add-voucher--field').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        }\r\n    }\r\n};",
	"gemofr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.remise', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"gemplers": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().split(\"$\")[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"gemplers.mobile": "var ExternalProvider = {\r\n    parse: function(response,status,$xhr,code){\r\n        var jqObj = $.parseHTML(response.responseText)\r\n        if(this.isCouponApplied(jqObj,code))\r\n            {\r\n                var discount = this.getDiscount(jqObj)\r\n                if(discount>0){\r\n                    return{\r\n                        success:true,\r\n                        savings:discount\r\n                    }\r\n                }\r\n            }\r\n        return {\r\n            success:false,\r\n            savings:0.00\r\n        }    \r\n    },\r\n    isCouponApplied:function(jqObj,code){\r\n        var couponText = $('#ctl00_ctl00_Content_content_ApplyKeycode_lblKeycodeCurrent',jqObj).text();\r\n        var couponCode = (couponText.replace(\/(.*code is)|\\.\/g,'')).trim()\r\n        return (code==couponCode)\r\n    },\r\n    getDiscount: function(jqObj){\r\n        var qty = parseFloat($('#ctl00_ctl00_Content_content_CartDisplay_rpt_ctl01_txtQty',jqObj).val())\r\n        var basePrice = parseFloat($('#ctl00_ctl00_Content_content_CartDisplay_rpt_ctl01_lblUnitPrice :nth-child(2)',jqObj).text().replace(\/[^0-9|\\.]\/g,''))\r\n        var newPrice = parseFloat($('#ctl00_ctl00_Content_content_CartDisplay_rpt_ctl01_lblTodayPrice :nth-child(2)',jqObj).text().replace(\/[^0-9|\\.]\/g,''))\r\n        var discount = qty*(basePrice - newPrice)\r\n        if(discount > 0)\r\n            return discount\r\n       return 0.0;     \r\n\r\n    },\r\n    complete: function(bestCode,bestSavings){\r\n        location.reload();\r\n    }\r\n}",
	"gemvara": "var ExternalProvider = {\r\n  prepare: function (requestType, code) {\r\n    if (requestType === 'applyCouponUrl') {\r\n      return JSON.stringify({ promoCode: code });\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.discount.toString().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"gerardcosmetics": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response['components\/cart\/totals']);\r\n    var savings = parseFloat($('.cart-total-value span:contains(\"-\")', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"germandreamnails": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('.button.buttonArrow-right').click();\r\n        }\r\n    }\r\n};",
	"gerryweber": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var newCurrency = 'USD';\r\n    var url = window.location.pathname;\r\n\r\n    if (url.match(\/de-de|fr-fr\/g)) {\r\n      newCurrency = 'EUR';\r\n      locale = localeMapping[url.match(\/de|fr\/g).shift().toUpperCase()];\r\n    } else if (url.match(\/en-gb\/g)) {\r\n      newCurrency = 'GBP';\r\n      locale = localeMapping.GB;\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-totals__value:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"dwfrm_cart_couponCode\"]').val(bestCode);\r\n      $('button[name=\"dwfrm_cart_addCoupon\"]').click();\r\n    }\r\n  }\r\n};",
	"getthelabel": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.dlist-totals__value:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"gettingpersonal": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.Result.Discount.replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var s = document.createElement('script');\r\n            var code = \"jQuery('#lgVoucherCode').val('\" + bestCode + \"').trigger('change');jQuery('div.hidden-xs form button').click();\";\r\n\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n};",
	"gettington": "\/\/ For the AJAX\r\n$.ajaxSettings.contentType = 'application\/json';\r\n\r\nvar ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var codeFound = response.checkoutPageResponse.orderCollection.PROMO_CODE.toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('#checkoutOrderSummaryOrderTotal').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number(response.checkoutPageResponse.orderSummary.orderTotal) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings){\r\n\r\n        \/\/ Using complete because $.ajax tries to parse the faulty JSON from the server whenever you use 'success'\r\n        $.ajax({\r\n            url: 'https:\/\/www.gettington.com\/api\/order\/promo',\r\n            method: 'PUT',\r\n            dataType: 'application\/json',\r\n            data: JSON.stringify({\r\n                promoCode: bestCode\r\n            }),\r\n            complete: function(){\r\n                location.reload();\r\n            }\r\n        })\r\n    }\r\n\r\n}",
	"gevalia": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('.est-total .value').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('.est-total .value', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n};",
	"gewuerzland": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('.topbar--features span:contains(\"\u20ac\")').text().replace(\/[0-9.,]\/g, '').trim();\r\n\r\n        if (selector.match('\u20ac')) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector.match('\u00a3')) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"ghbass": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = Number($('.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"gherrini": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ghirardelli": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_4', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ghostbed": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-discount .woocommerce-Price-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"giftsforyounow": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    if (action === 'injectCoupon') {\r\n      $('.submenu:eq(1)').show();\r\n      $('#couponField').val(code);\r\n\r\n      var clickEvent = new MouseEvent('click', {\r\n        'view': window,\r\n        'bubbles': true,\r\n        'cancelable': true\r\n      });\r\n      $('#btnAddCoupon').get(0).dispatchEvent(clickEvent);\r\n    }\r\n\r\n    if (action === 'removeInjectedCoupon') {\r\n      var clickEvent = new MouseEvent('click', {\r\n        'view': window,\r\n        'bubbles': true,\r\n        'cancelable': true\r\n      });\r\n      $('.delete-button').get(0).dispatchEvent(clickEvent);\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    var counter = 0;\r\n    var codeApplyTime = setInterval(function () {\r\n      counter += 1;\r\n\r\n      if ($('#wait').is(':hidden') || counter > 30) {\r\n        clearInterval(codeApplyTime);\r\n        next();\r\n      }\r\n    }, 200);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#OrderTotals span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var calcDec = Math.pow(10, 2);\r\n    savings = Math.trunc(savings * calcDec) \/ calcDec;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#couponField').val(bestCode);\r\n      $('#btnAddCoupon').click();\r\n    }\r\n  }\r\n};",
	"gifttree": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($(\".cor_items_price:contains('-$')\", responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"giginewyork": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = false;\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                RefreshFromPopup: $('input[name=\"RefreshFromPopup\"]').val(),\r\n                Quantity1: $('#Quantity1').val(),\r\n                CouponCode: code,\r\n                'btnCouponCode.x': 12,\r\n                'btnCouponCode.y': 14,\r\n                ShipCountry: $('#ShipCountry option:selected').text(),\r\n                ShipState_Required: $('#ShipState_Required').val(),\r\n                ShipState_dropdown: $('#ShipState_dropdown').val(),\r\n                ShipState: $('#ShipState_Row').val(),\r\n                ShipPostalCode: $('#v65-shipping-postcode').val(),\r\n                ShipResidential: $('input[name=\"ShipResidential\"]').val(),\r\n            };\r\n        }\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.carttext.colors_text:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"CouponCode\"]').val(bestCode);\r\n            $('input[name=\"btnCouponCode\"]').click();\r\n        }\r\n    }\r\n};",
	"giglio": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var url = window.location.pathname;\r\n\r\n        if (isEUR = url.match(\/(de|fra)\/g)) {\r\n            currency = 'EUR';\r\n            locale = localeMapping[isEUR.shift().toUpperCase()];\r\n        } else if (url.match(\/gbr\/g)) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var applyUrl = this.isDEPage() ? 'https:\/\/www.giglio.com\/assets\/addToCart.html' : 'https:\/\/www.giglio.com\/assets\/addToCart.html';\r\n        var resultUrl = this.isDEPage() ? 'https:\/\/www.giglio.com\/deu\/warenkorb.html' : 'https:\/\/www.giglio.com\/gbr\/your-cart.html';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        resultUrlInput.attr('value', resultUrl);\r\n    },\r\n    prepare: function (action, code) {\r\n        var data = {};\r\n        var gift = $('input[name=\"gift\"]').val();\r\n        var shipCountry = $('#selCountry option[selected=\"selected\"]').val();\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            data = {\r\n                all: 1,\r\n                gift: gift,\r\n                discount: code,\r\n                shippingCountry: shipCountry,\r\n                rAj: false\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('input[name=\"totDiscount\"]', responseHTML).val());\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isDEPage: function () {\r\n        return location.href.match('\/deu\/');\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"discount\"]').val(bestCode);\r\n            $('input[name=\"discount\"]').next().click();\r\n\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"gillette": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    if (document.getElementById(\"csrf\") === null) {\r\n      const script = document.createElement('script');\r\n      let scriptContent = `\r\n          const csrfInput = document.createElement('input');\r\n          csrfInput.id = 'csrf';\r\n          csrfInput.setAttribute('type', 'hidden');\r\n          csrfInput.setAttribute('value', BCData.csrf_token);\r\n          (document.body || document.head || document.documentElement).appendChild(csrfInput);\r\n        `;\r\n      script.id = 'tmpScript';\r\n      script.appendChild(document.createTextNode(scriptContent));\r\n      (document.body || document.head || document.documentElement).appendChild(script);\r\n    }\r\n    $('#tmpScript').remove();\r\n  },\r\n  parse: function (response) {\r\n    let savings = 0;\r\n    if (response[0].coupons) {\r\n      savings = Math.abs(response[0].coupons[0].discountedAmount);\r\n      this.removeCoupon(response[0].coupons[0].id);\r\n    }\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $.ajax({\r\n        url: 'https:\/\/gillette.com\/remote\/v1\/apply-code',\r\n        type: 'POST',\r\n        headers: {\r\n          'x-xsrf-token': $('#csrf').val()\r\n        },\r\n        data: {\r\n          code: bestCode\r\n        },\r\n        success: function () {\r\n          location.reload();\r\n        }\r\n      })\r\n    };\r\n  },\r\n  removeCoupon: function (couponCode) {\r\n    $.get('https:\/\/gillette.com\/cart.php?action=removecoupon&couponid=' + couponCode);\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"gilt": "var ExternalProvider = {\r\n    _$principalGuid: null,\r\n    init: function () {\r\n        this._$principalGuid = $('<input type=\"hidden\" name=\"pricipalGuid\">').val($('script:contains(\"principalGuid\")').text().match(\/\\'principalGuid\\': \\'(.*)(\\',)\/)[1]).appendTo('body')\r\n    },\r\n    prepare: function () {\r\n        $('<input type=\"hidden\" name=\"pricipalGuid\">').val($('script:contains(\"principalGuid\")').text().match(\/\\'principalGuid\\': \\'(.*)(\\',)\/)[1]).appendTo('body');\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        if (response.order) {\r\n\r\n            var discount = response.order.amounts_for_order.discounts_usd\r\n                ? response.order.amounts_for_order.discounts_usd : 0;\r\n            if (discount > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: discount\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n\r\n        this._$principalGuid.remove();\r\n\r\n        if(bestCode){\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"gilt.mobile": "var ExternalProvider = {\r\n    _$principalGuid: null,\r\n    init: function () {\r\n        this._$principalGuid = $('<input type=\"hidden\" name=\"pricipalGuid\">').val($('script:contains(\"principalGuid\")').text().match(\/\\'principalGuid\\': \\'(.*)(\\',)\/)[1]).appendTo('body')\r\n    },\r\n    prepare: function () {\r\n        $('<input type=\"hidden\" name=\"pricipalGuid\">').val($('script:contains(\"principalGuid\")').text().match(\/\\'principalGuid\\': \\'(.*)(\\',)\/)[1]).appendTo('body');\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        if (response.order) {\r\n\r\n            var discount = response.order.amounts_for_order.discounts_usd\r\n                ? response.order.amounts_for_order.discounts_usd : 0;\r\n            if (discount > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: discount\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n\r\n        this._$principalGuid.remove();\r\n\r\n        if(bestCode){\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"ginalaura": "var ExternalProvider = {\r\n    isCartPage: function () {\r\n        return location.pathname === '\/warenkorb\/';\r\n    },\r\n    init: function () {\r\n        var oldTotalSelector = this.isCartPage() ? '#basketBox > div.totalSum > div.total > span.sumValue' : '#paymentTotal > span.sumValue';\r\n\r\n        this.oldTotal = parseFloat($(oldTotalSelector).text().replace(\/[^0-9]\/g, ''));\r\n    },\r\n    prepare: function (action, code) {\r\n        var clickEvent = new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        });\r\n\r\n        var textInput = this.isCartPage() ? '#cart\\\\:couponForm\\\\:voucher_input' : '#checkoutVoucher\\\\:couponForm\\\\:voucher_input';\r\n        var applyBtn = this.isCartPage() ? '#cart\\\\:couponForm\\\\:addVoucherToCartButton' : '.couponSubmit input[value=\"redeem\"]';\r\n\r\n        if (action === 'injectCoupon') {\r\n            $(textInput).val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $(textInput).trigger('input').trigger('change');\r\n            $(applyBtn).get(0).dispatchEvent(clickEvent);\r\n        }\r\n\r\n        return null;\r\n    },\r\n    whenReady: function (step, next) {\r\n        if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n            setTimeout(function () {\r\n                var maxWait = 200;\r\n                var waited = 0;\r\n                var waitForClose = setInterval(function () {\r\n                    var confirmed = $('#cart\\\\:cart\\\\:repeater\\\\:1\\\\:removeFromCart').length;\r\n\r\n                    if ((confirmed) || (waited > maxWait)) {\r\n                        clearInterval(waitForClose);\r\n                        setTimeout(function () {\r\n                            next();\r\n                        }, 300);\r\n                    }\r\n\r\n                    waited++;\r\n                }, 10);\r\n            }, 50);\r\n        }\r\n    },\r\n    parse: function () {\r\n        var newTotalSelector = this.isCartPage() ? '#basketBox > div.totalSum > div.total > span.sumValue' : '#paymentTotal > span.sumValue';\r\n        var newTotal = parseFloat($(newTotalSelector).text().replace(\/[^0-9]\/g, ''));\r\n        var savings = (this.oldTotal - newTotal) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"giuseppezanotti": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n        var selector = location.pathname;\r\n\r\n        if (selector.match(\/(uk)\/g)) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector.match(\/(de|fr)\/g)) {\r\n            locale = selector.match(\/(de)\/g) ? localeMapping.DE : localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"glamglow": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n\r\n      $('input[name=\"OFFER_CODE\"]').val(code);\r\n      $('input[name=\"OFFER_CODE\"]').get(0).dispatchEvent(changeEvent);\r\n      $('.btn.btn-mini.form-submit').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 3000);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.discount.value:first()').text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"glamuse": "var ExternalProvider = {\r\n    prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isCartPage() ? 'https:\/\/www.glamuse.com\/panier' : 'https:\/\/www.glamuse.com\/recapitulatif';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    isCartPage: function () {\r\n        return location.href.contains('panier');\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.right.nowrap:contains(\"-\")', responseHTML).text().replace(',', '.');\r\n\r\n        savings = parseFloat(savings.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    },\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var selector = $('#current-country').text().trim();\r\n\r\n        if (selector === 'United Kingdom') {\r\n            locale = localeMapping.GB;\r\n            currency = 'GBP';\r\n        } else if (selector === 'Germany') {\r\n            locale = localeMapping.DE;\r\n            currency = 'EUR';\r\n        } else if (selector === 'la France') {\r\n            locale = localeMapping.FR;\r\n            currency = 'EUR';\r\n        }\r\n\r\n        if (this.isCartPage()) {\r\n            if ($('#currency_symbol_right').val().contains('\u20ac')) {\r\n                locale = localeMapping.FR;\r\n                currency = 'EUR';\r\n            }\r\n        } else if ($('#panier_total').text().contains('\u20ac')) {\r\n            locale = localeMapping.FR;\r\n            currency = 'EUR';\r\n        }\r\n\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: currency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};\r\nExternalProvider.prepareUrl();",
	"glasses": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.totale-shopping-bag-wo-taxes').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.totale-shopping-bag-wo-taxes', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      var clickEvent = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n\r\n      $('#promoCode').val(bestCode);\r\n      $('#promoCode').trigger('input').trigger('change');\r\n      $('#ShoppingCart_ApplyPromo_Button').get(0).dispatchEvent(clickEvent);\r\n    }\r\n  }\r\n};",
	"glassesshop": "var ExternalProvider = {\r\n    init: function () {\r\n        $.ajaxSettings.beforeSend = function (xhr) {\r\n            xhr.setRequestHeader('X-Requested-With', {\r\n                toString: function () {\r\n                    return '';\r\n                }\r\n            });\r\n        };\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var $response = $.parseHTML(response);\r\n        var codeFound = false;\r\n        var savings = 0.00;\r\n        var $item;\r\n\r\n        $('.subtotal div p', $response).each(function () {\r\n            $item = $(this);\r\n\r\n            if ($item.text().toLowerCase().indexOf('applied coupon') !== -1) {\r\n                codeFound = true;\r\n                savings = parseFloat($('.col01', $item).text().replace(\/[^0-9|.]\/gim, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"glassesusa": "var ExternalProvider = {\r\n\tparse: function(response, status, $xhr, code)\r\n    {\r\n\t\t\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tvar codeFound = $(\".coupon-table span\",responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >=0;\r\n\t\t\r\n\t\tvar savings = 0.0;\r\n\t\t\t\r\n\t\tif(codeFound){\r\n\t\t\t$(\"#shopping-cart-totals-table tr\",responseHTML).each(function(i,el){\r\n\r\n\t\t\t\tif($(el).text().toLowerCase().indexOf(\"discount\")>=0){\r\n\t\t\t\t\tsavings = Number($(el).children(\"td.a-left\").next().text().replace(\/[^0-9|\\.]\/g, ''));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\treturn {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n        \r\n       \r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\t\t\r\n\t\t\r\n\t\t$(\"#coupon_code\").val(bestCode);\r\n\t\t$(\"#coupon-button-apply\").click();\r\n\r\n    }\r\n    \r\n}",
	"glossyboxde": "var ExternalProvider = {\r\n  prepare: function (type) {\r\n    if (type === 'clearCouponUrl') {\r\n      this.sendAjax(\"https:\/\/www.glossybox.de\/my.basket\", \"GET\", this.clearCoupon.bind(ExternalProvider));\r\n    }\r\n  },\r\n  clearCoupon: function (responseHTML) {\r\n    var couponURL = $('.responsiveBasket_removeItem-discount', responseHTML).attr('href');\r\n    return this.sendAjax(couponURL, \"GET\");\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.responsiveBasket_totalSavingsPrice', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#discountcode').val(bestCode);\r\n      $('#add-discount-code').click();\r\n    }\r\n  },\r\n  sendAjax: function (url, method, callback = null) {\r\n    var responseHTML = '';\r\n    $.ajax({\r\n      url: url,\r\n      type: method,\r\n      async: false,\r\n      success: function (response) {\r\n        responseHTML = $.parseHTML(response);\r\n      }\r\n    });\r\n    return callback !== null ? callback(responseHTML) : true;\r\n  }\r\n};",
	"gnc": "var ExternalProvider = {\r\n  init: function () {\r\n    if ($('.button-outline.button-remove').length) {\r\n      $.ajax({\r\n        url: 'https:\/\/www.gnc.com\/on\/demandware.store\/Sites-GNC-Site\/default\/Cart-SubmitForm',\r\n        type: 'POST',\r\n        data: {\r\n          dwfrm_cart_shipments_i0_items_i0_quantity: $('input[name=\"dwfrm_cart_shipments_i0_items_i0_quantity\"]').val(),\r\n          'og-subscribe-sc-561322': $('input[name=\"og-subscribe-sc-561322\"]').val(),\r\n          frequency: $('input[name=\"frequency\"]:selected').val(),\r\n          dwfrm_cart_couponCode: null,\r\n          dwfrm_cart_coupons_i0_deleteCoupon: Remove,\r\n          csrf_token: $('input[name=\"csrf_token\"]').val(),\r\n          dwfrm_cart_updateCart: 'dwfrm_cart_updateCart'\r\n      },\r\n        async: false\r\n      });\r\n    }\r\n  }, \r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.value:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && this.isCartPage()) {\r\n        $('#dwfrm_cart_couponCode').val(bestCode);\r\n        $('#add-coupon').click();\r\n      } else if (bestCode) {\r\n        $('#dwfrm_billing_couponCode').val(bestCode);\r\n        $('#add-coupon').click();\r\n        location.reload();\r\n      }\r\n  },\r\n  isCartPage: function () {\r\n    return $('#dwfrm_billing_paymentMethods_creditCard_owner').length === 0;\r\n  }\r\n};",
	"goaliemonkey": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.summary);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"goatfashion": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    this.createEventInstance();\r\n    this.createScript();\r\n  },\r\n  createScript: function () {\r\n    const script = document.createElement('script');\r\n    let scriptContent = `\r\n      var createInput = ${this.createInput.toString()};\r\n      createInput('entityId', window.checkoutConfig.quoteData.entity_id);\r\n    `;\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n    $('#tmpScript').remove();\r\n  },\r\n  parse: function (response) {\r\n    let savings = Math.abs(response.totals.base_discount_amount);\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      if (this.isCartPage()) {\r\n        $('#coupon_code').val(bestCode);\r\n        $('#discount-coupon-form button').get(0).dispatchEvent(this.clickEvent);\r\n      } else {\r\n        $('#discount-code').val(bestCode);\r\n        $('#discount-form button').get(0).dispatchEvent(this.clickEvent);\r\n      }\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/checkout\/cart\/' || location.pathname === '\/checkout\/cart';\r\n  },\r\n  createInput: function (id, value) {\r\n    if (document.getElementById(id) === null) {\r\n      let createdInput = document.createElement(\"input\");\r\n      createdInput.id = id;\r\n      createdInput.setAttribute('type', 'hidden');\r\n      createdInput.setAttribute('value', value);\r\n      (document.body || document.head || document.documentElement).appendChild(createdInput);\r\n    }\r\n  },\r\n  createEventInstance: function () {\r\n    this.clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  },\r\n};\r\nExternalProvider.__prepareUrl();",
	"smartdestinations": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon' && $('#cart-promo-code-form-input').length == 0) {\r\n      $('.cart-promo-code__link').click();\r\n      $('#cart-promo-code-form-input').val(code);\r\n      $('#cart-promo-code-form-input').get(0).dispatchEvent(changeEvent);\r\n      $('.cart-promo-code__form-submit').click();\r\n    } else if (type === 'injectCoupon' && $('#cart-promo-code-form-input').length) {\r\n      $('#cart-promo-code-form-input').val(code);\r\n      $('#cart-promo-code-form-input').get(0).dispatchEvent(changeEvent);\r\n      $('.cart-promo-code__form-submit').click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.cart-promo-code__list-item-remove').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 2000);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.cart-promo-code__list-item-price').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"godaddy": "var ExternalProvider = {\r\n\r\n    prepare: function (action, code) {\r\n        if (['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n        var data = { itemSourceCode: '' };\r\n\r\n        if (action === 'applyCouponUrl') data.itemSourceCode = code;\r\n\r\n        return JSON.stringify(data);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.pricing.discount \/ 1000000);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"godfathers": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.pricing.discount \/ 1000000);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"godiva": "var ExternalProvider = {\r\n    serializeObject: function serializeObject(a) {\r\n        var o = {};\r\n        $.each(a, function () {\r\n            o[this.name] = this.value || '';\r\n        });\r\n        return o;\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = this.serializeObject($('#cart-items-form').serializeArray());\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data['dwfrm_cart_couponCode'] = code;\r\n            data['dwfrm_cart_addCoupon'] = 'dwfrm_cart_addCoupon';\r\n\r\n            if (data.hasOwnProperty('dwfrm_cart_coupons_i0_deleteCoupon')) {\r\n                delete data['dwfrm_cart_coupons_i0_deleteCoupon'];\r\n            }\r\n            return data;\r\n        }\r\n\r\n        if (type === 'clearCouponUrl') {\r\n            data['dwfrm_cart_couponCode'] = '';\r\n            data['dwfrm_cart_coupons_i0_deleteCoupon'] = 'Remove';\r\n\r\n            if (data.hasOwnProperty('dwfrm_cart_addCoupon')) {\r\n                delete data['dwfrm_cart_addCoupon'];\r\n            }\r\n            return data;\r\n        }\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        \/\/site applies default savings, could be better than coupon.\r\n        var currentSavings = parseFloat($('.promoprice').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var savings = parseFloat($('.promoprice', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings > currentSavings && savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode){\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"goertz": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.checkout-cart-sumItemTotal .checkout-cart-sumItem').text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.checkout-cart-sumItemTotal .checkout-cart-sumItem', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n    var savings = parseFloat(oldTotal - newTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"voucher\"]').val(bestCode);\r\n      $('.encash-voucher-submit').click();\r\n    }\r\n  }\r\n};",
	"goldelements": "var ExternalProvider = {\r\n    parse: function (response, a, $b, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var validCoupon = !!$('.cart-discount', responseHTML).text().includes(code.toLowerCase());\r\n        var savings = validCoupon ? parseFloat($('.cart-discount td:contains(\"-\")', responseHTML).text().replace(\/[^.0-9]\/g, '')) : 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('input[name=\"apply_coupon\"]').click();\r\n        }\r\n    }\r\n};",
	"goldenmine": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var result = response.replace(\/\\r?\\n|\\r\/g, \"\");\r\n        var removeSpace = result.replace(\/\\s\/g, '')\r\n        var matchResult = removeSpace.match('MinusDiscountAmount<\/td><tdclass=\"textBodyRed\"valign=\"bottom\">(.*)<\/td><tdcolspan=\"')[0];\r\n        var savings = matchResult.replace(\/[^0-9.]\/g, '');\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discount').val(bestCode);\r\n            $('.navyButtonWhiteFace').click();\r\n        };\r\n    }\r\n};",
	"goldsmiths": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#orderTotalValueText').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('#orderTotalValueText', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"golf18network": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"product_no\", CRITEO_CONF[0][0][\"Product IDs\"][0]);';\r\n    script.id = 'tmpScript';\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var payFormId = $('#payform').find('input[name=\"tt\"]').val();\r\n    var playersCount = $('.golfcourse-inner tr:nth-child(3) td:last').text();\r\n    var productNo = $('body').attr('product_no');\r\n\r\n    var applyUrl = 'https:\/\/golf18network.com\/self-admin\/PromoCodeDefinitions\/jsonCheckCode\/CLAIMCODE\/1\/10821292\/' + payFormId + '\/' + playersCount + '\/' + productNo;\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.golfcourse-inner').find('table tbody tr:nth-child(2) td:last').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var percentDiscount = parseInt(response.data.percent_discount, 10);\r\n    var savings = 0;\r\n\r\n    if ($('#promo_code').is(':visible') === true) {\r\n      savings = oldTotal * (percentDiscount \/ 100);\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promo_code').val(bestCode);\r\n      $('#promo_code_button_cre')[0].click();\r\n    }\r\n  }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"golfetail": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        var couponId = $('.cart-total-label a', responseHTML).attr('href');\r\n\r\n\r\n        if (couponId) {\r\n            couponId = couponId.replace('\/cart.php?action=removecoupon&couponid=', '');\r\n            $.ajax({\r\n                url: \"https:\/\/www.golfetail.com\/cart.php?action=removecoupon&couponid=\" + couponId,\r\n                async: false\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            $('#couponcode').val(bestCode);\r\n            $('input[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"goodwinsmith": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"goodyear": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.discount-amount .cart-list-item__price', responseHTML).first().text().replace(\/[^0-9.]\/g, '');\r\n\r\n        if (savings > 0) {\r\n\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestSavings, bestCode) {\r\n        if (bestCode) {\r\n            $('.apply').click();\r\n            $('.mini-cart__apply_voucher_link')[0].click();\r\n        }\r\n    }\r\n};",
	"gooutdoors": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = 'GBP';\r\n        var selector = $('.fnySelect').text();\r\n\r\n        if (selector.match('USD')) {\r\n            locale = localeMapping.US;\r\n            newCurrency = 'USD';\r\n        } else if (selector.match('EUR')) {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#discount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"gordonsjewelers": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.row.promo', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"gothamcigars": "var ExternalProvider = {\r\n\tparse: function (response) {\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\tvar clearCouponUrl = 'https:\/\/www.gothamcigars.com' + $('a:contains(\"Remove\")', responseHTML).attr(\"href\");\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: clearCouponUrl,\r\n\t\t\tasync: false\r\n\t\t});\r\n\r\n\t\tvar savings = parseFloat($('.cart-total-value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: savings > 0,\r\n\t\t\tsavings: isNaN(savings) ? 0.00 : savings\r\n\t\t};\r\n\t},\r\n\tcomplete: function (bestCode) {\r\n\t\tif (bestCode) {\r\n\t\t\tif (location.href.contains(\"checkout\")) {\r\n\t\t\t\t$('#couponcode').val(bestCode);\r\n\t\t\t\t$('#apply_code').click();\r\n\t\t\t} else {\r\n\t\t\t\tlocation.reload();\r\n\t\t\t}\r\n\t\t}\t\t\t\r\n\t}\r\n};",
	"gothamcigars.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings =  parseFloat($('.GCSubTotal .ProductPrice', responseHTML).text().replace('$', '').replace('-', ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n\r\n    },\r\n    complete: function(bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n}",
	"gourmessode": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.field__input-btn').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"gourmessofr": "var ExternalProvider = {\r\n  parse: function (response, status, $xhr, code) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = code === $('#coupon_code').val() ? parseFloat($('.summary-total td .price').text().replace(\/[^0-9.]\/g, '')) \/ 100 : parseFloat($('.summary-total td .price', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"gourmessous": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"gourmetgiftbaskets": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var formAction = $('#aspnetForm').attr('action');\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = 'https:\/\/www.gourmetgiftbaskets.com' + formAction + '';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    $.ajax({\r\n      url: location.href,\r\n      type: 'GET',\r\n      async: false,\r\n      success: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        data = {\r\n          __EVENTTARGET: 'ctl00$MainContentHolder$CouponGrid$ctl02$btnDeleteCoupon',\r\n          __EVENTARGUMENT: $('#__EVENTARGUMENT', responseHTML).val(),\r\n          __VIEWSTATE: $('#__VIEWSTATE', responseHTML).val(),\r\n          __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR', responseHTML).val(),\r\n          __VIEWSTATEENCRYPTED: $('#__VIEWSTATEENCRYPTED', responseHTML).val(),\r\n          __PREVIOUSPAGE: $('#__PREVIOUSPAGE', responseHTML).val(),\r\n          __EVENTVALIDATION: $('#__EVENTVALIDATION', responseHTML).val(),\r\n          view: 'grid',\r\n          ctl00$MainContentHolder$ItemGridView$ctl02$QtyField: 1,\r\n          ctl00$Footer1$ContentColumnControl1$ctl00$EmailAddressField: ''\r\n        };\r\n\r\n        if (type === 'applyCouponUrl') {\r\n          data.__EVENTTARGET = 'ctl00$MainContentHolder$btnAddCoupon';\r\n          data.ctl00$MainContentHolder$CouponField = code;\r\n        }\r\n      }\r\n    });\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestcode) {\r\n    if (bestcode) {\r\n      $('#ctl00_MainContentHolder_CouponField').val(bestcode);\r\n      $('#ctl00_MainContentHolder_btnAddCoupon')[0].click();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"gourmondo": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.saved-amount', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"gousto": "var ExternalProvider = {\r\n  __prepare: function () {\r\n    $('div[role=\"button\"]').last().click();\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('input[name=\"promoCode\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[name=\"promoCode\"]').trigger('input').trigger('change');\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('div[role=\"button\"]').last().click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = $('span~span:contains(\"-\u00a3\")').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 500);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 70);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('span~span:contains(\"-\u00a3\")').text().replace(\/[^.0-9]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"promoCode\"]').val(bestCode);\r\n      $('div:contains(\"Apply\")').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider.__prepare();",
	"govacuum": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response.summary),\r\n            codeFound = response.success;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('.grand-total .price:nth(-1)').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('.grand-total .price:nth(-1)', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"graceandlace": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().split(\"$\")[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"gracobaby": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#WC_SingleShipmentOrderTotalsSummary_td_12', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promoCode').val(bestCode);\r\n            $('a#WC_PromotionCodeDisplay_links_1')[0].click();\r\n        }\r\n    }\r\n};",
	"grahambrown": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    oldTotal: 0,\r\n    init: function () {\r\n        var oldTotalText = $('tr.order-subtotal > td:last').text();\r\n        this.oldTotal = parseFloat(oldTotalText.replace(this.nonPriceRegex, '').toString());\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var newTotal = response.baskettotal;\r\n        var savings = this.oldTotal - newTotal;\r\n        if(savings){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n};",
	"grasshoppers": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.coupon-total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      if ($('#dwfrm_cart_couponCode').length) {\r\n        $('#dwfrm_cart_couponCode').val(bestCode);\r\n        $('#add-coupon').click();\r\n      } else {\r\n        $('#dwfrm_billing_couponCode').val(bestCode);\r\n        $('#add-coupon').click();\r\n      }\r\n    }\r\n  }\r\n};",
	"gravisde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.le_op_item.thin').last().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.le_op_item.thin', responseHTML).last().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"graze": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match('discount_amount\":\"-(.*)base_discount_amount\":\"-')[0].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"greatbigcanvas": "'use strict';\r\n\r\nvar ExternalProvider = {\r\n    cartUrl: 'https:\/\/www.greatbigcanvas.com\/cart\/default.aspx',\r\n    checkoutUrl: 'https:\/\/www.greatbigcanvas.com\/cart\/checkout.aspx',\r\n    _prepareUrl: function () {\r\n        var applyCouponUrl = $('#applyCouponUrl');\r\n\r\n        if (!applyCouponUrl.length) {\r\n            applyCouponUrl = document.createElement('input');\r\n            applyCouponUrl.id = 'applyCouponUrl';\r\n            applyCouponUrl.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n            applyCouponUrl = $('#applyCouponUrl');\r\n            applyCouponUrl.attr('value', this.isCheckoutPage() ? this.checkoutUrl : this.cartUrl);\r\n        }\r\n    },\r\n\r\n    prepare: function (action, code) {\r\n        var form = $('#aspnetForm').clone();\r\n        var addedValues = {};\r\n\r\n        addedValues.__ASYNCPOST = true;\r\n\r\n        var modifiedValues = {};\r\n\r\n        if (!this.isCheckoutPage()) {\r\n            modifiedValues.ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$shoppingCart$rptLineItems$ctl00$txtNotes = '';\r\n\r\n            if (action === 'applyCouponUrl') {\r\n                modifiedValues.ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$shoppingCart$txtCoupon = code;\r\n                modifiedValues.__EVENTTARGET = 'ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$shoppingCart$lnkApplyCoupon';\r\n                addedValues.ctl00$ctl00$ctl00$scriptManager = 'ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$pnlUpdate|ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$shoppingCart$lnkApplyCoupon';\r\n            } else if (action === 'clearCouponUrl') {\r\n                modifiedValues.ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$shoppingCart$txtCoupon = '';\r\n                modifiedValues.ctl00$ctl00$ctl00$cphPage$siteHeader$txtSearch = '';\r\n                modifiedValues.__EVENTTARGET = 'ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$shoppingCart$lnkRemoveCoupon';\r\n                addedValues.ctl00$ctl00$ctl00$scriptManager = 'ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$pnlUpdate|ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$shoppingCart$lnkRemoveCoupon';\r\n            }\r\n\r\n            return this.injectValuesToForm(form, modifiedValues, addedValues).serialize();\r\n        }\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            modifiedValues.ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$checkoutControl$txtApplyCoupon = code;\r\n            modifiedValues.__EVENTTARGET = '';\r\n            addedValues.ctl00$ctl00$ctl00$scriptManager = 'ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$checkoutControl$upStep2|ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$checkoutControl$btnApplyCoupon';\r\n            addedValues.ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$checkoutControl$btnApplyCoupon = 'Apply';\r\n        } else if (action === 'clearCouponUrl') {\r\n            modifiedValues.ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$checkoutControl$txtApplyCoupon = '';\r\n            modifiedValues.__EVENTTARGET = 'ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$checkoutControl$lnkRemoveCoupon';\r\n            modifiedValues.ctl00$ctl00$ctl00$cphPage$siteHeader$txtSearch = '';\r\n\r\n            addedValues.ctl00$ctl00$ctl00$scriptManager = 'ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$checkoutControl$upStep2|ctl00$ctl00$ctl00$cphPage$cphPage$cphPage$checkoutControl$lnkRemoveCoupon';\r\n        }\r\n\r\n        return this.injectValuesToForm(form, modifiedValues, addedValues).serialize();\r\n    },\r\n\r\n    isCheckoutPage: function () {\r\n        return \/checkout\/.test(location.href);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount.value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var checkout = parseFloat($('.discount.number:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        if (this.isCheckoutPage()) {\r\n            return {\r\n                success: checkout > 0,\r\n                savings: isNaN(checkout) ? 0.00 : checkout\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        location.reload(true);\r\n    },\r\n\r\n    injectValuesToForm: function (form, modifiedValues, addedValues) {\r\n        Object.keys(modifiedValues).forEach(function (key, index) {\r\n            form.find('input[name=\"' + key + '\"]').val(modifiedValues[key]);\r\n        });\r\n\r\n        var self = this;\r\n\r\n        Object.keys(addedValues).forEach(function (key, index) {\r\n            self.addHiddenValue(form, key, addedValues[key]);\r\n        });\r\n\r\n        return form;\r\n    },\r\n\r\n    addHiddenValue: function (form, name, value) {\r\n        $('<input>').attr({\r\n            type: 'hidden',\r\n            name: name,\r\n            value: value\r\n        }).appendTo(form);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"greatbigcanvas.mobile": "'use strict';\r\n\r\nvar ExternalProvider = {\r\n    cartUrl: 'http:\/\/mobile.greatbigcanvas.com\/cart\/',\r\n    checkoutUrl: 'https:\/\/mobile.greatbigcanvas.com\/checkout',\r\n    _prepareUrl: function () {\r\n        var applyCouponUrl = $('#applyCouponUrl');\r\n\r\n        if (!applyCouponUrl.length) {\r\n            applyCouponUrl = document.createElement('input');\r\n            applyCouponUrl.id = 'applyCouponUrl';\r\n            applyCouponUrl.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n            applyCouponUrl = $('#applyCouponUrl');\r\n            applyCouponUrl.attr('value', window.location.href.indexOf(this.cartUrl) !== -1 ?\r\n                'http:\/\/mobile.greatbigcanvas.com\/cart\/ApplyCoupon' :\r\n                'https:\/\/mobile.greatbigcanvas.com\/checkout\/ApplyCoupon'\r\n            );\r\n        }\r\n\r\n        var clearCouponUrl = $('#clearCouponUrl');\r\n\r\n        if (!clearCouponUrl.length) {\r\n            clearCouponUrl = document.createElement('input');\r\n            clearCouponUrl.id = 'clearCouponUrl';\r\n            clearCouponUrl.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearCouponUrl);\r\n            clearCouponUrl = $('#clearCouponUrl');\r\n            clearCouponUrl.attr('value', window.location.href.indexOf(this.cartUrl) !== -1 ?\r\n                'http:\/\/mobile.greatbigcanvas.com\/cart\/RemoveCoupon' :\r\n                'https:\/\/mobile.greatbigcanvas.com\/checkout\/RemoveCoupon'\r\n            );\r\n        }\r\n    },\r\n\r\n    prepare: function (action, code) {\r\n        if (window.location.href.indexOf(this.cartUrl) !== -1) {\r\n            return {\r\n                id: code\r\n            };\r\n        } else if (window.location.href.indexOf(this.checkoutUrl) !== -1) {\r\n            return {\r\n                State: '',\r\n                Zipcode: '',\r\n                Country: '',\r\n                CouponCode: code\r\n            };\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = window.location.href.indexOf(this.cartUrl) !== -1 ?\r\n            response.Cart.CouponDiscount.Price :\r\n            response.CouponDiscount.Price;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        location.reload(true);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"greatbritishmeat": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"greatcall": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.text-nowrap:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"greatergood": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"greenangel": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"jp_entity_id\", window.woocs_current_currency.name);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var selector = $('body').attr('jp_entity_id');\r\n        var locale = localeMapping['US'];\r\n\r\n        if (selector === 'EUR') {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === 'GBP') {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else {\r\n            locale = localeMapping['US'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    },\r\n    prepare: function (type, code) {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n        var jpSecurityId = this.isCartPage() ? 'wc_cart_params.apply_coupon_nonce' : 'wc_checkout_params.apply_coupon_nonce'\r\n    \r\n        scriptContent += 'body.setAttribute(\"jp_security_id\",' + jpSecurityId + ')';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n        \r\n        var data = false;\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                security: $('body').attr('jp_security_id'),\r\n                coupon_code: code\r\n            };\r\n        } else if (type === 'resultUrl') {\r\n            data = {\r\n                'cart[39d6530ef19d55fc98e82cb3907519fa][qty]': $('input[name=\"cart[39d6530ef19d55fc98e82cb3907519fa][qty]\"]').val(),\r\n                coupon_code: '',\r\n                _wpnonce: $('#_wpnonce').val(),\r\n                _wp_http_referer: '\/shop\/cart\/'\r\n            };\r\n        }\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-discount > td', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"greenangelskincare": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line--reduction .order-summary__emphasis', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.field__input-btn').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"greenmangaming": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n      $('#promotionalCode').val(code);\r\n      $('#promotionalCode').get(0).dispatchEvent(changeEvent);\r\n      $('.btn.btn-checkout:eq(0)').click();\r\n      $('#promotionalCode').val('');\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.btn.btn-checkout:eq(1)').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.box-loading').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1500);\r\n          }\r\n\r\n          waited++;\r\n        }, 80);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('span:contains(\"-\")').eq(-1).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"griffintechnology": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestSavings, bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"gripgate": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('#basketTotalProductsGross').text().replace(\/[0-9.,]\/g, '').trim();\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"groominglounge": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#shopping-cart-totals-table .price:contains(\"-\")', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"groundlink": "var ExternalProvider = {\r\n    getNestedProperty: function (obj, key) {\r\n        return key.split('.').reduce(function (o, x) {\r\n            return (typeof o === 'undefined' || o === null) ? o : o[x];\r\n        }, obj);\r\n    },\r\n    retrieveWindowVariable: function (variable) {\r\n        var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { $('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + ')); }\\n';\r\n        var script = document.createElement('script');\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('tmp_' + variable);\r\n\r\n        $('body').removeAttr('tmp_' + variable);\r\n\r\n        return JSON.parse(value);\r\n    },\r\n    prepare: function (type, code) {\r\n        var formData = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            var jsessionidCookie = this.retrieveWindowVariable('window.jsessionid').id;\r\n\r\n            formData.jsessionid = jsessionidCookie;\r\n            formData.promoCode = code;\r\n            formData.receiptId = $(\"input[name='receiptId']\").val();\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0;\r\n        var isCodeValid = Object.keys(response.actionErrors).length === 0;\r\n\r\n        if (isCodeValid && response.results && response.results[0]) {\r\n            var recieptObj = response.results[0];\r\n            var discountString = this.getNestedProperty(recieptObj, 'receipt.discountValue.amount');\r\n            savings = parseFloat(discountString.replace('$', ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promotionCode').val(bestCode);\r\n            $('.btn.btn-warning.btn-block').click();\r\n        }\r\n    }\r\n};",
	"groupon": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      jQuery('a.promo')[0].click();\r\n      jQuery('#promo-apply').val(code);\r\n\r\n      var s = document.createElement('script');\r\n\r\n      s.type = 'text\/javascript';\r\n      s.id = 'apply';\r\n\r\n      var code = \"jQuery('#promo-apply').trigger('change');jQuery('button.apply').removeAttr('disabled').click();\";\r\n\r\n      s.appendChild(document.createTextNode(code));\r\n      document.body.appendChild(s);\r\n\r\n      setTimeout(function () {\r\n        $('.btn.suggest-promo-apply').click();\r\n      }, 1000);\r\n\r\n      $('#apply').remove();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    var counter = 0;\r\n    var codeApplyTime = setInterval(function () {\r\n      counter += 1;\r\n\r\n      if (counter > 5) {\r\n        clearInterval(codeApplyTime);\r\n        next();\r\n      }\r\n    }, 300);\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.discount-amount').text().replace(\/[^.0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      jQuery('a.promo')[0].click();\r\n      jQuery('#promo-apply').val(bestCode);\r\n\r\n      var s = document.createElement('script');\r\n\r\n      s.type = 'text\/javascript';\r\n      s.id = 'apply';\r\n\r\n      var code = \"jQuery('#promo-apply, .btn.suggest-promo-apply').trigger('change');jQuery('button.apply').removeAttr('disabled').click();jQuery('.btn.suggest-promo-apply').click();\";\r\n      s.appendChild(document.createTextNode(code));\r\n      document.body.appendChild(s);\r\n      setTimeout(function () {\r\n        $('.btn.suggest-promo-apply').click();\r\n      }, 1000);\r\n\r\n    }\r\n  }\r\n};",
	"grouponde": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n       if (type === 'injectCoupon') {\r\n           jQuery('a.promo')[0].click();\r\n           jQuery('#promo-apply').val(code);\r\n\r\n           var s = document.createElement('script');\r\n\r\n           s.type = 'text\/javascript';\r\n           s.id = 'apply';\r\n\r\n           var codes = \"jQuery('#promo-apply').trigger('change');jQuery('button.apply').removeAttr('disabled').click();\";\r\n\r\n           s.appendChild(document.createTextNode(codes));\r\n           document.body.appendChild(s);\r\n           $('#apply').remove();\r\n       }\r\n   },\r\n   whenReady: function (step, next) {\r\n       var counter = 0;\r\n       var codeApplyTime = setInterval(function () {\r\n           counter += 1;\r\n\r\n           if (counter > 5) {\r\n               clearInterval(codeApplyTime);\r\n               next();\r\n           }\r\n       }, 300);\r\n   },\r\n   parse: function () {\r\n       var savings =  parseFloat($('.discount-amount').text().replace(\/[^.0-9]\/g,'')) \/ 100;\r\n\r\n       return {\r\n           success: savings > 0,\r\n           savings: isNaN(savings) ? 0.00 : savings\r\n       };\r\n   },\r\n   complete: function (bestCode) {\r\n        if (bestCode) {\r\n            jQuery('a.promo')[0].click();\r\n            jQuery('#promo-apply').val(bestCode);\r\n\r\n            var s = document.createElement('script');\r\n\r\n            s.type = 'text\/javascript';\r\n            s.id = 'apply';\r\n\r\n            var code = \"jQuery('#promo-apply').trigger('change');jQuery('button.apply').removeAttr('disabled').click();\";\r\n\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n            $('#apply').remove();\r\n        }\r\n    }\r\n};",
	"grouponuk": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      jQuery('a.promo')[0].click();\r\n      jQuery('#promo-apply').val(code);\r\n\r\n      var s = document.createElement('script');\r\n\r\n      s.type = 'text\/javascript';\r\n      s.id = 'apply';\r\n\r\n      var codes = \"jQuery('#promo-apply').trigger('change');jQuery('button.apply').removeAttr('disabled').click();\";\r\n\r\n      s.appendChild(document.createTextNode(codes));\r\n      document.body.appendChild(s);\r\n      $('#apply').remove();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    var counter = 0;\r\n    var codeApplyTime = setInterval(function () {\r\n      counter += 1;\r\n\r\n      if (counter > 5) {\r\n        clearInterval(codeApplyTime);\r\n        next();\r\n      }\r\n    }, 300);\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.discount-amount').text().replace(\/[^.0-9]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      jQuery('a.promo')[0].click();\r\n      jQuery('#promo-apply').val(bestCode);\r\n\r\n      var s = document.createElement('script');\r\n\r\n      s.type = 'text\/javascript';\r\n      s.id = 'apply';\r\n\r\n      var code = \"jQuery('#promo-apply').trigger('change');jQuery('button.apply').removeAttr('disabled').click();\";\r\n\r\n      s.appendChild(document.createTextNode(code));\r\n      document.body.appendChild(s);\r\n      $('#apply').remove();\r\n    }\r\n  }\r\n};",
	"growershouse": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var o = {};\r\n      var a = this.serializeArray();\r\n\r\n      $.each(a, function () {\r\n        if (o[this.name] !== undefined) {\r\n          if (!o[this.name].push) {\r\n            o[this.name] = [o[this.name]];\r\n          }\r\n\r\n          o[this.name].push(this.value || '');\r\n        } else {\r\n          o[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return o;\r\n    };\r\n  },\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = this.isCheckoutPage() ? 'https:\/\/growershouse.com\/firecheckout\/index\/saveCoupon\/' : 'https:\/\/growershouse.com\/checkout\/cart\/couponPost\/';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      if (this.isCheckoutPage()) {\r\n        var form = $('#firecheckout-form');\r\n\r\n        $('#coupon-code').val(code);\r\n\r\n        return form.serializeObject();\r\n      }\r\n\r\n      data.remove = 0;\r\n      data.coupon_code = code;\r\n\r\n      return data;\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCheckoutPage: function () {\r\n    return location.pathname === '\/firecheckout\/';\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && this.isCheckoutPage()) {\r\n        $('#coupon-code').val(bestCode);\r\n        $('#coupon-apply').click();\r\n      } else if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"grubhub": "var ExternalProvider = {\r\n    queueName: '_cfq',\r\n    _prepareUrl: function () {\r\n        var cartState = JSON.parse(localStorage.getItem('ngStorage-cartState'));\r\n        var credentials = JSON.parse(localStorage.getItem('ngStorage-oauthCredentials'));\r\n        var perimeterX = document.cookie.split('; _px2=');\r\n\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += \"body.setAttribute('cartId', '\" + cartState.cartId + \"');\";\r\n        scriptContent += \"body.setAttribute('auth', 'Bearer \" + credentials.session_handle.access_token + \"');\";\r\n        scriptContent += \"body.setAttribute('perimeterX','\" + perimeterX.pop().split(';').shift() + \"');\";\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        $(\"body\").removeAttr(\"cartId\");\r\n        $(\"body\").removeAttr(\"auth\");\r\n        $(\"body\").removeAttr(\"perimeterX\");\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.payments.PROMO_CODE[0].amount \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"gruntstyle": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"gtech": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.cart2);\r\n    var savings = parseFloat($('.discountrow > .price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"guess": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        try {\r\n\t\t\t\r\n            var result;\r\n    \r\n            var responseHTML = $.parseHTML(response);\r\n\t\t\t\r\n\t\t\tvar validationCallout = $('.validationCallout', responseHTML);\r\n\t\t\t\r\n\t\t\tif ($(validationCallout).text() == '') {\r\n\t\t\t\t\r\n\t\t\t\tvar discounts = $('.discountCost.span3.text-right', responseHTML);\r\n\t\t\t\t\r\n\t\t\t\tif (discounts.length > 0) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar savings = 0;\r\n\t\t\t\t\t\r\n\t\t\t\t\tdiscounts.each(function() {\r\n\t\t\t\t\t\tsavings = savings + Number(($(this).text().replace(\/[^0-9|\\.]\/g, '')));\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (savings > 0) {\r\n\t\t\t\t\t\treturn result = {\r\n\t\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\t\tsavings: savings\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            }\r\n        }\r\n        catch(err) {\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSaving){\r\n\t\t$('#PromotionalCode').val(bestCode);\r\n        $('#promotionForm > input.btn').click();\r\n    }\r\n}",
	"guessde": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n\r\n        if ($('html').attr('lang') === 'gb' || $('script:contains(\"currency: \\'GBP\\'\")').length) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if ($('html').attr('lang') === 'de' || $('script:contains(\"currency: \\'EUR\\'\")').length) {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#cartpopupcontainer .totale td:last-child').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('.big~.big', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings;\r\n\r\n        if (isNaN(oldTotal)) oldTotal = parseFloat($('.big~.big').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#PromotionalCode').val(bestCode);\r\n            $('#MNT_ShoppingBagPopUp form button, #carrello button').click();\r\n        }\r\n    }\r\n};",
	"guessfactory": "var ExternalProvider = {\r\n    origTotal: '',\r\n    init: function () {\r\n        this.origTotal = parseFloat($('.row.title-and-subheader.estTotal .text-right')[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = this.origTotal - parseFloat($('.row.title-and-subheader.estTotal .text-right', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#PromotionalCode').val(bestCode);\r\n            $('.btn-cta-secondary').click();\r\n        }\r\n    }\r\n};",
	"guildwars2": "var ExternalProvider = {\r\n    OldPrice: '',\r\n    getOldPrice: function () {\r\n        this.OldPrice = parseFloat($('.dr_price.dr_totals').text().replace(\/[^0-9.]\/g, ''));\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = this.serializeObject($('form[name=\"ShoppingCartForm\"]').serializeArray());\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data.couponCode = code;\r\n        }\r\n\r\n        return data;\r\n    },\r\n    serializeObject: function (a) {\r\n        var o = {};\r\n\r\n        $.each(a, function () {\r\n            o[this.name] = this.value || '';\r\n        });\r\n\r\n        return o;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newPrice = parseFloat($('.dr_price.dr_totals', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = this.OldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promoCode').val(bestCode);\r\n            $('.dr_button[value=\"apply\"]').click();\r\n        }\r\n    }\r\n};\r\nExternalProvider.getOldPrice();",
	"guiltysoles": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = null;\r\n\r\n        function retrieveWindowVariable (variable) {\r\n            var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + \")); }\\n\";\r\n            var script = document.createElement('script');\r\n            script.id = 'tmpScript';\r\n            script.appendChild(document.createTextNode(scriptContent));\r\n            (document.body || document.head || document.documentElement).appendChild(script);\r\n            var value = jQuery(\"body\").attr(\"tmp_\" + variable);\r\n            jQuery(\"body\").removeAttr(\"tmp_\" + variable);\r\n            return JSON.parse(value);\r\n        }\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                security: retrieveWindowVariable('wc_cart_params.apply_coupon_nonce'),\r\n                coupon_code: code\r\n            };\r\n        } else if (type === 'clearCouponUrl') {\r\n            data = {\r\n                security: retrieveWindowVariable('wc_cart_params.remove_coupon_nonce'),\r\n                coupon: code\r\n            };\r\n        }\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.cart-discount .amount', responseHTML).text().replace('$', '');\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n}",
	"guiltysoles.mobile": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = null;\r\n\r\n        function retrieveWindowVariable (variable) {\r\n            var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + \")); }\\n\";\r\n            var script = document.createElement('script');\r\n            script.id = 'tmpScript';\r\n            script.appendChild(document.createTextNode(scriptContent));\r\n            (document.body || document.head || document.documentElement).appendChild(script);\r\n            var value = jQuery(\"body\").attr(\"tmp_\" + variable);\r\n            jQuery(\"body\").removeAttr(\"tmp_\" + variable);\r\n            return JSON.parse(value);\r\n        }\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                security: retrieveWindowVariable('wc_cart_params.apply_coupon_nonce'),\r\n                coupon_code: code\r\n            };\r\n        } else if (type === 'clearCouponUrl') {\r\n            data = {\r\n                security: retrieveWindowVariable('wc_cart_params.remove_coupon_nonce'),\r\n                coupon: code\r\n            };\r\n        }\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n        var savings = $piggyJq('.cart-discount .amount', responseHTML).text().replace('$', '');\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n}",
	"guitarcenter": "var ExternalProvider = {\r\n\r\n    prepare: function(type, code){\r\n        var data = {\r\n            \"_dyncharset\": $('input[name=\"_dyncharset\"]').val(),\r\n            \"_dynSessConf\": $('input[name=\"_dynSessConf\"]').val(),\r\n            \"\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode\": code.toLowerCase(),\r\n            \"_D:\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode\": \"\", \r\n            \"\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponSuccessURL\": \"\/cart\",\r\n            \"_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponSuccessURL\": \"\",\r\n            \"\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponErrorURL\": \"\/cart\",\r\n            \"_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponErrorURL\": \"\",\r\n            \"\/atg\/commerce\/promotion\/CouponFormHandler.filterShippingPromotion\": true,\r\n            \"_D:\/atg\/commerce\/promotion\/CouponFormHandler.filterShippingPromotion\": \"\", \r\n            \"\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon\": true,\r\n            \"_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon\": \"\",\r\n            \"_DARGS\": \"\/crt\/includes\/cartBody.jsp.couponForm\"\r\n        }\r\n\r\n\r\n        if (type === \"applyCouponUrl\"){\r\n            return data;\r\n        }\r\n\r\n        return data;\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('.summaryTotals .coupon dd', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('.orderTotalInner').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('.orderTotalInner', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"gunnar": "var ExternalProvider = {\r\n  security: '',\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"security\", window.wc_cart_params.apply_coupon_nonce);';\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    this.security = $('body').attr('security');\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n    if (type === 'applyCouponUrl' || type === 'clearCouponUrl') {\r\n      data = {\r\n        security: this.security,\r\n        coupon_code: code\r\n      };\r\n      return data;\r\n    } else if (type === 'resultUrl') {\r\n      data = {\r\n        'woocommerce-cart-nonce': this.security,\r\n        '_wp_http_referer': '\/cart\/'\r\n      };\r\n      return data;\r\n    }\r\n    \r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-discount', responseHTML).text().split(' ')[1].split('-')[1].replace(\/[^.0-9|]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode).closest('form').submit();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"gymondode": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.discount.discount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#voucherCode').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('.input-container + button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  }\r\n};",
	"gymshark": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"gypsywarrior": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar savings = parseFloat($('#shopping-cart-totals-table tbody tr:nth-child(2) .price', responseHTML).text().replace('$', '').replace('-', ''));\r\n        if (savings) {\r\n        \treturn {\r\n        \t\tsuccess: true,\r\n        \t\tsavings: savings\r\n        \t}\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"h2oplus": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var discountMatches = response.match(\/\"discount_amount\":\"(.*)\"\/);\r\n        var savings = 0.00;\r\n\r\n        if (discountMatches[1]) {\r\n            savings = parseFloat(discountMatches[1]);\r\n        }\r\n\r\n        if (savings > 0.00) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"hagebau": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.Sel-Partnercard-discount', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n     \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"hagelshopde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#shopping-cart-totals-table td:contains(\"-\")', responseHTML).first().text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"haggar": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#applyUrl');\r\n        var applyUrl = 'https:\/\/www.haggar.com\/cart-review?lang=default';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = 'applyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#applyUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    isCartPage: function () {\r\n        return location.pathname === '\/cart';\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0.00;\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        savings = parseFloat($('.discount .value', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"hairfinity": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.total:last()').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.total:last()', $.parseHTML(response)).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"halebob": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar savings = parseFloat($('#shopping-cart-totals-table tbody tr:nth-child(2) .price', responseHTML).text().replace('$', '').replace('-', ''));\r\n    \tif (savings) {\r\n    \t\treturn {\r\n    \t\t\tsuccess: true,\r\n    \t\t\tsavings: savings\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSaving) {\r\n        location.reload(true);\r\n    }\r\n}",
	"halegroves": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var success = $('.alert-success', responseHTML).length;\r\n        var savings, oldTotal = 0, newTotal = 0;\r\n\r\n        if (success) {\r\n            for (var item = 0; item < ($('.was', responseHTML).length); item++) {\r\n                oldTotal += parseFloat($('.was:eq(' + item + ')', responseHTML).text().replace('$', ''));\r\n                newTotal += parseFloat($('.sale:eq(' + item + ')', responseHTML).text().replace('$', ''));\r\n            }\r\n            savings = oldTotal - newTotal;\r\n        }\r\n        return {\r\n            success: success,\r\n            savings: success && savings ? savings : 0.00\r\n        };\r\n    },\r\n    complete: function () {\r\n        location.reload();\r\n    }\r\n};",
	"half": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n\r\n        var couponData = {},\r\n            clearCouponData = {};\r\n\r\n        couponData['svcid'] = 'HALF_INCENTIVE_SERVICE';\r\n        couponData['v'] = 0;\r\n        couponData['reqttype'] = 'JSON';\r\n        couponData['resptype'] = 'JSON';\r\n        couponData['request'] = JSON.stringify({\r\n            \"action\": \"addGC\",\r\n            \"incentiveId\": code,\r\n            \"trksid\": [].slice.call($('[id=\"_trksid\"]')).filter(function(e){return $(e).val().length > 0})[0].value\r\n        });\r\n\r\n        clearCouponData['svcid'] = 'HALF_INCENTIVE_SERVICE';\r\n        clearCouponData['v'] = 0;\r\n        clearCouponData['reqttype'] = 'JSON';\r\n        clearCouponData['resptype'] = 'JSON';\r\n        clearCouponData['request'] = JSON.stringify({\r\n            \"action\": \"deleteIncentive\",\r\n            \"incentiveId\": \"724622781\",\r\n            \"incentiveUsageId\": 1,\r\n            \"trksid\": [].slice.call($('[id=\"_trksid\"]')).filter(function(e){return $(e).val().length > 0})[0].value\r\n        });\r\n\r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return $.param(couponData);\r\n        }\r\n\r\n        if(type === \"clearCouponUrl\"){\r\n            return $.param(clearCouponData);\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var codeFound = response.data.errorList.length === 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var savings = Number(response.data.incentiveModel.discountAmount.replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"myhdiet": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"entity_id\", window.checkoutConfig.quoteData.entity_id);';\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var entityid = $('body').attr('entity_id');\r\n    var active = 'guest-carts\/' + entityid;\r\n\r\n    if ($(\".customer-name\").length > 0) {\r\n      active = 'carts\/mine'\r\n    }\r\n\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/shop.myhdiet.com\/rest\/default\/V1\/' + active + '\/coupons\/CLAIMCODE';\r\n    var resultUrl = 'https:\/\/shop.myhdiet.com\/rest\/default\/V1\/' + active + '\/payment-information?';\r\n    var clearUrl = 'https:\/\/shop.myhdiet.com\/rest\/default\/V1\/' + active + '\/coupons';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    applyUrlInput.attr('data-value', resultUrl);\r\n    applyUrlInput.attr('data-clear', clearUrl);\r\n  },\r\n  parse: function (response) {\r\n    var savings = Math.abs(response.totals.base_discount_amount);\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && location.pathname === \"\/checkout\/cart\/\") {\r\n      $(\"#block-discount-heading\").click();\r\n      $(\"#coupon_code\").val(bestCode);\r\n      $(\".action.apply.primary\").click();\r\n    } else if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"hallmarkbaby": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.promotion-total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"hallmarkecards": "var ExternalProvider = {\r\n  prepare: function (actionType, couponCode) {\r\n    if (actionType === 'injectCoupon') {\r\n      $('#promotionCode').val(couponCode);\r\n      var keyChangeEvent = document.createEvent('KeyboardEvent');\r\n      keyChangeEvent.initKeyboardEvent('change', true, true);\r\n      $('#promotionCode').get(0).dispatchEvent(keyChangeEvent);\r\n      $('#btn-apply-promotion').click();\r\n    }\r\n    if (actionType === 'removeInjectedCoupon') {\r\n      $('#show-coupon-code')[0].click();\r\n    }\r\n    return null;\r\n  },\r\n  whenReady: function (step, next) {\r\n    var counter = 0;\r\n    var codeApplyTime = setInterval(function () {\r\n      counter += 1;\r\n\r\n      if (counter > 10) {\r\n        clearInterval(codeApplyTime);\r\n        next();\r\n      }\r\n    }, 450);\r\n  },\r\n  parse: function () {\r\n    var savings = $('#savings-total').text().replace(\/[^0-9|.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      setTimeout(function () {\r\n        $('#promotionCode').val(bestCode);\r\n        var keyChangeEvent = document.createEvent('KeyboardEvent');\r\n        keyChangeEvent.initKeyboardEvent('change', true, true);\r\n        $('#promotionCode').get(0).dispatchEvent(keyChangeEvent);\r\n        $('#btn-apply-promotion').click();\r\n      }, 400);\r\n    }\r\n  }\r\n};",
	"halston": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    this.getFields();\r\n    this.createEventInstance();\r\n    action === 'injectCoupon' ? this.inputCodeField(code) : this.removeInputCodeField();\r\n  },\r\n  whenReady: function(step, next) {\r\n    step === 'injectCoupon' ? this.waitForSelector(next) : next();\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat(ExternalProvider.selector.text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) this.inputCodeField(bestCode);\r\n  },\r\n  getFields: function () {\r\n    this.toggleCodeField = $('.apply-coupon-text:not(.ng-hide)');\r\n    this.codeField = $('.coupon-input');\r\n    this.submitButton = $('button[ng-click=\"applyCoupon()\"]');\r\n  },\r\n  createEventInstance: function() {\r\n    this.changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n    this.clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  },\r\n  inputCodeField: function(code) {\r\n    this.toggleCodeField.click();\r\n    this.codeField.val(code);\r\n    this.codeField.get(0).dispatchEvent(this.changeEvent);\r\n    this.submitButton.click();\r\n  },\r\n  removeInputCodeField: function() {\r\n    this.toggleCodeField.get(0).dispatchEvent(this.clickEvent);\r\n  },\r\n  waitForSelector: function(next) {\r\n    var maxWait = 200; waited = 0;\r\n    var waitForClose = setInterval(function() {\r\n      if(waited > maxWait || ExternalProvider.isValidCoupon()) {\r\n        ExternalProvider.selector = $('.cart-financials li[ng-model=\"financials().totalDiscount\"] span:contains(\"-\")');\r\n        clearInterval(waitForClose);\r\n        next();\r\n      }\r\n      waited++;\r\n    }, 5);\r\n  },\r\n  isValidCoupon: function() {\r\n    return parseFloat($('.cart-financials li[ng-model=\"financials().totalDiscount\"] span:contains(\"-\")').text().replace(\/[^0-9|.]\/g, '')) > 0;\r\n  }\r\n};",
	"hamiltonbeach": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = response.records['0'].discount_amount;\r\n        var savings = parseFloat(responseHTML);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#couponCode').val(bestCode);\r\n            $('#apply_coupon').click();\r\n        }\r\n    }\r\n};",
	"hammacher": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n      $.each(data, function () {\r\n        if (object[this.name] !== undefined) {\r\n          if (!object[this.name].push) {\r\n            object[this.name] = [object[this.name]];\r\n          }\r\n          object[this.name].push(this.value || '');\r\n        } else {\r\n          object[this.name] = this.value || '';\r\n        }\r\n      });\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type == 'applyCouponUrl') {\r\n      data = $('#aspnetForm').serializeObject();\r\n      data['__ASYNCPOST'] = true;\r\n      data['ctl00$ContentPlaceHolder$orderSummaryControl$orderTotalControl$btnApply'] = 'Apply';\r\n      data['ctl00$ContentPlaceHolder$orderSummaryControl$orderTotalControl$txtPromoCode'] = code;\r\n      return data;\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#ctl00_ContentPlaceHolder_orderSummaryControl_orderTotalControl_lblPromo', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"hampdenclothing": "var ExternalProvider = {\r\n  parse: function (response, status, $xhr, code) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var validCode = $('#coupon_code', responseHTML).val() === code;\r\n    var savings = validCode ? parseFloat($('#shopping-cart-totals-table .price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) : 0.00;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && location.href.includes('checkout\/cart')) {\r\n      location.reload();\r\n    } else if (bestCode && location.href.includes('checkout\/onepage')) {\r\n      $('#coupon_code').val(bestCode).change().blur();\r\n      $('button[value=\"Apply Coupon\"]').click();\r\n    }\r\n  }\r\n};",
	"hampergifts": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('input[name=\"discount\"]', responseHTML).val());\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"hancockfabrics": "var ExternalProvider = {\r\n\r\n    prepare: function(type, code)\r\n    {\r\n\r\n        var data = {};\r\n\r\n        var formInputs = [].slice.call($('#cart-items-form input'));\r\n\r\n        formInputs.forEach(function(input){\r\n            data[$(input).attr('name')] = $(input).val();\r\n        })\r\n\r\n        data['dwfrm_cart_couponCode'] = code;\r\n        data['dwfrm_cart_addCoupon'] = 'dwfrm_cart_addCoupon'\r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return data;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('.cartcoupon .value', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('#cart-items-form .order-total').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('#cart-items-form .order-total', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            if(savings > 0) {\r\n\r\n                result = {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n\r\n                return result;\r\n\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving){\r\n\r\n        $('input[name=\"dwfrm_cart_couponCode\"]').val(bestCode);\r\n        $('#add-coupon').click();\r\n    }\r\n}",
	"hanes": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.subtotal-figures.bfx-price.bfx-total-subtotal').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.subtotal-figures.bfx-price.bfx-total-subtotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"hanesink": "var ExternalProvider = {\r\n    init: function() {\r\n        this._cartTotal = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13').text().replace('$', ''));\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13', responseHTML).text().replace('$', ''));\r\n        var savings = this._cartTotal - newTotal;\r\n\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"hannaandersson": "var ExternalProvider = {\r\n    prepare: function(actionType, couponCode) {\r\n        var formData = {};\r\n        var itemQuantity = $('input[name = \"dwfrm_cart_shipments_i0_items_i0_quantity\"]').val();\r\n        var csrfToken = $('input[name = \"csrf_token\"]').val();\r\n        var pattern = \/\\\/COShipping-SingleShipping\/g;\r\n\r\n        if(actionType === 'applyCouponUrl') {\r\n            if(pattern.exec(location.pathname)) {\r\n                var queue = $(document).queue(this.queueName);\r\n\r\n                queue.unshift(function(next) {\r\n                    $.ajax({\r\n                        url: `https:\/\/www.hannaandersson.com\/on\/demandware.store\/Sites-hannaandersson-Site\/default\/COBilling-AddCouponJson?couponCode=${couponCode}&format=ajax`, \/\/ eslint-disable-line Parsing error: Unexpected character '`'\r\n                        mode: 'GET',\r\n                        responseType: 'json',\r\n                        success: function() {\r\n                            next();\r\n                        },\r\n                        error: function() {\r\n                            next();\r\n                        }\r\n                    });\r\n                });\r\n\r\n                $(document).queue(this.queueName, queue);\r\n\r\n            } else {\r\n                formData = {\r\n                    dwfrm_cart_shipments_i0_items_i0_quantity: itemQuantity,\r\n                    dwfrm_cart_shipments_i0_items_i0_quantity: itemQuantity,\r\n                    dwfrm_cart_updateCart: 'dwfrm_cart_updateCart',\r\n                    dwfrm_cart_couponCode: couponCode,\r\n                    dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon',\r\n                    csrf_token: csrfToken\r\n                };\r\n            }\r\n\r\n            return formData;\r\n        }\r\n\r\n        if(actionType === 'clearCouponUrl') {\r\n            formData = {\r\n                dwfrm_cart_shipments_i0_items_i0_quantity: itemQuantity,\r\n                dwfrm_cart_shipments_i0_items_i0_quantity: itemQuantity,\r\n                dwfrm_cart_coupons_i0_deleteCoupon: 'Remove',\r\n                dwfrm_cart_updateCart: 'dwfrm_cart_updateCart',\r\n                dwfrm_cart_couponCode: '',\r\n                csrf_token: csrfToken\r\n            };\r\n\r\n            return formData;\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse:function(response, status, $xhr, couponCode) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = $('.order-totals-table .order-subtotal .scp-order-total').text().replace(this.regularExpression, '');\r\n        var newTotal = $('.order-totals-table .order-subtotal .scp-order-total', responseHTML).text().replace(this.regularExpression, '');\r\n        this.savings = oldTotal - newTotal;\r\n\r\n        if(this.savings > 0){\r\n            return {\r\n                success: true,\r\n                savings: this.savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: this.savings\r\n        };\r\n    },\r\n    complete:function(bestCode, bestSavings) {\r\n        var pattern = \/\\\/COShipping-SingleShipping\/g;\r\n        var clickEvent = new MouseEvent('click', {\r\n           'view': window,\r\n           'bubbles': true,\r\n           'cancelable': true\r\n        });\r\n\r\n        if(bestCode) {\r\n            if(pattern.exec(location.pathname)) {\r\n                $('#dwfrm_billing_couponCode').val(bestCode);\r\n                $('#dwfrm_billing_couponCode').trigger('input').trigger('change');\r\n\r\n            } else {\r\n                $('#dwfrm_cart_couponCode').val(bestCode);\r\n                $('#dwfrm_cart_couponCode').trigger('input').trigger('change');\r\n            }\r\n\r\n            $('#add-coupon').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    },\r\n    queueName: '_cfq',\r\n    savings: 0.00,\r\n    regularExpression: \/[^0-9|.]\/g\r\n}",
	"hansensurf": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"happynestfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('div[data-order-summary-section=\"payment-lines\"] .visually-hidden span').attr('data-checkout-payment-due-target')) \/ 100;\r\n    var newTotal = parseFloat($('div[data-order-summary-section=\"payment-lines\"] .visually-hidden span', responseHTML).attr('data-checkout-payment-due-target')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"happysize": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            $('#promoCode').val(code);\r\n            return $('#PromotionCodeForm').serializeArray();\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.shippingCostsContainer.promoLine span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"happysocks": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"entity_id\", window.checkoutConfig.quoteData.entity_id);';\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var entityid = $('body').attr('entity_id');\r\n    var ApplyUrlInput = $('#___jpApplyUrl');\r\n    var ApplyUrl = 'https:\/\/www.happysocks.com\/us\/rest\/us\/V1\/guest-carts\/' + entityid + '\/coupons\/CLAIMCODE';\r\n\r\n    if (!ApplyUrlInput.length) {\r\n      ApplyUrlInput = document.createElement('input');\r\n      ApplyUrlInput.id = '___jpApplyUrl';\r\n      ApplyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n      ApplyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    ApplyUrlInput.attr('value', ApplyUrl);\r\n\r\n    var ResultUrlInput = $('#___jpResultUrl');\r\n    var ResultUrl = 'https:\/\/www.happysocks.com\/us\/rest\/us\/V1\/guest-carts\/' + entityid + '\/payment-information?';\r\n\r\n    if (!ResultUrlInput.length) {\r\n      ResultUrlInput = document.createElement('input');\r\n      ResultUrlInput.id = '___jpResultUrl';\r\n      ResultUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(ResultUrlInput);\r\n      ResultUrlInput = $('#___jpResultUrl');\r\n    }\r\n\r\n    ResultUrlInput.attr('value', ResultUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = parseFloat(response.totals.discount_amount);\r\n    var savings = Math.abs(responseHTML);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"harborfreight": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n     \r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('#cart_item_unit_discount_text', responseHTML).length > 0;\r\n\r\n        if (codeFound) {\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('#shopping-cart-totals-table .GrandTotalDollars').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('#shopping-cart-totals-table .GrandTotalDollars', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            if (savings > 0) {\r\n                result = {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n\r\n                return result;\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n\r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving){\r\n\r\n        $('#coupon_code').val(bestCode);\r\n        $('#discount-coupon-form button.btnWhite').click();\r\n\r\n    }\r\n}",
	"harleydavidsonfootwear": "var ExternalProvider = {\r\n  __prepareUrl: function() {\r\n    $.get('https:\/\/www.harley-davidsonfootwear.com\/US\/en\/checkout', response => {\r\n      ExternalProvider.csrfToken = response.match(\/csrfToken: \"(.*)\"\/)[1];\r\n    });\r\n  },\r\n  prepare: function(step, code) {\r\n    return {\r\n      code: code,\r\n      csrf_token: this.csrfToken\r\n    }\r\n  },\r\n  parse: function (response, status, xhr, code) {\r\n    let discountLines = response.cart.totals.discountLineItems;\r\n    let savings = 0;\r\n    discountLines.forEach(data => {\r\n      if(data.discountName === code) {\r\n       savings = parseFloat(data.discountValue.replace(\/[^0-9|.]\/g, ''));\r\n      }\r\n    });\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $.post('\/on\/demandware.store\/Sites-harleydavidson_us-Site\/default\/Coupon-ApplyCoupon', {\r\n        code: bestCode,\r\n        csrf_token: ExternalProvider.csrfToken\r\n      }, () => location.reload());\r\n    }\r\n  },\r\n};\r\nExternalProvider.__prepareUrl();",
	"harryanddavid": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            var form = $('#PromotionCodeForm');\r\n\r\n            form.find('input[name=\"promoCode\"]').val(code);\r\n\r\n            return form.serialize();\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price-cart-summary:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"harryanddavid.mobile": "jQuery.fn.extend({\r\n    getSerializedArray: function () {\r\n        var data = {};\r\n        var formarray = $(this).serializeArray();\r\n\r\n        $.each(formarray, function () {\r\n            data[this.name] = this.value || '';\r\n        });\r\n\r\n        return data;\r\n    }\r\n});\r\nvar ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var formdata = $('#SubmitOrderForm').getSerializedArray();\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            formdata.promoCode = code;\r\n\r\n            return formdata;\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var jqObj = $.parseHTML(response);\r\n        var oldCartPrice = parseFloat($('.order-summary-subtotal > .value').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.order-summary-subtotal > .value', jqObj).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldCartPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"harryanddavid.tablet": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            var $form = $piggyJq('#PromotionCodeForm');\r\n\r\n            $form.find('#promoCode').val(code);\r\n\r\n            return $form.serialize();\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var context = $piggyJq.parseHTML(response);\r\n        var promoDiscount = $piggyJq('#promotionDiscount', context).next('div').first().text();\r\n        var savings = promoDiscount.match(\/(|\\+)?([0-9]+(\\.[0-9]+)?|Infinity)\/)[0];\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"harrys": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    if (action === 'injectCoupon') {\r\n      var clickEvent = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n\r\n      $('#coupon_code_code').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#coupon_code_code').trigger('input').trigger('change');\r\n      $('.coupon-code--button').get(0).dispatchEvent(clickEvent);\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    setTimeout(function () {\r\n      var maxWait = 200;\r\n      var waited = 0;\r\n      var waitForClose = setInterval(function () {\r\n        var confirmed = !$('.cls_loadingMask').length;\r\n\r\n        if ((confirmed) || (waited > maxWait)) {\r\n          clearInterval(waitForClose);\r\n          setTimeout(function () {\r\n            next();\r\n          }, 500);\r\n        }\r\n\r\n        waited++;\r\n      }, 10);\r\n    }, 50);\r\n  },\r\n  parse: function () {\r\n    var oldTotal = parseFloat($('.product-summary--discounted-price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.trial-checkout--price-line--price:eq(0)').text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) { }\r\n};",
	"hasbrotoyshop": "var ExternalProvider = {\r\n    parseAmount: function (string) {\r\n        return Math.abs(parseFloat(string.replace(\/[^0-9|\\.]\/g, '')));\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var $response = $.parseHTML(response),\r\n            codeApplied = $('.promotion_used', $response),\r\n            selector = '#WC_SingleShipmentOrderTotalsSummary_td_13',\r\n            codeFound = false, savings = 0.00, $item;\r\n\r\n        codeApplied.each(function() {\r\n\r\n            $item = $(this);\r\n            if($('a', $item).text().toLowerCase().indexOf(code.toLowerCase()) !== -1) {\r\n                codeFound = true;\r\n\r\n                savings = ExternalProvider.parseAmount($(selector).text()) - ExternalProvider.parseAmount($(selector, $response).text());\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"hatcountry": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.cart_total);\r\n        var savings = parseFloat($('.discout-cupon-code .price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#discount-coupon-form-button').click();\r\n        }\r\n    }\r\n};",
	"hatley": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"hawkin": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('#bronto-cart-recovery-currency').text();\r\n\r\n        if (selector === \"EUR\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"GBP\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n\r\n};",
	"hayneedle": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.promos_applied[0].DISCOUNT_AMOUNT;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"hbostore": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('#couponcode', responseHTML).val().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('.cart_totals span').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('.cart_totals span', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings){\r\n        $.post('https:\/\/securestore.hbo.com\/checkout.php?ajax_call=1', {couponcode: bestCode}, function(){\r\n            location.reload()\r\n        });\r\n    }\r\n}",
	"hbx": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        let locale;\r\n\r\n        if ($('script:contains(\\'localCurrency: \"GBP\"\\')').length) {\r\n            locale = localeMapping['GB'];\r\n            currency = 'GBP';\r\n        } else if ($('script:contains(\\'localCurrency: \"EUR\"\\')').length) {\r\n            locale = localeMapping['DE'];\r\n            currency = 'EUR';\r\n        } else {\r\n            locale = localeMapping['US'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits: 2 });\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                'sylius_cart[items][0][quantity]': $('#product-quantity-input').val(),\r\n                'sylius_cart[promotionCoupons]': code,\r\n                'sylius_cart[_token]': $('#sylius_cart__token').val()\r\n            };\r\n            return data;\r\n        }\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.amount:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var clickEvent = new MouseEvent('click', {\r\n                'view': window,\r\n                'bubbles': true,\r\n                'cancelable': true\r\n            });\r\n\r\n            $('#promo').get(0).dispatchEvent(clickEvent);\r\n            $('#sticky-sidebar > div.summary > div.coupons > div.coupon.promotional.open > div > div > input').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                'bubbles': true,\r\n                'cancelable': true\r\n            });\r\n\r\n            $('#sticky-sidebar > div.summary > div.coupons > div.coupon.promotional.open > div > div > input').get(0).dispatchEvent(changeEvent);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                'view': window,\r\n                'bubbles': true,\r\n                'cancelable': true\r\n            });\r\n\r\n            $('button:contains(\"Apply\")').first().get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"hcbl": "\/\/ If it detects an AJAX header, it doesn't return the full page.\r\n$.ajaxSettings.beforeSend = function(xhr){\r\n    xhr.setRequestHeader('X-Requested-With', {toString: function(){ return ''; }});\r\n    xhr.setRequestHeader('Accept', {toString: function(){return 'text\/html,application\/xhtml+xml,application\/xml;q=0.9,image\/webp,*\/*;q=0.8';}})\r\n};\r\n\r\nvar ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n\r\n        var couponData = {};\r\n\r\n        var formInputs = [].slice.call($('#cartform input:not([type=\"image\"]), #cartform select'));\r\n\r\n        formInputs.forEach(function(e){\r\n            couponData[$(e).attr('name')] = $(e).val();\r\n        })\r\n\r\n        couponData[\"action.x\"] = 0;\r\n        couponData[\"action.y\"] = 0;\r\n        couponData[\"coupon_code\"] = code;\r\n\r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return $.param(couponData);\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('#coupon_code', responseHTML).val().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('.subtotal strong').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('.subtotal strong', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"hdis": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var codeFound = $('td.a-right.first', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n        if (codeFound) {\r\n            var discount = Number($('td.a-right.second span', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n            return {\r\n                success: discount > 0,\r\n                savings: isNaN(discount) ? 0.00 : discount\r\n            };\r\n        }\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#discount-coupon-form').submit();\r\n        }\r\n    }\r\n};",
	"healthydirections": "var ExternalProvider = {\r\n    prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.hasWWW() ? 'https:\/\/www.healthydirections.com\/rest\/model\/atg\/commerce\/order\/purchase\/CartModifierActor\/claimCoupon' : 'https:\/\/healthydirections.com\/rest\/model\/atg\/commerce\/order\/purchase\/CartModifierActor\/claimCoupon';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var resultUrl = this.hasWWW() ? 'https:\/\/www.healthydirections.com\/rest\/model\/atg\/commerce\/ShoppingCartActor\/fullCartInfo' : 'https:\/\/healthydirections.com\/rest\/model\/atg\/commerce\/ShoppingCartActor\/fullCartInfo';\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        resultUrlInput.attr('value', resultUrl);\r\n\r\n        var clearUrlInput = $('#___jpClearUrl');\r\n        var clearUrl = this.hasWWW() ? 'https:\/\/www.healthydirections.com\/rest\/model\/atg\/commerce\/order\/purchase\/CartModifierActor\/removeCoupon' : 'https:\/\/healthydirections.com\/rest\/model\/atg\/commerce\/order\/purchase\/CartModifierActor\/removeCoupon';\r\n\r\n        if (!clearUrlInput.length) {\r\n            clearUrlInput = document.createElement('input');\r\n            clearUrlInput.id = '___jpClearUrl';\r\n            clearUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n            clearUrlInput = $('#___jpClearUrl');\r\n        }\r\n\r\n        clearUrlInput.attr('value', clearUrl);\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.orderTotal.couponsAndPromotions.orderCoupons[0].totalAdjustment * -1);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    hasWWW: function () {\r\n        return \/www\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[title=\"Promotion Code\"]').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('input[title=\"Promotion Code\"]').get(0).dispatchEvent(changeEvent);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('.apply-coupon').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider.prepareUrl();",
	"healthypets": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"cart_data\", JSON.stringify(window.cart));';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var cartData = $('body').attr('cart_data');\r\n        var JSONData = JSON.parse(cartData);\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                store: 'healthypetscom',\r\n                items: [{\r\n                    name: JSONData.items[0].name,\r\n                    id: JSONData.items[0].id,\r\n                    code: JSONData.items[0].code,\r\n                    qty: JSONData.items[0].qty,\r\n                    price: JSONData.items[0].price,\r\n                    imageUrl: JSONData.items[0].imageUrl,\r\n                    options: []\r\n                }],\r\n                coupon: {\r\n                    code: '',\r\n                    value: ''\r\n                },\r\n                promo: {\r\n                    code: code,\r\n                    'gift-card': ''\r\n                },\r\n                totals: { total: JSONData.orderTotal }\r\n            };\r\n        }\r\n\r\n        return JSON.stringify(data);\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response[0].discount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promoGift').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#promoGift').get(0).dispatchEvent(changeEvent);\r\n            $('input[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"hearingdirect": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('#onestepcheckout-form strong .price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat(response.grandTotal);\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"hearthsong": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n}",
	"heartlandamerica": "var ExternalProvider = {\r\n\r\n    prepare: function (type, code) {\r\n        if (type === \"applyCouponUrl\") {\r\n            var data = {\r\n                \"sourceCode\": code\r\n            };\r\n            return data;\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response),\r\n            savings = parseFloat($('.ord-smry-data.ord-smry-disc', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings > 0.00) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.0\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#heartlandamerica').val(bestCode);\r\n            $('#onepage-source-code-button').click();\r\n        }\r\n    }\r\n}",
	"heavengifts": "var ExternalProvider = {\r\n    promoId: '',\r\n\r\n    prepare: function (type) {\r\n        if (type === 'clearCouponUrl') {\r\n            return {\r\n                promotionId: this.promoId,\r\n                regionId: '',\r\n                shippingMethodId: ''\r\n            };\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response) {\r\n        var savings;\r\n\r\n        this.promoId = response.data.coupon.promotionId;\r\n\r\n        response.data.promotions.forEach(element => {\r\n            if (element.promotion_id === this.promoId) {\r\n                savings = parseFloat(element.discount.replace(\/[^0-9|.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#couponCode').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#couponCode').trigger('input').trigger('change');\r\n            $('#couponApply')[0].click();\r\n        }\r\n    }\r\n};",
	"heidiklumintimates": "var ExternalProvider = {\r\n  prepare: function (step, code) {\r\n    if (step === 'injectCoupon') {\r\n      this.inputCodeField(code);\r\n    } else {\r\n      $('ul.cart-financials [ng-click=\"removeCoupon()\"].apply-coupon-text').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if (step === 'injectCoupon') {\r\n      this.waitForSelector(this.isLoaded, this.getDiscount.bind(this, next), 200);\r\n    } else {\r\n      this.waitForSelector(this.isRemoved, function () {\r\n        next();\r\n      }, 200);\r\n    }\r\n  },\r\n  parse: function () {\r\n    let savings = parseFloat(this.promoCodeSavings.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) this.inputCodeField(bestCode);\r\n  },\r\n  getDiscount: function (next) {\r\n    ExternalProvider.promoCodeSavings = $('li[ng-model=\"financials().totalDiscount\"] span:contains(\"-\").ng-binding').text();\r\n    next();\r\n  },\r\n  isLoaded: function () {\r\n    return $('.loading').length < 1;\r\n  },\r\n  isRemoved: function () {\r\n    return $('li[ng-model=\"financials().totalDiscount\"] span:contains(\"-\").ng-binding.ng-hide').length;\r\n  },\r\n  inputCodeField: function (code) {\r\n    $('input.coupon-input').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n    $('input.coupon-input').trigger('input').trigger('change');\r\n    $('form.cart-coupon button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n  },\r\n  waitForSelector: function (isResolved, runNext, maxWait) {\r\n    let waited = 0;\r\n    let waitForClose = setInterval(function () {\r\n      if (waited > maxWait || isResolved()) {\r\n        clearInterval(waitForClose);\r\n        runNext();\r\n      }\r\n      waited++;\r\n    }, 10);\r\n  },\r\n};",
	"heine": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.tablerow .value', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"helbrecht": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale;\r\n    var newCurrency;\r\n    var contrySelector = $('#sprachen p:eq(0)').text();\r\n\r\n    if (contrySelector === 'GB') {\r\n      locale = localeMapping.GB;\r\n      newCurrency = 'GBP';\r\n    } else if (contrySelector === 'FR' || contrySelector === 'DE') {\r\n      locale = contrySelector === 'DE' ? localeMapping.DE : localeMapping.FR;\r\n      newCurrency = 'EUR';\r\n    } else {\r\n      locale = localeMapping.US;\r\n      newCurrency = currency;\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  }\r\n};",
	"hellofresh": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('input[data-test-id=\"voucher-textbox\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[data-test-id=\"voucher-textbox\"]').trigger('input').trigger('change');\r\n      $('span[data-test-id=\"apply-voucher-button\"] button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('span[data-test-id=\"apply-voucher-button\"] button').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1500);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 50);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('strong:contains(\"-\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"hellofreshde": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('input[data-test-id=\"voucher-textbox\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[data-test-id=\"voucher-textbox\"]').trigger('input').trigger('change');\r\n      $('span[data-test-id=\"apply-voucher-button\"] button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else if (type === 'injectCoupon') {\r\n      $('span[data-test-id=\"apply-voucher-button\"] button').click();\r\n    }\r\n  },\r\n\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 800);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 50);\r\n    }\r\n  },\r\n\r\n  parse: function () {\r\n    var savings = parseFloat($('strong:contains(\"-\")').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"hellotushy": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"helzberg": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"henribendel": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = $('.order-value.plus').text().replace(\/[^0-9.]\/g, '');\r\n        var newTotal = $('.order-value.plus', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"herbaldtoxfr": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.FR;\r\n        var newCurrency = 'EUR';\r\n        var selector = $('.panel-default:last').text();\r\n\r\n        if (selector.includes('$')) {\r\n            locale = localeMapping.US;\r\n            newCurrency = 'USD';\r\n        } else if (selector.includes('\u00a3')) {\r\n            locale = localeMapping.UK;\r\n            newCurrency = 'GBP';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"herbergers": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('#OrderSummary .orderTotal').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('#OrderSummary .orderTotal', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        $('#promoCode').val(bestCode);\r\n        $('#applyPromo')[0].click();\r\n    }\r\n};",
	"herbsprocom": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.html.checkout_totals);\r\n        var savings = parseFloat($('.discount-price', responseHTML).text().replace(\/[$-]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"herbspro": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-subtotal-discount .cart-total-right .value-summary', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.discount-coupon-code').val(bestCode);\r\n            $('.button-2.apply-discount-coupon-code-button').click();\r\n        }\r\n    }\r\n};",
	"highcountrygardens": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = Number($('.cart-totals span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"highernature": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.text-right:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"highlights": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-totals span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"hightsupplements": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'clearCouponUrl') {\r\n            return {\r\n                security: $('script:contains(\"wc_cart_params\"), script:contains(\"wc_checkout_params\")').text().match(\/\"remove_coupon_nonce\":\"([a-z0-9]+)\"\/)[1],\r\n                coupon: code\r\n            };\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-discount td>span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('input[name=\"apply_coupon\"], button[name=\"apply_coupon\"]').click();\r\n        }\r\n    }\r\n};",
	"hilinecoffee": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('.button-coupon').click();\r\n        }\r\n    }\r\n};",
	"hiphopbling": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().split(\"$\")[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"hirmerde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.basket_contents_voucher div:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n     \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"hm": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('#orderSummary table tfoot span').text().replace(\/[^0-9|.]\/g, '')) * 100;\r\n        var newPrice = parseFloat($('#orderSummary table tfoot span', responseHTML).text().replace(\/[^0-9|.]\/g, '')) * 100;\r\n        var savings = (oldPrice - newPrice) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"hobbs": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var o = {};\r\n      var a = this.serializeArray();\r\n\r\n      $.each(a, function () {\r\n        if (o[this.name] !== undefined) {\r\n          if (!o[this.name].push) {\r\n            o[this.name] = [o[this.name]];\r\n          }\r\n\r\n          o[this.name].push(this.value || '');\r\n        } else {\r\n          o[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return o;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    var formData = $('#shopping-bag').serializeObject();\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      formData = Object.assign(formData, {\r\n        promotion: code\r\n      });\r\n    }\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.basket-total-price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.basket-total-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"hobbycraftuk": "var ExternalProvider = {\r\n  prepare: function (step, code) {\r\n    let data = this.serializeForm($('#aspnetForm'));\r\n    data.ctl00$con1$cartinfo$txtPromoCode = code;\r\n    data.__ASYNCPOST = true\r\n    if (step === 'applyCouponUrl') {\r\n      data.__EVENTTARGET = 'ctl00$con1$cartinfo$btnApplyPromo';\r\n      data.ctl00$MasterPageScriptManager = 'ctl00$con1$cartinfo$upBasket|ctl00$con1$cartinfo$btnApplyPromo'\r\n    } else if (step === 'clearCouponUrl') {\r\n      data.__EVENTTARGET = 'ctl00$con1$cartinfo$btnRemovePromo'\r\n      data.ctl00$MasterPageScriptManager = 'ctl00$con1$cartinfo$upBasket|ctl00$con1$cartinfo$btnRemovePromo'\r\n    }\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('#ctl00_con1_cartinfo_pnlSubTotalPromotion .gle-promo-val', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  serializeForm: function (formElement) {\r\n    let serializeForm = formElement.serializeArray();\r\n    let formData = {};\r\n    serializeForm.forEach(data => {\r\n      formData[data.name] = data.value;\r\n    });\r\n    return formData;\r\n  }\r\n};",
	"hobbylobby": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.cartTotals);\r\n        var savings = $('span:contains(\"-$\")', responseHTML)[0].innerHTML.replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"hobbytron": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('table.totals td.totals_saved', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        $('input[name=coupon_code]').val(bestCode);\r\n        $('.cart_coupon input[type=submit').click();\r\n    }\r\n};",
	"hobbytron.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('table.totals td.totals_saved', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        $('input[name=coupon_code]').val(bestCode);\r\n        $('#coupon').next('input').click();\r\n    }\r\n};",
	"hockeymonkey": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.a-right .price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code, #id_couponcode').val(bestCode);\r\n            $('button[title=\"Apply Code\"], #onestepcheckout-coupon-add').click();\r\n        }\r\n    }\r\n};",
	"holabirdsports": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        var savings = parseFloat(oldTotal - newTotal);\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"holidaycheckde": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var productUrl = location.href;\r\n    var offerId = productUrl.split('\/')[5];\r\n    var hotelId = productUrl.split('\/')[6].match(\/hotelid=([A-z|0-9|-]+)&\/)[1];\r\n    var travelkind = productUrl.split('\/')[6].match(\/travelkind=([A-z|0-9|-]+)&\/)[1];\r\n    var totalPrice = parseFloat($('.hc-box-wrapper.form-end-section .total-price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var applyUrl = 'offerId=' + offerId + '&hotelId=' + hotelId + '&travelkind=' + travelkind + '&totalPrice=' + totalPrice + '&totalCurrency=EUR&bonusCodes=';\r\n    var applyUrlInput = $('#__applyUrl');\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__applyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__applyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.total);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    var setDeeperInput = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value').set;\r\n    var submit = new Event('input', { bubbles: true });\r\n\r\n    setDeeperInput.call($('input[name*=\"coupon.coupon\"]')[0], bestCode);\r\n    $('input[name*=\"coupon.coupon\"]')[0].dispatchEvent(submit);\r\n    $('button[data-event-action*=\"Coupon\"]').click();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"holidaytaxis": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.GB;\r\n        var newCurrency = 'USD';\r\n        var selector = location.href;\r\n\r\n        if (selector.match('en')) {\r\n            locale = localeMapping.US;\r\n            newCurrency = 'GBP';\r\n        } else if (selector.match('de')) {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        } else if (selector.match('fr')) {\r\n            locale = localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"hollandandbarrett": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.basket-order-savings:contains(-)', responseHTML).eq(0).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#discountCode').val(bestCode);\r\n      $('#addDiscount').click();\r\n    }\r\n  }\r\n};",
	"home24": "var ExternalProvider = {\r\n    init: function () {\r\n        this.ajaxSettings('');\r\n    },\r\n    ajaxSettings: function (type) {\r\n        $.ajaxSettings.beforeSend = function (xhr) {\r\n            xhr.setRequestHeader('X-Requested-With', { toString: function () {\r\n                return type;\r\n            } });\r\n        };\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.acte-checkout-voucherDiscount-lbl', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"home24fr": "var ExternalProvider = {\r\n    init: function () {\r\n        this.ajaxSettings('');\r\n    },\r\n    ajaxSettings: function (type) {\r\n        $.ajaxSettings.beforeSend = function (xhr) {\r\n            xhr.setRequestHeader('X-Requested-With', { toString: function () {\r\n                return type;\r\n            } });\r\n        };\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.acte-checkout-voucherDiscount-lbl', responseHTML).text().replace(\/,\/g, '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#eingeben').val(bestCode);\r\n            $('.acte-cart-addVoucher-frm button').click();\r\n        }\r\n    }\r\n};",
	"homechef": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, couponCode) {\r\n        var matches = this.regularExpression.exec(response);\r\n\r\n        if (matches && matches[1]) {\r\n            this.savings = parseFloat(matches[1]);\r\n\r\n            if (!isNaN(this.savings) && this.savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: this.savings\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: this.savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    },\r\n    regularExpression: \/class=\\\\'label--negative\\\\'>- \\$(.+?)<\/,\r\n    savings: 0.00\r\n};",
	"homeclick": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n        function serializeObject(a) {\r\n            var o = {};\r\n            $.each(a, function() {\r\n                o[this.name] = this.value || '';\r\n            });\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('#aspnetForm').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data['_ctl0:_ctl0:bodyPlaceHolder:mainContent:promoCodeTxt'] = code;\r\n            data['_ctl0:_ctl0:bodyPlaceHolder:mainContent:butApplyPromo'] = '';\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.promo-amount strong', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            $('#_ctl0__ctl0_bodyPlaceHolder_mainContent_promoCodeTxt').val(bestCode);\r\n            $('#_ctl0__ctl0_bodyPlaceHolder_mainContent_butApplyPromo')[0].click();\r\n        }\r\n    }\r\n};",
	"homeclick.mobile": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n        function serializeObject(a) {\r\n            var o = {};\r\n            $.each(a, function() {\r\n                o[this.name] = this.value || '';\r\n            });\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('#aspnetForm').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data['_ctl0:_ctl0:bodyPlaceHolder:mainContent:promoCodeTxt'] = code;\r\n            data['_ctl0:_ctl0:bodyPlaceHolder:mainContent:butApplyPromo'] = '';\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.checkout__list__title', responseHTML).filter(function(){\r\n            return $(this).text().indexOf('Promo') > -1;\r\n        }).next('.checkout__list__amount');\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            $('#_ctl0__ctl0_bodyPlaceHolder_mainContent_promoCodeTxt').val(bestCode);\r\n            $('#_ctl0__ctl0_bodyPlaceHolder_mainContent_butApplyPromo')[0].click();\r\n        }\r\n    }\r\n};",
	"homedepot": "var ExternalProvider = {\r\n    prepare: function(type, code) {\r\n        if (type == 'applyCouponUrl') {\r\n            return JSON.stringify({ PromotionUpdateRequest : { promotionCodes : [code] } });\r\n        }\r\n        return null;\r\n    },\r\n    parse: function(response, status, $xhr, code) {\r\n        if (response && response.CartModel && response.CartModel.promotionsModel) {\r\n            for (var i in response.CartModel.promotionsModel) {\r\n                var promo = response.CartModel.promotionsModel[i];\r\n                if (promo.promoCode.toLowerCase() == code.toLowerCase()) {\r\n                    var savings = Math.abs(parseFloat(promo.appliedDiscount));\r\n                    return {\r\n                        success: true,\r\n                        savings: savings\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function() {\r\n        location.reload();\r\n    }\r\n}",
	"homedics": "var ExternalProvider = {\r\n    parse: function(response){\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function(bestCode){\r\n        if(bestCode){\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply Coupon\"]').click();\r\n        }\r\n    }\r\n}",
	"homedna": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.strikeout', responseHTML).text().replace(\/[^.0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.pull-right:contains(\"$\"):last', responseHTML).text().replace(\/[^.0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"homelia": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"homethangs": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('b:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};",
	"honeybum": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').prop('disabled', false).click();\r\n        }\r\n    }\r\n};",
	"hoover": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount .value:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n        $('#dwfrm_cart_couponCode').val(bestCode).closest('form').submit();\r\n    }\r\n  }\r\n};",
	"hopefashion": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply Coupon\"]').click();\r\n        }\r\n    }\r\n};",
	"horchow": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.promo.amt', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        savings = parseFloat($('.promo.amt').text().replace(\/[^0-9]\/g, '')) \/ 100 > savings ? 0.00 : savings;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"horse": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isCartPage() ? 'https:\/\/www.horse.com\/Cart.aspx' : 'https:\/\/www.horse.com\/BillingShipping.aspx';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        \r\n        var data = {};\r\n\r\n        if (this.isCartPage()) {\r\n            \r\n            data = {\r\n                __EVENTTARGET: '', \r\n                __EVENTARGUMENT: '',\r\n                __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n                __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n                _forgeryToken: $('#_forgeryToken').val(),\r\n                ctl00$ctl00$InjectedHeaderControl$Search: '',\r\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$txtPromoCode: code,\r\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$btnPromoCode: '',\r\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$ddlDonationAmount: $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_ddlDonationAmount').val(),\r\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$hidCartItemId: '',\r\n            };\r\n\r\n        }else{\r\n\r\n            data = {\r\n                __EVENTTARGET: '',\r\n                __EVENTARGUMENT: '',\r\n                __LASTFOCUS: '',\r\n                __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n                __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n                _forgeryToken: $('#_forgeryToken').val(),\r\n                ctl00$MainContent$billingShipping$TxtBxEmail: '',\r\n                ctl00$MainContent$billingShipping$TxtBxFName: '',\r\n                ctl00$MainContent$billingShipping$TxtBxLName: '',\r\n                ctl00$MainContent$billingShipping$TxtBxAddy1: '',\r\n                ctl00$MainContent$billingShipping$TxtBxAddy2: '',\r\n                ctl00$MainContent$billingShipping$TxtBxCity: '',\r\n                ctl00$MainContent$billingShipping$DDLState: '',\r\n                ctl00$MainContent$billingShipping$TxtBxZip: '',\r\n                ctl00$MainContent$billingShipping$DDLCountry: $('#ctl00_MainContent_billingShipping_DDLCountry').val(),\r\n                ctl00$MainContent$billingShipping$TxtBxCompany: '',\r\n                ctl00$MainContent$billingShipping$TxtBxDayPhone: '',\r\n                ctl00$MainContent$billingShipping$TxtBxEveningPhone: '',\r\n                ctl00$MainContent$billingShipping$TxtBxFax: '',\r\n                ctl00$MainContent$billingShipping$billHdnCountryUpdate: '',\r\n                ctl00$MainContent$billingShipping$TxtBxGuestPw: '',\r\n                ctl00$MainContent$billingShipping$TxtBxGuestPwConf: '',\r\n                ctl00$MainContent$billingShipping$chkShippingIsSameAsBilling: 'on',\r\n                ctl00$MainContent$billingShipping$TxtBxShipFName: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipLName: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipAddy1: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipAddy2: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipCity: '',\r\n                ctl00$MainContent$billingShipping$DDLShipState: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipZip: '',\r\n                ctl00$MainContent$billingShipping$DDLShipCountry: $('#ctl00_MainContent_billingShipping_DDLShipCountry').val(),\r\n                ctl00$MainContent$billingShipping$TxtBxShipCompany: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipDayPhone: '',\r\n                ctl00$MainContent$billingShipping$shipHdnCountryUpdate: '',\r\n                selectedOptionLabel: $('#selectedOptionLabel').val(),\r\n                hidUpgradeEligible: 'true',\r\n                ctl00$MainContent$billingShipping$grpPaymentOptions: $('#ctl00_MainContent_billingShipping_radbtnCreditCard').val(),\r\n                ctl00$MainContent$billingShipping$hdnEditOrAddCard: $('#ctl00_MainContent_billingShipping_hdnEditOrAddCard').val(),\r\n                ctl00$MainContent$billingShipping$DDLCCType: $('#ctl00_MainContent_billingShipping_DDLCCType').val(),\r\n                ctl00$MainContent$billingShipping$TxtBxCCNum: '',\r\n                ctl00$MainContent$billingShipping$TxtBxCCV: '',\r\n                ctl00$MainContent$billingShipping$DDLExpMonth: $('#ctl00_MainContent_billingShipping_DDLExpMonth').val(),\r\n                ctl00$MainContent$billingShipping$DDLExpYear: $('#ctl00_MainContent_billingShipping_DDLExpYear').val(),\r\n                ctl00$MainContent$billingShipping$TxtGiftCoupon: '',\r\n                ctl00$MainContent$billingShipping$txtPromoCode: code,\r\n                ctl00$MainContent$billingShipping$btnPromoCode: '',\r\n                ctl00$MainContent$billingShipping$chkEmailOptOut: 'on',\r\n                ctl00$MainContent$billingShipping$hdnAutoShipUpdates: '',\r\n            };\r\n\r\n        }\r\n\r\n        return data;\r\n    \r\n    },\r\n    isCartPage: function () {\r\n        return window.location.href.indexOf('Cart') !== -1;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.promo-amount-value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"horseloverz": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.cart_product_discount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"hostgator": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    var invoice = {};\r\n    invoice.is_tax_exempt = $('#vatID:visible').val() ? 1 : 0;\r\n    invoice.country = $('#country').val();\r\n    invoice.subcountry = $('#state').val();\r\n    invoice.coupon = code;\r\n\r\n    var items = [];\r\n    items.push({ plan_id: $('#billing_cycle').val() });\r\n    $('.addon-input:checked').each(function () {\r\n      items.push(({ product_id: $(this).attr('data-id') }));\r\n    });\r\n\r\n    var requestParams = {};\r\n    requestParams.invoice = invoice;\r\n    requestParams.items = items;\r\n    var requestJSON = JSON.stringify(requestParams);\r\n    data.request = requestJSON;\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.invoice.discount);\r\n    var storeSavings = $('#preview_discount').length ? parseFloat($('#preview_discount').text().replace(\/[^0-9|.]\/g, '')) : 0;\r\n\r\n    return {\r\n      success: savings > storeSavings,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon-code').val(bestCode);\r\n      $('#check-coupon').prop('disabled', false);\r\n      $('#check-coupon').click();\r\n    }\r\n  }\r\n};",
	"hotels": "var ExternalProvider = {\r\n  init: function () {\r\n    if (!$('.widget-toggle.deals-and-discounts-toggle').hasClass('widget-toggle-open')) {\r\n      $('.widget-toggle-btn').click();\r\n    }\r\n\r\n    $('#deals-and-discounts-coupon-code-selector').click();\r\n  },\r\n  parse: function (response) {\r\n    var savings = response.data.discountDetail.sumOfLoyaltyRewardsSaving.replace(\/[^0-9|.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      var clickEvent = new MouseEvent('mousedown', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n      var inputCodeField = $('#coupon-code-field');\r\n\r\n      this.dispatchEvent(inputCodeField, 'focus');\r\n\r\n      var inputEvent = new Event('input', { bubbles: true, cancelable: true });\r\n\r\n      inputEvent.simulated = true;\r\n      inputCodeField.focus();\r\n      inputCodeField.val(bestCode)[0].dispatchEvent(inputEvent);\r\n      inputCodeField.trigger('input').trigger('change').trigger('click').trigger('blur');\r\n\r\n      var interval = setInterval(function () {\r\n        $('#coupon-code-apply-btn').get(0).dispatchEvent(clickEvent);\r\n        $('#coupon-code-apply-btn').click();\r\n\r\n        if ($('#coupon-code-remove-btn').length) {\r\n          clearInterval(interval);\r\n        }\r\n      }, 2000);\r\n    }\r\n  },\r\n  dispatchEvent: function (element, event) {\r\n    var evt = document.createEvent('HTMLEvents');\r\n\r\n    evt.initEvent(event, true, true);\r\n    element.get(0).dispatchEvent(evt);\r\n\r\n    return this;\r\n  }\r\n};",
	"hotels": "var $ = $;\r\n\r\n\/\/ Helper functions borrowed\r\n\/\/ from jquery.simulate.js\r\n\/\/ https:\/\/github.com\/jquery\/jquery-simulate\/blob\/master\/jquery.simulate.js\r\n\r\nvar createEvent = function (type, options) {\r\n    var event;\r\n    options = $.extend({\r\n        bubbles: true,\r\n        cancelable: true,\r\n        view: window,\r\n        ctrlKey: false,\r\n        altKey: false,\r\n        shiftKey: false,\r\n        metaKey: false,\r\n        keyCode: 0,\r\n        charCode: undefined\r\n    }, options);\r\n\r\n    if (document.createEvent) {\r\n        try {\r\n            event = document.createEvent(\"KeyEvents\");\r\n            event.initKeyEvent(type, options.bubbles, options.cancelable, options.view,\r\n                options.ctrlKey, options.altKey, options.shiftKey, options.metaKey,\r\n                options.keyCode, options.charCode);\r\n            \/\/ initKeyEvent throws an exception in WebKit\r\n            \/\/ see: http:\/\/stackoverflow.com\/questions\/6406784\/initkeyevent-keypress-only-works-in-firefox-need-a-cross-browser-solution\r\n            \/\/ and also https:\/\/bugs.webkit.org\/show_bug.cgi?id=13368\r\n            \/\/ fall back to a generic event until we decide to implement initKeyboardEvent\r\n        } catch (err) {\r\n            event = document.createEvent(\"Events\");\r\n            event.initEvent(type, options.bubbles, options.cancelable);\r\n            $.extend(event, {\r\n                view: options.view,\r\n                ctrlKey: options.ctrlKey,\r\n                altKey: options.altKey,\r\n                shiftKey: options.shiftKey,\r\n                metaKey: options.metaKey,\r\n                keyCode: options.keyCode,\r\n                charCode: options.charCode\r\n            });\r\n        }\r\n    } else if (document.createEventObject) {\r\n        event = document.createEventObject();\r\n        $.extend(event, options);\r\n    }\r\n\r\n    if (!!\/msie [\\w.]+\/.exec(navigator.userAgent.toLowerCase()) || (({}).toString.call(window.opera) === \"[object Opera]\")) {\r\n        event.keyCode = (options.charCode > 0) ? options.charCode : options.keyCode;\r\n        event.charCode = undefined;\r\n    }\r\n\r\n    return event;\r\n};\r\n\r\nvar dispatchEvent = function (elem, type, event) {\r\n    if (elem.dispatchEvent) {\r\n        elem.dispatchEvent(event);\r\n    } else if (type === \"click\" && elem.click && elem.nodeName.toLowerCase() === \"input\") {\r\n        elem.click();\r\n    } else if (elem.fireEvent) {\r\n        elem.fireEvent(\"on\" + type, event);\r\n    }\r\n};\r\nvar simulateEvent = function (elem, type, options) {\r\n    var event = createEvent(type, options);\r\n    dispatchEvent(elem, type, event, options);\r\n};\r\n\r\nvar ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        if (response.data.discountDetail) {\r\n            var savings = response.data.discountDetail.sumOfLoyaltyRewardsSaving.replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n\r\n        if (!$('.widget-toggle.deals-and-discounts-toggle').hasClass('widget-toggle-open')) {\r\n            $('.widget-toggle-btn').click();\r\n        }\r\n        $('#deals-and-discounts-coupon-code-selector').click();\r\n\r\n        var $couponCodeField = $('#coupon-code-field');\r\n\r\n        $couponCodeField.val(bestCode);\r\n        simulateEvent($couponCodeField[0], 'change');\r\n        simulateEvent($couponCodeField[0], 'input');\r\n        $couponCodeField.change();\r\n        $('#coupon-code-apply-btn').click();\r\n    }\r\n};",
	"hotels.mobile": "var $ = $;\r\n\r\n\/\/ Helper functions borrowed\r\n\/\/ from jwuery.simulate.js\r\n\/\/ https:\/\/github.com\/jquery\/jquery-simulate\/blob\/master\/jquery.simulate.js\r\n\r\nvar createEvent = function(type, options){\r\n\tvar event;\r\n\toptions = $.extend({\r\n\t\tbubbles: true,\r\n\t\tcancelable: true,\r\n\t\tview: window,\r\n\t\tctrlKey: false,\r\n\t\taltKey: false,\r\n\t\tshiftKey: false,\r\n\t\tmetaKey: false,\r\n\t\tkeyCode: 0,\r\n\t\tcharCode: undefined\r\n\t}, options );\r\n\r\n\tif ( document.createEvent ) {\r\n\t\ttry {\r\n\t\t\tevent = document.createEvent( \"KeyEvents\" );\r\n\t\t\tevent.initKeyEvent( type, options.bubbles, options.cancelable, options.view,\r\n\t\t\t\toptions.ctrlKey, options.altKey, options.shiftKey, options.metaKey,\r\n\t\t\t\toptions.keyCode, options.charCode );\r\n\t\t\t\/\/ initKeyEvent throws an exception in WebKit\r\n\t\t\t\/\/ see: http:\/\/stackoverflow.com\/questions\/6406784\/initkeyevent-keypress-only-works-in-firefox-need-a-cross-browser-solution\r\n\t\t\t\/\/ and also https:\/\/bugs.webkit.org\/show_bug.cgi?id=13368\r\n\t\t\t\/\/ fall back to a generic event until we decide to implement initKeyboardEvent\r\n\t\t} catch( err ) {\r\n\t\t\tevent = document.createEvent( \"Events\" );\r\n\t\t\tevent.initEvent( type, options.bubbles, options.cancelable );\r\n\t\t\t$.extend( event, {\r\n\t\t\t\tview: options.view,\r\n\t\t\t\tctrlKey: options.ctrlKey,\r\n\t\t\t\taltKey: options.altKey,\r\n\t\t\t\tshiftKey: options.shiftKey,\r\n\t\t\t\tmetaKey: options.metaKey,\r\n\t\t\t\tkeyCode: options.keyCode,\r\n\t\t\t\tcharCode: options.charCode\r\n\t\t\t});\r\n\t\t}\r\n\t} else if ( document.createEventObject ) {\r\n\t\tevent = document.createEventObject();\r\n\t\t$.extend( event, options );\r\n\t}\r\n\r\n\tif ( !!\/msie [\\w.]+\/.exec( navigator.userAgent.toLowerCase() ) || (({}).toString.call( window.opera ) === \"[object Opera]\") ) {\r\n\t\tevent.keyCode = (options.charCode > 0) ? options.charCode : options.keyCode;\r\n\t\tevent.charCode = undefined;\r\n\t}\r\n\r\n\treturn event;\r\n};\r\nvar dispatchEvent = function(elem, type, event){\r\n\tif ( elem.dispatchEvent ) {\r\n\t\telem.dispatchEvent( event );\r\n\t} else if ( type === \"click\" && elem.click && elem.nodeName.toLowerCase() === \"input\" ) {\r\n\t\telem.click();\r\n\t} else if ( elem.fireEvent ) {\r\n\t\telem.fireEvent( \"on\" + type, event );\r\n\t}\r\n};\r\nvar similateEvent = function(elem, type, options){\r\n\tvar event = createEvent( type, options );\r\n\tdispatchEvent( elem, type, event, options );\r\n};\r\n\r\nvar simulateBlur = function(elem){\r\n\r\n\tvar focusoutEvent,\r\n\t\ttriggered = false,\r\n\t\telement = $( elem );\r\n\r\n\tfunction trigger() {\r\n\t\ttriggered = true;\r\n\t}\r\n\r\n\telement.bind( \"blur\", trigger );\r\n\telement[ 0 ].blur();\r\n\r\n\t\/\/ blur events are async in IE\r\n\tsetTimeout(function() {\r\n\t\t\/\/ IE won't let the blur occur if the window is inactive\r\n\t\tif ( element[ 0 ].ownerDocument.activeElement === element[ 0 ] ) {\r\n\t\t\telement[ 0 ].ownerDocument.body.focus();\r\n\t\t}\r\n\r\n\t\t\/\/ Firefox won't trigger events if the window is inactive\r\n\t\t\/\/ IE doesn't trigger events if we had to manually focus the body\r\n\t\tif ( !triggered ) {\r\n\t\t\tfocusoutEvent = $.Event( \"focusout\" );\r\n\t\t\tfocusoutEvent.preventDefault();\r\n\t\t\telement.trigger( focusoutEvent );\r\n\t\t\telement.triggerHandler( \"blur\" );\r\n\t\t}\r\n\t\telement.unbind( \"blur\", trigger );\r\n\t}, 1 );\r\n};\r\n\r\nvar ExternalProvider = {\r\n\tparse: function(response, status, $xhr, code){\r\n\t\tif(response.data.discountDetail){\r\n\t\t\tvar savings = response.data.discountDetail.sumOfLoyaltyRewardsSaving.replace(\/[^0-9|\\.]\/g, '');\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: parseFloat(savings)\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t}\r\n\t},\r\n\r\n\tcomplete: function(bestCode, bestSaving){\r\n\r\n\t\tif(!$('.widget-toggle.deals-and-discounts-toggle').hasClass('widget-toggle-open')){\r\n\t\t\t$('.widget-toggle-btn').click();\r\n\t\t}\r\n\t\t$('#deals-and-discounts-coupon-code-selector').click();\r\n\r\n\t\t$('#coupon-code-field').val(bestCode);\r\n\t\tsimilateEvent($('#coupon-code-field')[0], 'change');\r\n\t\tsimilateEvent($('#coupon-code-field')[0], 'input');\r\n\t\t$('#coupon-code-field').change();\r\n\t\t$('#coupon-code-apply-btn').click();\r\n\t}\r\n};",
	"hotelsde": "var $ = $;\r\nvar ExternalProvider = {\r\n    init: function () {\r\n        if (!$('.widget-toggle.deals-and-discounts-toggle').hasClass('widget-toggle-open')) {\r\n            $('.widget-toggle-btn').click();\r\n        }\r\n        $('#deals-and-discounts-coupon-code-selector').click();\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.data.discountDetail.sumOfLoyaltyRewardsSaving.replace(\/[^0-9|.]\/g, '');\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var clickEvent = new MouseEvent('mousedown', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n            var inputCodeField = $('#coupon-code-field');\r\n            this.dispatchEvent(inputCodeField, 'focus');\r\n            var inputEvent = new Event('input', { bubbles: true, cancelable: true });\r\n            inputEvent.simulated = true;\r\n            inputCodeField.focus();\r\n            inputCodeField.val(bestCode)[0].dispatchEvent(inputEvent);\r\n            inputCodeField.trigger('input').trigger('change').trigger('click').trigger('blur');\r\n            var interval = setInterval(function () {\r\n                $('#coupon-code-apply-btn').get(0).dispatchEvent(clickEvent);\r\n                $('#coupon-code-apply-btn').click();\r\n                if ($('#coupon-code-remove-btn').length) {\r\n                    clearInterval(interval);\r\n                }\r\n            }, 2000);\r\n        }\r\n    },\r\n    dispatchEvent: function (element, event) {\r\n        var evt = document.createEvent('HTMLEvents');\r\n        evt.initEvent(event, true, true);\r\n        element.get(0).dispatchEvent(evt);\r\n        return this;\r\n    }\r\n};",
	"hotelsfr": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (action, code) {\r\n        var formData = $('#booking-form').serializeObject();\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                'bookingSignInDiscount.coupon.code': code\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.data.discountDetail.sumOfLoyaltyRewardsSaving.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var s = document.createElement('script');\r\n            var code = \"jQuery('#coupon-code-field').trigger('change');jQuery('#coupon-code-apply-btn').click();\";\r\n\r\n            $('#coupon-code-field').val(bestCode);\r\n            s.id = 'tempScript';\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n            $('#tempScript').remove();\r\n        }\r\n    }\r\n};",
	"hotter": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    let locale;\r\n\r\n    if ($('#AjaxDataLayer:contains(\\'\"currency\": \"GBP\"\\')').length) {\r\n      locale = localeMapping['GB'];\r\n      currency = 'GBP';\r\n    } else if ($('#AjaxDataLayer:contains(\\'\"currency\": \"EUR\"\\')').length) {\r\n      locale = localeMapping['DE'];\r\n      currency = 'EUR';\r\n    } else {\r\n      locale = localeMapping['US'];\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits: 2 });\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action === 'resultUrl') {\r\n      $.ajax({\r\n        url: 'https:\/\/www.hotter.com\/webapp\/wcs\/stores\/servlet\/AjaxOrderChangeServiceItemUpdate?storeId=' + $('input[name=storeId]').val() + '',\r\n        type: 'POST',\r\n        async: false,\r\n        data: {\r\n          orderId: '.',\r\n          calculationUsage: '-1,-2,-5,-6,-7',\r\n          requesttype: 'ajax'\r\n        }\r\n      });\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.basket-panel__totals-value.basket-panel__total-line').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat(response[0].basket.total);\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCode').val(bestCode);\r\n      $('.buttons.grey.basket-panel__promo-button').click();\r\n    }\r\n  }\r\n};",
	"hottopic": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings;\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.orderTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.orderTotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        savings = oldTotal - newTotal;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if ($('#add-coupon').length > 0) {\r\n            location.reload();\r\n        } else {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#apply-coupon').click();\r\n        }\r\n    }\r\n};",
	"houseofbath": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('p:contains(\"- \u00a3\")', responseHTML).eq(0).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"houseoffraser": "var ExternalProvider = {\r\n  prepare: function (step, code) {\r\n    let data = this.serializeFormData($('#Form'));\r\n    switch (step) {\r\n      case 'applyCouponUrl':\r\n        data.dnn$ctr87462426$ViewBasket$PromoCodeManager$txtPromoCode = code;\r\n        data.__EVENTTARGET = 'dnn$ctr87462426$ViewBasket$PromoCodeManager$btnApplyPromoCode';\r\n        return data;\r\n      case 'clearCouponUrl':\r\n        data.dnn$ctr87462426$ViewBasket$PromoCodeManager$txtPromoCode = 'removeCode';\r\n        data.__EVENTTARGET = 'dnn$ctr87462426$ViewBasket$PromoCodeManager$btnApplyPromoCode';\r\n        return data;\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('#BasketSummaryDiscountValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  serializeFormData: function (form) {\r\n    let formArray = form.serializeArray();\r\n    let formData = {}\r\n    formArray.forEach(data => { formData[data.name] = data.value });\r\n    return formData;\r\n  },\r\n};",
	"houseofgerryweber": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var newCurrency = currency;\r\n    var selector = location.pathname;\r\n\r\n    if (selector.match(\/(gb)\/g)) {\r\n      locale = localeMapping.GB;\r\n      newCurrency = 'GBP';\r\n    } else if (selector.match(\/(de|fr)\/g)) {\r\n      locale = selector.match(\/(de)\/g) ? localeMapping.DE : localeMapping.FR;\r\n      newCurrency = 'EUR';\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-totals--green:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"dwfrm_cart_couponCode\"]').val(bestCode);\r\n      $('.coupon-btn').click();\r\n    }\r\n  }\r\n};",
	"hp": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('#customRefreshGrandTotal').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('#customRefreshGrandTotal', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            $('#addcoupongiftcardbutton')[0].click();\r\n            $('#promoCode').val(bestCode);\r\n            $('#applycouponbutton')[0].click();\r\n        }\r\n    }\r\n};",
	"hsamuel": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHMTL = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__item-value:contains(\"-\")', responseHMTL).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#couponCode').val(bestCode);\r\n      $('button:contains(\"Apply\")').click();\r\n    }\r\n  }\r\n};",
	"hsastore": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(Math.abs(response.DiscountTotal));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"hse24": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0;\r\n        var oldTotal = parseFloat($('#orderSummary strong > span').text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.hse24.de\/checkout\/voucher\/' + code,\r\n            method: 'PUT',\r\n            success: function () {\r\n                $.ajax({\r\n                    url: 'https:\/\/www.hse24.de\/checkout\/',\r\n                    method: 'GET',\r\n                    success: function (result) {\r\n                        var newTotal = parseFloat($('#orderSummary strong > span', $.parseHTML(result)).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n                        savings = oldTotal - newTotal;\r\n                    },\r\n                    async: false\r\n                });\r\n            },\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"hsn": "\/\/ Get vs post headers\r\n$.ajaxSettings.beforeSend = function(xhr){\r\n    this.type === \"POST\"? xhr.setRequestHeader('Accept', {toString: function(){ return 'application\/json, text\/javascript, *\/*; q=0.01'; }}) : xhr.setRequestHeader('X-Requested-With', {toString: function(){ return ''; }});\r\n};\r\n\r\nvar ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var success = $('.discount-text', responseHTML).text().indexOf(code) >= 0;\r\n        var savings = $('.discount-value', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings ? parseFloat(savings) : 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if(!bestCode) return;\r\n\r\n        location.reload();\r\n    }\r\n};",
	"hudsonjeans": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"hugendubelde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('form[name=\"orderDeleteCouponForm\"] .last-coupon', responseHTML).first().text().split('=')[1].replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"hughes": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.column--total-price:contains(\"-\"):eq(0)', responseHTML).text().replace(\/,\/g, '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"hukgear": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.reduction-code:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"humanic": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.c-cart__summary__loyalty:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"hunkemollerde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('.secondary.button-alt').click();\r\n    }\r\n  }\r\n};",
	"hunkemollerfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.negative-amount~span[itemprop=\"price\"]', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"hushpuppies": "var ExternalProvider = {\r\n  _cartTotal: 0,\r\n  init: function () {\r\n    this._cartTotal = parseFloat($('.order-total.textalign-right').text().replace(\/[^0-9|.]\/g, ''));\r\n  },\r\n  parse: function (response) {\r\n    var newTotal = response.basketTotal;\r\n    var savings = this._cartTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"hylete": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#shopping-cart-totals-table > tbody > tr.summary-total.show-details > td:nth-child(2) > span:contains(\"-$\")', responseHTML)[0].innerHTML.replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"hyperbiotics": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#checkout_reduction_code').trigger('input').trigger('change');\r\n      $('.field__input-btn.btn')[0].click();\r\n      $('#checkout_reduction_code').val('');\r\n    }\r\n  }\r\n};",
	"hypershop": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"iboats": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    \r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"entityId\", window.checkoutConfig.quoteData.entity_id);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var user = '\/carts\/mine';\r\n    var entityId = $('body').attr('entityid');\r\n\r\n    if ($('.form.form-login').length > 0 || $('.logged-in').length === 0 ) {\r\n      user = '\/guest-carts\/' + entityId;\r\n    }\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/www.iboats.com\/shop\/rest\/default\/V1' + user + '\/coupons\/CLAIMCODE';\r\n    var resultUrl = 'https:\/\/www.iboats.com\/shop\/rest\/default\/V1' + user + '\/payment-information';\r\n    var clearUrl = 'https:\/\/www.iboats.com\/shop\/rest\/default\/V1' + user + '\/coupons';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    applyUrlInput.attr('data-value', resultUrl);\r\n    applyUrlInput.attr('data-clear', clearUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = response.totals.base_discount_amount;\r\n    var savings = Math.abs(parseFloat(responseHTML));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && location.pathname === '\/shop\/checkout\/cart\/') {\r\n      $('#block-discount-heading').click();\r\n      $('#coupon_code').val(bestCode);\r\n      $('.action.apply.primary').click();\r\n    } else if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"icejerseys": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = false;\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        comment: $('input[name=\"comment\"]').val(),\r\n        cardType: $('#cardType').val(),\r\n        cardName: $('input[name=\"cardName\"]').val(),\r\n        cardNumber: $('input[name=\"cardNumber\"]').val(),\r\n        cMonth: $('input[name=\"cMonth\"]').val(),\r\n        cYear: $('input[name=\"cYear\"]').val(),\r\n        cardCVD: $('input[name=\"cardCVD\"]').val(),\r\n        poNumber: null,\r\n        requestShipMethod: $('#requestShipMethod1').val(),\r\n        requestShipPreference: null,\r\n        discountCode: code\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.red:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) $('#discountCode').val(bestCode).closest('form').submit();\r\n  }\r\n};",
	"icing": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"idealfit": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.responsiveBasket_totalValue').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('.responsiveBasket_totalValue', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"idmobile": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.voucher-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"idratherbewithmydog": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"igourmet": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"DISCOUNT_AMOUNT\": \"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#discountcode').val(bestCode);\r\n      $('#discountbutton').click();\r\n    }\r\n  }\r\n};",
	"iherb": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, couponCode) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#grand-total').text().replace(this.regularExpression, ''));\r\n        var newTotal = parseFloat($('#grand-total', responseHTML).text().replace(this.regularExpression, ''));\r\n\r\n        this.savings = oldTotal - newTotal;\r\n\r\n        if(this.savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(this.savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: this.savings\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSaving) {\r\n        if(bestCode){\r\n            $('#coupon-input').val(bestCode);\r\n            $('#coupon-apply').click();\r\n        }\r\n    },\r\n    savings: 0.00,\r\n    regularExpression: \/[^0-9|\\.]\/g\r\n};",
	"illamasqua": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.responsiveBasket_totalSavingsPrice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#discountcode').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#discountcode').trigger('input').trigger('change');\r\n      $('#add-discount-code')[0].click();\r\n      $('#discountcode').val('');\r\n    }\r\n  }\r\n};",
	"illesteva": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"illy": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n\r\n        if ($('img[alt=\"GBR\"]').length) {\r\n            locale = localeMapping.GB;\r\n            currency = 'GBP';\r\n        } else if ($('img[alt=\"DEU\"]').length || $('img[alt=\"FRA\"]').length) {\r\n            locale = $('img[alt=\"DEU\"]').length ? localeMapping.DE : localeMapping.FR;\r\n            currency = 'EUR';\r\n        } else {\r\n            locale = localeMapping.US;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits: 2 });\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        var pid = $('.og-offer:first').attr('data-og-product');\r\n        var dwOptString = 'dwopt_' + pid + '_subscriptionOG';\r\n        var ogSubscribe = 'og-subscribe-sc-' + pid;\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                csrf_token: $('input[name=\"csrf_token\"]:first').val(),\r\n                pid: pid,\r\n                uuid: $('.row.cart-row').attr('data-uuid'),\r\n                dwfrm_cart_shipments_i0_items_i0_quantity: $('input[name=\"dwfrm_cart_shipments_i0_items_i0_quantity\"]').val(),\r\n                dwfrm_cart_couponCode: code,\r\n                dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon',\r\n                [ogSubscribe]: $('#og-off-sc-' + pid).val(),\r\n                [dwOptString]: $(\"input[name=\" + dwOptString + \"]\").val()\r\n            };\r\n            return data;\r\n        }\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.order-discount td:eq(1)', responseHTML).text().replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promo-code').val(bestCode);\r\n            $('button[value=\"dwfrm_cart_addCoupon\"]').click();\r\n        }\r\n    }\r\n};",
	"imomoko": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"impressionende": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat($('dd.savings-totals-price.total-price', $.parseHTML(response)).text().replace(',','.').replace(\/[^.0-9]\/g,''));\r\n\r\n        return {\r\n            success: savings > 0.00,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"imwalking": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('.basket-total.grand-total .basket-prices .basket-total-price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = response.totals.discounted.totalGross.value;\r\n        var savings = (oldTotal - newTotal);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"imyfone": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.cart.pricing.discount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"incase": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"incipio": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var getAmount = response.match('discount_amount\":\"-(.*)base_discount_amount');\r\n        var savings = parseFloat(getAmount[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply Discount\"]').click();\r\n        }\r\n    }\r\n};",
	"indiajane": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.customer.cart.items[0].coupon_discount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"coupon\"]').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('input[name=\"coupon\"]').trigger('input').trigger('change');\r\n            $('.c-4-set > .button-2').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        }\r\n    }\r\n};",
	"indigomobile": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.DefaultOrder.PricingSummary.PromotionDiscount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($('#cartpage-coupontext').length) {\r\n                var keydownEvent = document.createEvent('KeyboardEvent');\r\n                var observer = new MutationObserver(function (mutations) {\r\n                    mutations.forEach(function () {\r\n                        var clickEvent = document.createEvent('MouseEvents');\r\n\r\n                        clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\r\n                        $('.cartpage-applycouponlink').get(0).dispatchEvent(clickEvent);\r\n                    });\r\n                });\r\n                var target = document.getElementsByClassName('cartpage-applycouponlink')[0];\r\n\r\n                $('#cartpage-coupontext').val(bestCode);\r\n                keydownEvent.initKeyboardEvent('keydown', true, true);\r\n                $('#cartpage-coupontext').get(0).dispatchEvent(keydownEvent);\r\n\r\n                if (bestCode) {\r\n                    observer.observe(target, { attributes: true, attributeFilter: ['style'] });\r\n                }\r\n            } else {\r\n                $('input[name=\"couponCode\"]').val(bestCode);\r\n\r\n                if (bestCode) {\r\n                    $('.buttonCouponApply').show();\r\n\r\n                    var clickEvent = document.createEvent('MouseEvents');\r\n\r\n                    clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\r\n                    $('.buttonCouponApply').get(0).dispatchEvent(clickEvent);\r\n                }\r\n            }\r\n        }\r\n    }\r\n};",
	"indigo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.DefaultOrder.PricingSummary.PromotionDiscount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"indochino": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.cart.Coupons[0].FormattedValue.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $(\"#shoppingBagCoupon\").val(bestCode);\r\n            var changeEvent = new Event('change', {\r\n                'bubbles': true,\r\n                'cancelable': true\r\n            });\r\n            $('#shoppingBagCoupon').get(0).dispatchEvent(changeEvent);\r\n            $('.shoppingBagComponent__inputWrapper__btn.shoppingBagComponent__btn').removeAttr('disabled').click();\r\n\r\n        }\r\n    }\r\n};",
	"infinitealoe": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var newCurrency = $('#currency-selector option:selected').text().trim();\r\n\r\n    if (newCurrency === 'GBP') {\r\n      locale = localeMapping.GB;\r\n    } else if (newCurrency === 'EUR') {\r\n      locale = localeMapping.FR;\r\n    } else {\r\n      newCurrency = 'USD';\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.couponDicountAmount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"infinityhair": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"Checkout\", Shopify.Checkout.token);';\r\n    scriptContent += 'body.setAttribute(\"shopId\", __st.a);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var checkout = $('body').attr('Checkout');\r\n    var shopId = $('body').attr('shopId');\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/www.infinityhair.com\/' + shopId + '\/checkouts\/' + checkout + '';\r\n\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total-line__price:eq(1) ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    var calcDec = Math.pow(10, 2);\r\n\r\n    savings = Math.trunc(savings * calcDec) \/ calcDec;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.field__input-btn.btn').removeAttr('disabled');\r\n      $('.field__input-btn.btn').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"ingridandisabel": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('span.total-recap__final-price', $.parseHTML(response)).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) $('#checkout_reduction_code').val(bestCode).closest('form').submit();\r\n    }\r\n};",
	"inkbox": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"inkcartridges": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function() {\r\n        retries++;\r\n        $('span[ng-click=\"removeCoupon(coupon)\"]').click();\r\n        if (!$('span[ng-click=\"removeCoupon(coupon)\"]').length && retries < 3) {\r\n          clearInterval(interval);         \r\n          resolve();\r\n        } else if (retries === 3) {\r\n          resolve();\r\n        }\r\n      }, 2000);\r\n    })\r\n  },\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      data = {\r\n        async: true,\r\n        coupon_code: code\r\n      };\r\n\r\n      return JSON.stringify(data);\r\n    } else if (action === 'clearCouponUrl') {\r\n      data = {\r\n        amcoupon_code_cancel: code,\r\n        async: true\r\n      };\r\n\r\n      return JSON.stringify(data);\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.discount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"inkfarm": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML(response.responseText);\r\n        var oldTotal = $('#cart .table-cell-item-no-width').text();\r\n        oldTotal = parseFloat(oldTotal.substring(oldTotal.lastIndexOf('$')+1));\r\n        var newTotal = $('.table-cell-item-no-width', responseHTML).text();\r\n        newTotal = parseFloat(newTotal.substring(newTotal.lastIndexOf('$')+1));\r\n        var savings = oldTotal - newTotal;\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        } \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n        if (bestCode) {\r\n            $('#use_promo').click();\r\n            $('[name=\"promo_code\"]').val(bestCode);\r\n            $('.promo_app_div input[type=\"button\"]').click();\r\n        }\r\n    }\r\n};",
	"inkfarm.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = $('#center_col div:contains(\"Your Total:\")').text();\r\n        oldTotal = parseFloat(oldTotal.substring(oldTotal.indexOf('$')+1));\r\n        var newTotal = $('#center_col div:contains(\"Your Total:\")', responseHTML).text();\r\n        newTotal = parseFloat(newTotal.substring(newTotal.indexOf('$')+1));\r\n        var savings = oldTotal - newTotal;\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        } \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n        if (bestCode) {\r\n            $('[name=\"promo_code\"]').val(bestCode);\r\n            $('.promo_app_div input[type=\"button\"]').click();\r\n        }\r\n    }\r\n};",
	"inkhead": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.data.discountTotalAmount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#txt_couponcode').val(bestCode);\r\n            $('#btn_coupon').click();\r\n        }\r\n    }\r\n};",
	"inkjetsuperstore": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var applyUrlInput = $('#__applyUrl');\r\n    var applyUrl = 'https:\/\/www.inkjetsuperstore.com\/sbe-vinson\/services\/LiveOrder.Service.ss?internalid=cart&t=' + jQuery.now() + '&c=' + $(\"input[name='c']\").val() + '&n=1';\r\n\r\n    if (\/checkout\/.test(location.href) === true) {\r\n      applyUrl = 'https:\/\/checkout.inkjetsuperstore.com\/sbe-vinson\/services\/LiveOrder.Service.ss?internalid=cart&t=' + jQuery.now() + '&c=' + $(\"input[name='c']\").val() + '&n=1';\r\n    }\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__applyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__applyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'applyCouponUrl') {\r\n      return JSON.stringify({\r\n        promocodes: [{ code: code }]\r\n      });\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var savings = response.summary.discounttotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promocode').val(bestCode);\r\n      $('.cart-promocode-form-summary-button-apply-promocode').click();\r\n    }\r\n  }\r\n};\r\n\r\nExternalProvider.__prepareUrl();",
	"inkkas": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};",
	"innertraditions": "var ExternalProvider = {\r\n\r\n\tparse: function(response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsHTML = $('#shopping-cart-totals-table > tbody > tr:eq(1) > td:eq(1) > span', responseHTML).html();\r\n        var savings = savingsHTML ? parseFloat(savingsHTML.replace(\/[^0-9|\\.]\/g, '')) : 0.00;\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t};\r\n\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings){\r\n\t\t\r\n\t\tif (bestCode) location.reload(true);\r\n\r\n    }\r\n    \r\n};",
	"inspiredcases": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"inspiredsilver": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.shopping-cart-total .price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.shopping-cart-total .price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal > newTotal ? oldTotal - newTotal : 0.00;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"intersport": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.column--total-price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"interstatemusic": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'removeInjectedCoupon') {\r\n            $('#mainContentPlaceHolder_shoppingcart_txtCouponCode').val('');\r\n            $('#mainContentPlaceHolder_shoppingcart_btnApplyCouponCode').click();\r\n        } else {\r\n            $('#mainContentPlaceHolder_shoppingcart_txtCouponCode').val(code);\r\n            $('#mainContentPlaceHolder_shoppingcart_btnApplyCouponCode').click();\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.shoppingcartpricetablepromo .shoppingcartpricetablevalue', responseHTML).text().replace(\/[$-]\/g, '');\r\n        savings = parseFloat(savings);\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    whenReady: function(step, next)\r\n    {\r\n        var counter = 0;\r\n        var codeApplyTime;\r\n        if (step === 'removeInjectedCoupon') {\r\n            codeApplyTime = setInterval(function () {\r\n                counter += 1;\r\n                if ((parseFloat($('.shoppingcartpricetablepromo .shoppingcartpricetablevalue').text().replace(\/[$-]\/g, '')) === 0 && !$('#mainContentPlaceHolder_shoppingcart_lblError p').text()) || counter > 100) {\r\n                    clearInterval(codeApplyTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        } else {\r\n            codeApplyTime = setInterval(function () {\r\n                counter += 1;\r\n                if (parseFloat($('.shoppingcartpricetablepromo .shoppingcartpricetablevalue').text().replace(\/[$-]\/g, '')) > 0 || $('#mainContentPlaceHolder_shoppingcart_lblError p').text() || counter > 100) {\r\n                    clearInterval(codeApplyTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        }\r\n    }\r\n};",
	"lorealparisfr": "var ExternalProvider = {\n    parse: function (response, a, $b, code) {\n        var responseHTML = $.parseHTML(response);\n        var validCoupon = $('.cartcoupon .value', responseHTML).text().toUpperCase().includes(code.toUpperCase());\n        var validSavings = parseFloat($('.order_discount.discount.js_order_discount td:contains(\"-\")', responseHTML).text().replace(\/[^.0-9|]\/g, '')) \/ 100;\n        var savings = validCoupon ? validSavings : 0.00;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"thebookofeveryone": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var savings = parseFloat(response.data.discount * -1);\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode, bestSaving) {\n        if (bestCode) location.reload(true);\n    }\n};",
	"rakuten": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.coupon.discount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"ashleyfurniture": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var oldTotal = parseFloat($('.order-subtotal').text().replace(\/[^0-9|.]\/g, ''));\n    var newTotal = parseFloat($('.order-subtotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    var savings = oldTotal - newTotal;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#dwfrm_cart_couponCode').val(bestCode);\n      $('#add-coupon').click();\n    }\n  }\n};",
	"bricstore": "var ExternalProvider = {\n    userId: '',\n\n    _prepareUrl: function () {\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\n        var script = document.createElement('script');\n\n        scriptContent += 'body.setAttribute(\"userid\", window.wc_cart_params.apply_coupon_nonce);';\n\n        script.id = 'tmpScript';\n        script.appendChild(document.createTextNode(scriptContent));\n        (document.body || document.head || document.documentElement).appendChild(script);\n\n        var value = $('body').attr('userid');\n\n        this.userId = value;\n        $('body').removeAttr(name);\n    },\n    prepare: function (type, code) {\n        if (type === 'resultUrl') this.ajaxSettings(null);\n    },\n    ajaxSettings: function (type) {\n        $.ajaxSettings.beforeSend = function (xhr) {\n            xhr.setRequestHeader('X-Requested-With', {\n                toString: function () {\n                    return type;\n                }\n            });\n        };\n    },\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = $('.bfx-total-discount', responseHTML).text().replace(\/[^0-9|.]\/g, '');\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};\n\nExternalProvider._prepareUrl();",
	"goldsmiths": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var oldTotal = parseFloat($('#orderTotalValueText').text().replace(\/[^0-9|.]\/g, ''));\n        var newTotal = parseFloat($('#orderTotalValueText', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n        var savings = oldTotal - newTotal;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"blinq": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var success = response.coupon_code.toLowerCase() === code.toLowerCase();\r\n        var savings = response.coupon_discount !== 0\r\n            ? parseFloat(response.coupon_discount) \/ 100\r\n            : 0.00;\r\n\r\n        return {\r\n            success: success,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n}",
	"theartofshaving": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n    \tvar responseHTML = $.parseHTML(response);\n    \tvar savings = parseFloat($('#discount-total', responseHTML).text().replace('$', '').replace('-', '').trim());\n        \n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    }\n}",
	"prohealth": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#checkout_reduction_code').val(bestCode);\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\n    }\n  }\n};",
	"seatgeek": "var ExternalProvider = {\n    _prepareUrl: function () {\n        var clientIdUrlInput = $('#___jpClientId');\n        var tokenUrlInput = $('#___jpToken');\n        var clientIdUrl = this.retrieveUserId();\n        var tokenUrl = this.retrieveToken();\n\n        if (!clientIdUrlInput.length) {\n            clientIdUrlInput = document.createElement('input');\n            clientIdUrlInput.id = '___jpClientId';\n            clientIdUrlInput.style.display = 'none';\n            (document.body || document.head || document.documentElement).appendChild(clientIdUrlInput);\n            clientIdUrlInput = $('#___jpClientId');\n        }\n\n        if (!tokenUrlInput.length) {\n            tokenUrlInput = document.createElement('input');\n            tokenUrlInput.id = '___jpToken';\n            tokenUrlInput.style.display = 'none';\n            (document.body || document.head || document.documentElement).appendChild(tokenUrlInput);\n            tokenUrlInput = $('#___jpToken');\n        }\n\n        clientIdUrlInput.attr('value', clientIdUrl);\n        tokenUrlInput.attr('value', tokenUrl);\n    },\n\n    retrieveUserId: function () {\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\n        var script = document.createElement('script');\n\n\n        scriptContent += 'body.setAttribute(\"userid\", SG.API._clientId);';\n\n        script.id = 'tmpScript';\n        script.appendChild(document.createTextNode(scriptContent));\n        (document.body || document.head || document.documentElement).appendChild(script);\n\n        var value = $('body').attr('userid');\n\n        $('body').removeAttr('userid');\n\n        return value;\n    },\n\n    retrieveToken: function () {\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\n        var script = document.createElement('script');\n\n\n        scriptContent += 'body.setAttribute(\"token\", SG.API._accessToken);';\n\n        script.id = 'tmpScript';\n        script.appendChild(document.createTextNode(scriptContent));\n        (document.body || document.head || document.documentElement).appendChild(script);\n\n        var value = 'token ' + $('body').attr('token');\n\n        $('body').removeAttr('token');\n\n        return value;\n    },\n\n    parse: function (response) {\n        var savings = parseFloat(response.available_discounts[0].discount.toString().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};\nExternalProvider._prepareUrl();",
	"gherrini": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"belkin": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('div.col-xs-4.col-sm-2.cart-totals-right.text-right.discount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"ctshirts": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var oldPrice = parseFloat($(\".totals__container .item__price--large:contains('To pay')\").next().text().replace(\/[^0-9.]\/g, ''));\n        var newPrice = parseFloat($(\".totals__container .item__price--large:contains('To pay')\", responseHTML).next().text().replace(\/[^0-9.]\/g, ''));\n        var savings = oldPrice - newPrice;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#dwfrm_cart_couponCode').val(bestCode);\n            $('#add-coupon').click();\n        }\n    }\n};",
	"bouqs": "var ExternalProvider = {\n    _prepareUrl: function () {\n        var ApplyUrlInput = $('#___jpApplyUrl');\n        var ApplyUrl = this.isCartPage() ? 'https:\/\/bouqs.com\/cart' : 'https:\/\/bouqs.com\/checkout\/payment';\n\n        if (!ApplyUrlInput.length) {\n            ApplyUrlInput = document.createElement('input');\n            ApplyUrlInput.id = '___jpApplyUrl';\n            ApplyUrlInput.style.display = 'none';\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\n            ApplyUrlInput = $('#___jpApplyUrl');\n        }\n\n        ApplyUrlInput.attr('value', ApplyUrl);\n    },\n    isCartPage: function () {\n        return \/cart\/.test(location.href);\n    },\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode, bestSavings) {\n        if (bestCode) location.reload();\n    }\n};\n\nExternalProvider._prepareUrl();",
	"livingsocial": "var ExternalProvider = {\n    prepare: function (type, code) {\n        if (type === 'applyCouponUrl') {\n            var domConfig = JSON.parse($('#domConfig').text());\n            var items = domConfig.appState.items.map(function (item) {\n                return {\n                    dealId: item.dealId,\n                    dealUudi: item.dealUuid,\n                    delivery: item.delivery,\n                    eligibleForIncentives: item.eligibleForIncentives,\n                    optionUuid: item.optionUuid,\n                    pledgeId: item.pledgeId,\n                    quantity: item.quantity,\n                    quoteId: item.quoteId,\n                    redemptionCountry: item.redemptionCountry,\n                    redemptionPostalCode: item.redemptionPostalCode,\n                    redemptionRadius: item.redemptionRadius,\n                    _meta: {}\n                };\n            });\n            var data = {\n                bundle_enabled: '',\n                cart_enabled: '',\n                isPromoCodeSuggestion: true,\n                is_beauty_now: '',\n                is_edit_order: '',\n                is_stores_deal: 'false',\n                items: items,\n                order_id: '',\n                promo_code_input: code,\n                uiTreatmentUUID: domConfig.appState.uiTreatmentUUID,\n                _csrf: $('#_csrf').attr('value')\n            };\n\n            $.ajax({\n                url: 'https:\/\/www.livingsocial.com\/checkout\/proxy\/order_breakdown',\n                type: 'POST',\n                dataType: 'json',\n                data: data,\n                success: function (response) {\n                    if (response.error) data.promo_code_input = response.suggestedPromoCode;\n                },\n                async: false\n            });\n\n            return JSON.stringify(data);\n        }\n\n        return false;\n    },\n    parse: function (response) {\n        var savings = Math.abs(response.discounts.amount \/ 100);\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            var keyChangeEvent = document.createEvent('KeyboardEvent');\n            var clickEvent = document.createEvent('MouseEvents');\n\n            $('[name=\"discount-code\"]').val(bestCode);\n            $('[name=\"discount-code\"]').focus();\n            keyChangeEvent.initKeyboardEvent('change', true, true);\n            $('[name=\"discount-code\"]').get(0).dispatchEvent(keyChangeEvent);\n            clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\n            $('#incentives a.promo').get(0).dispatchEvent(clickEvent);\n            $('.promo-code .apply').click();\n        }\n    }\n};",
	"polarnopyretusa": "var ExternalProvider = {\n    cartTotal: 0,\n    totalSelector: '.checkout_section_table tr tr:contains(\"Grand Total\") td:eq(1)',\n    init: function () {\n        this.cartTotal = parseFloat($(this.totalSelector).text().replace('$', ''));\n    },\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = this.cartTotal - parseFloat($(this.totalSelector, responseHTML).text().replace('$', ''));\n        if (savings > 0) {\n            return {\n                success: true,\n                savings: savings\n            }\n        }\n        return {\n            success: false,\n            savings: 0.00\n        }\n    },\n    complete: function () {\n        location.reload(true);\n    }\n}",
	"polarnopyretusa.mobile": "var ExternalProvider = {\n    cartTotal: 0,\n    totalSelector: '.checkout_section_table tr tr:contains(\"Grand Total\") td:eq(1)',\n    init: function () {\n        this.cartTotal = parseFloat($piggyJq(this.totalSelector).text().replace('$', ''));\n    },\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $piggyJq.parseHTML(response);\n        var savings = this.cartTotal - parseFloat($piggyJq(this.totalSelector, responseHTML).text().replace('$', ''));\n        if (savings > 0) {\n            return {\n                success: true,\n                savings: savings\n            }\n        }\n        return {\n            success: false,\n            savings: 0.00\n        }\n    },\n    complete: function () {\n        location.reload(true);\n    }\n}",
	"amritasingh": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var str = $('.reduction-code__text:contains(\"-$\")', responseHTML).text();\n    var pos = str.indexOf('(') + 1;\n\n    str = str.slice(pos, str.lastIndexOf(')'));\n\n    var savings = parseFloat(str.replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"mountainhardwear": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount .value', responseHTML).text().replace(\/[$()-]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        location.reload(true);\r\n    }\r\n};",
	"wisefoodstorage": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"landsendde": "var ExternalProvider = {\n  parse: function (response) {\n    var savings = parseFloat(response.redemption.promotions[0].promoPrice.replace(\/[^0-9.]\/g, '')) \/ 100;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"domino": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n\r\n        var params = {\r\n\t        \"shipping_address\":false,\r\n            \"billing_address\":false\r\n        };\r\n\r\n        if(type === 'applyCouponUrl') {\r\n            params = Object.assign(params, {\r\n\t            coupon_code: {\r\n\t                code: code\r\n                }\r\n            })\r\n        }\r\n\r\n        return JSON.stringify(params);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        return {\r\n            success: response.coupon_details.code.toLowerCase() === code.toLowerCase(),\r\n            savings: response.total_savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(!bestCode) return false;\r\n\r\n        var $containerMeta = $('.order-meta-container'), $this, $input;\r\n\t    var event = new Event('input', { bubbles: true });\r\n        $containerMeta.each(function() {\r\n            $this = $(this);\r\n\r\n            if($('header', $this).text().indexOf('Coupon Code') !== -1) {\r\n\r\n\t            $input = $('.input-with-button input', $this).get(0);\r\n\t            $input.value = bestCode;\r\n\t            $input.dispatchEvent(event);\r\n\r\n                $('.input-with-button button', $this).get(0).click();\r\n            }\r\n        })\r\n    }\r\n};",
	"domino.tablet": "var ExternalProvider = {\r\n\r\n\t$: window.$piggyJq,\r\n\r\n    prepare: function (type, code) {\r\n\r\n        var params = {\r\n\t        \"shipping_address\":false,\r\n            \"billing_address\":false\r\n        };\r\n\r\n        if(type === 'applyCouponUrl') {\r\n            params = Object.assign(params, {\r\n\t            coupon_code: {\r\n\t                code: code\r\n                }\r\n            })\r\n        }\r\n\r\n        return JSON.stringify(params);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        return {\r\n            success: response.coupon_details.code.toLowerCase() === code.toLowerCase(),\r\n            savings: response.total_savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(!bestCode) return false;\r\n\r\n        var $containerMeta = this.$('.order-meta-container'), $this, $input;\r\n\t    var event = new Event('input', { bubbles: true });\r\n        $containerMeta.each(function() {\r\n            $this = ExternalProvider.$(this);\r\n\r\n            if(ExternalProvider.$('header', $this).text().indexOf('Coupon Code') !== -1) {\r\n\r\n\t            $input = ExternalProvider.$('.input-with-button input', $this).get(0);\r\n\t            $input.value = bestCode;\r\n\t            $input.dispatchEvent(event);\r\n\r\n                ExternalProvider.$('.input-with-button button', $this).get(0).click();\r\n            }\r\n        })\r\n    }\r\n};",
	"domino.mobile": "var ExternalProvider = {\r\n    $: window.$piggyJq,\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var $response = this.$.parseHTML(response),\r\n            $cartItem = this.$('.list-unstyled.type-case-lower .row', $response),\r\n            codeFound = false, savings = 0.00, $this;\r\n\r\n        $cartItem.each(function() {\r\n            $this = ExternalProvider.$(this);\r\n            if(ExternalProvider.$('p:first-child', $this).text().indexOf('Discount') !== -1) {\r\n                codeFound = true;\r\n                savings = parseFloat(ExternalProvider.$('p:last-child', $this).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            }\r\n        });\r\n\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(!bestCode) return false;\r\n\r\n        this.$('#mobile_site_models_forms_checkout_SettingsForm_coupon_code').val(bestCode);\r\n        this.$('form button').click();\r\n    }\r\n}",
	"asgoodasnew": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.couponData strong', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n        $.ajax({\n            url: $('.removeFn', responseHTML).attr('href'),\n            type: 'GET',\n            async: false\n        });\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"highernature": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.text-right:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"sportscheckde": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.price.price--discount', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('input[name=\"CreditNoteID\"]').val(bestCode);\n      $('.btn.form-buttons__submit.no-margin-bottom').click();\n    }\n  }\n};",
	"newbalance": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.discount .total-value', responseHTML).eq(0).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"worldwidestereo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('strong:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lakeside": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var discount = parseFloat($('#cart_subtotals div:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        if (discount > 0) {\n            return {\n                success: true,\n                savings: discount\n            };\n        }\n\n        return {\n            success: false,\n            savings: 0.00\n        };\n    },\n    complete: function (bestCode, bestSavings) {\n        if (bestCode) {\n            $('#applyCouponInput').val(bestCode);\n            $('[name=\"_D:\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode\"]').val(bestCode);\n            $('#applyButton')[0].click();\n        }\n    }\n};",
	"nordstromrack": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = $('#total-discount', responseHTML).text().replace(\/[^0-9.]\/g, '');\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('.standard-form__sub-content input[name=\"code\"]').val(bestCode);\n            $('.standard-form__sub-content button').click();\n        }\n    }\n};",
	"glamuse": "var ExternalProvider = {\n    prepareUrl: function () {\n        var applyUrlInput = $('#___jpCouponUrl');\n        var applyUrl = this.isCartPage() ? 'https:\/\/www.glamuse.com\/panier' : 'https:\/\/www.glamuse.com\/recapitulatif';\n\n        if (!applyUrlInput.length) {\n            applyUrlInput = document.createElement('input');\n            applyUrlInput.id = '___jpCouponUrl';\n            applyUrlInput.style.display = 'none';\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n            applyUrlInput = $('#___jpCouponUrl');\n        }\n\n        applyUrlInput.attr('value', applyUrl);\n    },\n    isCartPage: function () {\n        return location.href.contains('panier');\n    },\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = $('.right.nowrap:contains(\"-\")', responseHTML).text().replace(',', '.');\n\n        savings = parseFloat(savings.replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    },\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n        var locale = localeMapping.US;\n        var selector = $('#current-country').text().trim();\n\n        if (selector === 'United Kingdom') {\n            locale = localeMapping.GB;\n            currency = 'GBP';\n        } else if (selector === 'Germany') {\n            locale = localeMapping.DE;\n            currency = 'EUR';\n        } else if (selector === 'la France') {\n            locale = localeMapping.FR;\n            currency = 'EUR';\n        }\n\n        if (this.isCartPage()) {\n            if ($('#currency_symbol_right').val().contains('\u20ac')) {\n                locale = localeMapping.FR;\n                currency = 'EUR';\n            }\n        } else if ($('#panier_total').text().contains('\u20ac')) {\n            locale = localeMapping.FR;\n            currency = 'EUR';\n        }\n\n\n        return amount.toLocaleString(locale, { style: 'currency', currency: currency, minimumFractionDigits: minimumFractionDigits });\n    }\n};\nExternalProvider.prepareUrl();",
	"klipshop": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('#total_discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        }\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#discount_name').val(bestCode);\n            $('#submitAddDiscount').click();\n        }   \n    }\n};",
	"personalizationmall": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('#ctl00_mainContent_rowCouponTotal', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        }\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#ctl00_mainContent_txtCouponCode').val(bestCode);\n            $('#ctl00_mainContent_cmdReviseDiscout').click();\n        }\n    }\n};",
	"merrell": "var ExternalProvider = {\n  _prepareUrl: function () {\n    var resultUrlInput = $('#___jpResultUrl');\n    var resultUrl = this.isCartPage() ? $('#cart-items-form')[0].action : 'https:\/\/www.merrell.com\/on\/demandware.store\/Sites-merrell_us-Site\/default\/Cart-UpdateBasketTotals';\n    if (!resultUrlInput.length) {\n      resultUrlInput = document.createElement('input');\n      resultUrlInput.id = '___jpResultUrl';\n      resultUrlInput.style.display = 'none';\n      (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\n      resultUrlInput = $('#___jpResultUrl');\n    }\n\n    resultUrlInput.attr('value', resultUrl);\n  },\n\n  isCartPage: function () {\n    return \/US\\\/en\\\/billing\/.test(location.pathname);\n  },\n\n  parse: function (response) {\n    var parseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.order-savings-amount', parseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};\n\nExternalProvider._prepareUrl();",
	"backjoy": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"samash": "var ExternalProvider = {\n  applyUrl: '',\n  __prepareUrl: function () {\n    var applyUrlElement = $('#__jpCouponUrl');\n    this.applyUrl = this.isCheckoutPage() ? 'https:\/\/www.samash.com\/AjaxPromotionCodeManageApply' : 'https:\/\/www.samash.com\/webapp\/wcs\/stores\/servlet\/AjaxPromotionCodeManageApply';\n    if (applyUrlElement.length < 1) {\n      $('<input>', {\n        id: '__jpCouponUrl',\n        value: this.applyUrl,\n        type: 'hidden'\n      }).appendTo('body');\n    }\n    this.initSerializeObject();\n  },\n  initSerializeObject: function () {\n    $.fn.serializeObject = function () {\n      var object = {};\n      var data = this.serializeArray();\n      for (var i = 0; i < data.length; i++) {\n        object[data[i]['name']] = data[i]['value'];\n      }\n\n      return object;\n    };\n  },\n  prepare: function (action, code) {\n    return this.arrangeData(action, code);\n  },\n  arrangeData: function (action, code) {\n    var formData = formData = $('#PromotionCodeForm').serializeObject();\n    formData.promoCode = code;\n\n    if (action === 'clearCouponUrl') {\n      formData.taskType = 'R';\n      formData.calculationUsage = '-1,-2,-3,-4,-5,-6,-7';\n    }\n\n    if (action === 'resultUrl') {\n      formData = {};\n    }\n\n    return formData;\n  },\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var oldTotal = parseFloat($('#orderTotalPrice').text().replace(\/[^0-9|.]\/g, ''));\n    var newTotal = parseFloat($('#orderTotalPrice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    var savings = oldTotal - newTotal;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $.ajax({\n        url: this.applyUrl,\n        type: 'POST',\n        data: this.arrangeData('applyCouponUrl', bestCode),\n        success: function () {\n          location.reload();\n        }\n      })\n    }\n  },\n  isCheckoutPage: function () {\n    return \/OrderShippingBillingView\/.test(location.pathname);\n  }\n};\nExternalProvider.__prepareUrl();",
	"classmates": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#item_discount_0', responseHTML).text().replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#code').val(bestCode);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('a:contains(\"Apply\")').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"keetsa": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().split(\"$\")[1].replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#checkout_reduction_code').val(bestCode);\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\n    }\n  }\n};",
	"growershouse": "var ExternalProvider = {\n  init: function () {\n    $.fn.serializeObject = function () {\n      var o = {};\n      var a = this.serializeArray();\n\n      $.each(a, function () {\n        if (o[this.name] !== undefined) {\n          if (!o[this.name].push) {\n            o[this.name] = [o[this.name]];\n          }\n\n          o[this.name].push(this.value || '');\n        } else {\n          o[this.name] = this.value || '';\n        }\n      });\n\n      return o;\n    };\n  },\n  _prepareUrl: function () {\n    var applyUrlInput = $('#___jpCouponUrl');\n    var applyUrl = this.isCheckoutPage() ? 'https:\/\/growershouse.com\/firecheckout\/index\/saveCoupon\/' : 'https:\/\/growershouse.com\/checkout\/cart\/couponPost\/';\n\n    if (!applyUrlInput.length) {\n      applyUrlInput = document.createElement('input');\n      applyUrlInput.id = '___jpCouponUrl';\n      applyUrlInput.style.display = 'none';\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n      applyUrlInput = $('#___jpCouponUrl');\n    }\n\n    applyUrlInput.attr('value', applyUrl);\n  },\n  prepare: function (type, code) {\n    var data = {};\n\n    if (type === 'applyCouponUrl') {\n      if (this.isCheckoutPage()) {\n        var form = $('#firecheckout-form');\n\n        $('#coupon-code').val(code);\n\n        return form.serializeObject();\n      }\n\n      data.remove = 0;\n      data.coupon_code = code;\n\n      return data;\n    }\n\n    return null;\n  },\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  isCheckoutPage: function () {\n    return location.pathname === '\/firecheckout\/';\n  },\n  complete: function (bestCode) {\n    if (bestCode && this.isCheckoutPage()) {\n        $('#coupon-code').val(bestCode);\n        $('#coupon-apply').click();\n      } else if (bestCode) location.reload();\n  }\n};\nExternalProvider._prepareUrl();",
	"starbucks": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('.ordertot .value').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('.ordertot .value', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"officedepot": "var ExternalProvider = {\n  prepare: function (type, code) {\n    var data = {};\n\n    if (type === 'applyCouponUrl') {\n      data.cpnreferrer = 'checkout';\n      data.currentStep = 'checkout';\n      data.referralCode = code;\n      data.checkoutCoupon = true;\n      data.creditCardExpMonth = '';\n      data.creditCardExpYear = '';\n    }\n\n    return data;\n  },\n  parse: function (response) {\n    var savings = Math.abs(response.orderSummary.coupon);\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"trampolinepartsandsupply": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('#shopping-cart-totals-table .price:eq(4)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#coupon_code, #id_couponcode').val(bestCode);\n            $('button[title=\"Apply Coupon\"], #onestepcheckout-coupon-add').click();\n        }\n    }\n};",
	"hse24": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0;\r\n        var oldTotal = parseFloat($('#orderSummary strong > span').text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.hse24.de\/checkout\/voucher\/' + code,\r\n            method: 'PUT',\r\n            success: function () {\r\n                $.ajax({\r\n                    url: 'https:\/\/www.hse24.de\/checkout\/',\r\n                    method: 'GET',\r\n                    success: function (result) {\r\n                        var newTotal = parseFloat($('#orderSummary strong > span', $.parseHTML(result)).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n                        savings = oldTotal - newTotal;\r\n                    },\r\n                    async: false\r\n                });\r\n            },\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"meshuk": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var oldTotal = parseFloat($('#PT_PP_WP1_WPT_WPCC_lblPrice').text().replace(\/[^0-9|.]\/g, ''));\n    var newTotal = parseFloat($('#PT_PP_WP1_WPT_WPCC_lblPrice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    var savings = oldTotal - newTotal;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#PT_PP_WP1_WPT_WPCC_edVoucher').val(bestCode);\n      $('#PT_PP_WP1_WPT_WPCC_btnRunVoucher').click();\n      location.reload();\n    }\n  }\n};",
	"poolproducts": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.group.discount:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"rockler": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($(\".summary-details-amrules.summary-details td:contains(-)\", responseHTML)[0].innerHTML.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload(true)\r\n        }\r\n    }\r\n\r\n};",
	"pureformulas": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.item-promotion-total-price', responseHTML).text().replace(\/[^.0-9]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"thetoyshop": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.discount:contains(-)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"moosejaw": "var ExternalProvider = {\n  parse: function (response) {\n    let savings = 0;\n    $.ajax({\n      url: 'https:\/\/www.moosejaw.com\/moosejaw\/shop\/ShopCartDisplayView',\n      type: 'POST',\n      async: false,\n      success: function (response) {\n        var responseHTML = $.parseHTML(response);\n        savings = parseFloat($('.section-table-discount-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n      }\n    });\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#promoCode').val(bestCode);\n      $('#WC_PromotionCodeDisplay_links_1').get(0).dispatchEvent(new MouseEvent('click', {\n        view: window,\n        bubbles: true,\n        cancelable: true\n      }));\n    }\n  }\n};",
	"toshiba": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code)\r\n    {\t\r\n         var responseHTML = $.parseHTML(response),\r\n            codeFound = $('.coupon .f-9', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\t\t\t\r\n        if (codeFound){\r\n\r\n\t\t\tvar oldPrice = Number($('#js_summary .total dd').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n\t\t\t\tnewPrice = Number($('#js_summary .total dd',responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n\t\t\t\tsavings = (oldPrice - newPrice)\/100;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: savings\r\n\t\t\t}\t\t\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t};\r\n    }\r\n}",
	"vitalchoice": "var ExternalProvider = {\n    retrieveWindowVariable: function (name, variable) {\n        var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\n        var script = document.createElement('script');\n\n        script.id = 'tmpScript';\n        script.appendChild(document.createTextNode(scriptContent));\n        (document.body || document.head || document.documentElement).appendChild(script);\n\n        var value = $('body').attr('tmp_' + name);\n\n        $('body').removeAttr('tmp_' + name);\n\n        return value;\n    },\n\n    prepare: function (action, code) {\n        var modelText = '$(\\'.checkout-wrapper\\').get(0)).Model';\n\n        if (\/checkout\\\/main\/g.test(location.href)) {\n            modelText = '$(\\'.checkout-wrapper\\').get(0)).Model.Cart';\n        }\n\n        var modelData = JSON.parse(this.retrieveWindowVariable('viewModel', ['ko.toJSON(ko.dataFor(', modelText, ')'].join('')));\n\n        if (!Object.keys(modelData).length) return false;\n\n        modelData = Object.assign(modelData, {\n            DiscountCode: (action === 'applyCouponUrl') ? code : ''\n        });\n\n        return JSON.stringify(modelData);\n    },\n\n    parse: function (response, status, $xhr, code) {\n        if (response.Data.DiscountCode && response.Data.DiscountCode.toLowerCase() === code.toLowerCase()) {\n            return {\n                success: true,\n                savings: Math.abs(response.Data.DiscountTotal)\n            };\n        }\n\n        return {\n            success: false,\n            savings: 0.00\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) {\n            location.reload();\n        }\n    }\n};",
	"dolcevita": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#checkout_reduction_code').val(bestCode);\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\n        }\n    }\n};",
	"fourwheelparts": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('#price_totalSavings', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#cartPromoCode').val(bestCode);\n            $('#cartPromoCodeSubmit').click();\n        }\n    }\n};",
	"coxandcox": "var ExternalProvider = {\n    parse: function (response) {\n        var savings = parseFloat(response.match(\/\"discount_amount\":\"-[0-9|.]*\/).toString().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            if ($('#coupon_code').length) {\n                $('#coupon_code').val(bestCode);\n                $('button.apply').click();\n            } else {\n                var s = document.createElement('script');\n                var code = \"jQuery('#discount-code').val('\" + bestCode + \"').trigger('change');jQuery('.action-apply').trigger('click');\";\n\n                s.appendChild(document.createTextNode(code));\n                document.body.appendChild(s);\n            }\n        }\n    }\n};",
	"tigerdirect": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n\r\n        $('input[name=\"Coupon\"]').val(code);\r\n\r\n        var couponData = $('form[name=\"order\"]').serialize();\r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return couponData;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            oldPrice = Number($('.cart_totalInfo-grandTotal').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n            newPrice = Number($('.cart_totalInfo-grandTotal', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n            savings = (oldPrice - newPrice)\/100;\r\n\r\n\r\n        if (savings > 0){\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"mjtrim": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        response = $.parseHTML(response);\r\n        var discountAmt = $('.tax-checkout-discount', response);\r\n        if(discountAmt) {\r\n            return {\r\n                success: true,\r\n                savings: Number(discountAmt.text().replace(\/[^0-9|\\.]\/g, ''))\r\n            };\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        location.reload();\r\n    }\r\n};",
	"mjtrim.mobile": "var ExternalProvider = {\r\n    \r\n    init: function() {\r\n        \r\n        $.fn.serializeObject = function()\r\n        {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function() {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n    \r\n    prepare: function(action, code) {\r\n        return $('#cart_items').serializeObject();\r\n    },\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n    }\r\n};",
	"awdirect": "var ExternalProvider = {\n    prepare: function (type, code) {\n        var data = {};\n\n        if (type === 'applyCouponUrl') {\n            data = {\n                prioritycode_vis: code,\n                prioritycode: code\n            };\n        }\n\n        return data;\n    },\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n\n        var savings;\n\n        var success = $('input#prioritycode_invis', responseHTML).val() === code;\n\n        if (success) {\n            savings = $('#cartSummary .your-savings', responseHTML).text().replace(\/[^0-9.]\/g, '');\n        }\n\n        return {\n            success: success,\n            savings: success && savings ? parseFloat(savings) : 0.00\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('input#prioritycode').val(bestCode);\n\n            $('.promo-code-input img[alt=\"Update\"]').click();\n        }\n    }\n};",
	"ebuyer": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.inc>.red', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"tatesbakeshop": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^.0-9|]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"momoxfr": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('#test_basketVoucherDiscount_1', responseHTML).text().replace(\",\",\".\").replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode){\n    if (bestCode) {\n        $('input[name=\"voucherNr\"]').val(bestCode)\n        $('#test_basketVoucherAdd').click();\n    }\n  }\n};",
	"sourcebmx": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#checkout_reduction_code').val(bestCode);\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\n    }\n  }\n};",
	"petsupplies": "var ExternalProvider = {\n    _prepareUrl: function () {\n        var applyUrlInput = $('#___jpCouponUrl');\n        var applyUrl = !this.isBillingPage() ? 'https:\/\/www.petsupplies.com\/Cart.aspx' : 'https:\/\/www.petsupplies.com\/BillingShipping.aspx';\n\n        if (!applyUrlInput.length) {\n            applyUrlInput = document.createElement('input');\n            applyUrlInput.id = '___jpCouponUrl';\n            applyUrlInput.style.display = 'none';\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n            applyUrlInput = $('#___jpCouponUrl');\n        }\n\n        applyUrlInput.attr('value', applyUrl);\n    },\n    prepare: function (type, code) {\n        var data = {};\n        var formData = {};\n\n        if (type === 'applyCouponUrl') {\n            if (!this.isBillingPage) {\n                formData = {\n                    op: '0',\n                    eids: '[38,38,52]' };\n            }\n\n            formData = {\n                op: '0',\n                eids: '[39,39]' };\n\n            $.ajax({\n                type: 'POST',\n                url: 'https:\/\/www.petsupplies.com\/EventTracker.ashx',\n                cache: false,\n                data: formData,\n                contentType: 'application\/x-www-form-urlencoded'\n            });\n        }\n\n        if (type === 'clearCouponUrl') {\n            formData = {\n                __EVENTTARGET: $('#__EVENTTARGET').val(),\n                __EVENTARGUMENT: $('#__EVENTARGUMENT').val(),\n                __VIEWSTATE: $('#__VIEWSTATE').val(),\n                __VIEWSTATEGENERATOR: $('#__VIEWSTATE').val(),\n                _forgeryToken: $('#_forgeryToken').val(),\n                ctl00$ctl00$InjectedHeaderControl$Search: $('#ctl00_ctl00_InjectedHeaderControl_Search').val(),\n                qty73064779: $('#qty73064779').val(),\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$btnUndoPromoCode: '',\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$ddlDonationAmount: $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_ddlDonationAmount').find(':selected').val(),\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$hidCartItemId: ''\n            };\n\n            $.ajax({\n                type: 'POST',\n                url: 'https:\/\/www.petsupplies.com\/Cart.aspx',\n                cache: false,\n                data: formData,\n                contentType: 'application\/x-www-form-urlencoded'\n            });\n        }\n\n        if (type === 'resultUrl') {\n            if (!this.isBillingPage()) {\n                data = {\n                    __EVENTTARGET: $('#__EVENTTARGET').val(),\n                    __EVENTARGUMENT: $('#__EVENTARGUMENT').val(),\n                    __VIEWSTATE: $('#__VIEWSTATE').val(),\n                    __VIEWSTATEGENERATOR: $('#__VIEWSTATE').val(),\n                    _forgeryToken: $('#_forgeryToken').val(),\n                    ctl00$ctl00$InjectedHeaderControl$Search: $('#ctl00_ctl00_InjectedHeaderControl_Search').val(),\n                    qty73064779: $('#qty73064779').val(),\n                    ctl00$ctl00$CenterContentArea$MainContent$ctl00$txtPromoCode: code,\n                    ctl00$ctl00$CenterContentArea$MainContent$ctl00$btnPromoCode: '',\n                    ctl00$ctl00$CenterContentArea$MainContent$ctl00$ddlDonationAmount: $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_ddlDonationAmount').find(':selected').val(),\n                    ctl00$ctl00$CenterContentArea$MainContent$ctl00$hidCartItemId: $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_hidCartItemId').val()\n                };\n\n                return data;\n            }\n\n            data = {\n                __EVENTTARGET: $('#__EVENTTARGET').val(),\n                __EVENTARGUMENT: $('#__EVENTARGUMENT').val(),\n                __LASTFOCUS: $('#__LASTFOCUS').val(),\n                __VIEWSTATE: $('#__VIEWSTATE').val(),\n                __VIEWSTATEGENERATOR: $('#__VIEWSTATE').val(),\n                _forgeryToken: $('#_forgeryToken').val(),\n                ctl00$MainContent$billingShipping$TxtBxEmail: '',\n                ctl00$MainContent$billingShipping$TxtBxFName: '',\n                ctl00$MainContent$billingShipping$TxtBxLName: '',\n                ctl00$MainContent$billingShipping$TxtBxAddy1: '',\n                ctl00$MainContent$billingShipping$TxtBxAddy2: '',\n                ctl00$MainContent$billingShipping$TxtBxCity: '',\n                ctl00$MainContent$billingShipping$DDLState: '',\n                ctl00$MainContent$billingShipping$TxtBxZip: '',\n                ctl00$MainContent$billingShipping$DDLCountry: '',\n                ctl00$MainContent$billingShipping$TxtBxCompany: '',\n                ctl00$MainContent$billingShipping$TxtBxDayPhone: '',\n                ctl00$MainContent$billingShipping$TxtBxEveningPhone: '',\n                ctl00$MainContent$billingShipping$TxtBxFax: '',\n                ctl00$MainContent$billingShipping$billHdnCountryUpdate: '',\n                ctl00$MainContent$billingShipping$TxtBxGuestPw: '',\n                ctl00$MainContent$billingShipping$TxtBxGuestPwConf: '',\n                ctl00$MainContent$billingShipping$chkShippingIsSameAsBilling: 'on',\n                ctl00$MainContent$billingShipping$TxtBxShipFName: '',\n                ctl00$MainContent$billingShipping$TxtBxShipLName: '',\n                ctl00$MainContent$billingShipping$TxtBxShipAddy1: '',\n                ctl00$MainContent$billingShipping$TxtBxShipAddy2: '',\n                ctl00$MainContent$billingShipping$TxtBxShipCity: '',\n                ctl00$MainContent$billingShipping$DDLShipState: '',\n                ctl00$MainContent$billingShipping$TxtBxShipZip: '',\n                ctl00$MainContent$billingShipping$DDLShipCountry: '',\n                ctl00$MainContent$billingShipping$TxtBxShipCompany: '',\n                ctl00$MainContent$billingShipping$TxtBxShipDayPhone: '',\n                ctl00$MainContent$billingShipping$shipHdnCountryUpdate: '',\n                hidUpgradeEligible: 'true',\n                ctl00$MainContent$billingShipping$grpPaymentOptions: 'radbtnCreditCard',\n                ctl00$MainContent$billingShipping$hdnEditOrAddCard: '0',\n                ctl00$MainContent$billingShipping$DDLCCType: '',\n                ctl00$MainContent$billingShipping$TxtBxCCNum: '',\n                ctl00$MainContent$billingShipping$TxtBxCCV: '',\n                ctl00$MainContent$billingShipping$DDLExpMonth: '',\n                ctl00$MainContent$billingShipping$DDLExpYear: '',\n                ctl00$MainContent$billingShipping$TxtGiftCoupon: '',\n                ctl00$MainContent$billingShipping$txtGiftCard: '',\n                ctl00$MainContent$billingShipping$txtGiftCardPin: '',\n                ctl00$MainContent$billingShipping$txtPromoCode: code,\n                ctl00$MainContent$billingShipping$btnPromoCode: '',\n                ctl00$MainContent$billingShipping$chkEmailOptOut: 'on',\n                ctl00$MainContent$billingShipping$hdnAutoShipUpdates: ''\n            };\n\n            return data;\n        }\n\n        return false;\n    },\n    isBillingPage: function () {\n        return \/BillingShipping\/.test(location.href);\n    },\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = 0;\n\n        if (!this.isBillingPage) {\n            savings = parseFloat($('.cart-product-savings:contains(\"$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n        } else {\n            savings = parseFloat($('.right-align.highlight-text.promo-amount-value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n        }\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_txtPromoCode').val(bestCode);\n        $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_btnPromoCode').click();\n        $('#ctl00_MainContent_billingShipping_txtPromoCode').val(bestCode);\n        $('ctl00_MainContent_billingShipping_btnPromoCode').click();\n        $('#switchNewOffer').click();\n    }\n};\n\nExternalProvider._prepareUrl();",
	"billabong": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.price-promo-discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#PromotionPromotionCode').val(bestCode);\n            $('.button[name=\"update-quantity\"]').click();\n            location.reload();\n        }\n    }\n};",
	"catholiccompany": "var ExternalProvider = {\r\n    parseAmount: function (string) {\r\n        return string.replace(\/[^0-9|.]\/g, '');\r\n    },\r\n    parse: function (response) {\r\n        var $response = $.parseHTML(response),\r\n            subTotal = 0,\r\n            $ele;\r\n        $('#cart_listing .subtotal').each(function () {\r\n            $ele = $(this);\r\n            if ($('.tiny_txt', $ele).text().indexOf('Subtotal') !== -1 || $('.tiny_txt', $ele).text().indexOf('Estimated Shipping') !== -1) {\r\n                subTotal += ExternalProvider.parseAmount($('.price', $ele).text());\r\n            }\r\n        });\r\n        var totalPrice = this.parseAmount($('.est_total', $response).text());\r\n        var savings = parseFloat(subTotal) - parseFloat(totalPrice);\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"calchamberstore": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('#ctl00_cpholder_ordertotalctl_couponsavings', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"plukka": "var ExternalProvider = {\r\n    init: function() {\r\n        this.priceSelector = \".bag__totals-total .bag__totals-value\";\r\n        this.codeSelector = '#promoCodeForm [type=text]';\r\n        this.codeSubmit = '#promoCodeForm [type=submit]';\r\n        this.codeRemove = '.js-remove-discount';\r\n        this.codeErrors = '#promoCodeForm .error'\r\n        this.initialPrice = this.getCurrentPrice();\r\n    },\r\n    cleanPrice: function(price) {\r\n        return parseFloat(price.trim().replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n    getCurrentPrice: function() {\r\n        return this.cleanPrice($(this.priceSelector).last().text());\r\n    },\r\n    prepare: function (action, code) {\r\n        if (action == 'removeInjectedCoupon' && this.codeRemove){\r\n            $(this.codeRemove).click();\r\n            return;\r\n        }\r\n        $(this.codeErrors).remove();\r\n        $(this.codeSelector).val(code).change();\r\n        $(this.codeSubmit).click();\r\n    },\r\n    whenReady: function (step, next) {\r\n        if(step == 'removeInjectedCoupon') {\r\n            setTimeout(function(){\r\n                next();\r\n            }, 1000);\r\n            return;\r\n        }\r\n        var counter = 0,\r\n            self = this;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n            if (self.initialPrice != self.getCurrentPrice() || $(self.codeErrors).length || counter > 30) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 100);\r\n    },\r\n    parse: function (response) {\r\n        var price = this.getCurrentPrice(),\r\n            savings = this.initialPrice - price;\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    }\r\n};",
	"nolo": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n\n        this.savings = parseFloat($('.checkout-total-default .cart-totals-price .price', responseHTML).text().replace(this.regularExpression, ''));\n\n        if (this.savings > 0) {\n            return {\n                success: true,\n                savings: this.savings\n            };\n        }\n\n        return {\n            success: false,\n            savings: this.savings\n        };\n    },\n    complete: function (bestCode, bestSavings) {\n        $('#coupon_code').val(bestCode);\n        $('.btn-apply-coupon').click();\n    },\n    savings: 0.00,\n    regularExpression: \/[^0-9|.]\/g\n};",
	"ebooks": "var ExternalProvider = {\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n    var locale = localeMapping.US;\n    var newCurrency = 'USD';\n    var selector = document.cookie.match(\/CountryCode=([A-z]+)\/)[1];\n\n    if (selector === 'UK') {\n      locale = localeMapping.GB;\n      newCurrency = 'GBP';\n    } else if (selector === 'FR') {\n      locale = localeMapping.FR;\n      newCurrency = 'EUR';\n    } else if (selector === 'DE') {\n      locale = localeMapping.DE;\n      newCurrency = 'EUR';\n    }\n\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\n  },\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response.cart_review_html);\n    var savings = parseFloat($('#discount-info-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"aninebing": "var ExternalProvider = {\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n        var locale = localeMapping.US;\n        var newCurrency;\n        var selector = location.host;\n\n        if (selector.match('eu')) {\n            locale = localeMapping.DE;\n            newCurrency = 'EUR';\n        } else {\n            locale = localeMapping.US;\n            newCurrency = 'USD';\n        }\n\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\n    }\n};",
	"lovellsoccer": "var ExternalProvider = {\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n        var locale = localeMapping.US;\n        var newCurrency = currency;\n        var selector = $('.currency-display').attr('data-value');\n\n        if (selector === 'uk') {\n            locale = localeMapping.GB;\n            newCurrency = 'GBP';\n        } else if (selector === 'eu') {\n            locale = localeMapping.DE;\n            newCurrency = 'EUR';\n        }\n\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\n    },\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.negative', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"woomfr": "var ExternalProvider = {\n  parse: function (response) {\n    var savings = response.rewards.amount;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('input[data-target=\"book-promo.codeInput\"]').val(bestCode);\n      $('button:contains(\"Valider\")').click();\n    }\n  }\n};",
	"inkcartridges": "var ExternalProvider = {\n  beforeInit: function () {\n    return new Promise((resolve) => {\n      let retries = 0;\n      const interval = setInterval(function() {\n        retries++;\n        $('span[ng-click=\"removeCoupon(coupon)\"]').click();\n        if (!$('span[ng-click=\"removeCoupon(coupon)\"]').length && retries < 3) {\n          clearInterval(interval);         \n          resolve();\n        } else if (retries === 3) {\n          resolve();\n        }\n      }, 2000);\n    })\n  },\n  prepare: function (action, code) {\n    var data = {};\n\n    if (action === 'applyCouponUrl') {\n      data = {\n        async: true,\n        coupon_code: code\n      };\n\n      return JSON.stringify(data);\n    } else if (action === 'clearCouponUrl') {\n      data = {\n        amcoupon_code_cancel: code,\n        async: true\n      };\n\n      return JSON.stringify(data);\n    }\n\n    return false;\n  },\n  parse: function (response) {\n    var savings = parseFloat(response.discount);\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"corgisocks": "var ExternalProvider = {\n    parse: function (response) {\n        var savingsLoc = response.match('Discount(.*)');\n        var savings = parseFloat(savingsLoc[1].replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#coupon').val(bestCode);\n            $('#button').click();\n        }\n    }\n};",
	"lightsonline": "var ExternalProvider = {\n  parse: function (response) {\n    let savings = parseFloat(response.match('discount_amount\":\"-(.*)\",\"base_discount_amount')[0].replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      const codeField = this.isCartPage() ? $('#coupon_code_fake') : $('#discount-code-fake');\n      const submitButton = this.isCartPage() ? $('#applyCoupon') : $('button[value=\"Apply\"]');\n      codeField.val(bestCode);\n      codeField.get(0).dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\n      submitButton.get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\n    }\n  },\n  isCartPage: function () {\n    return location.pathname === '\/checkout\/cart\/';\n  }\n};",
	"trainme": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.discount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"jamesperse": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"blessedherbs": "var ExternalProvider = {\r\n    \r\n    _prepareUrl: function() {\r\n\r\n\t\tvar applyUrlInput = $('#__jpCouponUrl'),\r\n\t\t\tapplyUrl = this.isCartPage() ? 'http:\/\/www.blessedherbs.com\/checkout\/cart\/couponPost' : 'https:\/\/www.blessedherbs.com\/onestepcheckout\/index\/add_coupon';\r\n\t\tif(!applyUrlInput.length) {\r\n\t\t\tapplyUrlInput = document.createElement(\"input\");\r\n\t\t\tapplyUrlInput.id = '__jpCouponUrl';\r\n\t\t\tapplyUrlInput.style.display = \"none\";\r\n\t\t\t(document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n\t\t\tapplyUrlInput = $('#__jpCouponUrl');\r\n\t\t}\r\n\r\n\t\tapplyUrlInput.attr('value', applyUrl);\r\n\t},\r\n\r\n    isCartPage: function() {\r\n\t\treturn $('#coupon_code_onestepcheckout').length == 0;\r\n\t},\r\n\r\n    prepare: function(action, code) {\r\n\r\n\t\tvar requestData = {};\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            if (this.isCartPage()) {\r\n                requestData = {\r\n                    coupon_code: code,\r\n                    remove: 0\r\n                };\r\n            } else {\r\n                requestData = {\r\n                    coupon_code: code\r\n                };\r\n            }\r\n            return requestData;\r\n        } else if (action === 'clearCouponUrl') {\r\n            requestData = {\r\n                coupon_code: code,\r\n                remove: 1\r\n            };\r\n            return requestData;\r\n        }\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        var responseHTML = this.isCartPage() ? $.parseHTML(response) : $.parseHTML(JSON.parse(response)['review_html']);\r\n        var savings = parseFloat($('.summary-total > td:eq(1) > .price', responseHTML).html().replace('-', '').replace('$', '').replace(\/[^0-9|\\.]\/g, ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n        \r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"kiehlsluxuryproducts": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"yogaoutlet": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|.]\/g,\r\n    prepare: function (type, code) {\r\n        var form = $('form[name=\"form\"]').clone();\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            form.find('input[name=\"CouponCode\"], input[name=\"couponcode\"]').val(code);\r\n            this.addHiddenValue(form, 'btnCouponCode.x', 19);\r\n            this.addHiddenValue(form, 'btnCouponCode.x', 9);\r\n\r\n            return form.serialize();\r\n        } else if (type === 'clearCouponUrl') {\r\n            this.addHiddenValue(form, 'btnRemove_Coupon', 'Remove_Coupon');\r\n            this.addHiddenValue(form, 'action', 'update');\r\n\r\n            return form.serialize();\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    addHiddenValue: function (form, name, value) {\r\n        $('<input>').attr({\r\n            type: 'hidden',\r\n            name: name,\r\n            value: value\r\n        }).appendTo(form);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsText = $('div.shopped-total-items-price > p.p-item-price', responseHTML).text();\r\n        var savings = parseFloat(savingsText.replace(this.nonPriceRegex, '').toString());\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"greatbritishmeat": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#checkout_reduction_code').val(bestCode);\n            $('button[data-trekkie-id=\"apply_discount_button\"]').removeAttr('disabled').click();\n        }\n    }\n};",
	"madeindesign": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var result = $.parseHTML(response.totals);\r\n        var savings = parseFloat($('.discount-ajax.price', result).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n     \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#btnValidCCForm').click();\r\n        }\r\n    }\r\n};",
	"acerfr": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var oldTotal = parseFloat($('tfoot .price').text().replace(\/[^0-9]\/g, '')) \/ 100;\n        var newTotal = parseFloat($('tfoot .price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n        var savings = oldTotal - newTotal;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"ingridandisabel": "var ExternalProvider = {\n    parse: function (response) {\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\n        var newTotal = parseFloat($('span.total-recap__final-price', $.parseHTML(response)).text().replace(\/[^0-9|.]\/g, ''));\n        var savings = oldTotal - newTotal;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) $('#checkout_reduction_code').val(bestCode).closest('form').submit();\n    }\n};",
	"yvesrocher": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n\n        var oldTotal = parseFloat($('#ajaxGrandTotal').text().replace(\/[^0-9|.]\/g, ''));\n        var newTotal = parseFloat($('#ajaxGrandTotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        var savings = oldTotal - newTotal;\n\n        if (savings > 0.00) {\n            return {\n                success: true,\n                savings: parseFloat(savings)\n            };\n        }\n\n        return {\n            success: false,\n            savings: 0.00\n        };\n    },\n\n    complete: function(bestCode, bestSaving){\n\n        $.post('https:\/\/www.yvesrocherusa.com\/control\/applyProductPromoCode\/showcart_common', {\n            sff: '',\n            productPromoCodeId: bestCode\n        }, function () {\n            location.reload(true);\n        });\n    }\n};",
	"yvesrocher.mobile": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n\n        var oldTotal = parseFloat($('.cart-total-val').text().replace(\/[^0-9|.]\/g, ''));\n        var newTotal = parseFloat($('.cart-total-val', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        var savings = oldTotal - newTotal;\n\n        if (savings > 0.00) {\n            return {\n                success: true,\n                savings: parseFloat(savings)\n            };\n        }\n\n        return {\n            success: false,\n            savings: 0.00\n        };\n    },\n\n    complete: function (bestCode, bestSaving) {\n        location.reload(true);\n    }\n};",
	"carolynpollack": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.subtotal', responseHTML).filter(function(el){return $(this).html().indexOf('Discount:') > -1}).next('.subtotal');\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"pinkbasis": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"maurices": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon' && $('#mar-cart-promo-codes').length) {\r\n      $('input[placeholder=\"enter promo codes\"]').val(code);\r\n      $('input[placeholder=\"enter promo codes\"]').get(0).dispatchEvent(changeEvent);\r\n      $('#mar-cart-promo-apply').click();\r\n    } else if (type === 'injectCoupon' && $('input[name=\"promo-code\"]').length) {\r\n      $(\".apply-promo-btn.tabbable\").removeAttr(\"disabled\");\r\n      $('input[name=\"promo-code\"]').val(code);\r\n      $('input[name=\"promo-code\"]').get(0).dispatchEvent(changeEvent);\r\n      $('.apply-promo-btn.tabbable').click();\r\n    } else if (type === 'removeInjectedCoupon' && $('#mar-cart-promo-codes').length) {\r\n      $('.mar-icon.icon-x').click();\r\n    } else if (type === 'removeInjectedCoupon' && $('.promo-item-remove.icon-x').length) {\r\n      $('.promo-item-remove.icon-x').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 2000);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.asc-discounts-display.float--right:contains(\"-$\"), .order-summary-content-right:contains(\"-$\") ', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"tezenisde": "var ExternalProvider = {\n  _prepareUrl: function () {\n    var applyUrl;\n    var resultUrl;\n\n    if (!this.isCheckout()) {\n      applyUrl = 'https:\/\/de.tezenis.com\/checkout\/update_items_in_order.cmd';\n      resultUrl = 'https:\/\/de.tezenis.com\/checkout\/update_items_in_order.cmd';\n    } else {\n      applyUrl = 'https:\/\/de.tezenis.com\/checkout\/update_promo_code_ajax.cmd';\n      resultUrl = 'https:\/\/de.tezenis.com\/checkout\/includes\/order_summary_include_wrapper.jsp';\n    }\n\n    if ($('input[name=\"__jpApplyUrl\"]').length === 0) {\n      $('body').append('<input type=\"hidden\" name=\"__jpApplyUrl\" value=\"' + applyUrl + '\" \/>');\n      $('body').append('<input type=\"hidden\" name=\"__jpResultUrl\" value=\"' + resultUrl + '\" \/>');\n    }\n  },\n  isCheckout: function () {\n    return location.pathname === '\/checkout\/payment.jsp';\n  },\n  prepare: function (type, code) {\n    var oApplyUrlData = null;\n\n    if (type === 'applyCouponUrl') {\n      oApplyUrlData = {\n        form_state: 'updatePromoCodeForm',\n        promoCode: code,\n        delete: false,\n        pipelineFreezed: $('input[name=\"pipelineFreezed\"]').val()\n      };\n\n      if (!this.isCheckout()) {\n        $('#promoCode').val(code);\n        $('input[name=\"checkoutAction\"]').val(4);\n        oApplyUrlData = $('form[name=\"basket_body\"]').serializeArray();\n      }\n    }\n\n    return oApplyUrlData;\n  },\n  parse: function (response) {\n    var oldTotal;\n    var newTotal;\n\n    if (!this.isCheckout()) {\n      oldTotal = parseFloat($('#estimated-grand-total').text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\n      newTotal = parseFloat($('#estimated-grand-total', $.parseHTML(response)).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\n    } else {\n      oldTotal = parseFloat($('div.total-price-wrapper div.value').text().split('\u20ac')[0].replace(',', '.').replace(\/[^0-9.]\/g, ''));\n      newTotal = parseFloat(response.match(\/nowrap\">.*\/g)[0].replace(',', '.').replace(\/[^0-9.]\/g, ''));\n    }\n\n    var savings = oldTotal - newTotal;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#promoCode').val(bestCode);\n      $(\"input[value='add']\").click();\n    }\n  }\n};\n\nExternalProvider._prepareUrl();",
	"tjc": "var ExternalProvider = {\n  parse: function (response) {\n    let responseHTML = $.parseHTML(response);\n    let savings = parseFloat($('.coupon-discount span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#dwfrm_cart_couponCode').val(bestCode);\n      $('#add-coupon').click();\n    }\n  }\n};",
	"oraliv": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload()\n    }\n};",
	"natori": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode){\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"mango": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.infoImporteVale .price-format .entero:last', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"uksoccershop": "var ExternalProvider = {\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n\n        var selector = $(\"#switcher-info .currency\").text().replace(\/[0-9.,]\/g, '').trim();\n        var locale = '';\n        switch (selector) {\n            case 'EUR':\n                locale = localeMapping['FR'];\n                currency = \"EUR\";\n                break;\n            case 'USD':\n                locale = localeMapping['US'];\n                currency = \"USD\";\n                break;\n            default:\n                locale = localeMapping['GB'];\n                currency = \"GBP\";\n                break;\n        }\n\n        var storeCurrency = amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\n\n        return storeCurrency;\n    },\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('td:contains(\"Discount\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#couponinput').val(bestCode);\n            $('#dwfrm_cart_addCoupon').click();\n        }\n    }\n};",
	"naturalizerca": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.discount-text', responseHTML).text().replace(\/[^.0-9|]\/g, ''));\n        \n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    isCartPage: function () {\n        return \/Cart\/.test(location.href);\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            if (!this.isCartPage()) {\n                $('#promoCodeInput').val(bestCode);\n                $('.js-submit-promo-btn').click();\n            } else {\n                $('#PromoCode').val(bestCode);\n                $('#submitPromoCode')[0].click();\n            }\n\n        }\n    }\n};",
	"striderite": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.bfx-total-discount:contains(\"- $\") ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"truefacet": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response.chksidebar);\n    var oldTotal = parseFloat($('#totalprice, .order_amt').text().replace(\/[^0-9|.]\/g, ''));\n    var newTotal = parseFloat($('#totalprice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    var savings = oldTotal - newTotal;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#coupon_code').val(bestCode);\n      $('.addcoupon').trigger('click');\n    }\n  }\n\n};",
	"eloquii": "var ExternalProvider = {\n\n    origPrice: 0,\n\n    init: function () {\n        this.origPrice = parseFloat($('.cartordertotals .font-demi~.font-demi').text().replace(\/[^0-9.]\/g, ''));\n    },\n\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var newPrice = parseFloat($('.cartordertotals .font-demi~.font-demi', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        var savings = this.origPrice - newPrice;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('.mt-4 #promo-input-box').val(bestCode);\n            $('.mt-4 button[name=\"dwfrm_cart_addOmniCode\"]').click();\n        }\n    }\n};",
	"carolsdaughter": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.value:contains(\"-$\") ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"tartecosmetics": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.discount-value', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"johnsmedleyoutlet": "var ExternalProvider = {\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n    var locale = localeMapping['US'];\n    var selector = $('.cart-amount').text().replace(\/[A-Z.0-9,]\/g, '').trim();\n\n    if (selector === \"\u20ac\") {\n      currency = 'EUR';\n      locale = localeMapping['DE'];\n    } else if (selector === \"\u00a3\") {\n      currency = 'GBP';\n      locale = localeMapping['GB'];\n    }\n\n    return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\n  },\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#coupon_code').val(bestCode);\n      $('button[value=\"Apply\"]').click();\n    }\n  }\n};",
	"watchshop": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.totals-row:eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"popchartlab": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"redbubble": "var ExternalProvider = {\r\n    oldTotal: 0,\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    init: function () {\r\n        $.ajaxSettings.beforeSend = function(xhr){\r\n            xhr.setRequestHeader('x-csrf-token', {toString: function(){ return $('meta[name=\"csrf-token\"]').attr(\"content\"); }});\r\n        };\r\n        this.oldTotal = parseFloat($('div[class^=\"app-entries-cart-components-Summary-Summary_label\"]').next().text().replace(this.nonPriceRegex, ''));\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var newTotal = response.summary.total;\r\n        var savings = this.oldTotal - newTotal;\r\n        if(savings > 0){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"tracfone": "var ExternalProvider = {\n    origPrice: '',\n    storeId: '',\n    catalogId: '',\n    langId: '',\n    _prepareUrl: function () {\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\n        var script = document.createElement('script');\n\n        scriptContent += 'body.setAttribute(\"storeId\", WCParamJS.storeId);';\n        scriptContent += 'body.setAttribute(\"catalogId\", WCParamJS.catalogId);';\n        scriptContent += 'body.setAttribute(\"langId\", WCParamJS.langId);';\n\n        script.id = 'tmpScript';\n        script.appendChild(document.createTextNode(scriptContent));\n        (document.body || document.head || document.documentElement).appendChild(script);\n\n        this.storeId = $('body').attr('storeid');\n        this.catalogId = $('body').attr('catalogid');\n        this.langId = $('body').attr('langid');\n\n        this.origPrice = parseFloat($('.js-totalplanprice').text().replace(\/[^0-9|.]\/g, ''));\n\n        var resultUrlInput = $('#___jpResultUrl');\n        var resultUrl = 'https:\/\/shop.tracfone.com\/shop\/ShopCartDisplayView?shipmentType=single&catalogId=' + this.catalogId + '&langId=' + this.langId + '&storeId=' + this.storeId + '';\n\n\n        if (!resultUrlInput.length) {\n            resultUrlInput = document.createElement('input');\n            resultUrlInput.id = '___jpResultUrl';\n            resultUrlInput.style.display = 'none';\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\n            resultUrlInput = $('#___jpResultUrl');\n        }\n\n        resultUrlInput.attr('value', resultUrl);\n\n        $('body').removeAttr('storeid');\n        $('body').removeAttr('catalogid');\n        $('body').removeAttr('langid');\n    },\n\n    prepare: function (type, code) {\n        var data = {};\n\n        if (type === 'clearCouponUrl') {\n            data = {\n                orderId: $('input[name=\"orderId\"]').val(),\n                taskType: 'R',\n                URL: '',\n                storeId: this.storeId,\n                catalogId: this.catalogId,\n                langId: this.langId,\n                finalView: 'AjaxOrderItemDisplayView',\n                requesttype: 'ajax',\n                promoCode: code\n            };\n\n            return data;\n        }\n\n        return false;\n    },\n\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n\n        var newPrice = parseFloat($('.js-totalplanprice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        var savings = this.origPrice - newPrice;\n\n        if (savings > 0) {\n            return {\n                success: true,\n                savings: savings\n            };\n        }\n\n        return {\n            success: false,\n            savings: 0.00\n        };\n    },\n\n    complete: function (bestCode) {\n        location.reload(true);\n    }\n};\n\nExternalProvider._prepareUrl();",
	"haggar": "var ExternalProvider = {\n    _prepareUrl: function () {\n        var applyUrlInput = $('#applyUrl');\n        var applyUrl = 'https:\/\/www.haggar.com\/cart-review?lang=default';\n\n        if (!applyUrlInput.length) {\n            applyUrlInput = document.createElement('input');\n            applyUrlInput.id = 'applyUrl';\n            applyUrlInput.style.display = 'none';\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n            applyUrlInput = $('#applyUrl');\n        }\n\n        applyUrlInput.attr('value', applyUrl);\n    },\n    isCartPage: function () {\n        return location.pathname === '\/cart';\n    },\n    parse: function (response, status, $xhr, code) {\n        var savings = 0.00;\n        var responseHTML = $.parseHTML(response);\n\n        savings = parseFloat($('.discount .value', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) {\n            location.reload();\n        }\n    }\n};\n\nExternalProvider._prepareUrl();",
	"ahava": "var ExternalProvider = {\n  _prepareUrl: function () {\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\n    var script = document.createElement('script');\n\n    scriptContent += 'body.setAttribute(\"entityId\", window.checkoutConfig.quoteData.entity_id);';\n    script.id = 'tmpScript';\n    script.appendChild(document.createTextNode(scriptContent));\n    (document.body || document.head || document.documentElement).appendChild(script);\n\n    var EntityId = $('body').attr('entityId');\n    var ApplyUrlInput = $('#___jpApplyUrl');\n    var ApplyUrl = 'https:\/\/www.ahava.com\/rest\/default\/V1\/guest-carts\/' + EntityId + '\/coupons\/CLAIMCODE';\n    var ResultUrl = 'https:\/\/www.ahava.com\/rest\/default\/V1\/guest-carts\/' + EntityId + '\/totals';\n    var ClearUrl = 'https:\/\/www.ahava.com\/rest\/default\/V1\/guest-carts\/' + EntityId + '\/payment-information';\n\n    if (!ApplyUrlInput.length) {\n      ApplyUrlInput = document.createElement('input');\n      ApplyUrlInput.id = '___jpApplyUrl';\n      ApplyUrlInput.style.display = 'none';\n      (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\n      ApplyUrlInput = $('#___jpApplyUrl');\n    }\n\n    ApplyUrlInput.attr('value', ApplyUrl);\n    ApplyUrlInput.attr('data-value', ResultUrl);\n    ApplyUrlInput.attr('data-clear', ClearUrl);\n  },\n  parse: function (response) {\n    var responseHTML = response.base_discount_amount;\n    var savings = Math.abs(parseFloat(responseHTML));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#coupon_code_fake, #discount-code-fake').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\n      $('#coupon_code_fake, #discount-code-fake').trigger('input').trigger('change');\n      $('.fieldset.coupon button, #discount-form button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\n    }\n  }\n};\nExternalProvider._prepareUrl();",
	"autoteilemeile": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.savings', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"valentins": "var ExternalProvider = {\n    prepare: function (action, code) {\n        if (action === 'injectCoupon') {\n            $('#coupon').val(code);\n            $('#couponsubmit').click();\n        }\n    },\n    whenReady: function (step, next) {\n        var counter = 0;\n        var codeApplyTime = setInterval(function () {\n            counter += 1;\n\n            if (counter > 10) {\n                clearInterval(codeApplyTime);\n                next();\n            }\n        }, 500);\n    },\n    parse: function (response) {\n        var savings = parseFloat($('#couponContainer span').text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"briantracy": "var ExternalProvider = {\n    prepare: function (type, code) {\n        if (type === 'applyCouponUrl') {\n            $('#ctl00_body_txtCoupon').val(code);\n            $('form#aspnetForm').append('<input type=\"hidden\" name=\"ctl00$body$btnSubmit\" value=\"Continue\" \/>');\n\n            return $('form#aspnetForm').serializeArray();\n        }\n\n        return null;\n    },\n    parse: function (response) {\n        var savings = $('div.box-in.totals > p:contains(\"-\")', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '');\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#ctl00_body_txtCoupon').val(bestCode);\n            $('#aspnetForm').submit();\n        }\n    }\n};",
	"bejealous": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    var savings = oldTotal - newTotal;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#checkout_reduction_code').val(bestCode);\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\n    }\n  }\n};",
	"mattressman": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#promo-value').val(bestCode);\n            $('#btnPromo').click();\n        }\n    }\n};",
	"paulsboutique": "var ExternalProvider = {\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n        var locale = localeMapping['US'];\n        var selector = $('#sdk_switcher:eq(0)').attr('class');\n\n        if (selector.match('de')) {\n            currency = 'EUR';\n            locale = localeMapping['DE'];\n        } else if (selector.match('gb')) {\n            currency = 'GBP';\n            locale = localeMapping['GB'];\n        } else if (selector.match('fr')) {\n            currency = 'EUR';\n            locale = localeMapping['FR'];\n        }\n\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\n    },\n    parse: function (response) {\n        var checkoutConfigString = response.substring(response.indexOf('{\"payment\":'));\n        checkoutConfigString = checkoutConfigString.substring(0, checkoutConfigString.indexOf(']};') + 2)\n        var checkoutConfigObject = JSON.parse(checkoutConfigString);\n        var savings = Math.abs(checkoutConfigObject.totalsData.discount_amount);\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"hollandandbarrett": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.basket-order-savings:contains(-)', responseHTML).eq(0).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#discountCode').val(bestCode);\n      $('#addDiscount').click();\n    }\n  }\n};",
	"nisolo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"oxybuleveiletjeuxfr": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.recap_command_reduc_adv.boxFlexContainer span:contains(\"-\")', responseHTML).text().replace(\/[^.|0-9]\/g, '')) \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#Code').val(bestCode);\n            $('.ok_btn').eq(0).click();\n        }\n    }\n};",
	"tello": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            location.reload();\n        }\n    }\n};",
	"theapollobox": "var ExternalProvider = {\n    parse: function (response) {\n        var savings = parseFloat(response.cart.couponSave) \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"nationalbusinessfurniture": "var ExternalProvider = {\n  prepareUrl: function () {\n    $('body').attr('token', 'Bearer ' + localStorage.accessToken);\n  },\n  parse: function (response) {\n    var savings = response.amount;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#tst_reviewAndPayPage_promoCode').val(bestCode);\n      $('.btn.btn-secondary.btn-navy').click();\n    };\n  }\n};\nExternalProvider.prepareUrl();",
	"masdings": "var ExternalProvider = {\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\n        var script = document.createElement('script');\n\n        scriptContent += 'body.setAttribute(\"currency\", window.universal_variable.user.language);';\n        script.id = 'tmpScript';\n        script.appendChild(document.createTextNode(scriptContent));\n        (document.body || document.head || document.documentElement).appendChild(script);\n\n        var locale = localeMapping.US;\n        var currencyFormat = currency;\n        var cc = $('body').attr('currency');\n\n        $('body').removeAttr('currency');\n\n        if (cc === 'en-gb') {\n            locale = localeMapping.GB;\n            currencyFormat = 'GBP';\n        }\n\n        return amount.toLocaleString(locale, { style: 'currency', currency: currencyFormat, minimumFractionDigits: minimumFractionDigits });\n    },\n    parse: function (response) {\n        var jsonParse = JSON.parse(response.match('window.universal_variable =(.+?)<\/script>')[1])\n        var oldValue = 0;\n        var newValue = jsonParse.basket.total;\n\n        jsonParse.basket.line_items.forEach(item => {\n            oldValue += item.subtotal;\n        });\n\n        var savings = parseFloat(oldValue - newValue);\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    }\n};",
	"sorel": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.discount .value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"gerryweber": "var ExternalProvider = {\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n    var locale = localeMapping.US;\n    var newCurrency = 'USD';\n    var url = window.location.pathname;\n\n    if (url.match(\/de-de|fr-fr\/g)) {\n      newCurrency = 'EUR';\n      locale = localeMapping[url.match(\/de|fr\/g).shift().toUpperCase()];\n    } else if (url.match(\/en-gb\/g)) {\n      newCurrency = 'GBP';\n      locale = localeMapping.GB;\n    }\n\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\n  },\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.order-totals__value:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('input[name=\"dwfrm_cart_couponCode\"]').val(bestCode);\n      $('button[name=\"dwfrm_cart_addCoupon\"]').click();\n    }\n  }\n};",
	"topshop": "var ExternalProvider = {\n  beforeInit: function () {\n    return new Promise((resolve) => {\n      let retries = 0;\n      const interval = setInterval(function () {\n        ExternalProvider.hasPromoCodeApplied() && ExternalProvider.removeCouponCode();\n        if (ExternalProvider.hasPromoCodeApplied() === false && retries < 3) {\n          clearInterval(interval);\n          resolve();\n        } else if (retries >= 3) {\n          clearInterval(interval);\n          resolve();\n        }\n        retries++;\n      }, 2000);\n    })\n  },\n  removeCouponCode: function () {\n    $('.PromotionCode-removeText').get(0).dispatchEvent(this.clickEvent);\n  },\n  parse: function (response) {\n    let savings = Math.abs(response.discounts[0].value);\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  isCheckoutPage: function () {\n    return location.pathname === '\/checkout\/payment' || location.pathname === 'location\/checkout\/payment\/';\n  },\n  hasPromoCodeApplied: function () {\n    return $('.PromotionCode-removeText').length > 0\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#promotionCode-text').val(bestCode);\n      $('#promotionCode-text').get(0).dispatchEvent(this.changeEvent);\n      $('.PromotionCode-submit').get(0).dispatchEvent(this.clickEvent);\n    };\n  },\n  createEventInstance: function () {\n    this.changeEvent = new Event('change', {\n      bubbles: true,\n      cancelable: true\n    });\n    this.clickEvent = new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: true\n    });\n  }\n};\nExternalProvider.createEventInstance();",
	"aponeode": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var oldTotal = parseFloat($('.apn-cart-totals-price').text().replace(\/[^0-9]\/g, ''));\n        var newTotal = parseFloat($('.apn-cart-totals-price', responseHTML).text().replace(\/[^0-9]\/g, ''));\n        var savings = (oldTotal - newTotal) \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"ezprints": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var savings = parseFloat(response.toString().match('\"discount_amount\":\"(.+?)\",\"')[1]);\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"feedcofr": "var ExternalProvider = {\n  parse: function (response) {\n    var self = this;\n    var validCoupon = response.success;\n    var savings = 0.00;\n\n    if (validCoupon) {\n      $.ajax({\n        url: 'https:\/\/shop.feed.co\/eu_' + $('html').attr('lang') + '\/checkout',\n        type: 'GET',\n        async: false,\n        success: function (res) {\n          self._savings = parseFloat(res.match(\/base_discount_amount\":\"-([0-9|.]+)\"\/)[1]);\n        }\n      });\n\n      savings = self._savings;\n    }\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode && $('#checkout-progress-bar').length > 0) { \n      location.href = 'https:\/\/shop.feed.co\/fr\/checkout\/#payment';\n    } else if (bestCode) {\n      location.href = 'https:\/\/shop.feed.co\/fr\/checkout\/';\n    }\n  }\n};",
	"lovescent": "var ExternalProvider = {\n  init: function () {\n    $.fn.serializeObject = function () {\n      var object = {};\n      var data = this.serializeArray();\n\n      $.each(data, function () {\n        if (object[this.name] !== undefined) {\n          if (!object[this.name].push) {\n            object[this.name] = [object[this.name]];\n          }\n\n          object[this.name].push(this.value || '');\n        } else {\n          object[this.name] = this.value || '';\n        }\n      });\n\n      return object;\n    };\n  },\n  _prepareUrl: function () {\n    var applyUrlInput = $('#___jpCouponUrl');\n    var applyUrl = this.isCartPage() ? 'https:\/\/love-scent.com\/checkout\/cart\/couponPost\/' : 'https:\/\/love-scent.com\/amscheckoutfront\/onepage\/couponPost\/';\n\n    if (!applyUrlInput.length) {\n      applyUrlInput = document.createElement('input');\n      applyUrlInput.id = '___jpCouponUrl';\n      applyUrlInput.style.display = 'none';\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n      applyUrlInput = $('#___jpCouponUrl');\n    }\n\n    applyUrlInput.attr('value', applyUrl);\n  },\n  prepare: function (type, code) {\n    var data = {};\n\n    if (type === 'applyCouponUrl') {\n      if (this.isCartPage()) {\n        data.remove = 0;\n        data.coupon_code = code;\n\n        return data;\n      }\n    }\n\n    return null;\n  },\n  isCartPage: function () {\n    return location.pathname === '\/checkout\/cart\/';\n  },\n  parse: function (response, status, $xhr, code) {\n    if (this.isCartPage()) {\n      var responseHTML = $.parseHTML(response);\n      var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    } else {\n      var form = $('#amscheckout-onepage');\n\n      form.find($('#coupon_code').val(code));\n      $.ajax({\n        url: 'https:\/\/love-scent.com\/amscheckoutfront\/onepage\/couponPost\/',\n        type: 'POST',\n        dataType: 'json',\n        data: form.serializeArray(),\n        async: false,\n        success: function (result) {\n          savings = parseFloat($('.price:contains(\"-\")', $.parseHTML(result.html.review)).text().replace(\/[^0-9|.]\/g, ''));\n        }\n      });\n    }\n    \n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n    \n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};\nExternalProvider._prepareUrl();",
	"perfumesclub": "var ExternalProvider = {\n  prepare: function (step) {\n    if (step === 'applyCouponUrl') {\n      this.interval = setInterval(() => { window.stop() }, 250);\n    } else {\n      clearInterval(this.interval);\n    }\n  },\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('#costesContainer .hideStep1 div:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    clearInterval(this.interval);\n    if (bestCode) location.reload();\n  },\n};",
	"abercrombie": "var ExternalProvider = {\n    parse: function (response) {\n        var shipping = parseFloat($('#right-rail-shopping-bag .order-summary dl dd:nth-child(4)').text().replace(\/[^0-9|.]\/g, ''));\n        var tax = parseFloat($('#right-rail-shopping-bag .order-summary dl dd:nth-child(6)').text().replace(\/[^0-9|.]\/g, ''));\n        var oldTotal = parseFloat($('.total-amount td.th-total').text().replace(\/[^0-9|.]\/g, ''));\n        var checkOutTotal = parseFloat($('#right-rail-shopping-bag .order-summary dl dd:last-child').text().replace(\/[^0-9|.]\/g, ''));\n        var newTotal = response.totals.subTotal;\n        var savings;\n\n        if (oldTotal) {\n            savings = oldTotal - newTotal;\n        } else {\n            var deduction = tax + shipping;\n            savings = (checkOutTotal - deduction) - newTotal;\n        }\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"secondspin": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('STRONG:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n\n  isCartPage: function () {\n    return \/s\\\/cart\/.test(location.href);\n  },\n\n  complete: function (bestcode) {\n    if (bestcode && this.isCartPage()) location.reload();\n    else if (bestcode) {\n      document.getElementById('couponCode').value = bestcode;\n      document.querySelector('input[name=\"_eventId_addCoupon\"]').click();\n    }\n  }\n};",
	"famousfootwear": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n\n        var savings = parseFloat($('.order-summary-module > div > div:nth-child(2) > div.right.discount-text', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"alamy": "var ExternalProvider = {\n    oldTotal:\"\",\n    init: function() {\n        this.oldTotal = parseFloat($('#Total').text().replace(\/[^.0-9]\/g,''));\n    },\n    prepare: function (type, code) {\n        if (type === 'injectCoupon') {\n            $('#promocode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\n            $('#promocode').trigger('input').trigger('change');\n            $('#promosuccess').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\n        } \n    },\n    whenReady: function(step, next)\n    {\n        if ( (step == 'injectCoupon') || (step == 'removeInjectedCoupon') ) {\n            setTimeout(function() {\n                var maxWait = 200, waited = 0;\n                var waitForClose = setInterval(function() {\n                    var confirmed = !$(\".cls_loadingMask\").length;\n                    if ((confirmed) || (waited > maxWait)) {\n                        clearInterval(waitForClose);\n                        setTimeout(function() {\n                            next();\n                        }, 500);\n                    }\n                    waited++;\n                }, 10);\n            }, 50);\n        }\n    },\n    parse: function () {\n        var newTotal = parseFloat($('#Total').text().replace(\/[^.0-9]\/g,''));\n        var savings = this.oldTotal - newTotal;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    }\n};",
	"tmart": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.ot_price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode, bestSaving) {\n        if (bestCode) {\n            $('#disc-ot_coupon').val(bestCode);\n            $('#coupon_apply').click();\n        }\n    }\n};",
	"tmart.mobile": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var savings = parseFloat(response.save.replace('$', ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode, bestSaving) {\n        if (bestCode) location.reload(true);\n    }\n};",
	"mackenzie-childs": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($(\".order-summary__emphasis:contains(- $)\", responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $(\"#checkout_reduction_code\").val(bestCode);\r\n            $(\".field__input-btn\").trigger(\"click\");\r\n        }\r\n    }\r\n};",
	"grouponde": "var ExternalProvider = {\n    prepare: function (type, code) {\n       if (type === 'injectCoupon') {\n           jQuery('a.promo')[0].click();\n           jQuery('#promo-apply').val(code);\n\n           var s = document.createElement('script');\n\n           s.type = 'text\/javascript';\n           s.id = 'apply';\n\n           var codes = \"jQuery('#promo-apply').trigger('change');jQuery('button.apply').removeAttr('disabled').click();\";\n\n           s.appendChild(document.createTextNode(codes));\n           document.body.appendChild(s);\n           $('#apply').remove();\n       }\n   },\n   whenReady: function (step, next) {\n       var counter = 0;\n       var codeApplyTime = setInterval(function () {\n           counter += 1;\n\n           if (counter > 5) {\n               clearInterval(codeApplyTime);\n               next();\n           }\n       }, 300);\n   },\n   parse: function () {\n       var savings =  parseFloat($('.discount-amount').text().replace(\/[^.0-9]\/g,'')) \/ 100;\n\n       return {\n           success: savings > 0,\n           savings: isNaN(savings) ? 0.00 : savings\n       };\n   },\n   complete: function (bestCode) {\n        if (bestCode) {\n            jQuery('a.promo')[0].click();\n            jQuery('#promo-apply').val(bestCode);\n\n            var s = document.createElement('script');\n\n            s.type = 'text\/javascript';\n            s.id = 'apply';\n\n            var code = \"jQuery('#promo-apply').trigger('change');jQuery('button.apply').removeAttr('disabled').click();\";\n\n            s.appendChild(document.createTextNode(code));\n            document.body.appendChild(s);\n            $('#apply').remove();\n        }\n    }\n};",
	"callawayapparel": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('.ordertotal .value').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('.ordertotal .value', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"hamiltonbeach": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = response.records['0'].discount_amount;\n        var savings = parseFloat(responseHTML);\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#couponCode').val(bestCode);\n            $('#apply_coupon').click();\n        }\n    }\n};",
	"argos": "var ExternalProvider = {\n  prepareUrl: function() {\n    this.isDelivery = \/ArgosDeliveryAvailability\/.test(location.pathname);\n    let couponUrl = this.isDelivery ? 'ArgosDeliveryPaymentInfo' : 'ArgosPrepayPaymentInfo';\n    this.createInput('troleyType', couponUrl);\n  },\n  prepare: function(step, code) {\n    let data = {\n      authToken: $('input[name=\"authToken\"]').val(),\n      storeId: $('input[name=\"storeId\"]').val(),\n      langId: $('input[name=\"langId\"]').val(),\n      catalogId: $('input[name=\"langId\"]').val(),\n      isCheckoutFlow: true,\n      loginReturnAction: 'submitTrolleyFormForHomeDelivery',\n      voucherCode: code,\n      'applydiscount.x': 'Apply'\n    }\n    if(this.isDelivery === true) {\n      data.availableDeliveryOrder = $('input[name=\"availableDeliveryOrder\"]').val();\n      return data;\n    } else {\n      data.availablePrepayOrder = $('input[name=\"availablePrepayOrder\"]').val();\n      return data;\n    }\n  },\n  parse: function (response) {\n    const responseHTML = $.parseHTML(response);\n    let savings = this.isCodeInvalid(responseHTML) === true ? 0 : parseFloat($('#orderSummaryPromoVoucherTotal', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n    \n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#promocodeinput').val(bestCode);\n      $('#applypromotion').click();\n    }\n  },\n  isCodeInvalid: function(responseHTML) {\n    return $('#discountlabel:contains(\"code is invalid\")', responseHTML).length > 0 ||\n      $('#discountlabel:contains(\"expired\")', responseHTML).length > 0 ||\n      $('#discountlabel:contains(\"voucher code has not been accepted\")', responseHTML).length > 0;\n  },\n  createInput: function(id, value) {\n    if(document.getElementById(id) === null) {\n      let createdInput = document.createElement(\"input\");\n      createdInput.id = id;\n      createdInput.setAttribute('type', 'hidden');\n      createdInput.setAttribute('value', value);\n      (document.body || document.head || document.documentElement).appendChild(createdInput);\n    } else {\n      document.getElementById(id).value = value;\n    }\n  }\n};\nExternalProvider.prepareUrl();",
	"prescriptives": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = $('td:contains(\"-$\")', responseHTML).eq(0).text().replace(\/[^0-9.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#form--offer_code--field--OFFER_CODE').val(bestCode);\r\n      $('.offer_submit').click();\r\n    }\r\n  }\r\n};",
	"reddressboutique": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var str = $('.reduction-code__text', responseHTML).text();\n        var pos = str.indexOf('(') + 1;\n        var slicedVal = str.slice(pos, str.lastIndexOf(')'));\n\n        var savings = parseFloat(slicedVal.replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\n            $('#checkout_reduction_code').trigger('input').trigger('change');\n            $('.field__input-btn.btn')[0].click();\n            $('#checkout_reduction_code').val('');\n        }\n    }\n};",
	"kidsfootlocker": "var ExternalProvider = {\n  __prepareUrl: function () {\n    var timeStamp = Date.now();\n    $('body').attr('data-attr', timeStamp);\n\n    var script = document.createElement('script');\n    var scriptContent = `\n        fetch('\/api\/session').then(response => {\n          response.json().then(json => {\n            let data = json;\n            if(document.getElementById(\"csrf\") === null) {\n              let csrfInput = document.createElement(\"input\");\n              csrfInput.id = 'csrf';\n              csrfInput.setAttribute('type', 'hidden');\n              csrfInput.setAttribute('value', data.data.csrfToken);\n              (document.body || document.head || document.documentElement).appendChild(csrfInput);\n            }\n          });\n        });\n      `;\n    script.id = 'tmpScript';\n    script.appendChild(document.createTextNode(scriptContent));\n    (document.body || document.head || document.documentElement).appendChild(script);\n    $('#tmpScript').remove();\n  },\n  parse: function (response) {\n    var savings = parseFloat(response.totalDiscounts.formattedValue.replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    }\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};\nExternalProvider.__prepareUrl();",
	"onetravel": "var ExternalProvider = {\n    queueName: '_cfq',\n    retrieveWindowVariable: function (name, variable) {\n        var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + \"); }\\n\";\n        var script = document.createElement('script');\n        script.id = 'tmpScript';\n        script.appendChild(document.createTextNode(scriptContent));\n        (document.body || document.head || document.documentElement).appendChild(script);\n\n        var value = $(\"body\").attr(\"tmp_\" + name);\n        $(\"body\").removeAttr(\"tmp_\" + name);\n\n        return value;\n    },\n    _prepareUrl: function () {\n        var applyUrlInput = jQuery('#__jpCouponUrl');\n        var applyUrl, sidpath = this.retrieveWindowVariable('sidpath', 'sidpath');\n        if ($('#AirBillingDetail').length) {\n            applyUrl = 'https:\/\/www.onetravel.com\/fpnext\/Payment\/ApplyPromoCode' + sidpath + '?&promocode=CLAIMCODE&s=';\n        } else if ($('#trReedemCoupon').length) {\n            applyUrl = 'http:\/\/www.onetravel.com\/Package\/CrossSellV2\/CrossSellV2Service.asmx\/ApplyPromoCodeV1?';\n        } else if ($('.htlRoomDetails').length) {\n            applyUrl = 'https:\/\/www.onetravel.com\/FPNextHotel\/Payment\/AddOrRemovePromoDiscount' + sidpath + '&';\n        } else {\n            applyUrl = 'https:\/\/www.onetravel.com\/carnext\/Payment\/ApplyPromoCode' + sidpath + '?s=' + this.retrieveWindowVariable('fps', 'fps') + '&';\n        }\n\n        if (!applyUrlInput.length) {\n            applyUrlInput = document.createElement(\"input\");\n            applyUrlInput.id = '__jpCouponUrl';\n            applyUrlInput.style.display = \"none\";\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n            applyUrlInput = jQuery('#__jpCouponUrl');\n        }\n\n        applyUrlInput.attr('value', applyUrl);\n    },\n    prepare: function (type, code) {\n        var supplierCode = $('#hdnSupplierCode').val();\n        var hotelPropCode = $('#hdnHotelPropCode').val();\n        var roomCode = $('#hdnRoomCode').val();\n        var isRemove = false;\n        var EID = $('#hdnEid').val();\n        var data = {};\n\n        if ($('.htlRoomDetails').length && type === 'applyCouponUrl') {\n            data = {\n                'promoCode': code,\n                'supplierCode': supplierCode,\n                'hotelPropCode': hotelPropCode,\n                'roomCode': roomCode,\n                'isRemove': isRemove,\n                'EID': EID\n            }\n            return JSON.stringify(data);\n        }\n        return false;\n    },\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('div.col-xs-12.no-gutter.price-itinerary.pricing1 > ul.col-xs-12.price-itinerary__list.discount-price__list.bold.is--gray-back.totdiscount > li.col-xs-4.price-itinerary__item > span.currency', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#promodiv').css('display', 'block');\n            $('#PromoCode').val(bestCode);\n            var clickEvent = new MouseEvent('click', {\n                view: window,\n                bubbles: true,\n                cancelable: true\n            });\n\n            $('#PromoCode').trigger('input').trigger('change');\n            $('#applyPromoCode').get(0).dispatchEvent(clickEvent);\n        }\n\n    }\n}\nExternalProvider._prepareUrl();",
	"onetravel.tablet": "var ExternalProvider = {\n    queueName: '_cfq',\n    retrieveWindowVariable: function (name, variable) {\n        var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\n        var script = document.createElement('script');\n\n        script.id = 'tmpScript';\n        script.appendChild(document.createTextNode(scriptContent));\n        (document.body || document.head || document.documentElement).appendChild(script);\n\n        var value = $piggyJq('body').attr('tmp_' + name);\n\n        $piggyJq('body').removeAttr('tmp_' + name);\n\n        return value;\n    },\n    _prepareUrl: function () {\n        var applyUrlInput = jQuery('#__jpCouponUrl');\n        var applyUrl,\n            sidpath = this.retrieveWindowVariable('sidpath', 'sidpath');\n\n        if ($piggyJq('#AirBillingDetail').length) {\n            applyUrl = 'https:\/\/www.onetravel.com\/fpnext\/Payment\/ApplyPromoCode' + sidpath + '&';\n        } else if ($piggyJq('#trReedemCoupon').length) {\n            applyUrl = 'http:\/\/www.onetravel.com\/Package\/CrossSellV2\/CrossSellV2Service.asmx\/ApplyPromoCodeV1?';\n        } else if ($piggyJq('.htlRoomDetails').length) {\n            applyUrl = 'https:\/\/www.onetravel.com\/FPNextHotel\/Payment\/AddOrRemovePromoDiscount' + sidpath + '&';\n        } else {\n            applyUrl = 'https:\/\/www.onetravel.com\/carnext\/Payment\/ApplyPromoCode' + sidpath + '?s=' + this.retrieveWindowVariable('fps', 'fps') + '&';\n        }\n\n        if (!applyUrlInput.length) {\n            applyUrlInput = document.createElement('input');\n            applyUrlInput.id = '__jpCouponUrl';\n            applyUrlInput.style.display = 'none';\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n            applyUrlInput = jQuery('#__jpCouponUrl');\n        }\n\n        applyUrlInput.attr('value', applyUrl);\n    },\n    prepare: function (type, code) {\n        if (type !== 'applyCouponUrl') return false;\n        if ($piggyJq('#trReedemCoupon').length) return JSON.stringify({ promoCode_: code });\n\n        if ($piggyJq('.htlRoomDetails').length) {\n            return JSON.stringify({\n                PromoCode: code,\n                SupplierCode: $piggyJq('#hdnSupplierCode').val(),\n                HotelPropCode: $piggyJq('#hdnHotelPropCode').val(),\n                RoomCode: $piggyJq('#hdnRoomCode').val(),\n                IsRemove: 'false'\n            });\n        }\n    },\n    parse: function (response) {\n        var responseHTML,\n            savings;\n\n        \/\/ Vacation packages also contain result url, so calling it here as an AJAX request.\n        if (response.d && response.d.indexOf(\"'IsSucceed': true\") !== -1) {\n            $piggyJq.ajax({\n                type: 'POST',\n                url: 'http:\/\/www.onetravel.com\/Package\/CrossSellV2\/CrossSellV2Service.asmx\/GetCartHTML',\n                cache: false,\n                data: JSON.stringify({ isFullHtml_: true }),\n                async: false,\n                headers: {\n                    Accept: 'text\/plain, *\/*',\n                    'Content-Type': 'application\/json; charset=UTF-8'\n                },\n                success: function (result) {\n                    responseHTML = $piggyJq.parseHTML(result.d);\n                    savings = parseFloat($piggyJq('#lblPromoDiscount .fpamount', responseHTML).text());\n                }\n            });\n\n            if (savings) {\n                return {\n                    success: true,\n                    savings: savings\n                };\n            }\n\n            return {\n                success: false,\n                savings: 0.00\n            };\n        } \/\/ For other options (flight, hotel & car booking), the response contains the discount\n\n        responseHTML = $piggyJq.parseHTML(response);\n\n        if ($piggyJq('.htlRoomDetails').length) {\n            savings = parseFloat($piggyJq('#CouponSection .currencyPayment', responseHTML).text().replace('$', ''));\n        } else if ($piggyJq('.CarPaymentTitle').length) {\n            savings = parseFloat($piggyJq('#dvTotalDiscount .currencyPayment', responseHTML).text().replace('$', ''));\n        } else {\n            savings = parseFloat($piggyJq('.totdiscount .currencyPayment', responseHTML).text().replace('$', ''));\n        }\n\n        if ($piggyJq('#promomessage', responseHTML).text().indexOf('Congratulations') !== -1 ||\n            $piggyJq('#PromoValidationMessage', responseHTML).text().indexOf('has been accepted') !== -1 ||\n            (!$piggyJq('#promomessage', responseHTML).length && $piggyJq('#dvTotalDiscount', responseHTML).length)) {\n            return {\n                success: true,\n                savings: savings\n            };\n        }\n\n        return {\n            success: false,\n            savings: 0.00\n        };\n    },\n    complete: function (bestCode) {\n        var clickEvent = document.createEvent('MouseEvents');\n\n        clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\n\n        if ($piggyJq('#txtPromoCode').length) {\n            $piggyJq('#txtPromoCode').val(bestCode);\n            $piggyJq('#btnPromoCode').click();\n        } else if ($piggyJq('.htlRoomDetails').length) {\n            location.reload(true);\n        } else if ($piggyJq('.CarPaymentTitle').length) {\n            $piggyJq('#PromoCode').val(bestCode);\n            $piggyJq('#_trCoupon a').get(0).dispatchEvent(clickEvent);\n        } else {\n            $piggyJq('#PromoCode').val(bestCode);\n            $piggyJq('#promodiv a').get(0).dispatchEvent(clickEvent);\n        }\n    }\n};\n\nExternalProvider._prepareUrl();",
	"onetravel.mobile": "var ExternalProvider = {\n    prepare: function (action, code) {\n        if (action != 'applyCouponUrl') return null;\n\n        var urlParams = new URLSearchParams(location.search);\n        var data;\n\n        if ($('#dvBookFlight').length) data = '{ \"sid\": ' + urlParams.get('sid') + ', \"cid\": ' + urlParams.get('cid') + ', \"promoCode\": \"' + code + '\" }';\n        else data = '{ \"sid\": ' + urlParams.get('sid') + ', \"couponCode\": \"' + code + '\" }';\n\n        return data;\n    },\n    _prepareUrl: function () {\n        var applyUrlInput = jQuery('#__jpCouponUrl'),\n            applyUrl;\n\n        if ($('#dvBookFlight').length) applyUrl = 'https:\/\/m.onetravel.com\/api\/flightbook\/applypromocode';\n        else if ($('#dvBookHotel').length) applyUrl = 'https:\/\/m.onetravel.com\/api\/hotelsearch\/applypromocodev2';\n        else applyUrl = 'https:\/\/m.onetravel.com\/api\/carbook\/applypromocode';\n\n        if (!applyUrlInput.length) {\n            applyUrlInput = document.createElement('input');\n            applyUrlInput.id = '__jpCouponUrl';\n            applyUrlInput.style.display = 'none';\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n            applyUrlInput = jQuery('#__jpCouponUrl');\n        }\n\n        applyUrlInput.attr('value', applyUrl);\n    },\n    parse: function (response) {\n        var savings = Math.abs(response.Data.promoDiscount);\n\n        if (response.Message.indexOf('Congratulations') !== -1 && savings) {\n            return {\n                success: true,\n                savings: savings\n            };\n        }\n\n        return {\n            success: false,\n            savings: 0.00\n        };\n    },\n    complete: function () {\n        location.reload(true);\n    }\n};\n\nExternalProvider._prepareUrl();",
	"farmandfleet": "var ExternalProvider = {\n  init: function () {\n    if ($('.collapse-header.open:contains(\"Promo Code\")').length) {\n      $('.collapse-header:eq(1)').click();\n    }\n  },\n  prepare: function (step, code) {\n    this.inputCodeField(code);\n  },\n  whenReady: function (step, next) {\n    this.waitForSelector(this.isLoaded, this.getDiscount.bind(this, next), 200);\n\n  },\n  parse: function () {\n    var savings = parseFloat(this.promoCodeSavings);\n    \n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      this.inputCodeField(bestCode);\n    };\n  },\n  getDiscount: function (next) {\n    if (this.isCheckoutPage()) {\n      this.promoCodeSavings = $('.order-summary-footer-row.red').text().replace(\/[^0-9|.]\/g, '');\n    } else {\n      this.promoCodeSavings = $('.cart-order-savings.red').text().replace(\/[^0-9|.]\/g, '');\n    }\n    next();\n  },\n  isLoaded: function () {\n    var loadingElement = ExternalProvider.isCheckoutPage() ? $('.collapse-header.open:contains(\"Promo Code\")') : $('.cart-order-checkout-standard button:disabled');\n    return loadingElement.length < 1;\n  },\n  inputCodeField: function (code) {\n    $('.collapse-header:eq(1)').click();\n    $('#promoCode').val(code);\n    $('.apply-promo').click();\n  },\n  waitForSelector: function (isResolved, runNext, maxWait) {\n    let waited = 0;\n    let waitForClose = setInterval(function () {\n      if (waited > maxWait || isResolved()) {\n        clearInterval(waitForClose);\n        runNext();\n      }\n      waited++;\n    }, 10);\n  },\n  isCheckoutPage: function () {\n    return \/checkout\/.test(location.pathname);\n  }\n};",
	"allvolleyball": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.incart_discount:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#promo_code').val(bestCode);\n            $('input[name=\"promo_submit\"]').click();\n        }\n    }\n};",
	"szul": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    prepare: function (type, code) {\r\n        var form = $('div.mycart-total-price-mob.visible-xs.visible-sm').next().clone();\r\n        if(type === \"applyCouponUrl\"){\r\n            form.find('input[name=\"couponCode\"]').val(code);\r\n            this.addHiddenValue(form, 'action', 'ApplyCoupon');\r\n            return form.serialize();\r\n        } else if(type === \"clearCouponUrl\"){\r\n            this.addHiddenValue(form, 'action', 'RemoveCoupon');\r\n            return form.serialize();\r\n        }\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsText = $('span:contains(\"(-\")', responseHTML).text();\r\n        var savings = parseFloat(savingsText.replace(this.nonPriceRegex, ''));\r\n        if(savings > 0){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSavings) {\r\n        location.reload(true);\r\n    },\r\n\r\n    addHiddenValue: function (form, name, value) {\r\n        $('<input>').attr({\r\n            type: 'hidden',\r\n            name: name,\r\n            value: value\r\n        }).appendTo(form);\r\n    },\r\n};",
	"monsoon": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('#basketDiscounts', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#Promo').val(bestCode);\n            $('input[name=\"applyPromo\"]').click();\n        }\n    }\n};",
	"tourradar": "var ExternalProvider = {\r\n    DataParameters: {},\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var main = document.getElementsByTagName(\"main\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        ExternalProvider.DataParameters = $.parseJSON($('main').attr('data-parameters'));\r\n\r\n        var ApplyUrlInput = $('#___jpApplyUrl');\r\n        var ApplyUrl = 'https:\/\/www.tourradar.com\/book-now\/check_promo_code\/' + ExternalProvider.DataParameters.tourId;\r\n\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('input');\r\n            ApplyUrlInput.id = '___jpApplyUrl';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        ApplyUrlInput.attr('value', ApplyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        var vars = [];\r\n        var hash;\r\n        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\r\n\r\n        for (var i = 0; i < hashes.length; i++) {\r\n            hash = hashes[i].split('=');\r\n            vars.push(hash[0]);\r\n            vars[hash[0]] = hash[1];\r\n        }\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                promoCode: code,\r\n                pax: ExternalProvider.DataParameters.pax,\r\n                currency: ExternalProvider.DataParameters.currency,\r\n                date: vars.date,\r\n                email: ''\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = String(response.data.referral_value).replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0.00,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            $('.link a')[0].click();\r\n            $('div.field').find('input').val(bestCode);\r\n            $('.field a')[0].click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"kartenmachende": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#coupon_code').val(bestCode);\n      $('#discount-coupon-form button').click();\n    }\n  }\n};",
	"grouponuk": "var ExternalProvider = {\n  prepare: function (type, code) {\n    if (type === 'injectCoupon') {\n      jQuery('a.promo')[0].click();\n      jQuery('#promo-apply').val(code);\n\n      var s = document.createElement('script');\n\n      s.type = 'text\/javascript';\n      s.id = 'apply';\n\n      var codes = \"jQuery('#promo-apply').trigger('change');jQuery('button.apply').removeAttr('disabled').click();\";\n\n      s.appendChild(document.createTextNode(codes));\n      document.body.appendChild(s);\n      $('#apply').remove();\n    }\n  },\n  whenReady: function (step, next) {\n    var counter = 0;\n    var codeApplyTime = setInterval(function () {\n      counter += 1;\n\n      if (counter > 5) {\n        clearInterval(codeApplyTime);\n        next();\n      }\n    }, 300);\n  },\n  parse: function () {\n    var savings = parseFloat($('.discount-amount').text().replace(\/[^.0-9]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      jQuery('a.promo')[0].click();\n      jQuery('#promo-apply').val(bestCode);\n\n      var s = document.createElement('script');\n\n      s.type = 'text\/javascript';\n      s.id = 'apply';\n\n      var code = \"jQuery('#promo-apply').trigger('change');jQuery('button.apply').removeAttr('disabled').click();\";\n\n      s.appendChild(document.createTextNode(code));\n      document.body.appendChild(s);\n      $('#apply').remove();\n    }\n  }\n};",
	"cupshe": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('span:contains(\"- $\")', responseHTML).text().split(\"$\")[1].replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"yogisurprise": "var ExternalProvider = {\n    _init: function () {\n        var securityToken = $('script:contains(\"wc_cart_params\"),script:contains(\"wc_checkout_params\")').text().match(\/\"apply_coupon_nonce\":\"([A-z0-9]+)\"\/)[1];\n        var jpElement = document.createElement('input');\n\n        if ($('#_jpElement').length < 1) {\n            jpElement.id = '_jpElement';\n            jpElement.type = 'hidden';\n            (document.body || document.head || document.documentElement).appendChild(jpElement);\n        }\n\n        $('#_jpElement').attr('securityToken', securityToken);\n    },\n    parse: function (response) {\n        var validCoupon = response.includes('successfully') || response.includes('already applied');\n        var savings = 0.00;\n\n        if (validCoupon) {\n            var discount = 0.00;\n\n            $.ajax({\n                url: location.href,\n                type: 'POST',\n                data: {\n                    coupon_code: '',\n                    'woocommerce-cart-nonce': $('#woocommerce-cart-nonce').val(),\n                    _wp_http_referer: '\/cart\/'\n                },\n                async: false,\n                success: function (res) {\n                    var resHTML = $.parseHTML(res);\n\n                    discount = parseFloat($('.cart-discount .woocommerce-Price-amount.amount', resHTML).eq(0).text().replace(\/[^.0-9]\/g, ''));\n                }\n            });\n            savings = discount;\n        }\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};\nExternalProvider._init();",
	"jbrandjeans": "var ExternalProvider = {\n    prepare: function (type, code) {\n        if (type === 'applyCouponUrl') {\n            return JSON.stringify({\n                couponCode: code,\n                email: $('#checkoutLogin').val()\n            });\n        }\n\n        return null;\n    },\n    parse: function (response) {\n        var savings = response.financial.totalDiscount \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        var clickEvent = new MouseEvent('click', {\n            view: window,\n            bubbles: true,\n            cancelable: true\n        });\n\n        $('input[name=\"couponCode\"]').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\n        $('input[name=\"couponCode\"]').trigger('input').trigger('change');\n        $('button[ng-click=\"applyCoupon()\"]').get(0).dispatchEvent(clickEvent);\n    }\n};",
	"cellularoutfitter": "var ExternalProvider = {\n  chdataobject: {},\n  cid: '',\n  token: '',\n  __prepareUrl: function () {\n    var data;\n\n    if (this.isSecureUI()) {\n      var script = document.createElement('script');\n\n      script.appendChild(document.createTextNode('$(\"body\").attr(\"data\", JSON.stringify(window.CHDataObject));'));\n      script.id = 'tempScript';\n      (document.body || document.head || document.documentElement).appendChild(script);\n      data = JSON.parse($('body').attr('data'));\n      $('body').removeAttr('data');\n      $('#tempScript').remove();\n\n      this.cid = data.checkout_session;\n      this.token = data.partial_encoded;\n    }\n\n    var applyUrlInput = $('#__dynamicUrl');\n    var applyUrl = this.isSecureUI() ? 'https:\/\/api.c.carthook.com\/api\/v1\/coupons\/calculate\/' + this.token + '?cid=' + this.cid : ' ';\n\n    if (!applyUrlInput.length) {\n      applyUrlInput = document.createElement('input');\n      applyUrlInput.id = '__dynamicUrl';\n      applyUrlInput.style.display = 'none';\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n      applyUrlInput = $('#__dynamicUrl');\n    }\n\n    applyUrlInput.attr('value', applyUrl);\n  },\n  prepare: function (type, code) {\n    var data = null;\n\n    if (type === 'applyCouponUrl' && this.isSecureUI()) {\n      var script = document.createElement('script');\n\n      script.appendChild(document.createTextNode('$(\"body\").attr(\"chdataobject\", JSON.stringify(window.CHDataObject));'));\n      script.id = 'tempScript';\n      (document.body || document.head || document.documentElement).appendChild(script);\n      this.chdataobject = JSON.parse($('body').attr('chdataobject'));\n      $('body').removeAttr('chdataobject');\n      $('#tempScript').remove();\n\n      this.chdataobject.cart_data.customer_email = $('#customer_email')[0].value;\n\n      data = {\n        cart_data: this.chdataobject.cart_data,\n        checkout_session: this.chdataobject.checkout_session,\n        coupon_code: code,\n        selected_shipping_rate: null\n      };\n\n      return data;\n    } else if (type === 'applyCouponUrl' && !this.isSecureUI()) {\n      data = $('.edit_checkout.animate-floating-labels:nth(1)').serializeArray();\n\n      data.forEach(function (item) {\n        if (item.name === 'checkout[reduction_code]') {\n          item.value = code;\n        }\n      });\n\n      return data;\n    }\n    return data;\n  },\n  parse: function (response) {\n    var parseHTML = $.parseHTML(response);\n    var savings = this.isSecureUI() ? response.total_coupons_amount : parseFloat($('.order-summary__section.order-summary__section--total-lines .total-line.total-line--reduction .total-line__price > span', parseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  isSecureUI: function () {\n    return \/a\\\/secure\\\/checkout\/.test(location.href);\n  },\n  complete: function (bestCode) {\n    var clickEvent = new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: true\n    });\n    if (bestCode && this.isSecureUI()) {\n      $('#gift-link').click();\n      $('#coupon_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\n      $('#coupon_code').trigger('input').trigger('change');\n      $('.btn-coupon').get(0).dispatchEvent(clickEvent);\n    } else if (bestCode) {\n      $('#gift-link').click();\n      $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\n      $('#checkout_reduction_code').trigger('input').trigger('change');\n      $('.field__input-btn.btn').get(0).dispatchEvent(clickEvent);\n    }\n  }\n};\nExternalProvider.__prepareUrl();",
	"windsorstore": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#bagSummary > div.summary-line-item.discount > div.amount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#CouponCode').val(bestCode);\r\n            $('.coupon-form').submit();\r\n        }\r\n    }\r\n};",
	"soliver": "var ExternalProvider = {\n    _prepareUrl: function () {\n        var applyUrlInput = $('#___jpCouponUrl');\n        var applyUrl = this.isCartPage() ? $('.jsNoFormValidation').attr('action') : $('#dwfrm_cov2checkout').attr('action');\n\n        if (!applyUrlInput.length) {\n            applyUrlInput = document.createElement('input');\n            applyUrlInput.id = '___jpCouponUrl';\n            applyUrlInput.style.display = 'none';\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n            applyUrlInput = $('#___jpCouponUrl');\n        }\n\n        applyUrlInput.attr('value', applyUrl);\n    },\n    isCartPage: function () {\n        if (document.getElementById('dwfrm_cart_couponCode') === null) {\n            return false;\n        }\n\n        return true;\n    },\n    prepare: function (action, code) {\n        if (['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\n\n        var data = {};\n\n        if (this.isCartPage()) {\n            data = {\n                view: 'ajax',\n                dwfrm_cart_shipments_i0_items_i0_quantity: $('.ta_quantity').attr('size'),\n                dwfrm_cart_couponCode: code,\n                dwfrm_cart_addCoupon: 'Add'\n            };\n        } else {\n            data = {\n                view: 'ajax',\n                dwfrm_cov2checkout_billing_couponCode: code,\n                dwfrm_cov2checkout_billing_giftcardPrefix: $('#dwfrm_cov2checkout_billing_giftcardPrefix').attr('value'),\n                dwfrm_cov2checkout_billing_giftcardNumber_d0mmuokaldfj: '',\n                dwfrm_cov2checkout_billing_giftcardPIN_d0ctkdmvrovx: '',\n                dwfrm_cov2checkout_expresscheckout: true,\n                dwfrm_cov2checkout_billing_addcoupon: ''\n            };\n        }\n\n        return data;\n    },\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var total = this.isCartPage() ? '.ta_miniCart_totalPrice' : '.ta_orderSummaryAddedTotal';\n        var oldTotal = parseFloat($(total).eq(0).text().replace(\/[^0-9]\/g, ''));\n        var newTotal = parseFloat($(total, responseHTML).eq(0).text().replace(\/[^0-9]\/g, ''));\n        var savings = (oldTotal - newTotal) \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) {\n            if (this.isCartPage()) {\n                location.reload();\n            } else {\n                jQuery('#dwfrm_cov2checkout_billing_couponCode').val(bestCode);\n\n                var s = document.createElement('script');\n\n                s.type = 'text\/javascript';\n                s.id = 'apply';\n\n                var code = \"jQuery('#dwfrm_cov2checkout_billing_couponCode').trigger('change');jQuery('#dwfrm_cov2checkout_billing_addcoupon').click();\";\n\n                s.appendChild(document.createTextNode(code));\n                document.body.appendChild(s);\n                $('#apply').remove();\n            }\n        }\n    }\n};\nExternalProvider._prepareUrl();",
	"milkmakeup": "var ExternalProvider = {\n\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.discount .value', responseHTML).text().replace(\/[^0-9.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) location.reload(true);\n    }\n};",
	"discountlens": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.col-xs-4.right:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"gv_redeem_code\"]').val(bestCode);\r\n            $('#checkout-shipping')[0].click();\r\n        }\r\n    }\r\n};",
	"worldwidegolfshops": "var ExternalProvider = {\n  _prepareUrl: function () {\n    var applyUrlInput = $('#___jpCouponUrl');\n    var applyUrl = this.isCartPage() ? 'https:\/\/www.worldwidegolfshops.com\/shoppingcart.aspx' : 'https:\/\/www.worldwidegolfshops.com\/secure\/checkoutpage2.aspx';\n\n    if (!applyUrlInput.length) {\n      applyUrlInput = document.createElement('input');\n      applyUrlInput.id = '___jpCouponUrl';\n      applyUrlInput.style.display = 'none';\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n      applyUrlInput = $('#___jpCouponUrl');\n    }\n\n    applyUrlInput.attr('value', applyUrl);\n  },\n  isCartPage: function () {\n    return \/shoppingcart.aspx\/.test(location.pathname);\n  },\n  prepare: function (type, code) {\n    function serializeObject(a) {\n      var o = {};\n\n      $.each(a, function () {\n        o[this.name] = this.value || '';\n      });\n\n      return o;\n    }\n    var formDataArray = $('#form1').serializeArray();\n    var formData = serializeObject(formDataArray);\n\n    if (type === 'applyCouponUrl') {\n      formData.ctl00$ctl00$mainSiteContent$MainContent$basketForm$discount_code = code;\n      formData.ctl00$ctl00$mainSiteContent$MainContent$basketForm$ApplyDiscountButton = 'Apply';\n    }\n\n    return formData;\n  },\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var savings = parseFloat($('.DiscountPriceB:contains(\"-$\"):first', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#discount_code').val(bestCode);\n      $('#ApplyDiscountButton').click();\n    }\n  }\n};\nExternalProvider._prepareUrl();",
	"tvc-mall": "var ExternalProvider = {\n    parse: function (response) {\n        var jsonParse = JSON.parse(response.match('_discountInfo =(.+?);')[1]);\n        var savings = parseFloat(jsonParse.DiscountAmount);\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"exploretrip": "var ExternalProvider = {\n  data: {},\n  _prepareUrl: function () {\n    var applyUrl = localStorage.getItem('AccessToken_et');\n    var applyUrlInput = $('#___jpCouponUrl');\n\n    if (!applyUrlInput.length) {\n      applyUrlInput = document.createElement('input');\n      applyUrlInput.id = '___jpCouponUrl';\n      applyUrlInput.style.display = 'none';\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\n      applyUrlInput = $('#___jpCouponUrl');\n    }\n\n    applyUrlInput.attr('value', applyUrl);\n  },\n  prepare: function (type, code) {\n    var selectedItinerary = localStorage.getItem('SELECTED_ITINERARY');\n    var etSearchRequest = localStorage.getItem('ET_SEARCH_REQUEST');\n    var etUserInfo = localStorage.getItem('ET_USER_INFO');\n\n    var itinerary = $.parseJSON(selectedItinerary);\n    var searchRequest = $.parseJSON(etSearchRequest);\n    var userInfo = $.parseJSON(etUserInfo);\n\n    this.data = {\n      Airline: itinerary.ValidatingCarrierCode,\n      Code: code,\n      Origin: searchRequest.OriginDestination[0].DepartureLocationCode,\n      CorporateAccountId: userInfo.corporateAccountId,\n      Destination: searchRequest.OriginDestination[0].ArrivalLocationCode,\n      IsLowestFareExist: itinerary.IsLowestFareExist,\n      ItinGuid: itinerary.ItineraryId,\n      MsFare: localStorage.getItem('MSFARE_et'),\n      TotalAmount: $('#totalAmount').text().substring(1),\n      TpUserId: userInfo.userId\n    };\n\n    if (type === 'applyCouponUrl') {\n      return JSON.stringify(this.data);\n    }\n\n    return true;\n  },\n\n  parse: function (response) {\n    var responseJson = $.parseJSON(response);\n    var savings = responseJson.Savings;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#promoCodeId').val(bestCode);\n      $('#promoCodeApplyId').click();\n    }\n  }\n};\n\nExternalProvider._prepareUrl();",
	"sportsshoes": "var ExternalProvider = {\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\n        var locale;\n        var s = document.createElement('script');\n        var code = \"document.querySelector('body').setAttribute('currency', window.currency);\";\n        var selector;\n\n        s.id = 'tempScript';\n        s.appendChild(document.createTextNode(code));\n        document.body.appendChild(s);\n        $('#tempScript').remove();\n\n        selector = location.pathname.match('checkout\/guest\/details') ? $('#sideTotal').text() : $('body').attr('currency');\n\n        if (selector === 'EUR' || selector.match('\u20ac')) {\n            locale = localeMapping.DE;\n            currency = 'EUR';\n        } else if (selector === 'GBP' || selector.match('\u00a3')) {\n            locale = localeMapping.GB;\n            currency = 'GBP';\n        } else {\n            locale = localeMapping.US;\n        }\n\n        return amount.toLocaleString(locale, { style: 'currency', currency: currency, minimumFractionDigits: 2 });\n    },\n    isEmpty: function () {\n        return $('.mini_basket_summary_totals_total').text().replace(\/[A-z.0-9.:,]\/g, '').trim() === '';\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"evanmoor": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var savings = 0;\n\n        for (var x = 0; x < response.Products.length; x++) {\n            savings += response.Products[x].DiscountValue;\n        }\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode, bestSavings) {\n        if (bestCode) {\n            $('#couponCode').val(bestCode);\n\n            var buttonSelector = location.href.includes('checkout') ? 'a' : 'button';\n\n            var s = document.createElement('script');\n\n            s.type = 'text\/javascript';\n\n            var code = \"$('#couponCode').trigger('change');$(\\\"\" + buttonSelector + \":contains('Apply')\\\").click();\";\n\n            s.appendChild(document.createTextNode(code));\n            document.body.appendChild(s);\n        }\n    }\n};",
	"teamexpress": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n\tif(response && response.discountTotalCents) {\r\n\t\tvar savings = parseFloat(response.discountTotalCents\/100);\r\n\t\tif(savings > 0){\r\n\t\t\treturn {\r\n\t\t            success: true,\r\n\t\t            savings: savings\r\n\t\t        }\r\n\t        }\r\n\t}\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode,bestSavings){\r\n        $('#checkoutPromoCodeInput').val(bestCode);\r\n        $('#applyPromoCodeButton').click();\r\n    }\r\n}",
	"tokyolaundry": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"zales": "var ExternalProvider = {\n  parse: function (response) {\n    const responseHTML = $.parseHTML(response);\n    var oldTotal = parseFloat($('.cart-totals-body > .row:first').text().replace(\/[^0-9|.]\/g, ''));\n    var newTotal = parseFloat($('.cart-totals-body > .row:first', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n    var savings = oldTotal - newTotal;\n    \n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"cherrybrook": "var ExternalProvider = {\r\n\tprepare: function(type,code){\r\n        \r\n        \r\n        if(type === \"applyCouponUrl\"){\r\n\t\t\tvar data = {};\r\n\t\t\t\r\n\t\t\tdata[\"itemcount\"]=$(\"input[name='itemcount']\").val();\r\n\t\t\tdata[\"quantity1\"]=$(\"input[name='quantity1']\").val();\r\n\t\t\tdata[\"oldquantity1\"]=$(\"input[name='oldquantity1']\").val();\r\n\t\t\tdata[\"idcartitem1\"]=$(\"input[name='idcartitem1']\").val();\r\n\t\t\tdata[\"promotioncode\"]=code;\r\n\t\t\t\r\n\t\t\treturn data;\r\n\t\t\r\n\t\t}\r\n\t\r\n\t\treturn null;\r\n\t},\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n\t\t\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\t\r\n\t\t\r\n\t\tvar codeFound = $(\"#cart div.coupon\",responseHTML).text().toLowerCase().indexOf(code.toLowerCase())>=0;\r\n\t\t\r\n\t\tvar savings = 0.0;\r\n\t\t\r\n\t\tif(codeFound){\r\n\r\n\t\t\tsavings = Number($(\"#tax_dl dd.discount\",responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\t\r\n\t\t\r\n\t\t\r\n\t\treturn {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n        \r\n       \r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\t\t\r\n\t\t$(\"#promotion\").val(bestCode);\r\n\t\t$(\".promotion_btn input\").click();\r\n\t\t\r\n\r\n    }\r\n    \r\n}",
	"farebuzz": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.totdiscount:contains(\"$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) {\n            var clickEvent = new MouseEvent('click', {\n                view: window,\n                bubbles: true,\n                cancelable: true\n            });\n\n            $('#promoclick').get(0).dispatchEvent(clickEvent);\n            $('#PromoCode').val(bestCode);\n            $(\"#promodiv a:contains('Apply')\").get(0).dispatchEvent(clickEvent);\n        }\n    }\n};",
	"dressbarn": "var ExternalProvider = {\n    parse: function (response) {\n        var savings = parseFloat(response.data.cartSummary.savingsNew[0].value);\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"adidasde": "var ExternalProvider = {\n  parse: function (response) {\n    var responseHTML = $.parseHTML(response);\n    var oldTotal = parseFloat($('div[data-ci-test-id=\"orderTotalProductsDeliveryValue\"]').text().replace(\/[^0-9]\/g, '')) \/ 100;\n    var newTotal = parseFloat($('div[data-ci-test-id=\"orderTotalProductsDeliveryValue\"]', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\n    var savings = oldTotal - newTotal;\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) location.reload();\n  }\n};",
	"prettylittlethinguk": "var ExternalProvider = {\n  isCartPage: function () {\n    return \/cart\/.test(location.href);\n  },\n  prepare: function (type, code) {\n    if (type === 'injectCoupon') {\n      $('#id_couponcode, #coupon').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\n      $('#id_couponcode, #coupon').trigger('input').trigger('change');\n      $('.button.cart-coupons-button, span:contains(\"Apply\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\n    } else if (type === 'removeInjectedCoupon') {\n      $('.cart-coupons-change, span:contains(\"Change code\")').click();\n    }\n  },\n  whenReady: function (step, next) {\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\n      setTimeout(function () {\n        var maxWait = 200;\n        var waited = 0;\n        var waitForClose = setInterval(function () {\n          var confirmed = !$('.cls_loadingMask').length;\n\n          if ((confirmed) || (waited > maxWait)) {\n            clearInterval(waitForClose);\n            setTimeout(function () {\n              next();\n            }, 700);\n          }\n\n          waited++;\n        }, 10);\n      }, 100);\n    }\n  },\n  parse: function () {\n    var savings = 0.00;\n\n    if (this.isCartPage()) {\n      savings = parseFloat($('div.cart-coupons-display > span.message > span').text().replace(\/[^.0-9]\/g, ''));\n    } else {\n      savings = parseFloat($('span:contains(\"-\u00a3\")').text().replace(\/[^.0-9]\/g, ''));\n    }\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#id_couponcode, #coupon').val(bestCode);\n      $('.button.cart-coupons-button, span:contains(\"Apply\")').click();\n    }\n  }\n};",
	"gillette": "var ExternalProvider = {\n  __prepareUrl: function () {\n    if (document.getElementById(\"csrf\") === null) {\n      const script = document.createElement('script');\n      let scriptContent = `\n          const csrfInput = document.createElement('input');\n          csrfInput.id = 'csrf';\n          csrfInput.setAttribute('type', 'hidden');\n          csrfInput.setAttribute('value', BCData.csrf_token);\n          (document.body || document.head || document.documentElement).appendChild(csrfInput);\n        `;\n      script.id = 'tmpScript';\n      script.appendChild(document.createTextNode(scriptContent));\n      (document.body || document.head || document.documentElement).appendChild(script);\n    }\n    $('#tmpScript').remove();\n  },\n  parse: function (response) {\n    let savings = 0;\n    if (response[0].coupons) {\n      savings = Math.abs(response[0].coupons[0].discountedAmount);\n      this.removeCoupon(response[0].coupons[0].id);\n    }\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    };\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $.ajax({\n        url: 'https:\/\/gillette.com\/remote\/v1\/apply-code',\n        type: 'POST',\n        headers: {\n          'x-xsrf-token': $('#csrf').val()\n        },\n        data: {\n          code: bestCode\n        },\n        success: function () {\n          location.reload();\n        }\n      })\n    };\n  },\n  removeCoupon: function (couponCode) {\n    $.get('https:\/\/gillette.com\/cart.php?action=removecoupon&couponid=' + couponCode);\n  }\n};\nExternalProvider.__prepareUrl();",
	"totalpetsupply": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('td', responseHTML).filter(function(el){return $(this).html().indexOf('Discount:') > -1}).next('td').find('strong');\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#coupon button').click();\r\n        }\r\n    }\r\n};",
	"cbazaar": "var ExternalProvider = {\n  cookieName: \"\",\n  init: function () {\n    var name = \"_GoogleClient\" + '=';\n    var ca = document.cookie.split(';');\n    var c = ca[2];\n    this.cookieName = decodeURIComponent(c.substring(name.length, c.length)).replace(\"=\", \"\");\n  },\n  retrieveWindowVariable: function (name, variable) {\n    var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\n    var script = document.createElement('script');\n\n    script.id = 'tmpScript';\n    script.appendChild(document.createTextNode(scriptContent));\n    (document.body || document.head || document.documentElement).appendChild(script);\n\n    var value = $('body').attr('tmp_' + name);\n    $('body').removeAttr('tmp_' + name);\n\n    return value;\n  },\n  prepare: function (type, code) {\n    var data = {};\n\n    if (type === 'applyCouponUrl') {\n      data =\n        {\n          \"PromoDiscountPercentage\": 0,\n          \"UniqueID\": this.cookieName,\n          \"Command\": this.retrieveWindowVariable('gCountryBasedEstoreID', 'window.gCountryBasedEstoreID'),\n          \"CurrencyCode\": \"usd\",\n          \"CurrencySymbol\": \"$\",\n          \"EStoreID\": this.retrieveWindowVariable('gCountryBasedEstoreID', 'window.gCountryBasedEstoreID'),\n          \"GrandTotal\": $(\".shoppingprice_info\").text().replace(\/[^0-9|.]\/g, ''),\n          \"SubTotal\": $(\".shoppingprice_info\").text().replace(\/[^0-9|.]\/g, ''),\n          \"IsCODEligible\": false,\n          \"IsEDS\": false,\n          \"CartItemID\": 0,\n          \"Email\": this.retrieveWindowVariable('gUserLoginId', 'window.gUserLoginId'),\n          \"PromotionCode\": code,\n          \"Quantity\": 0,\n          \"UserID\": this.retrieveWindowVariable('gUserId', 'window.gUserId'),\n          \"ShippingCountryID\": this.retrieveWindowVariable('gStrShipCountryCode', 'window.gStrShipCountryCode'),\n          \"ProductCode\": 0,\n          \"Region\": \"NA\",\n          \"ShippingCost\": 0,\n          \"LoginSource\": this.retrieveWindowVariable('gUserName', 'window.gUserName'),\n          \"CurrencyFactor\": this.retrieveWindowVariable('gStrCurrMonFactor', 'window.gStrCurrMonFactor'),\n          \"UserBusinessType\": this.retrieveWindowVariable('gEsBusType', 'window.gEsBusType'),\n        }\n      return JSON.stringify(data);\n    }\n    return null;\n  },\n  parse: function (response) {\n    var savings = parseFloat(response.CartSummaries.PromotionDiscount);\n\n    return {\n      success: savings > 0,\n      savings: Number.isNaN(savings) ? 0.00 : savings\n    }\n  },\n  complete: function (bestCode) {\n    if (bestCode) {\n      $('#promo_offers_checkout').click();\n      setTimeout(function () {\n        $('#txtPromoCode').val(bestCode);\n        $('#btnPromoCode').click();\n        setTimeout(function () {\n          $('#PromoCodeModalClose')[0].click();\n        }, 1000);\n      }, 2000);\n    }\n  }\n};",
	"mylabbox": "var ExternalProvider = {\n    parse: function (response, status, $xhr, code) {\n        var coupons = response.data.coupons;\n        var savings = 0;\n\n        coupons.forEach(coupon => {\n            if (coupon.id.toLowerCase() === code.toLowerCase()) {\n                savings = parseFloat(coupon.discount);\n            }\n        });\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n    complete: function (bestCode) {\n        if (bestCode) location.reload();\n    }\n};",
	"glassesusa": "var ExternalProvider = {\n\tparse: function(response, status, $xhr, code)\n    {\n\t\t\n\t\tvar responseHTML = $.parseHTML(response);\n\t\t\n\t\t\n\t\t\n\t\tvar codeFound = $(\".coupon-table span\",responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >=0;\n\t\t\n\t\tvar savings = 0.0;\n\t\t\t\n\t\tif(codeFound){\n\t\t\t$(\"#shopping-cart-totals-table tr\",responseHTML).each(function(i,el){\n\n\t\t\t\tif($(el).text().toLowerCase().indexOf(\"discount\")>=0){\n\t\t\t\t\tsavings = Number($(el).children(\"td.a-left\").next().text().replace(\/[^0-9|\\.]\/g, ''));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\treturn {\n            success: codeFound,\n            savings: savings\n        }\n        \n       \n    },\n    complete: function(bestCode, bestSavings){\n\t\t\n\t\t\n\t\t$(\"#coupon_code\").val(bestCode);\n\t\t$(\"#coupon-button-apply\").click();\n\n    }\n    \n}",
	"homedepot": "var ExternalProvider = {\r\n    prepare: function(type, code) {\r\n        if (type == 'applyCouponUrl') {\r\n            return JSON.stringify({ PromotionUpdateRequest : { promotionCodes : [code] } });\r\n        }\r\n        return null;\r\n    },\r\n    parse: function(response, status, $xhr, code) {\r\n        if (response && response.CartModel && response.CartModel.promotionsModel) {\r\n            for (var i in response.CartModel.promotionsModel) {\r\n                var promo = response.CartModel.promotionsModel[i];\r\n                if (promo.promoCode.toLowerCase() == code.toLowerCase()) {\r\n                    var savings = Math.abs(parseFloat(promo.appliedDiscount));\r\n                    return {\r\n                        success: true,\r\n                        savings: savings\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function() {\r\n        location.reload();\r\n    }\r\n}",
	"attenuatepro": "var ExternalProvider = {\n    parse: function (response) {\n        var responseHTML = $.parseHTML(response);\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\n\n        return {\n            success: savings > 0,\n            savings: isNaN(savings) ? 0.00 : savings\n        };\n    },\n\n    complete: function (bestCode) {\n        if (bestCode) {\n            $('#checkout_reduction_code').val(bestCode);\n            $('.field__input-btn').removeAttr(\"disabled\").click();\n        }\n    }\n};",
	"kmart": "var ExternalProvider = {\r\n    \r\n        basketTotal: 0.00,\r\n    \r\n        init: function () {\r\n            this.basketTotal = Number($('#cart-footer > div.cart-footer-bulge > div:nth-child(2) > div > div.est-total-bottom.ng-scope > strong').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        },\r\n    \r\n        prepare: function (type, code) {\r\n            if (type == 'applyCouponUrl') {\r\n                return JSON.stringify({\"couponRequest\": {\"couponCode\": code}});\r\n            }\r\n    \r\n            return null;\r\n        },\r\n    \r\n        parse: function (response, status, $xhr, code) {\r\n            try {\r\n                var result = {\r\n                    success: false,\r\n                    savings: 0.00\r\n                };\r\n    \r\n                var savings = response.response.ordSummary.couponsDiscount;\r\n    \r\n    \r\n                if (savings > 0) {\r\n                    result = {\r\n                        success: true,\r\n                        savings: savings\r\n                    };\r\n    \r\n                    return result;\r\n                }\r\n            }\r\n            catch(err) {\r\n    \r\n                return {\r\n                    success: false,\r\n                    savings: 0.00\r\n                };\r\n            }\r\n          },\r\n    \r\n        complete: function (bestCode, bestSavings) {\r\n            location.reload();\r\n        }\r\n    };",
	"kmart.mobile": "var ExternalProvider = {\r\n\r\n    basketTotal: 0.00,\r\n\r\n    init: function () {\r\n        this.basketTotal = Number($('.price-col-2.h2.font-18').text().replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        if (type === \"applyCouponUrl\") {\r\n            return '{\"salPromotionReq\":[{\"type\":\"COUPON\",\"code\":\"CLAIMCODE\",\"subType\":\"Manually_Entered\"}]}'.replace(\/CLAIMCODE\/, $.trim(code));\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        try {\r\n            var result = {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n\r\n            if (response !== 'undefined' && response.hasOwnProperty('promotions') && Object.prototype.toString.call(response.promotions) === '[object Array]'\r\n              && response.promotions.length && response.promotions[0].hasOwnProperty('discountCode')) {\r\n                result = {\r\n                    success: true,\r\n                    savings: Number(response.promotions[0].discountAmount)\r\n                };\r\n            }\r\n\r\n            return result;\r\n        }\r\n        catch(err) {\r\n\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        location.reload();\r\n    }\r\n};",
	"kneipp": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $(\"#coupon_code\").val(bestCode);\r\n            $(\"button[value='Apply Coupon']\").click();\r\n        }\r\n    }\r\n};",
	"knetbooks": "var ExternalProvider = {\r\n\tparse: function(response, status, $xhr, code) {\r\n\t\tvar $response = $.parseHTML(response),\r\n\t\t\tcodeSuccess = $('.coupon-success', $response),\r\n\t\t\tcodeFound = false,\r\n\t\t\tsavings = 0.00;\r\n\r\n\t\tif(codeSuccess.length && codeSuccess.text().indexOf(code) !== -1) {\r\n\r\n\t\t\tcodeFound = true;\r\n\r\n\t\t\tvar $row;\r\n\t\t\t$('.cart-totals .caption', $response).each(function() {\r\n\t\t\t\t$row = $(this);\r\n\r\n\t\t\t\tif($row.text().trim() === 'Coupon') {\r\n\t\t\t\t\tsavings = parseFloat($row.next('.value').text().replace(\/[^0-9|\\.]\/g, ''));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: codeFound,\r\n\t\t\tsavings: savings\r\n\t\t};\r\n\t},\r\n\r\n\tcomplete: function(bestCode) {\r\n\t\tif(bestCode) location.reload();\r\n\t}\r\n}",
	"knockknockstuff": "var ExternalProvider = {\r\n    prepare: function(type, code) {\r\n        var data = {};\r\n        function retrieveWindowVariable(variable) {\r\n\r\n            var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + \")); }\\n\";\r\n            var script = document.createElement('script');\r\n            script.id = 'tmpScript';\r\n            script.appendChild(document.createTextNode(scriptContent));\r\n            (document.body || document.head || document.documentElement).appendChild(script);\r\n            var value = jQuery(\"body\").attr(\"tmp_\" + variable);\r\n            jQuery(\"body\").removeAttr(\"tmp_\" + variable);\r\n\r\n            return JSON.parse(value);\r\n\r\n        }\r\n\r\n        if (type == 'applyCouponUrl') {\r\n            data = {\r\n                security: retrieveWindowVariable('wc_cart_params.apply_coupon_nonce'),\r\n                coupon_code: code\r\n            };\r\n        } else {\r\n            data = {\r\n                security: retrieveWindowVariable('wc_cart_params.remove_coupon_nonce'),\r\n                coupon: code\r\n            };\r\n        }\r\n        return data;\r\n    },\r\n    parse: function(response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.order-total .woocommerce-Price-amount.amount').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.order-total .woocommerce-Price-amount.amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function(bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"kobo": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var url = window.location.pathname;\r\n\r\n        if (url.match(\"\\\/de|fr\\\/\")) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['EUR'];\r\n        } else if (url.match(\/gb\/g)) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    init: function () {\r\n        var data = $('[data-kobo-gizmo-config]').data('kobo-gizmo-config');\r\n        var url = 'https:\/\/www.kobo.com' + data.Urls.applyPromoCodeUrl;\r\n        $('<input type=\"hidden\" id=\"piggyApplyPromoUrl\">')\r\n            .val('https:\/\/www.kobo.com' + data.Urls.applyPromoCodeUrl)\r\n            .appendTo('body');\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    },\r\n    parse: function (response) {\r\n        if (response.PromoCodes && response.PromoCodes.AppliedPromoCodes[\"0\"].Discount) {\r\n            var savings = parseFloat(response.PromoCodes.AppliedPromoCodes[\"0\"].Discount.replace(\/[^0-9.]\/g, ''));\r\n\r\n            return {\r\n                success: savings > 0,\r\n                savings: isNaN(savings) ? 0.00 : savings\r\n            };\r\n        }\r\n    }\r\n};\r\nExternalProvider.init();",
	"kofferarenade": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat($('#basketSummary #summary-wrapper tbody tr:eq(1) .rightSide', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) window.location.replace('https:\/\/www.koffer-arena.de\/index.php?&cl=basket');\r\n    }\r\n};",
	"koffer": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.couponData td:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon > input[name=\"voucherNr\"]').val(bestCode);\r\n            $('#coupon > .submitButton').click();\r\n        }\r\n    }\r\n};",
	"koffer-direkt": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.total-price:eq(1)').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.total-price:eq(1)', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = newTotal >= oldTotal ? 0.00 : oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"kofferprofi": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.rightFloat.shoutColor', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"voucherNr\"]').val(bestCode);\r\n            $('.reloadVoucher.roundAll.secondBgColor').click();\r\n        }\r\n    }\r\n};",
	"kohgendocosmetics": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"kohls": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0;\r\n        response.appliedDiscounts.qualifiedItems.forEach(discount => {\r\n            if (discount.code) {\r\n                savings += parseFloat(discount.amount.replace(\/[^0-9.]\/g, ''));\r\n            }\r\n        });\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"koolaburra": "var ExternalProvider = {\r\n    queueName: '_cfq',\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var codeFound = false, savings = 0.00, codeUuid = false;\r\n\r\n        if(Array.isArray(response)) {\r\n            response.forEach(function(v) {\r\n                if(v.couponCode.toLowerCase() === code.toLowerCase()) {\r\n                    codeFound = true;\r\n                    savings = Math.abs(v.priceAdjust);\r\n                    codeUuid = v.uuid;\r\n                }\r\n            })\r\n        }\r\n\r\n        if(codeFound) {\r\n\r\n            var queue = $(document).queue(this.queueName);\r\n            queue.unshift(function(next) {\r\n\r\n                $.ajax({\r\n                    type: 'GET',\r\n                    url: '\/on\/demandware.store\/Sites-KOOLABURRA-US-Site\/default\/COBilling-RemoveCoupon',\r\n                    data: {\r\n                        couponCode: codeUuid,\r\n                        format: 'ajax',\r\n                        spc: true,\r\n                        instart_disable_injection: true\r\n                    },\r\n                    cache: false,\r\n                    success: function() {\r\n                        next();\r\n                    },\r\n                    error: function() {\r\n                        next();\r\n                    }\r\n                });\r\n            });\r\n\r\n            $(document).queue(this.queueName, queue);\r\n        }\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"korres": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"korresusa": "var ExternalProvider = {\r\n    prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"forgeryToken\", window.antiForgeryToken);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var forgeryToken = $('body').attr('forgeryToken');\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = 'https:\/\/www.korresusa.com\/Cart\/CouponValidation?culture=en&code=CLAIMCODE&t=' + forgeryToken;\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.CouponDiscount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#couponValue').val(bestCode);\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n            $('#couponValue').get(0).dispatchEvent(changeEvent);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n            $('#validateCouponLink').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};\r\nExternalProvider.prepareUrl();",
	"kukoon": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('.js-fisheye-ajaxcart-total .price').text().replace(\/[0-9.]\/g, '').trim();\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price-row.discounted-coupon span.price', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"labseries": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        var token = $('input[name=\"_TOKEN\"]').val();\r\n        var ID = $('input[name=\"COUNTRY_ID\"]').val();\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                JSONRPC: '[{\"method\":\"logic.checkout--viewcart\",\"id\":' + ID + ',\"params\":[{\"_SUBMIT\":\"offer_code\",\"_TOKEN\":\"' + token + '\",\"OFFER_CODE\":\"' + code + '\"}]}]',\r\n                _TOKEN: $('input[name=\"_TOKEN\"]').val()\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = (response['0'].result.value.transaction.formattedItemsDiscount).replace(\/[^0-9.]\/g, '');\r\n        var savings = responseHTML.replace('- \u00a3', '');\r\n\r\n        savings = parseFloat(savings);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"labseriesformen": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"labtestingapi": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"apply_coupon_nonce\", wc_cart_params.apply_coupon_nonce);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var applycouponnonce = $('body').attr('apply_coupon_nonce');\r\n        var ApplyUrlInput = $('#___jpApplyUrl');\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('input');\r\n            ApplyUrlInput.id = '___jpApplyUrl';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        ApplyUrlInput.attr('value', applycouponnonce);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-discount td', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"lacewigsbuy": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.zs_fr.zs_totalprice .price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.zs_line .zs_fr.zs_totalprice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lacrossemonkey": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('.a-right .price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lacrosseunlimited": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var match = response.match('coupon_amount(.*)}]}}}}}}}}')[0];\r\n        var savings = match.replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            if (window.location.pathname === \"\/checkout\/cart\/\") {\r\n                $('#coupon_code_fake').val(bestCode);\r\n                $('#discount-coupon-form > div.fieldset.coupon.clearfix > div.actions-toolbar > div > button').click();\r\n            } else {\r\n                $('#discount-code-fake').val(bestCode);\r\n                $('#discount-form > div.actions-toolbar > div > button').click();\r\n            }\r\n        }\r\n    }\r\n};",
	"ladyfootlocker": "var ExternalProvider = {\r\n    prepareUrl: function () {\r\n        $.ajax({\r\n            url: 'https:\/\/www.ladyfootlocker.com\/api\/session',\r\n            method: 'GET',\r\n            async: false,\r\n            success: function (d) {\r\n                document.getElementsByTagName('body')[0].setAttribute('csrf', d.data.csrfToken);\r\n            }\r\n        });\r\n\r\n        var date = new Date();\r\n        var timeStamp = date.getTime();\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var clearUrlInput = $('#___jpClearUrl');\r\n        var applyUrl = 'https:\/\/www.ladyfootlocker.com\/api\/users\/carts\/current\/vouchers?timestamp=' + Date.now();\r\n        var resultUrl = 'https:\/\/www.ladyfootlocker.com\/api\/users\/carts\/current?checkInventory=true&checkPriceVariation=true&timestamp=' + timeStamp;\r\n        var clearUrl = 'https:\/\/www.ladyfootlocker.com\/api\/users\/carts\/current\/vouchers\/CLAIMCODE?timestamp=' + Date.now();\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        if (!clearUrlInput.length) {\r\n            clearUrlInput = document.createElement('input');\r\n            clearUrlInput.id = '___jpClearUrl';\r\n            clearUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n            clearUrlInput = $('#___jpClearUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        resultUrlInput.attr('value', resultUrl);\r\n        clearUrlInput.attr('value', clearUrl);\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat((response.orderDiscounts.formattedValue).replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('button:contains(\"Add Promo Code\")').click();\r\n            setTimeout(function () {\r\n                $('#input_voucherId').val(bestCode);\r\n\r\n                var changeEvent = new Event('change', {\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n\r\n                $('#input_voucherId').get(0).dispatchEvent(changeEvent);\r\n\r\n                var clickEvent = new MouseEvent('click', {\r\n                    view: window,\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n\r\n                $('.c-btn--primary:contains(\"Apply\")').get(0).dispatchEvent(clickEvent);\r\n                $('.c-promo-code-form').submit();\r\n            }, 1000);\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider.prepareUrl();",
	"ladyfootlocker.mobile": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action !== 'injectCoupon') return false;\r\n        if ($('#estimator_sourcecode').length) {\r\n            $('#estimator_sourcecode').val(code);\r\n            var clickEvent = document.createEvent('MouseEvents');\r\n            clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\r\n            $('#cartestimator_form a').get(0).dispatchEvent(clickEvent);\r\n        } else {\r\n            $('#CPCOrSourceCode').val(code);\r\n            $('#applyPromo').click();\r\n        }\r\n    },\r\n\r\n    whenReady: function (step, next) {\r\n        var codeApplyTime;\r\n        var counter = 0;\r\n        if ($('#estimator_sourcecode').length) {\r\n            codeApplyTime = setInterval(function () {\r\n                counter += 1;\r\n                if ($('#cartestimator_form a:visible').length || counter > 200) {\r\n                    clearInterval(codeApplyTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        } else {\r\n            codeApplyTime = setInterval(function () {\r\n                counter += 1;\r\n                if ($('#inventoryCheck_loading:visible').length === 0 || counter > 200) {\r\n                    clearInterval(codeApplyTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        }\r\n    },\r\n\r\n    parse: function (response) {\r\n        var savings;\r\n        if ($('#estimator_sourcecode').length) {\r\n            savings = parseFloat($('#estimated_savings .block-b').text().replace('$', ''));\r\n        } else {\r\n            savings = parseFloat($('#reviewPaneDiscountTotal').text().replace(\/[$-]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"laithwaites": "var ExternalProvider = {\r\n    parse: function (result) {\r\n        var savings = result.response.orderPriceInfo.pricingBreakdown[1].adjustmentAmount * -1;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lakeside": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var discount = parseFloat($('#cart_subtotals div:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        if (discount > 0) {\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#applyCouponInput').val(bestCode);\r\n            $('[name=\"_D:\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode\"]').val(bestCode);\r\n            $('#applyButton')[0].click();\r\n        }\r\n    }\r\n};",
	"lamelle": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-price.cart-sum:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        $.ajax({\r\n            url: $('.cart-price a:last', responseHTML).attr('href'),\r\n            type: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lampenwelt": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-discount .price', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lampsplus": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.GlobalCartResponseModel.OnlineOrderSummary.PromoPriceDiscount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lancomeusa": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.coupon__info:eq(0) .value', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($('#dwfrm_cart_couponCode').length === 1) {\r\n                $('#dwfrm_cart_couponCode').val(bestCode);\r\n                $('#add-coupon').click();\r\n            } else {\r\n                $('#dwfrm_couponcode_couponCode').val(bestCode);\r\n                $('button[name=\"dwfrm_couponcode_applyCoupon\"]').click();\r\n            }\r\n        }\r\n    }\r\n};",
	"landsend": "var getCookie = function (sKey) {\r\n  return sKey ? decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(\/[\\-\\.\\+\\*]\/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null : null;\r\n};\r\nvar ExternalProvider = {\r\n  _prepareAuthCookie: function () {\r\n    var auth = getCookie('X-CSRF-TOKEN');\r\n    var token = $('#___jpToken');\r\n\r\n    if (!token.length) {\r\n      token = document.createElement('input');\r\n      token.id = '___jpToken';\r\n      token.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(token);\r\n      token = $('#___jpToken');\r\n    }\r\n    token.attr('value', auth);\r\n  },\r\n  prepare: function (type, code) {\r\n    var coupon = code.split(\/\\s*-*\\s*Pin:\\s*\/);\r\n    var data = {};\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        functionName: 'applyPromotion',\r\n        promoCode: coupon[0],\r\n        promoPIN: coupon[1],\r\n        isEditOrderMode: 'N',\r\n        debug: false\r\n      };\r\n    } else if (type === 'clearCouponUrl') {\r\n      data = {\r\n        functionName: 'removePromotion',\r\n        isEditOrderMode: 'N',\r\n        debug: false\r\n      };\r\n    }\r\n    return data;\r\n  },\r\n  parse: function (response, status, $xhr, code) {\r\n    var coupon = code.split(\/\\s*-*\\s*Pin:\\s*\/);\r\n    var savings = 0;\r\n    var _code = coupon[0] || coupon;\r\n    if (response.promoCode.toLowerCase() === _code.toLowerCase()) {\r\n      savings = parseFloat(response.promoSavingsAmt) \/ 100;\r\n    }\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareAuthCookie();",
	"landsendde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.redemption.promotions[0].promoPrice.replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"landsenduk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-value:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lanebryant": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.data.cartSummary.newSavings.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lang": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('td.a-right', responseHTML).filter(function(){\r\n            return $(this).text().indexOf('Discount') > -1;\r\n        }).next('td.a-right');\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"lang.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n\r\n        var $savings = $piggyJq('td.a-right', responseHTML).filter(function(){\r\n            return $piggyJq(this).text().indexOf('Discount') > -1;\r\n        }).next('td.a-right');\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"lapeyrefr": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#_applyUrl');\r\n        var applyUrl = 'https:\/\/www.lapeyre.fr\/ValidateExternalAdjust?orderId=' + $('#currentOrderId').val();\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '_applyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#_applyUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#currentOrderAmount').val());\r\n        var newTotal = parseFloat($('#currentOrderAmount', responseHTML).val());\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#codeAvantageInput').val(bestCode);\r\n            $('#addCodePromoButton').click();\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"lapostemobile": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldSavings = parseFloat($('#ContentPlaceHolder1_usrPanier_div_a_payer_aujourdhui').text().replace('\u20ac', '.').replace(\/[^0-9.]\/g, ''));\r\n        var newSavings = parseFloat($('#ContentPlaceHolder1_usrPanier_div_a_payer_aujourdhui', responseHTML).text().replace('\u20ac', '.').replace(\/[^0-9.]\/g, ''));\r\n        var savings = oldSavings - newSavings;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#ContentPlaceHolder1_usrCodePromo_txt_CodePromo').val(bestCode);\r\n            window.location.href = \"javascript:__doPostBack('ctl00$ContentPlaceHolder1$usrCodePromo$btnValiderCodePromo','')\";\r\n        }\r\n    }\r\n};",
	"laptopbatteryexpress": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('font:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#v65-cart-coupon-entry-details-input').val(bestCode);\r\n            $('#v65-cart-coupon-entry-details-button').click();\r\n        }\r\n    }\r\n};",
	"laredoutefr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#BasketAmount').text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('#BasketAmount', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"laredouteuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#totalDiscount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#txtGiftCode').val(bestCode);\r\n      $('#btnSubmitGiftCode').click();\r\n    }\r\n  }\r\n};",
	"lascanade": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.colorActive:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''))\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"voucherNr\"]').val(bestCode);\r\n            $('.button.small.bearbeiten.right:first').click();\r\n        }\r\n    }\r\n};",
	"lasenza": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('div.discount > span.value > span', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload(true)\r\n        }\r\n    }\r\n};",
	"lashoede": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = 0;\r\n\r\n    if (response.errors.length === 0) {\r\n      $.ajax({\r\n        url: 'https:\/\/secure.lashoe.de\/index.php?',\r\n        type: 'POST',\r\n        async: false,\r\n        data: {\r\n          renderPartial: 'basketContents',\r\n          cl: 'basket',\r\n          editable: true,\r\n          actcontrol: 'order'\r\n        },\r\n        success: function () {\r\n          $.ajax({\r\n            url: 'https:\/\/secure.lashoe.de\/index.php?',\r\n            type: 'POST',\r\n            async: false,\r\n            data: {\r\n              renderPartial: 'basketSummary',\r\n              cl: 'basket',\r\n              actcontrol: 'order'\r\n            },\r\n            success: function (result) {\r\n              savings = parseFloat($('.pay:contains(\"-\")', $.parseHTML(result.content)).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $.ajax({\r\n        url: $('.removeFn').attr('href'),\r\n        type: 'POST',\r\n        async: false\r\n      });\r\n      $('#coupon').val(bestCode);\r\n      $('.js-smAddVoucher').click();\r\n    }\r\n  }\r\n};",
	"lastcall": "var ExternalProvider = {\r\n    oldNoTax: 0,\r\n    oldPrice: 0,\r\n    oldTax: 0,\r\n    init: function () {\r\n        this.oldPrice = Number($('.total.desc').next().text().replace(\/[^0-9.]\/g, ''));\r\n        this.oldTax = Number($('#txt_taxAmount').text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        this.oldNoTax = this.oldPrice - this.oldTax;\r\n    },\r\n\r\n    _prepareUrl: function () {\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var resultUrl = this.isCartPage() ? 'https:\/\/www.lastcall.com\/checkout\/cart.jsp' : 'https:\/\/www.lastcall.com\/checkout\/orderreview.jsp';\r\n\r\n        \/\/ Append result url input\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        resultUrlInput.attr('value', resultUrl);\r\n    },\r\n    isCartPage: function () {\r\n        return !\/orderreview\/.test(location.href);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var codeFound = $('.promo.desc', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n        if (codeFound) {\r\n            var newPrice = Number($('.total.desc', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n            var newTax = Number($('#txt_taxAmount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n            var newNoTax = newPrice - newTax;\r\n\r\n\r\n            var savings = 0;\r\n\r\n            if (this.isCartPage()) {\r\n                savings = this.oldPrice - newPrice;\r\n\r\n                result = {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n\r\n                return result;\r\n            }\r\n\r\n            savings = this.oldNoTax - newNoTax;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n\r\n            return result;\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"lastminutefr": "var ExternalProvider = {\r\n    init: function () {\r\n        $('.smart-voucher__link').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: false }));\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('input[name=\"voucher\"],#ipt_discountCode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('input[name=\"voucher\"],#ipt_discountCode').trigger('input').trigger('change');\r\n            $('input[name=\"voucher\"],#ipt_discountCode').focus();\r\n            $('input[name=\"voucher\"],#ipt_discountCode').blur();\r\n            $('button:contains(\"Apply\"),button:contains(\"Appliquer\"),#bt_discountCode').click();\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('button:contains(\"Remove\"),button:contains(\"Supprimer\")').click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var self = this;\r\n\r\n        if (step === 'injectCoupon') {\r\n            this._timeout = setInterval(function () {\r\n                if ($('div[data-test=\"fieldset-wrapper-voucher\"]').hasClass('has-success') || $('div[data-test=\"fieldset-wrapper-voucher\"]').hasClass('has-error') || $('.messageTo .error').length > 0) {\r\n                    clearTimeout(self._timeout);\r\n                    setTimeout(next, 3000);\r\n                }\r\n            }, 200);\r\n        } else {\r\n            this._timeout = setInterval(function () {\r\n                if (!$('div[data-test=\"fieldset-wrapper-voucher\"]').hasClass('has-error') || !$('div[data-test=\"fieldset-wrapper-voucher\"]').hasClass('has-success') || $('.messageTo .error').length < 1) {\r\n                    clearTimeout(self._timeout);\r\n                    setTimeout(next, 3000);\r\n                }\r\n            }, 200);\r\n        }\r\n    },\r\n    parse: function () {\r\n        var savings = parseFloat($('li[data-test=\"cost-item-voucher\"] div[data-test=\"cost-item-amount\"] span').text().replace(\/[^0-9|.]\/g, '') \/ 100);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"lastminutetravel": "var ExternalProvider = {\r\n    data: {},\r\n    init: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"checkIn\", window.universal_variable.basket.line_items[0].product.checkin);';\r\n        scriptContent += 'body.setAttribute(\"checkOut\", window.universal_variable.basket.line_items[0].product.checkout);';\r\n        scriptContent += 'body.setAttribute(\"currency\", window.universal_variable.basket.currency);';\r\n        scriptContent += 'body.setAttribute(\"hotelId\", window.universal_variable.basket.line_items[0].product.id);';\r\n        scriptContent += 'body.setAttribute(\"totalPrice\", window.universal_variable.basket.total);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var checkIn = $('body').attr('checkIn');\r\n        var checkOut = $('body').attr('checkOut');\r\n        var currency = $('body').attr('currency');\r\n        var hotelId = $('body').attr('hotelId');\r\n        var totalPrice = $('body').attr('totalPrice');\r\n\r\n        this.data = {\r\n            checkIn: checkIn,\r\n            checkOut: checkOut,\r\n            currency: currency,\r\n            hotelId: hotelId,\r\n            product: 'Hotel',\r\n            totalPrice: totalPrice\r\n        };\r\n    },\r\n    prepare: function (action, code) {\r\n        return JSON.stringify({\r\n            checkIn: this.data.checkIn,\r\n            checkOut: this.data.checkOut,\r\n            code: code,\r\n            currency: this.data.currency,\r\n            hotelId: this.data.hotelId,\r\n            product: 'Hotel',\r\n            totalPrice: this.data.totalPrice\r\n        });\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.result.discountAmount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('.promoCodeBtn').click();\r\n            $('input[name=\"coupon\"]').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('input[name=\"coupon\"]').trigger('input').trigger('change');\r\n            $('.promoCodeBtn').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"lastminuteuk": "var ExternalProvider = {\r\n  init: function () {\r\n    $('button:contains(\"discount\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('input[name=\"voucher\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[name=\"voucher\"]').trigger('input').trigger('change');\r\n      $('input[name=\"voucher\"]').focus();\r\n      $('input[name=\"voucher\"]').blur();\r\n      $('button:contains(\"Apply\")').click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('button:contains(\"Remove\")').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 700);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('span:contains(\"-\u00a3\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  }\r\n};",
	"laurageller": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.price:contains(-$)', responseHTML).text().replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[title=\"Apply\"]').click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"lauramercier": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.discount > span.value', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"laurencecchi": "var ExternalProvider = {\r\n    \r\n    _prepareUrl: function() {\r\n\r\n\t\tvar applyUrlInput = $('#__jpCouponUrl'),\r\n\t\t\tapplyUrl = this.isCartPage() ? 'https:\/\/laurencecchi.com\/cart' : 'https:\/\/laurencecchi.com\/checkout';\r\n\t\tif(!applyUrlInput.length) {\r\n\t\t\tapplyUrlInput = document.createElement(\"input\");\r\n\t\t\tapplyUrlInput.id = '__jpCouponUrl';\r\n\t\t\tapplyUrlInput.style.display = \"none\";\r\n\t\t\t(document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n\t\t\tapplyUrlInput = $('#__jpCouponUrl');\r\n\t\t}\r\n        \r\n\t\tapplyUrlInput.attr('value', applyUrl);\r\n\t},\r\n\r\n    isCartPage: function() {\r\n        return window.location.href.indexOf('checkout') == -1;\r\n\t},\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        var responseHTML = $.parseHTML(response);\r\n        var selector = this.isCartPage() ? 'div.woocommerce > div.container:eq(1) > div.row:eq(1) > div:eq(1) > span.amount' : 'tr.cart-discount > td > span.amount';\r\n        var savings = parseFloat($(selector, responseHTML).html().replace('$', '').replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n        \r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"ldlcfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price.negative', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"leanintree": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                ctl00$ScriptManager1: 'ctl00$cphMain$udpPromoCodeBottom|ctl00$cphMain$btnApplyPromoCodeBottom',\r\n                '__EVENTTARGET': '',\r\n                '__EVENTARGUMENT': '',\r\n                '__VIEWSTATE': $('#__VIEWSTATE').val(),\r\n                '__EVENTVALIDATION': $('#__EVENTVALIDATION').val(),\r\n                '__LASTFOCUS': '',\r\n                ctl00$ctlHeader$ctlSearch$txtSearch: '',\r\n                ctl00$ctlHeader$ctlSearch2$txtSearch: '',\r\n                ctl00$cphMain$txtPromoCodeTop: '',\r\n                ctl00$cphMain$ctlQuickOrder$txtCatalogNumber: '',\r\n                ctl00$cphMain$ctlQuickOrder$txtQuantity: $('#ctl00_cphMain_ctlQuickOrder_txtQuantity').val(),\r\n                ctl00$cphMain$ctlCartItems$rptCart$ctl00$ctlCartItemsRow$txtQuantity: $('#ctl00_cphMain_ctlCartItems_rptCart_ctl00_ctlCartItemsRow_txtQuantity').val(),\r\n                ctl00$cphMain$ctlCartItems$rptCart$ctl00$ctlCartItemsRow$hdWebOrderItemId: $('#ctl00_cphMain_ctlCartItems_rptCart_ctl00_ctlCartItemsRow_hdWebOrderItemId').val(),\r\n                ctl00$cphMain$txtPromoCodeBottom: code,\r\n                ctl00$cphMain$ctlPersonalizedCardSender$ctlAddressInfo$ddlCountry: 'US',\r\n                ctl00$cphMain$ctlPersonalizedCardSender$ctlAddressInfo$txtFirstName: '',\r\n                ctl00$cphMain$ctlPersonalizedCardSender$ctlAddressInfo$txtLastName: '',\r\n                ctl00$cphMain$ctlPersonalizedCardSender$ctlAddressInfo$txtCompanyName: '',\r\n                ctl00$cphMain$ctlPersonalizedCardSender$ctlAddressInfo$txtStreet1: '',\r\n                ctl00$cphMain$ctlPersonalizedCardSender$ctlAddressInfo$txtStreet2: '',\r\n                ctl00$cphMain$ctlPersonalizedCardSender$ctlAddressInfo$txtLocality: '',\r\n                ctl00$cphMain$ctlPersonalizedCardSender$ctlAddressInfo$ddlStateRegion: '-1',\r\n                ctl00$cphMain$ctlPersonalizedCardSender$ctlAddressInfo$txtUSZip: '',\r\n                ctl00$cphMain$ctlPersonalizedCardRecipient$ctlAddressInfo$ddlCountry: 'US',\r\n                ctl00$cphMain$ctlPersonalizedCardRecipient$ctlAddressInfo$txtFirstName: '',\r\n                ctl00$cphMain$ctlPersonalizedCardRecipient$ctlAddressInfo$txtLastName: '',\r\n                ctl00$cphMain$ctlPersonalizedCardRecipient$ctlAddressInfo$txtCompanyName: '',\r\n                ctl00$cphMain$ctlPersonalizedCardRecipient$ctlAddressInfo$txtStreet1: '',\r\n                ctl00$cphMain$ctlPersonalizedCardRecipient$ctlAddressInfo$txtStreet2: '',\r\n                ctl00$cphMain$ctlPersonalizedCardRecipient$ctlAddressInfo$txtLocality: '',\r\n                ctl00$cphMain$ctlPersonalizedCardRecipient$ctlAddressInfo$ddlStateRegion: '- 1',\r\n                ctl00$cphMain$ctlPersonalizedCardRecipient$ctlAddressInfo$txtUSZip: '',\r\n                ctl00$ctlFooter$txtEmailUpdates: '',\r\n                '__VIEWSTATEGENERATOR': $('#__VIEWSTATEGENERATOR').val(),\r\n                '__SCROLLPOSITIONX': '0',\r\n                '__SCROLLPOSITIONY': '0',\r\n                hiddenInputToUpdateATBuffer_CommonToolkitScripts: '1',\r\n                '__ASYNCPOST': true,\r\n                ctl00$cphMain$btnApplyPromoCodeBottom: 'Apply Promo Code'\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat($('#ctl00_cphMain_ctlCartItems_ctlSubtotal_rptDiscounts_ctl00_lblDiscountAmount', $.parseHTML(response)).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"learningresources": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"leesade": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"- \u20ac\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"legrand": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount-line', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lehmans": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var discount = $('.subtotal', responseHTML).text().match(\/Promo: \\$\\-([\"^0-9.]+)\/g);\r\n        var savings = discount.toString().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"leisurepro": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = false;\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        code: code,\r\n        type: 'Coupon',\r\n        shipToCountry: 'US',\r\n        zip: $('#shipping-zip').val(),\r\n        email: $('#shipping-email').val(),\r\n        address1: $('#shipping-address1').val(),\r\n        address2: $('#shipping-address2').val(),\r\n        bilAsShip: true,\r\n        pageType: 'checkoutPage'\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savings = (response.data.summary.coupons[0].savings);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"lelo": "var ExternalProvider = {\r\n  retrieveWindowVariable: function (name, variable) {\r\n    var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\r\n    var script = document.createElement('script');\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var value = $('body').attr('tmp_' + name);\r\n\r\n    $('body').removeAttr('tmp_' + name);\r\n\r\n    return value;\r\n  },\r\n  prepare: function (action, code) {\r\n    var formData = {};\r\n    var themeToken = this.retrieveWindowVariable('theme_token', 'JSON.stringify(Drupal.settings.ajaxPageState.theme_token)');\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      formData = $('#commerce-checkout-form-review');\r\n      formData.append('<input type=\"hidden\" name=\"_triggering_element_name\" value=\"coupon_add\">');\r\n      formData.append('<input type=\"hidden\" name=\"_triggering_element_value\" value=\"APPLY COUPON\">');\r\n      formData.find('input[name=\"commerce_coupon[coupon_code]\"]').val(code);\r\n\r\n      var data = formData.serializeArray();\r\n\r\n      data['commerce_coupon[coupon_code]'] = code;\r\n\r\n      var ids = document.querySelectorAll('*[id]:not([id=\"\"])');\r\n      var element = [];\r\n\r\n      Array.prototype.forEach.call(ids, function (el, i) {\r\n        element.push(el.id);\r\n      });\r\n\r\n      for (var i = 0; i < element.length; i++) {\r\n        data.push({\r\n          name: 'ajax_html_ids[]',\r\n          value: element[i]\r\n        });\r\n      }\r\n\r\n      formData.append('<input type=\"hidden\" name=\"ajax_page_state[theme]\" value=\"lelo_theme_2\">');\r\n      formData.append('<input type=\"hidden\" name=\"ajax_page_state[theme_token]\" value=\"' + themeToken + '\">');\r\n      formData.append('<input type=\"hidden\" name=\"ajax_page_state[jquery_version]\" value=\"1.10\">');\r\n\r\n      $(\"input[name='_triggering_element_name']\").remove();\r\n      $(\"input[name='_triggering_element_value']\").remove();\r\n      $(\"input[name='ajax_page_state[theme]']\").remove();\r\n      $(\"input[name='_triggering_element_name']\").remove();\r\n      $(\"input[name='ajax_page_state[jquery_version]']\").remove();\r\n\r\n      return data;\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response[2].data);\r\n    var oldTotal = parseFloat($('.component-total:last').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('.component-total:last', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"lemystere": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"lenovo": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    if (action === 'applyCouponUrl' || action === 'clearCouponUrl') {\r\n      return {\r\n        couponCode: action === 'applyCouponUrl' ? code : 'Enter coupon code',\r\n        avoid_enter_submit: '',\r\n        voucherCode: code,\r\n        CSRFToken: $('input[name=\"CSRFToken\"]').val()\r\n      };\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#orderSummaryPart .price-calculator-cart-summary-couponSaved', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"couponCode\"]').val(bestCode);\r\n      $('#ecouponForm-button-forNewMobile').click();\r\n    }\r\n  }\r\n};",
	"lenox": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        var shoppingCart = JSON.parse(localStorage.getItem('shoppingCart'));\r\n        if (type === 'applyCouponUrl') {\r\n            data = `{\r\n                \"shoppingCart\": {\r\n                    \"items\": ${JSON.stringify(shoppingCart.items)},\r\n                    \"coupons\": [\r\n                        {\r\n                            \"code\": \"${code}\",\r\n                            \"description\": \"\",\r\n                            \"status\": \"\",\r\n                            \"level\": \"\",\r\n                            \"id\": \"\"\r\n                        }\r\n                    ]\r\n                },\r\n                \"combineLineItems\": \"yes\",\r\n                \"payments\": [\r\n\r\n                ],\r\n                \"giftMessage\": \"null\",\r\n                \"easyPayJSON\": \"null\",\r\n                \"giftWrapJSON\": \"null\",\r\n                \"personalizedItems\": \"null\",\r\n                \"payPalBillingAddress\": null,\r\n                \"paymentType\": null,\r\n                \"couponCodes\": null\r\n            }`;\r\n            return data;\r\n        }\r\n\r\n        if (type === 'clearCouponUrl') {\r\n            data = `{\r\n                \"shoppingCart\": {\r\n                    \"items\": ${JSON.stringify(shoppingCart.items)},\r\n                    \"coupons\": []\r\n                },\r\n                \"combineLineItems\": \"yes\",\r\n                \"payments\": [\r\n\r\n                ],\r\n                \"giftMessage\": \"null\",\r\n                \"easyPayJSON\": \"null\",\r\n                \"giftWrapJSON\": \"null\",\r\n                \"personalizedItems\": \"null\",\r\n                \"payPalBillingAddress\": null,\r\n                \"paymentType\": null,\r\n                \"couponCodes\": null\r\n            }`;\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.discountInfo.orderCouponsMap['' + code + ''].totalAdjustment.replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestcode) {\r\n        $('#CC-promotionDetails-promoCode').val(bestcode);\r\n\r\n        var s = document.createElement('script');\r\n        s.type = 'text\/javascript';\r\n        var code = `$('#CC-promotionDetails-promoCode').trigger('change');$('#CC-promotion-applyCodeButton').click();`;\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n\r\n    }\r\n};",
	"lens": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    function serializeObject(a) {\r\n      var o = {};\r\n\r\n      $.each(a, function () {\r\n        o[this.name] = this.value || '';\r\n      });\r\n\r\n      return o;\r\n    }\r\n\r\n    if (type === 'resultUrl') {\r\n      var formDataArray = $('#frm ').serializeArray();\r\n      var data = serializeObject(formDataArray);\r\n\r\n      data.coupcode = code;\r\n\r\n      return data;\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('#rebatetotalcost').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('#rebatetotalcost', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupcode').val(bestCode);\r\n      $('#coupapply')[0].click();\r\n    }\r\n  }\r\n};",
	"lensdirect": "var ExternalProvider = {\r\n    parse: function(response) {\r\n        if(!response || !response.result) {\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n        \r\n        return {\r\n            success: true,\r\n            savings: response.cart.totals.discount_coupon\r\n        };\r\n    },\r\n\r\n    complete: function() {\r\n        location.reload();\r\n    }\r\n};",
	"lenstore": "var ExternalProvider = {\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);    \r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0.00;\r\n        var oldTotal = 0.00;\r\n        var newTotal = 0.00;\r\n\r\n        if (this.isCartPage()) {\r\n            oldTotal = parseFloat($('tr.total').text().replace(\/[^0-9|.]\/g, ''));\r\n            newTotal = parseFloat($('tr.total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n            savings = oldTotal - newTotal;\r\n        } else {\r\n            $.ajax({\r\n                url: 'https:\/\/www.lenstore.co.uk\/?_g=ex&type=ajaxCoupon&coupon=' + code + '',\r\n                type: 'GET',\r\n                async: false\r\n            });\r\n            $.ajax({\r\n                url: 'https:\/\/www.lenstore.co.uk\/?_g=ex&_a=widget&box=basketSummary&params={\"template\":\"basketSummary_checkout\"}',\r\n                type: 'GET',\r\n                success: function (result) {\r\n                    oldTotal = parseFloat($('.shoppingCartTotal').text().replace(\/[^0-9.]\/g, ''));\r\n                    newTotal = parseFloat($('.shoppingCartTotal', result).text().replace(\/[^0-9.]\/g, ''));\r\n                    savings = oldTotal - newTotal;\r\n                },\r\n                async: false\r\n            });\r\n        };\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"leonisa": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n\r\n      for (var i = 0; i < data.length; i++) {\r\n        object[data[i].name] = data[i].value;\r\n      }\r\n\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    var formData = {};\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      formData = $('form[name=\"main\"]').serializeObject();\r\n\r\n      formData = Object.assign(formData, {\r\n        CT_Main_0$txtPromotionCode: code,\r\n        CT_Main_0$btnPromo: 'APPLY'\r\n      });\r\n    }\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.Table .u-textRed', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#CT_Main_0_txtPromotionCode').val(bestCode);\r\n      $('input[name=\"CT_Main_0$btnPromo\"]').click();\r\n    }\r\n  }\r\n};",
	"lepetitolivier": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.price:contains(\"-\"):eq(0)', responseHTML).text().replace(',', '.');\r\n\r\n        savings = parseFloat(savings.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            window.location.href = 'javascript:discountForm.submit(false)';\r\n        }\r\n    }\r\n};",
	"lesmills": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#shopping-cart-totals-table > tbody > tr:eq(1) > td:eq(1) > span', responseHTML).html().replace('-', '').replace('$', ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n\r\n};",
	"leuchtenland": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.panel--td.column--total-price.block:contains(\"-\"):eq(0)', responseHTML).text().replace(\/,\/g, '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.add-voucher--field').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        }\r\n    }\r\n};",
	"levi": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping['US'];\r\n    var url = window.location.pathname;\r\n\r\n    if (isEUR = url.match(\/(de|fr)\/g)) {\r\n      currency = 'EUR';\r\n      locale = localeMapping[isEUR.shift().toUpperCase()];\r\n    } else if (url.match(\/US\/g)) {\r\n      currency = 'USD';\r\n      locale = localeMapping['US'];\r\n    } else {\r\n      currency = 'GBP';\r\n      locale = localeMapping['GB'];\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n  },\r\n  __prepareUrl: function () {\r\n    var url = this.isDEpage() ? 'https:\/\/www.levi.com\/DE\/de_DE\/cart\/voucher\/apply' : 'https:\/\/www.levi.com\/US\/en_US\/cart\/voucher\/apply';\r\n    var newElement = document.createElement('input');\r\n    newElement.id = '__jpApplyUrl';\r\n    newElement.style.display = 'none';\r\n    (document.body || document.head || document.documentElement).appendChild(newElement);\r\n\r\n    $('#__jpApplyUrl').attr('value', url);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        voucherCode: code,\r\n        CSRFToken: $('input[name=\"CSRFToken\"]').val()\r\n      };\r\n\r\n      return data;\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.col-xs-6.cart-totals-right.text-right.discount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    \r\n    if (this.isDEpage()) {\r\n      savings = savings \/ 100;\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload(true);\r\n  },\r\n  isDEpage: function () {\r\n    return location.href.match('levi.com\/DE\/de_DE');\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"lexmod": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML($xhr.responseText);\r\n\r\n        var savings = parseFloat($('.summary .data:contains(\"Discount\")', responseHTML)\r\n            .next().text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        var success;\r\n\r\n        if (savings && !isNaN(savings) && savings > 0) {\r\n            success = true;\r\n        } else {\r\n            success = false;\r\n            savings = 0.00;\r\n        }\r\n\r\n        return {\r\n            success: success,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function()\r\n    {\r\n        location.reload();\r\n    }\r\n};",
	"libertylondon": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-discount.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#txtCouponCode').val(bestCode);\r\n      $('#btn-add-coupon').click();\r\n    }\r\n  }\r\n};",
	"lichterlebnisse": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price span:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lidlde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.voucherValue);\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lidlfotosde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#shoppingcartForm\\\\:data tbody tr:eq(4) td:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lifeextension": "var ExternalProvider = {\r\n  retrieveWindowVariable: function (name, variable) {\r\n    var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\r\n    var script = document.createElement('script');\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var value = $('body').attr('tmp_' + name);\r\n\r\n    $('body').removeAttr('tmp_' + name);\r\n\r\n    return value;\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action !== 'applyCouponUrl') return false;\r\n\r\n    return {\r\n      marketingCode: code,\r\n      force: false,\r\n      cart: this.retrieveWindowVariable('cart_data', 'ko.toJSON(viewModel)')\r\n    };\r\n  },\r\n  parse: function (response) {\r\n\tvar savings = parseFloat(response.Data.TotalPromoDiscount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n\treturn {\r\n\t\tsuccess: savings > 0,\r\n\t\tsavings: Number.isNaN(savings) ? 0.00 : savings\r\n\t};\r\n},\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"lifeisgood": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var unadjustedPrice = parseFloat($('.price-unadjusted', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var adjustedPrice = parseFloat($('.price-adjusted-total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = unadjustedPrice - adjustedPrice;\r\n        this.clearCoupon(responseHTML);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    },\r\n    clearCoupon(responseHTML) {\r\n        var $form = $('#cart-items-form', responseHTML);\r\n        var data = $form.serializeArray();\r\n        data.push({\r\n            name: 'dwfrm_cart_coupons_i0_deleteCoupon',\r\n            value: 'Remove'\r\n        });\r\n        if ($form.length) {\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: $form.attr('action'),\r\n                data: data,\r\n                success: function (response) {\r\n                    return;\r\n                },\r\n                error: function (response) {\r\n                    return;\r\n                },\r\n                async: false\r\n            });\r\n        }\r\n    }\r\n}",
	"lifelock": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var planData = response.planData;\r\n    var savings = 0;\r\n    var standardSavings = parseFloat(planData.standardMonthlyBaseDollar + '.' + planData.standardMonthlyBaseCents) - parseFloat(planData.standardMonthlyDollar + '.' + planData.standardMonthlyCents);\r\n    var advantageSavings = parseFloat(planData.advantageMonthlyBaseDollar + '.' + planData.advantageMonthlyBaseCents) - parseFloat(planData.advantageMonthlyDollar + '.' + planData.advantageMonthlyCents);\r\n    var ultimateSavings = parseFloat(planData.ultimateMonthlyBaseDollar + '.' + planData.ultimateMonthlyBaseCents) - parseFloat(planData.ultimateMonthlyDollar + '.' + planData.ultimateMonthlyCents);\r\n\r\n    savings = (savings > standardSavings) ? savings : standardSavings;\r\n    savings = (savings > advantageSavings) ? savings : advantageSavings;\r\n    savings = (savings > ultimateSavings) ? savings : ultimateSavings;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      this.applyBestCode(bestCode);\r\n    }\r\n  },\r\n  applyBestCode: function (code) {\r\n    if ($('#promo').length) {\r\n      $('#promo').val(code);\r\n      $('#getPlanId').click();\r\n    }\r\n\r\n    if ($('.promo-input').length) {\r\n      $('.promo-input').val(code);\r\n      $('.btn-action').click();\r\n    }\r\n  }\r\n};",
	"lifestride": "var ExternalProvider = {\r\n  isCheckoutPage: function () {\r\n    return location.href.includes('Checkout\/Checkout');\r\n  },\r\n  _prepareUrl: function () {\r\n    var applyUrl = location.href + '\/AddPromoCode';\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n\r\n    if (action === 'applyCouponUrl' && this.isCheckoutPage()) {\r\n      data = {\r\n        __RequestVerificationToken: $('form[id=\"antiForgeryTokenForm\"] input[name=\"__RequestVerificationToken\"]').val(),\r\n        promoCode: code\r\n      };\r\n    } else {\r\n      data = {\r\n        RewardsNumber: '',\r\n        PromoCode: code,\r\n        'X-Requested-With': 'XMLHttpRequest'\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.amount.discount, .discount-text', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $(\"input[name='PromoCode'], #promoCodeInput\").val(bestCode);\r\n      $(\"#submitPromoCode, .js-submit-promo-btn\")[0].click();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"lighthouseclothing": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lightinthebox": "var ExternalProvider = {\r\n    displayCurrency: function(amount, currency, localeMapping, minimumFractionDigits) {\r\n\t\tvar locale = localeMapping['US'];\r\n\t\tvar url = window.location.pathname;\r\n\t\r\n\t\tif (isEUR = url.match(\/(de|fr)\/g)) {\r\n\t\t\tcurrency = 'EUR';\r\n\t\t\tlocale = localeMapping[isEUR.shift().toUpperCase()];\r\n\t\t} else if (url.match(\/en\/g)) {\r\n\t\t\tcurrency = 'GBP';\r\n\t\t\tlocale = localeMapping['GB'];\r\n\t\t}\r\n\r\n\t\treturn amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n\t},\r\n\tprepare: function (type, code) {\r\n        if (type === 'applyCouponUrl' || type === 'clearCouponUrl') {\r\n            var data = {\r\n                couponCode: code,\r\n                shipping_method: $('#sm_chinaups').val(),\r\n                insurance_checked: $('#getShipIns').val(),\r\n                payment_method: $('#paymentMethod').val(),\r\n                unique_pre_order_id: $(\"input[name='unique_pre_order_id']\").val(),\r\n                shipping_address_id: $('#usingAddressId').val(),\r\n                order_id: $('#orderId').val(),\r\n                checkout_paypal_payer_id: $('#checkout_paypal_payer_id').val(),\r\n                part_storecredit_value: $('#part_storecredit_value').val(),\r\n                snapshot_id: $('#snapshot_id').val(),\r\n                part_storecredit: $('#part_storecredit_type').val(),\r\n                shipping_data_type: $('#shipping_data_type').val(),\r\n                only_seperate_package: $('#only_seperate_package').val(),\r\n                part_storecredit_mark: 0,\r\n                seperate_checked: '',\r\n                package_type: 'only_whole_package_china'\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = Number(response.detail.discountValue.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#to-use-coupon')[0].click();\r\n            $('#couponCode').val(bestCode);\r\n            $('#couponApply').click();\r\n        }\r\n    }\r\n};",
	"lightinthebox.mobile": "var ExternalProvider = {\r\n    _numberCleanRegexp: \/[^-\\d.,]\/g,\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var self = this;\r\n        var fail = {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n\r\n        if (!response) {\r\n            return fail;\r\n        }\r\n\r\n        var $response = $.parseHTML(response);\r\n\r\n        var savings = $('.checkout-summary .price', $response)\r\n            .toArray()\r\n            .map(function (node) {\r\n                return parseFloat(node.innerText.replace(self._numberCleanRegexp, '')) || 0;\r\n            })\r\n            .filter(function (num) {\r\n                return num < 0;\r\n            })\r\n            .sort(function (a, b) {\r\n                return a - b;\r\n            });\r\n\r\n        if (!savings.length) {\r\n            return fail;\r\n        }\r\n\r\n        return {\r\n            success: true,\r\n            savings: savings[0] * -1\r\n        };\r\n    }\r\n};",
	"lightninglabels": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        this._savings = 0.00;\r\n\r\n        if (response.message.includes('was applied') && location.pathname.includes('\/checkout\/cart')) {\r\n            var cartSavings = this._savings;\r\n\r\n            $.ajax({\r\n                url: location.href,\r\n                type: 'GET',\r\n                async: false,\r\n                success: function (res) {\r\n                    var resHTML = $.parseHTML(res);\r\n\r\n                    cartSavings = parseFloat($('tbody span:contains(\"-\")', resHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n                }\r\n            });\r\n            this._savings = cartSavings;\r\n        } else if (response.message.includes('was applied')) {\r\n            var checkoutSavings = this._savings;\r\n\r\n            $.ajax({\r\n                url: 'https:\/\/www.lightninglabels.com\/checkout\/onepage\/savePayment\/',\r\n                type: 'POST',\r\n                data: {\r\n                    'payment[method]': $('input[name=\"payment[method]\"]').val(),\r\n                    'payment[cc_owner]': $('input[name=\"payment[cc_owner]\"]').val(),\r\n                    'payment[cc_type]': $('select[name=\"payment[cc_type]\"]').val(),\r\n                    'payment[cc_number]': $('input[name=\"payment[cc_number]\"]').val(),\r\n                    'payment[cc_exp_month]': $('select[name=\"payment[cc_exp_month]\"]').val(),\r\n                    'payment[cc_exp_year]': $('select[name=\"payment[cc_exp_year]\"]').val(),\r\n                    'payment[cc_cid]': $('input[name=\"payment[cc_cid]\"]').val(),\r\n                    form_key: $('input[name=\"form_key\"]').val()\r\n                },\r\n                async: false,\r\n                success: function (res) {\r\n                    var resHTML = $.parseHTML(JSON.parse(res).update_section.html);\r\n\r\n                    checkoutSavings = parseFloat($('.price:contains(\"-\")', resHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n                }\r\n            });\r\n            this._savings = checkoutSavings;\r\n        }\r\n\r\n        return {\r\n            success: this._savings > 0,\r\n            savings: isNaN(this._savings) ? 0.00 : this._savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value*=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"lights4funde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.basket-totals__total-price.l-pull-right span > font').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('.basket-totals__total-price span:last-child', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"lights4funuk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = $('.basket-totals__total-price.l-pull-right span > font').text().replace(\/[^0-9.]\/g, '');\r\n        var newTotal = $('.basket-totals__total-price span:last-child', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '') \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lightsonline": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    let savings = parseFloat(response.match('discount_amount\":\"-(.*)\",\"base_discount_amount')[0].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      const codeField = this.isCartPage() ? $('#coupon_code_fake') : $('#discount-code-fake');\r\n      const submitButton = this.isCartPage() ? $('#applyCoupon') : $('button[value=\"Apply\"]');\r\n      codeField.val(bestCode);\r\n      codeField.get(0).dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\r\n      submitButton.get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/checkout\/cart\/';\r\n  }\r\n};",
	"ligneenligne": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat($('#price').text().replace(',','.').replace(\/[^0-9.]\/g, '')) - parseFloat(response.new_price);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n           $('#reduction-code').val(bestCode);\r\n           $('#submit-coupon').click();\r\n        }\r\n    }\r\n};",
	"liligal": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('#ot_total').attr('orgp'));\r\n        var newTotal = parseFloat($('#ot_total', $.parseHTML(response.content)).attr('orgp'));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#verify_box').val(bestCode);\r\n            $('#verify_bt').click();\r\n        }\r\n    }\r\n};",
	"lillianvernon": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var couponSavings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n    var storeSavings = Number.isNaN(parseFloat($('.amount:contains(\"-\"):first()').text().replace(\/[^0-9|.]\/g, ''))) ? 0.00 : parseFloat($('.amount:contains(\"-\"):first()').text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = couponSavings - storeSavings;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"lilycharmed": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(-)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lilylolo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.basketTotalText:contains(\"Discount\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"limitlesswalls": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0;\r\n\r\n        if ($('.success-msg', responseHTML).text().indexOf(code) !== -1) {\r\n            savings = parseFloat($('#shopping-cart-totals-table tr th', responseHTML).siblings().text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"limogesjewelry": "var ExternalProvider = {\r\n\t\r\n\tparse: function(response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsHTML = $('#shopping-cart-totals-table > tbody > tr.summary-total > td:eq(1) > span', responseHTML).html();\r\n        var savings = savingsHTML ? parseFloat(savingsHTML.replace(\/[^0-9|\\.]\/g, '')) : 0.00;\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\t\t\r\n\t\treturn {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n       \r\n    },\r\n\r\n    complete: function(bestCode, bestSavings) {\r\n\t\t\r\n        if (bestCode) location.reload(true);\r\n\r\n    }\r\n    \r\n}",
	"linenchest": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar savings = parseFloat($('#shopping-cart-totals-table tbody tr:nth-child(2) .price').text().trim().substring(4));\r\n    \tif (savings) {\r\n    \t\treturn {\r\n    \t\t\tsuccess: true,\r\n    \t\t\tsavings: savings\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"littlewoods": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.priceAdjustmentValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promotionCode').val(bestCode);\r\n            $('#couponClaimButton').click();\r\n        }\r\n    }\r\n};",
	"littmanjewelers": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#rptCartItems_ctl00_itemDiscounts_ctl00_strPromoAmount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#txtPromoCode').val(bestCode);\r\n            $('#btnApplyPromo').click();\r\n        }\r\n    },\r\n};",
	"liverpooljeans": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    $('#checkout_reduction_code').val(bestCode).focus();\r\n    $('.field__input-btn').prop('disabled', false).click();\r\n  }\r\n};",
	"livify": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"livingsocial": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            var domConfig = JSON.parse($('#domConfig').text());\r\n            var items = domConfig.appState.items.map(function (item) {\r\n                return {\r\n                    dealId: item.dealId,\r\n                    dealUudi: item.dealUuid,\r\n                    delivery: item.delivery,\r\n                    eligibleForIncentives: item.eligibleForIncentives,\r\n                    optionUuid: item.optionUuid,\r\n                    pledgeId: item.pledgeId,\r\n                    quantity: item.quantity,\r\n                    quoteId: item.quoteId,\r\n                    redemptionCountry: item.redemptionCountry,\r\n                    redemptionPostalCode: item.redemptionPostalCode,\r\n                    redemptionRadius: item.redemptionRadius,\r\n                    _meta: {}\r\n                };\r\n            });\r\n            var data = {\r\n                bundle_enabled: '',\r\n                cart_enabled: '',\r\n                isPromoCodeSuggestion: true,\r\n                is_beauty_now: '',\r\n                is_edit_order: '',\r\n                is_stores_deal: 'false',\r\n                items: items,\r\n                order_id: '',\r\n                promo_code_input: code,\r\n                uiTreatmentUUID: domConfig.appState.uiTreatmentUUID,\r\n                _csrf: $('#_csrf').attr('value')\r\n            };\r\n\r\n            $.ajax({\r\n                url: 'https:\/\/www.livingsocial.com\/checkout\/proxy\/order_breakdown',\r\n                type: 'POST',\r\n                dataType: 'json',\r\n                data: data,\r\n                success: function (response) {\r\n                    if (response.error) data.promo_code_input = response.suggestedPromoCode;\r\n                },\r\n                async: false\r\n            });\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var savings = Math.abs(response.discounts.amount \/ 100);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var keyChangeEvent = document.createEvent('KeyboardEvent');\r\n            var clickEvent = document.createEvent('MouseEvents');\r\n\r\n            $('[name=\"discount-code\"]').val(bestCode);\r\n            $('[name=\"discount-code\"]').focus();\r\n            keyChangeEvent.initKeyboardEvent('change', true, true);\r\n            $('[name=\"discount-code\"]').get(0).dispatchEvent(keyChangeEvent);\r\n            clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\r\n            $('#incentives a.promo').get(0).dispatchEvent(clickEvent);\r\n            $('.promo-code .apply').click();\r\n        }\r\n    }\r\n};",
	"lizengode": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.entry--total').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.entry--total', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      this.clearCouponWhenComplete();\r\n      $('input[name=\"sVoucher\"]').val(bestCode);\r\n      $('.add-voucher--button').click();\r\n    }\r\n  },\r\n  clearCouponWhenComplete: function () {\r\n    $.ajax({\r\n      url: 'https:\/\/www.lizengo.de\/checkout\/deleteArticle\/sDelete\/voucher\/sTargetAction\/confirm',\r\n      type: 'POST',\r\n      data: {\r\n        __csrf_token: $('input[name=\"__csrf_token\"]').val()\r\n      },\r\n      async: false\r\n    });\r\n  }\r\n};",
	"lizzade": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.field__input-btn').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"llbean": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function() {\r\n        retries++;\r\n        if ($('.OrderPromotionsList_remove button').length) {\r\n          $('.OrderPromotionsList_remove button').click();\r\n        }\r\n        if (!$('.OrderPromotionsList_remove button').length && retries < 3) {\r\n          clearInterval(interval);          \r\n          resolve();\r\n        } else if (retries >= 3) {\r\n          clearInterval(interval);     \r\n          resolve();\r\n        }\r\n      }, 2000);\r\n    })\r\n  },\r\n  init: function () {\r\n    this.oldTotal = parseFloat($('.OrderSummary_estimated-total .OrderSummary_line-amount, dd.total').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('#promoCodeEntry, #promo-code').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#promoCodeEntry, #promo-code').trigger('input').trigger('change');\r\n      $('#promoRedeemButton, .promo-apply button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else {\r\n      $('.OrderPromotionsList_remove button').click();\r\n      $('.remove-promo')[0].click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    var self = this;\r\n\r\n    if (step === 'injectCoupon') {\r\n      this._timeout = setInterval(function () {\r\n        if ($('.OrderPromotionsList_remove button')) {\r\n          clearTimeout(self._timeout);\r\n          setTimeout(next, 3000);\r\n        }\r\n      }, 200);\r\n    } else {\r\n      this._timeout = setInterval(function () {\r\n        if ($('#promoCodeEntry, #promo-code')) {\r\n          clearTimeout(self._timeout);\r\n          setTimeout(next, 3000);\r\n        }\r\n      }, 200);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var newTotal = parseFloat($('.OrderSummary_estimated-total .OrderSummary_line-amount, dd.total').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = $('dd:contains(\"-\")').length ? parseFloat($('dd:contains(\"-\")').text().replace(\/[^0-9]\/g, '')) \/ 100 : this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  }\r\n};",
	"lloydspharmacy": "var ExternalProvider = {\r\n    storeId: '',\r\n    catalogId: '',\r\n    langId: '',\r\n\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"storeId\", WCParamJS.storeId);';\r\n        scriptContent += 'body.setAttribute(\"catalogId\", WCParamJS.catalogId);';\r\n        scriptContent += 'body.setAttribute(\"langId\", WCParamJS.langId);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        this.storeId = $('body').attr('storeId');\r\n        this.catalogId = $('body').attr('catalogId');\r\n        this.langId = $('body').attr('langId');\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                storeId: this.storeId,\r\n                catalogId: this.catalogId,\r\n                langId: this.langId,\r\n                orderId: '.',\r\n                taskType: 'A',\r\n                URL: '',\r\n                finalView: 'AjaxOrderItemDisplayView',\r\n                promoCode: code,\r\n                requesttype: 'ajax'\r\n            };\r\n\r\n            return data;\r\n        } else if (type === 'clearCouponUrl') {\r\n            data = {\r\n                storeId: this.storeId,\r\n                catalogId: this.catalogId,\r\n                langId: this.langId,\r\n                orderId: '.',\r\n                taskType: 'R',\r\n                URL: '',\r\n                finalView: 'AjaxOrderItemDisplayView',\r\n                promoCode: code,\r\n                requesttype: 'ajax'\r\n            };\r\n\r\n            return data;\r\n        } else if (type === 'resultUrl') {\r\n            data = {\r\n                storeId: this.storeId,\r\n                catalogId: this.catalogId,\r\n                langId: this.langId\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_2', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var newTotal = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = parseFloat(oldTotal - newTotal);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"ln-cc": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = 0;\r\n\r\n    if (response.success) {\r\n      savings = parseFloat(Math.abs(response.models.basket.totalDiscount.value));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"localflavor": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.grand').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.grand', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n        $('#ctl00_Body_tbPromoCode').val(bestCode);\r\n        $('#ctl00_Body_btnPromoApply').click();\r\n    }\r\n  }\r\n};",
	"loccitane": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.a-coupon-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"locksonline": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.table .text-right:contains(\"\u00a3-\")', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#input-coupon').val(bestCode);\r\n            $('#button-coupon').click();\r\n        }\r\n    }\r\n\r\n};",
	"loft": "var ExternalProvider = {\r\n    cartTotal: 0,\r\n    init: function() {\r\n        this.cartTotal = parseFloat($('.order-total span').text().replace('$', ''));\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings;\r\n        if (response.status === 'SUCCESS') {\r\n            savings = this.cartTotal - response.checkout.ordSum.orderTotal;\r\n        }\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n        location.reload(true);\r\n    }\r\n}",
	"logitech": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var params = this.serializeObject($('form[name=\"ShoppingCartForm\"]').serializeArray());\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      params.couponCode = code;\r\n    }\r\n\r\n    return params;\r\n  },\r\n  serializeObject: function (a) {\r\n    var o = {};\r\n\r\n    $.each(a, function () {\r\n      o[this.name] = this.value || '';\r\n    });\r\n\r\n    return o;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.dr_totals, .sub-value').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.dr_totals', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#lnkPromoCodeSwitch').click();\r\n      $('#promoCode').val(bestCode);\r\n      $('input[value=\"APPLY\"]').click();\r\n    }\r\n  }\r\n};",
	"logogarden": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.checkout_product_name:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"logosoftwear": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#P1ShoppingCartSummary_cont span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"lollicup": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lonelyplanet": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var discount = response.match('product_discounts\":(.+?),\"to')[1];\r\n    var savings = parseFloat(discount.split(',')[0].replace(\/[^0-9|.]\/g, '') \/ 100);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"longtallsally": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var newCurrency = 'USD';\r\n        var locale = localeMapping.US;\r\n        var selector = $('#topbar-siteswitcher').attr('class');\r\n\r\n        if (selector.match('gb')) {\r\n            newCurrency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        } else if (selector.match('de')) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.DE;\r\n        } else if (selector.match('fr')) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.FR;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.cart.totalDiscounts.formattedValue.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lookfantasticde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.responsiveBasket_totalSavingsPrice', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"lookfantasticfr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.responsiveBasket_totalSavingsPrice', responseHTML).eq(0).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        $.ajax({\r\n            url: $('.responsiveBasket_removeItem-discount', responseHTML).attr('href'),\r\n            type: 'GET',\r\n            async: false\r\n        });\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"lookhuman": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price-summary-v2 span:contains(\"$\"):eq(1)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"lookupfare": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response[0].CouponAmount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#couponHave')[0].click();\r\n      $('#couponsCode').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#couponsCode').trigger('input').trigger('change');\r\n      $('.apply_btn')[0].click();\r\n    }\r\n  }\r\n};",
	"lootcrate": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        var inputEvent = new Event('input', { bubbles: true });\r\n        inputEvent.simulated = true;\r\n        document.querySelector('#checkout_coupon_code').value = code;\r\n        document.querySelector('#checkout_coupon_code').dispatchEvent(inputEvent);\r\n        $('#validate-coupon').click();\r\n    },\r\n    whenReady: function (step, next) {\r\n        var self = this;\r\n\r\n        if (step === 'injectCoupon') {\r\n            this._timeout = setInterval(function () {\r\n                if ($('#coupon-spinner.hide')) {\r\n                    clearTimeout(self._timeout);\r\n                    setTimeout(next, 3000);\r\n                }\r\n            }, 200);\r\n        }\r\n    },\r\n    parse: function () {\r\n        var savings = parseFloat($('#coupon-status').text().match(\/\\$([0-9|.]+)\/)[1])\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var inputEvent = new Event('input', { bubbles: true });\r\n            inputEvent.simulated = true;\r\n            document.querySelector('#checkout_coupon_code').value = bestCode;\r\n            document.querySelector('#checkout_coupon_code').dispatchEvent(inputEvent);\r\n            $('#validate-coupon').click();\r\n        }\r\n    }\r\n};",
	"loralette": "var ExternalProvider = {\r\n    origPrice: '',\r\n    _prepareUrl: function () {\r\n        this.origPrice = parseFloat($('.order-totals-value:contains(\"- $\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        var applyUrlInput = $('#cart-items-form');\r\n        var applyUrl = 'https:\/\/www.loralette.com\/on\/demandware.store\/Sites-Avenue-Site\/en_US\/Cart-AddCoupon?couponCode=CLAIMCODE&format=ajax';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('form');\r\n            applyUrlInput.id = 'cart-items-form';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#cart-items-form');\r\n            applyUrlInput.attr('action', applyUrl);\r\n        }\r\n    },\r\n\r\n    serializeObject: function (a) {\r\n        var o = {};\r\n\r\n        $.each(a, function () {\r\n            o[this.name] = this.value || '';\r\n        });\r\n\r\n        return o;\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        if (!this.isCheckoutPage()) {\r\n            var formDataArray = $('#cart-items-form').serializeArray();\r\n            var data = this.serializeObject(formDataArray);\r\n\r\n            data.dwfrm_cart_updateCart = 'dwfrm_cart_updateCart';\r\n\r\n            if (type === 'applyCouponUrl') {\r\n                data.dwfrm_cart_couponCode = code;\r\n            }\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    isCheckoutPage: function () {\r\n        if (document.querySelector('#dwfrm_singleshipping_shippingAddress') !== null) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newPrice = parseFloat($('.order-totals-value:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var prevPrice = parseFloat((isNaN(this.origPrice) ? 0.00 : this.origPrice));\r\n        var savings = prevPrice - newPrice;\r\n\r\n        savings = Math.abs(savings);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            if ($('#have_promo_code').length) {\r\n                location.reload();\r\n            } else {\r\n                $('.cart-coupon-code-input.input-text').click();\r\n                $('#dwfrm_cart_couponCode').val(bestCode);\r\n                $('#add-coupon').click();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"lordandtaylor": "var ExternalProvider = {\r\n  init: function() {\r\n    let hasPromoApplied = $('.action-link.jsRemovePromo').length > 0;\r\n    if(hasPromoApplied === true) {\r\n      let code = $('.action-link.jsRemovePromo').text();\r\n      let data  = {bmForm: 'remove_promo_code_saks_bag_service', promoCode: code}\r\n      $.post('\/checkout\/checkout.jsp', data);\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var savingsArray = response.cartSummary.promotionalSaving.split(';');\r\n    var savings = savingsArray.length > 1 ? parseFloat(savingsArray[1]) : 0;\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  createEventInstance: function () {\r\n    this.clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  }\r\n};\r\nExternalProvider.createEventInstance();",
	"loreal-paris": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order_discount', responseHTML).text().replace(',', '.').replace(\/[^.0-9|]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('label[for=\"coupon-code-checkbox\"]').click();\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"lorealparisfr": "var ExternalProvider = {\r\n    parse: function (response, a, $b, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var validCoupon = $('.cartcoupon .value', responseHTML).text().toUpperCase().includes(code.toUpperCase());\r\n        var validSavings = parseFloat($('.order_discount.discount.js_order_discount td:contains(\"-\")', responseHTML).text().replace(\/[^.0-9|]\/g, '')) \/ 100;\r\n        var savings = validCoupon ? validSavings : 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lorextechnology": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsHTML = $('.price-tally > div:eq(1) > h4:eq(1)', responseHTML).html();\r\n        var savings = savingsHTML ? savingsHTML.replace(\/[^0-9|\\.]\/g, '') : 0.00;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving) {\r\n\r\n        location.reload(true);\r\n\r\n    }\r\n\r\n};",
	"lornajane": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-area span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"losethebackpain": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.summaryresult.result.coupon_value);\r\n\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon').val(bestCode);\r\n            $('#add_coupon').click();\r\n        }\r\n    }\r\n};",
	"louandgrey": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.checkout.ordSum.discount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"louisde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.modifyHtmlElement['#list-vouchers'].innerHtml);\r\n        var savings = parseFloat($('p.media__item.media__item--left.cart__voucher > span', responseHTML).text().replace(',','.').replace(\/[^.0-9]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lovellsoccer": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n        var selector = $('.currency-display').attr('data-value');\r\n\r\n        if (selector === 'uk') {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector === 'eu') {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.negative', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lovelula": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.adjustment > .total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"lovescent": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n\r\n      $.each(data, function () {\r\n        if (object[this.name] !== undefined) {\r\n          if (!object[this.name].push) {\r\n            object[this.name] = [object[this.name]];\r\n          }\r\n\r\n          object[this.name].push(this.value || '');\r\n        } else {\r\n          object[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return object;\r\n    };\r\n  },\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = this.isCartPage() ? 'https:\/\/love-scent.com\/checkout\/cart\/couponPost\/' : 'https:\/\/love-scent.com\/amscheckoutfront\/onepage\/couponPost\/';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      if (this.isCartPage()) {\r\n        data.remove = 0;\r\n        data.coupon_code = code;\r\n\r\n        return data;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/checkout\/cart\/';\r\n  },\r\n  parse: function (response, status, $xhr, code) {\r\n    if (this.isCartPage()) {\r\n      var responseHTML = $.parseHTML(response);\r\n      var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      var form = $('#amscheckout-onepage');\r\n\r\n      form.find($('#coupon_code').val(code));\r\n      $.ajax({\r\n        url: 'https:\/\/love-scent.com\/amscheckoutfront\/onepage\/couponPost\/',\r\n        type: 'POST',\r\n        dataType: 'json',\r\n        data: form.serializeArray(),\r\n        async: false,\r\n        success: function (result) {\r\n          savings = parseFloat($('.price:contains(\"-\")', $.parseHTML(result.html.review)).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n      });\r\n    }\r\n    \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n    \r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"lowes": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data.storeId = $('#PromotionCodeForm input[name=\"storeId\"]')[0].value;\r\n            data.catalogId = $('#PromotionCodeForm input[name=\"catalogId\"]')[0].value;\r\n            data.langId = $('#PromotionCodeForm input[name=\"langId\"]')[0].value;\r\n            data.errorViewName = 'OrderItemDisplayViewShiptoAssoc';\r\n            data.orderId = $('#PromotionCodeForm input[name=\"orderId\"]')[0].value;\r\n            data.URL = 'OrderItemDisplay';\r\n            data.taskType = 'A';\r\n            data.skuList = $('#PromotionCodeForm input[name=\"skuList\"]')[0].value;\r\n            data.promoCodeCheckbox = 'checked';\r\n            data.promoCode = code.toUpperCase();\r\n\r\n            return data;\r\n        }\r\n\r\n        if (type === 'clearCouponUrl') {\r\n            data.storeId = $('#PromotionCodeForm input[name=\"storeId\"]')[0].value;\r\n            data.catalogId = $('#PromotionCodeForm input[name=\"catalogId\"]')[0].value;\r\n            data.langId = $('#PromotionCodeForm input[name=\"langId\"]')[0].value;\r\n            data.errorViewName = 'OrderItemDisplayViewShiptoAssoc';\r\n            data.orderId = $('#PromotionCodeForm input[name=\"orderId\"]')[0].value;\r\n            data.URL = 'OrderItemDisplay';\r\n            data.taskType = 'R';\r\n            data.skuList = $('#PromotionCodeForm input[name=\"skuList\"]')[0].value;\r\n            data.promoCodeCheckbox = 'checked';\r\n            data.promoCode = code.toUpperCase();\r\n\r\n            return data;\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var codeFound = $('div.label.promo-text', responseHTML).text().trim() === 'You Save';\r\n\r\n        if (codeFound) {\r\n            var discount = Number($('div.value.promo-value > span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n            if (discount > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: discount\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        $('#promoCode1').val(bestCode);\r\n        $('div.promo-code-form > a > span').click();\r\n    }\r\n};",
	"lowescanada": "var ExternalProvider = {\r\n  serializeObject: function (a) {\r\n    var o = {};\r\n\r\n    $.each(a, function () {\r\n      o[this.name] = this.value || '';\r\n    });\r\n\r\n    return o;\r\n  },\r\n  prepare: function (type, code) {\r\n    var params = this.serializeObject($('form#frmMain').serializeArray());\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      params.ctl00$ctl00$ctl00$Main$MainMasterContent$ContentPlaceholder1$tbPromoCode = code;\r\n      params.ctl00$ctl00$ctl00$Main$MainMasterContent$ContentPlaceholder1$btnCouponValidate = 'Validate';\r\n    } else {\r\n      params.ctl00$ctl00$ctl00$Main$MainMasterContent$ContentPlaceholder1$tbPromoCode = '';\r\n      params.__EVENTTARGET = 'ctl00$ctl00$ctl00$Main$MainMasterContent$ContentPlaceholder1$btnRemoveDiscountCode';\r\n    }\r\n\r\n    return params;\r\n  },\r\n\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#lblDiscount:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#tbPromoCode').val(bestCode);\r\n      $('#btnCouponValidate').click();\r\n    }\r\n  }\r\n};",
	"loxabeauty": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n        function serializeObject(a) {\r\n            var o = {};\r\n            $.each(a, function() {\r\n                o[this.name] = this.value || '';\r\n            });\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('form#firecheckout-form').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        data['coupon[code]'] = code;\r\n        data['review'] = 1;\r\n\r\n        if(type == 'applyCouponUrl'){\r\n            data['coupon[remove]'] = 0;\r\n        } else {\r\n            data['coupon[remove]'] = 1;\r\n        }\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldPrice = parseFloat($('.grand-total-right .price').text().replace(\/[^0-9|\\.]\/g, '')),\r\n            newPrice = parseFloat($('.grand-total-right .price', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')),\r\n            savings = oldPrice - newPrice;\r\n\r\n        if (savings > 0.00){\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n\r\n};",
	"lsa": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('#coupon_code').val(bestCode);\r\n                $('#discount-coupon-form').submit();\r\n            } else {\r\n                $('#coupon_code').val(bestCode);\r\n                $('button[value=\"Apply Coupon\"]').click();\r\n            }\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    }\r\n};",
	"ltdcommodities": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#cart_subtotals div[style=\"color:red\"]:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"luckybrand": "var ExternalProvider = {\r\n  initSerializeObject: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n      $.each(data, function () {\r\n        object[this.name] = this.value || '';\r\n      });\r\n      return object;\r\n    };\r\n    this.getCSRFToken();\r\n  },\r\n  getCSRFToken: function () {\r\n    this.csrf_token = $('.cart-coupon-code input[name=csrf_token]').val();\r\n    if (!this.isCartPage()) {\r\n      $.ajax({\r\n        url: 'https:\/\/www.luckybrand.com\/cart',\r\n        type: 'GET',\r\n        async: false,\r\n        success: function (response) {\r\n          var responseHTML = $.parseHTML(response);\r\n          ExternalProvider.csrf_token = $('.cart-coupon-code input[name=csrf_token]', responseHTML).val();\r\n        }\r\n      })\r\n    }\r\n  },\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n    if (action === 'applyCouponUrl') {\r\n      data = {\r\n        dwfrm_cart_couponCode: code,\r\n        dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon',\r\n        csrf_token: this.csrf_token\r\n      };\r\n    } else if (action === 'clearCouponUrl') {\r\n      data = $('#cart-items-form').serializeObject();\r\n      data.dwfrm_cart_coupons_i0_deleteCoupon = 'Remove';\r\n    }\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.js-adjusted-merch-total').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('.js-adjusted-merch-total', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    const codeField = this.isCartPage() ? $('#dwfrm_cart_couponCode') : $('#dwfrm_billing_couponCode');\r\n    codeField.val(bestCode);\r\n    codeField.get(0).dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\r\n    $('#add-coupon').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n  },\r\n  isCartPage: function () {\r\n    return \/cart\/.test(location.pathname)\r\n  }\r\n};\r\nExternalProvider.initSerializeObject();",
	"luckyvitamin": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.promoSavings.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"ludwigvonkapffde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\"):first', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"luggageguy": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var discount = parseFloat($('[data-checkout-discount-amount-target]', response.responseText).html()\r\n            .replace(\/[^0-9|\\.]\/g, '').trim()\r\n        );\r\n\r\n        if (discount > 0) {\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if(bestCode){\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"luggagepros": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#shopping-cart-totals-table tr:eq(1) td:eq(1) .price',responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if(bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#discount-coupon-form .discount-form .buttons-set .button')[0].click();\r\n        }\r\n    }\r\n};",
	"luluandgeorgia": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#giftvoucher_code').val(bestCode);\r\n      $('#giftvoucher_add').click();\r\n    }\r\n  }\r\n};",
	"lumberliquidators": "var ExternalProvider = {\r\n    oldPrice: '',\r\n    getOldPrice: function () {\r\n        this.oldPrice = parseFloat($('.checkoutOrderSummaryTotal .red-text').text().replace(\/[^0-9.]\/g, ''));\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = this.oldPrice - parseFloat($('.checkoutOrderSummaryTotal .red-text', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promoCodeBox').val(bestCode);\r\n            $('#promoCodeBtn').click();\r\n        }\r\n    }\r\n};\r\nExternalProvider.getOldPrice();",
	"lumens": "var ExternalProvider = {\r\n    isCartPage: function () {\r\n        return location.pathname === '\/cart\/';\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = $('#dwfrm_cart .ordertotal .value, .checkoutordertotals .ordertotal .value').text().replace(\/[^0-9|.]\/g, '');\r\n        var newPrice = $('.ordertotal .value', responseHTML).text().replace(\/[^0-9|.]\/g, '');\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('input[name=\"dwfrm_cart_couponCode\"]').val(bestCode);\r\n                $('button[name=\"dwfrm_cart_addCoupon\"]').click();\r\n                $('input[name=\"dwfrm_cart_couponCode\"]').val('');\r\n            } else {\r\n                $('input[name=\"dwfrm_billingcoupon_couponCode\"]').val(bestCode);\r\n                $('button[name=\"dwfrm_billingcoupon_applyCoupon\"]').click();\r\n                $('input[name=\"dwfrm_billingcoupon_couponCode\"]').val('');\r\n            }\r\n        }\r\n    }\r\n};",
	"luminaire": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\",\", \".\").replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Valider\"]').click();\r\n        }\r\n    }\r\n};",
	"lumitylifeuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code__text:contains(\"-\u00a3\")', responseHTML).text().split(\"\u00a3\")[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"luxeDH": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('.applied-discount__code', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('.payment-due-container .payment-due__price').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('.payment-due-container .payment-due__price', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"luxorlinens": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"luxplus": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('.side_cart_container strong:eq(0)').text().replace(\/[0-9.,]\/g, '').trim();\r\n        var mainSelector = $('.pull-right.promo_name:eq(0) span:eq(0)').text().replace(\/[0-9.,]\/g, '').trim();\r\n\r\n        if ((selector === \"\u20ac\") || (mainSelector === \"\u20ac\")) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\" || (mainSelector === \"\u00a3\")) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"luxuryperfume": "var ExternalProvider = {\r\n\tbasketTotal: 0.00,\r\n    init: function()\r\n    {\r\n\r\n        this.basketTotal = Number($('#synCustomCartCenter > form > div > div.totals > div.row.total > span.value').text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n    },\r\n\tprepare: function(type, code) {\r\n\r\n\t\tif (type === \"applyCouponUrl\") {\r\n\r\n\t\t\tvar couponData = {};\r\n\r\n\t\t\tvar formInputs = [].slice.call($('#synCustomCartCenter > form input'));\r\n\r\n\t\t\tformInputs.forEach(function(e){\r\n            \tcouponData[$(e).attr('name')] = $(e).val();\r\n        \t});\r\n\r\n\t\t\tcouponData[\"gcPaymentDS.gcpayment_ROW0_redemptionCode\"] = code;\r\n        \r\n            return couponData;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n    parse: function(response, status, $xhr, code)\r\n    {\t\t\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\r\n        var oldPrice = this.basketTotal,\r\n\t\t\tnewPrice = Number($('#synCustomCartCenter > form > div > div.totals > div.row.total > span.value', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')),\r\n\t\t\tsavings = (oldPrice - newPrice);\r\n\t\t\r\n\t\tif (newPrice < oldPrice) {\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: savings\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t};\r\n\t\t\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\t\t\r\n\t\t$('#ys_couponFieldset > input.gcRedemptionCode.text').val(bestCode);\r\n\t\t$('#ys_couponFieldset > input.ys_secondary').click()\r\n\r\n    }\r\n}",
	"lxmi": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"lxrandco": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.status ? response.savings : 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        var couponPreApplied = !!$('button:contains(\"Remove promo\")').text().length;\r\n\r\n        if (couponPreApplied && bestCode) {\r\n            $('button:contains(\"Remove promo\")').click();\r\n        }\r\n\r\n        var checker = setInterval(function () {\r\n            if ($('#add-promotion-input').parent().parent().css('display') !== 'none') {\r\n                var s = document.createElement('script');\r\n                var code = '$(\\'#add-promotion-input\\').focus().val(\"' + bestCode + '\").change().blur();$(\\'#add-promotion-btn\\').click();';\r\n\r\n                s.append(code);\r\n                document.body.appendChild(s);\r\n\r\n                clearInterval(checker);\r\n            }\r\n        }, 100);\r\n    }\r\n};",
	"lydiasuniforms": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"maboiteabijoux": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#total_discount', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        $.ajax({\r\n            url: $('.delete_voucher', responseHTML).attr(\"href\"),\r\n            type: 'POST',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discount_name').val(bestCode);\r\n            $('button[name=\"submitAddDiscount\"]').click();\r\n        }\r\n    }\r\n};",
	"maccosmetics": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('#form--offer_code--field--OFFER_CODE').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#form--offer_code--field--OFFER_CODE').trigger('input').trigger('change');\r\n      $('input[value=\"Apply\"]').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('div > a:contains(\"Remove\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    var counter = 0;\r\n    var codeApplyTime = setInterval(function () {\r\n      counter += 1;\r\n\r\n      if ($('div > a:contains(\"Remove\")').get(0) || counter > 10) {\r\n        clearInterval(codeApplyTime);\r\n        next();\r\n      }\r\n    }, 200);\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.discount.value').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: isNaN(savings) ? 0.00 : savings\r\n    };\r\n  }\r\n};",
	"machighway": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"machinemart": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.goodsTtl[style=\"color:red;\"]', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"Voucher\"]').val(bestCode);\r\n            $('input[value=\"Apply voucher\"]').click();\r\n        }\r\n    }\r\n};",
	"macinasac": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"mackenzie-childs": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($(\".order-summary__emphasis:contains(- $)\", responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $(\"#checkout_reduction_code\").val(bestCode);\r\n            $(\".field__input-btn\").trigger(\"click\");\r\n        }\r\n    }\r\n};",
	"macys": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    $('body').attr('guid', document.cookie.match(\/macys_bagguid=([\\w|-]+);\/)[1]);\r\n  },\r\n  parse: function (response) {\r\n    let bagPromotions = response.bag.sections.bagPromotions.manual;\r\n    let savings  = 0;\r\n    bagPromotions.forEach(function(data) {\r\n      savings += (data.discount === undefined) ? 0 : data.discount.values[0].value;\r\n    }); \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promo-apply-input').val(bestCode);\r\n      $('.promo-apply-button').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"maddafella": "var ExternalProvider = {\r\n    parse: function (response, a, $b, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var validCoupon = $('.reduction-code .reduction-code__text', responseHTML).last().text().includes(code);\r\n        var summaryDiscountVal = parseFloat($('.total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).attr('data-checkout-discount-amount-target')) \/ 100;\r\n        var summaryDiscount = Number.isNaN(summaryDiscountVal) ? 0.00 : summaryDiscountVal;\r\n        var itemDiscountElement = $('.reduction-code__text:contains(\"-\")', responseHTML);\r\n        var itemDiscount = 0.00;\r\n\r\n        for (var x = 0; x < itemDiscountElement.length; x++) {\r\n            var discountElementVal = parseFloat(itemDiscountElement[x].innerText.split('(')[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n            itemDiscount += isNaN(discountElementVal) ? 0.00 : discountElementVal;\r\n        }\r\n\r\n        var savings = validCoupon ? summaryDiscount + itemDiscount : 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: Number.isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"madeindesign": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var result = $.parseHTML(response.totals);\r\n        var savings = parseFloat($('.discount-ajax.price', result).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n     \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#btnValidCCForm').click();\r\n        }\r\n    }\r\n};",
	"madeleine": "var ExternalProvider = {\r\n\tparse: function (response) {\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\tvar savings = parseFloat($('.cart__total__sum > strong:eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: savings > 0,\r\n\t\t\tsavings: isNaN(savings) ? 0.00 : savings\r\n\t\t};\r\n\t},\r\n\tcomplete: function (bestCode) {\r\n\t\tif (bestCode) location.reload();\r\n\t}\r\n};",
	"madewell": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('.discount .value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"madisonstyle": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"magazine": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('#couponCode').val(code);\r\n            $('.coupon-apply').click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 250);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response)\r\n        var savings = parseFloat($('#coupon__applied', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"magazines": "var ExternalProvider = {\r\n\tprepare: function(type, code){\r\n\r\n\t\tif(type === 'applyCouponUrl'){\r\n\t\t\treturn {\r\n\t\t\t\tretfmt: 'json',\r\n\t\t\t\tapply: true,\r\n\t\t\t\tgiftCertificateID: code,\r\n\t\t\t\tcouponCode: code\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\tparse: function(response, status, $xhr, code){\r\n        if (response.coupons.applied.code.toLowerCase() === code.toLowerCase() && response.discount) {\r\n\r\n            return {\r\n                success: true,\r\n                savings: 0 - parseFloat(response.discount)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n\t    if(!bestCode) return false;\r\n\r\n        $('#giftCertCode').val(bestCode);\r\n        $('button[name=\"redeemGiftCert\"]').click();\r\n    }\r\n};",
	"magiccabin": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.col-md-6:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n     if (!this.isCheckoutPage()) {\r\n       location.reload();\r\n     } else {\r\n       $('#promoCode').val(bestCode);\r\n       $('button:contains(\"apply\")').click();\r\n     }\r\n    }\r\n  },\r\n  isCheckoutPage: function () {\r\n    return \/en\\\/checkout\/.test(location.href);\r\n  }\r\n};",
	"magickitchen": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.pull-right:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"coupon_code\"]').val(bestCode);\r\n            $('button:contains(\"Apply\")').click();\r\n        }\r\n    }\r\n};",
	"magix": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var url = window.location.pathname;\r\n\r\n    if (url.match(\/(de|fr)\/g)) {\r\n      currency = 'EUR';\r\n      locale = localeMapping[url.match(\/(de|fr)\/g)[0] === 'de' ? 'DE' : 'FR'];\r\n    } else if (url.match(\/gb\/g)) {\r\n      currency = 'GBP';\r\n      locale = localeMapping.GB;\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: currency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat($('.colorGreen.price', $.parseHTML(response)).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#basketEnterCoupon').click();\r\n      $('#coupon').val(bestCode);\r\n      $('#basketEnterCoupon').click();\r\n    }\r\n  }\r\n};",
	"mahabis": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var $response = $.parseHTML(response),\r\n            codeApplied = $('.applied-reduction-code .applied-reduction-code__information', $response);\r\n\r\n        return {\r\n            success: codeApplied.length && codeApplied.text().toLowerCase() === code.toLowerCase(),\r\n            savings: parseFloat($('.total-line--reduction .total-line__price', $response).text().replace(\/[^0-9|\\.]\/g, ''))\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"majestic": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.data.amount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"makemechic": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n        if (response.msg == 'no_error') {\r\n            var savings = parseFloat(response.info.content.couponDiscountMessage.replace(\/[^0-9|\\.]\/g, ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.0\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"mamasandpapas": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.checkout_voucher_savings .pull-right', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"mamasezz": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"mancity": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n      $('.giftCertInputContainer > input').val(code);\r\n      $('.giftCertInputContainer > input').get(0).dispatchEvent(changeEvent);\r\n      $('button:contains(\"Apply\")').removeAttr('disabled');\r\n      $('button:contains(\"Apply\")').click();\r\n      $('.giftCertInputContainer > input').val('');\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 700);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.summaryLineRight:contains(\"-\u00a3\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {}\r\n  }\r\n};",
	"mandco": "var ExternalProvider = {\r\n\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount.discount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"mandmdirect": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"currency\", window.$ServiceDetails.CurrencyName);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var locale = localeMapping.US;\r\n        var currencyFormat = currency;\r\n        var cc = $('body').attr('currency');\r\n\r\n        $('body').removeAttr('currency');\r\n\r\n        if (cc === 'GBP') {\r\n            locale = localeMapping.GB;\r\n            currencyFormat = 'GBP';\r\n        } else if (cc === 'EUR') {\r\n            locale = localeMapping.DE;\r\n            currencyFormat = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: currencyFormat, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"mango": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.infoImporteVale .price-format .entero:last', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"mankind": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n        var selector = $('.currency-active').text();\r\n\r\n        if (selector.match(\/GBP\/g)) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector.match(\/EUR\/g)) {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('.responsiveBasket_totalValue').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.responsiveBasket_totalValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        $.ajax({\r\n            url: $('.responsiveBasket_removeItem-discount').attr('href'),\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"mantelsdirect": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'injectCoupon') {\r\n            $('#promocode').val(code);\r\n            $('.cart-promocode-form-summary-grid button:contains(\"Apply\")')[0].click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 300);\r\n    },\r\n\r\n    isCartPage: function () {\r\n        return \/md-sbe\\\/cart.ssp\/.test(location.href);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var discount = this.isCartPage() ? '.cart-summary-amount-discount-total' : '.order-wizard-cart-summary-discount-total';\r\n\r\n        var savings = parseFloat($(discount, responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"maplin": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"entityId\", window.checkoutConfig.quoteData.entity_id);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var EntityId = $('body').attr('entityId');\r\n    var ApplyUrlInput = $('#___jpApplyUrl');\r\n    var ApplyUrl = 'https:\/\/www.maplin.co.uk\/rest\/maplin_uk_en\/V1\/guest-carts\/' + EntityId + '\/coupons\/CLAIMCODE';\r\n    var ResultUrl = 'https:\/\/www.maplin.co.uk\/rest\/maplin_uk_en\/V1\/guest-carts\/' + EntityId + '\/payment-information';\r\n    var ClearUrl = 'https:\/\/www.maplin.co.uk\/rest\/maplin_uk_en\/V1\/guest-carts\/' + EntityId + '\/coupons';\r\n\r\n    if (!ApplyUrlInput.length) {\r\n      ApplyUrlInput = document.createElement('input');\r\n      ApplyUrlInput.id = '___jpApplyUrl';\r\n      ApplyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n      ApplyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    ApplyUrlInput.attr('value', ApplyUrl);\r\n    ApplyUrlInput.attr('data-value', ResultUrl);\r\n    ApplyUrlInput.attr('data-clear', ClearUrl);\r\n  },\r\n  parse: function (response) {\r\n    var savings = Math.abs(response.totals.discount_amount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"marcjacobsbeauty": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('.order-total .order-totals-value').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('.order-total .order-totals-value', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            \/\/ For cart page\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n\r\n            \/\/ For checkout page\r\n            $('#dwfrm_billing_couponCode').val(bestCode);\r\n\r\n            $('#add-coupon')[0].click();\r\n        }\r\n    }\r\n};",
	"marika": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"marimekko": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = 0;\r\n\r\n    if (location.pathname === '\/us_en\/checkout\/cart\/' && $('.price:contains(\"-$\")').length > 0) {\r\n      var oldSavings = parseFloat($('.price:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n      var newSavings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n      savings = newSavings - oldSavings;\r\n    } else if (location.pathname === '\/us_en\/checkout\/cart\/' && $('.price:contains(\"-$\")').length === 0) {\r\n      savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      var oldTotal = parseFloat($('.a-right.last:eq(0)').text().replace(\/[^0-9|.]\/g, ''));\r\n      var newTotal = parseFloat(response.match(\/quoteBaseGrandTotal = (.*);\/)[1]);\r\n\r\n      savings = oldTotal - newTotal;\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"markenkofferde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.couponData .text-success', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n    $.ajax({\r\n      url: $(\".removeFn\", responseHTML).attr(\"href\"),\r\n      type: 'GET',\r\n      async: false\r\n    });\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    }\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $(\"#input_voucherNr\").val(bestCode);\r\n      $(\".submitButton\").click();\r\n    };\r\n  }\r\n};",
	"marksandspencer": "var ExternalProvider = {\r\n  oldTotal: '',\r\n  init: function () {\r\n    this.oldTotal = $('div[ng-bind-html=\"orderSummary.priceBreakdown.totalExDelivery\"]:eq(0)').text().replace(\/[^0-9.]\/g, '');\r\n  },\r\n  params: {},\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var selector = $('.res-nav-header__icon--country .flags');\r\n    var checkoutSelector = $('.pricing-summary__row--total .pricing-summary__value').text();\r\n    var locale;\r\n    var newCurrency = '';\r\n\r\n    if (checkoutSelector.match(\/\\$\/) || selector.hasClass('flags--US')) {\r\n      locale = localeMapping.US;\r\n      newCurrency = 'USD';\r\n    } else if (checkoutSelector.match('\u20ac') || (selector.hasClass('flags--DE') || selector.hasClass('flags--FR'))) {\r\n      locale = selector.hasClass('flags--DE') ? localeMapping.DE : localeMapping.FR;\r\n      newCurrency = 'EUR';\r\n    } else {\r\n      locale = localeMapping.GB;\r\n      newCurrency = 'GBP';\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  __prepareUrl: function () {\r\n    var s = document.createElement('script');\r\n\r\n    if (location.pathname.match('OrderCalculate')) {\r\n      var code = \"document.querySelector('body').setAttribute('params', JSON.stringify(window.mnsInlineData.promotionApplyLink.params));\";\r\n\r\n      s.type = 'text\/javascript';\r\n      s.appendChild(document.createTextNode(code));\r\n      document.body.appendChild(s);\r\n\r\n      this.params = JSON.parse($('body').attr('params'));\r\n      s.remove();\r\n      $('body').removeAttr('params');\r\n    }\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'applyCouponUrl') {\r\n      return {\r\n        resJSON: true,\r\n        langId: this.params.langId,\r\n        orderId: this.params.orderId,\r\n        isSecureFlow: this.params.isSecureFlow,\r\n        doInventory: this.params.doInventory,\r\n        updatePrices: this.params.updatePrices,\r\n        calculationUsageId: this.params.calculationUsageId,\r\n        doBasketSizeCheck: this.params.doBasketSizeCheck,\r\n        pageName: this.params.pageName,\r\n        storeId: this.params.storeId,\r\n        applyRemovePromo: true,\r\n        doPrice: this.params.doPrice,\r\n        taskType: 'A',\r\n        promoCode: code\r\n      };\r\n    } else if (type === 'clearCouponUrl') {\r\n      return {\r\n        resJSON: true,\r\n        langId: this.params.langId,\r\n        orderId: this.params.orderId,\r\n        removePromo: 'OrderCalculate',\r\n        isSecureFlow: this.params.isSecureFlow,\r\n        doInventory: this.params.doInventory,\r\n        updatePrices: this.params.updatePrices,\r\n        calculationUsageId: this.params.calculationUsageId,\r\n        pageName: this.params.pageName,\r\n        storeId: this.params.storeId,\r\n        applyRemovePromo: true,\r\n        doPrice: this.params.doPrice,\r\n        taskType: 'R',\r\n        promoCode: code\r\n      };\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var newTotal = parseFloat(response.basket.priceBreakdown.orderTotal.replace(\/[^0-9|.]\/g, ''));\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"marleyspoon": "var ExternalProvider = {\r\n    prepare: function (action) {\r\n        var data = {};\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            var scriptParam = $('script:contains(\"window.gon\")').text();\r\n\r\n            var brand = scriptParam.substring(scriptParam.indexOf('gon.current_brand=\"'));\r\n\r\n            brand = brand.substring(0, brand.indexOf('\";') + 1);\r\n            brand = this.extractFirstText(brand);\r\n\r\n            var token = scriptParam.substring(scriptParam.indexOf('api_token=\"'));\r\n\r\n            token = token.substring(0, token.indexOf('\";') + 1);\r\n            token = this.extractFirstText(token);\r\n\r\n            var ts = this.getCookie('_gcl_au');\r\n\r\n            ts = ts.split();\r\n            ts = ts[ts.length - 1];\r\n            data = {\r\n                brand: brand,\r\n                country: 'de',\r\n                product_type: 'web',\r\n                token: token,\r\n                ts: ts\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.value;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"promotion_code_unused\"]').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('input[name=\"promotion_code_unused\"]').get(0).dispatchEvent(changeEvent);\r\n            $('input[name=\"promotion_code_unused\"]').focus();\r\n            $('#check_voucher').click();\r\n        }\r\n    },\r\n    extractFirstText: function (str) {\r\n        var matches = str.match(\/\"(.*?)\"\/);\r\n\r\n        return matches\r\n            ? matches[1]\r\n            : str;\r\n    },\r\n    getCookie: function (cookieName) {\r\n        var name = cookieName + '=';\r\n        var ca = document.cookie.split(';');\r\n\r\n        for (var i = 0; i < ca.length; i++) {\r\n            var c = ca[i];\r\n\r\n            while (c.charAt(0) === ' ') {\r\n                c = c.substring(1);\r\n            }\r\n\r\n            if (c.indexOf(name) === 0) {\r\n                return decodeURIComponent(c.substring(name.length, c.length));\r\n            }\r\n        }\r\n\r\n        return '';\r\n    }\r\n};",
	"marmot": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = '';\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.marmot.com\/on\/demandware.store\/Sites-Marmot_US-Site\/en_US\/Cart-AddCouponJson?couponCode=' + code + '&format=ajax',\r\n            mode: 'GET',\r\n            async: false\r\n        });\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.marmot.com\/on\/demandware.store\/Sites-Marmot_US-Site\/en_US\/OnePageCheckout-UpdateSummary',\r\n            mode: 'GET',\r\n            success: function (result) {\r\n                var oldTotal = parseFloat($('.price-unadjusted', $.parseHTML(result)).text().replace(\/[^0-9|.]\/g, ''));\r\n                var newTotal = parseFloat($('.price-adjusted-total', $.parseHTML(result)).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n                savings = oldTotal - newTotal;\r\n            },\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"marthastewartwine": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      data = {\r\n        qcommerce_promotion_vouchers: {\r\n          checkout_redemption: 'true',\r\n          utf8: '\u2713',\r\n          voucher_code: code\r\n        }\r\n      };\r\n\r\n      return JSON.stringify(data);\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"marylandsquare": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var session = $('input[name=\"_dynSessConf\"]').val();\r\n    var result = $('input[name=\"\/atg\/userprofiling\/ProfileFormHandler.logoutSuccessURL\"]').val();\r\n\r\n    var applyCouponUrl = $('#__jpApplyUrl');\r\n    var checkoutUrl = this.isCartPage() ? 'cart\/cart.jsp?_DARGS=\/cart\/gadgets\/promotion.jsp' : 'checkout\/checkout.jsp?step=2';\r\n\r\n    if (!applyCouponUrl.length) {\r\n      applyCouponUrl = document.createElement('input');\r\n      applyCouponUrl.id = '__jpApplyUrl';\r\n      applyCouponUrl.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n      applyCouponUrl = $('#__jpApplyUrl');\r\n    }\r\n\r\n    applyCouponUrl.attr('value', checkoutUrl);\r\n\r\n    var clearCouponUrl = $('#__jpClearUrl');\r\n    var checkoutClearUrl = this.isCartPage() ? 'cart\/cart.jsp?_DARGS=\/cart\/gadgets\/promotion.jsp_AF&_dynSessConf=' + session + '&\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponSuccessURL=\/cart\/cart.jsp?step=&\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponErrorURL=\/cart\/cart.jsp?step=&\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon=true' : 'checkout\/checkout.jsp?step=2';\r\n\r\n    if (!clearCouponUrl.length) {\r\n      clearCouponUrl = document.createElement('input');\r\n      clearCouponUrl.id = '__jpClearUrl';\r\n      clearCouponUrl.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(clearCouponUrl);\r\n      clearCouponUrl = $('#__jpClearUrl');\r\n    }\r\n\r\n    clearCouponUrl.attr('value', checkoutClearUrl);\r\n\r\n\r\n    var resultCouponUrl = $('#__jpResultUrl');\r\n    var checkoutResultUrl = this.isCartPage() ? result : 'checkout\/checkout.jsp?step=2';\r\n\r\n    if (!resultCouponUrl.length) {\r\n      resultCouponUrl = document.createElement('input');\r\n      resultCouponUrl.id = '__jpResultUrl';\r\n      resultCouponUrl.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(resultCouponUrl);\r\n      resultCouponUrl = $('#__jpResultUrl');\r\n    }\r\n\r\n    resultCouponUrl.attr('value', checkoutResultUrl);\r\n  },\r\n  isCartPage: function () {\r\n    return \/cart\\\/cart\\.jsp\/gi.test(window.location.pathname);\r\n  },\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n    var session = $('input[name=\"_dynSessConf\"]').val();\r\n\r\n    if (this.isCartPage()) {\r\n      if (action === 'applyCouponUrl') {\r\n        data = {\r\n          _dyncharset: 'UTF-8',\r\n          _dynSessConf: session,\r\n          '\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponSuccessURL': '\/cart\/cart.jsp?step=',\r\n          '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponSuccessURL': '',\r\n          '\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponErrorURL': '\/cart\/cart.jsp?step=',\r\n          '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponErrorURL': '',\r\n          '\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': code,\r\n          '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': '',\r\n          '\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': 'submit',\r\n          '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': '',\r\n          _DARGS: '\/cart\/gadgets\/promotion.jsp'\r\n        };\r\n      } else if (action === 'clearCouponUrl') {\r\n        data = {\r\n          _DARGS: '\/cart\/gadgets\/promotion.jsp_AF',\r\n          _dynSessConf: session,\r\n          '\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponSuccessURL': '\/cart\/cart.jsp?step=',\r\n          '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': '',\r\n          '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponSuccessURL': '',\r\n          '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponErrorURL': '',\r\n          '\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponErrorURL': '\/cart\/cart.jsp?step=',\r\n          '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': '',\r\n          '\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': '',\r\n          '\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': true\r\n        };\r\n      }\r\n    } else if (action === 'applyCouponUrl' || action === 'resultUrl') {\r\n      data = {\r\n        _dyncharset: 'UTF-8',\r\n        _dynSessConf: session,\r\n        '\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': code,\r\n        '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': '',\r\n        '\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': 'submit',\r\n        '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': '',\r\n        _DARGS: '\/checkout\/gadgets\/checkoutStep2.jsp.1'\r\n      };\r\n    } else if (action === 'clearCouponUrl') {\r\n      data = {\r\n        _dyncharset: 'UTF-8',\r\n        _dynSessConf: session,\r\n        '\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': '',\r\n        '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': '',\r\n        '\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': 'submit',\r\n        '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': '',\r\n        _DARGS: '\/checkout\/gadgets\/checkoutStep2.jsp.1'\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = '';\r\n    var oldPrice = '';\r\n    var newPrice = '';\r\n\r\n    if ($('.order-discount-amount', responseHTML).length) {\r\n      savings = parseFloat($('.order-discount-amount .regular-text', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      if (this.isCartPage()) {\r\n\t\t\t oldPrice = parseFloat($('.pull-right > .regular-text:eq(1)').text().replace(\/[^0-9|.]\/g, ''));\r\n\t\t\t newPrice = parseFloat($('.pull-right > .regular-text:eq(1)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n      } else {\r\n\t\t\t oldPrice = parseFloat($('.pull-right > .regular-text').text().replace(\/[^0-9|.]\/g, ''));\r\n\t\t\t newPrice = parseFloat($('.pull-right > .regular-text', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n      }\r\n\r\n      savings = oldPrice - newPrice;\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"masdings": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"currency\", window.universal_variable.user.language);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var locale = localeMapping.US;\r\n        var currencyFormat = currency;\r\n        var cc = $('body').attr('currency');\r\n\r\n        $('body').removeAttr('currency');\r\n\r\n        if (cc === 'en-gb') {\r\n            locale = localeMapping.GB;\r\n            currencyFormat = 'GBP';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: currencyFormat, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var jsonParse = JSON.parse(response.match('window.universal_variable =(.+?)<\/script>')[1])\r\n        var oldValue = 0;\r\n        var newValue = jsonParse.basket.total;\r\n\r\n        jsonParse.basket.line_items.forEach(item => {\r\n            oldValue += item.subtotal;\r\n        });\r\n\r\n        var savings = parseFloat(oldValue - newValue);\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"massgenie": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.CartTotal.CouponTotal * -1);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var data = {\r\n                CouponCode: bestCode\r\n            };\r\n\r\n            $.ajax({\r\n                url: 'https:\/\/www.massgenie.com\/Checkout\/ApplyCouponCode',\r\n                type: 'POST',\r\n                data: data,\r\n                async: false\r\n            });\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"masterboxfr": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var applyUrlInput = $('#__applyUrl');\r\n        var applyUrl = location.origin + location.pathname;\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__applyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#__applyUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = 0;\r\n        var shippingFee = parseFloat($('th.total-line__name:contains(\"Livraison\"), th.total-line__name:contains(\"Delivery\")').next().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        if ($('font').length > 0) {\r\n            for (var x = 0; x < $('.product .product__price :first-child font :last-child').length; x++) {\r\n                oldTotal += parseFloat($('.product .product__price :first-child font :last-child').eq(x).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n            }\r\n        } else {\r\n            for (var y = 0; y < $('.product .product__price :first-child').length; y++) {\r\n                oldTotal += parseFloat($('.product .product__price :first-child').eq(y).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n            }\r\n        }\r\n\r\n        if (!isNaN(shippingFee)) {\r\n            oldTotal += shippingFee;\r\n        }\r\n\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).attr('data-checkout-payment-due-target')) \/ 100;\r\n        var savings = $('.reduction-code__text', responseHTML).last().text() !== code ? 0.00 : oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"matalan": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.data.attributes.total_discount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"matchesfashion": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.basket-page-applied-promotion-totals', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"matelsom": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\"):eq(0)', responseHTML).text().replace(',','.').replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"matissefootwear": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"mattress": "jQuery.fn.extend({\r\n    getSerializedArray:function(){\r\n        var data = {}\r\n        var form_array = $(this).serializeArray()\r\n        $.each(form_array,function(){\r\n            data[this.name] = this.value||''\r\n        })\r\n        return data;\r\n    }\r\n})\r\nvar ExternalProvider={\r\n    couponMap:{},\r\n    oldCartPrice:0,\r\n    init:function(){\r\n        var price = $('.order-total .amount').text().replace(\/[^0-9|\\.]\/g,'')\r\n        if(price)\r\n           this.oldCartPrice = parseFloat(price)\r\n        if(isNaN(this.oldCartPrice))\r\n           this.oldCartPrice = 0.0   \r\n    },\r\n    prepare:function(requestType,code){\r\n        var form_data = $('#cart-items-form').getSerializedArray()\r\n        if(requestType=='applyCouponUrl'){\r\n            form_data['dwfrm_cart_couponCode'] = code\r\n            form_data['dwfrm_cart_addCoupon'] = 'dwfrm_cart_addCoupon'\r\n        }\r\n        else{\r\n            if(this.couponMap[code])\r\n                form_data[this.couponMap[code]] = 'DELETE'\r\n        }\r\n        return form_data   \r\n    },\r\n    parse:function(response,status,$xhr,code){\r\n         var jqObj = $.parseHTML(response)\r\n         var newPrice = parseFloat($('.order-total .amount',jqObj).text().replace(\/[^0-9|\\.]\/g,''))\r\n         var discount = this.oldCartPrice - newPrice\r\n         if(discount > 0){\r\n             this.setCouponRowName(code,jqObj)\r\n             return{\r\n                 success:true,\r\n                 savings:discount\r\n             }\r\n         }\r\n         return{\r\n             success:false,\r\n             savings:0.0\r\n         }\r\n    },\r\n    setCouponRowName:function(code,jqObj){\r\n        var found = false;\r\n        var self  = this;\r\n        $('.rowcoupons',jqObj).each(function(){\r\n            if(!found){\r\n               var couponCode = $(this).find('.coupon-savings .discount .label').text().trim()\r\n               var elementName = $(this).find('.remove-item .cart-remove').attr('name').trim()\r\n               if(couponCode == code){\r\n                      found = true\r\n                      self.couponMap[code] = elementName\r\n                   }\r\n            }\r\n         })\r\n    },\r\n    complete:function(bestCode,bestSavings){\r\n        location.reload()        \r\n    }\r\n}",
	"mattressfirm": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        if (type === 'applyCouponUrl') {\r\n            data =\r\n                {\r\n                    q: '',\r\n                    lang: 'default',\r\n                    dwfrm_cart_shipments_i1_items_i0_quantity: $('#Quantity').find(':selected').val(),\r\n                    dwfrm_cart_addCoupon: 'true',\r\n                    dwfrm_cart_updateCart: 'dwfrm_cart_updateCart',\r\n                    dwfrm_cart_couponCode: code,\r\n                    null: 'null',\r\n                    footer_social_zipCode: $('#footer-social-zipCode').val(),\r\n                    footer_social_siteId: $('#footer-social-siteId').val(),\r\n                    footer_social_leadSource: $('#footer-social-leadSource').val(),\r\n                    footer_social_optOutFlag: $('#footer-social-optOutFlag').val()\r\n                };\r\n            return data;\r\n        }\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount td:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) { \r\n            $('#add-promo-code-label-id').click();\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n            $('#add-coupon-code').click();\r\n        }\r\n    }\r\n};",
	"mattressman": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promo-value').val(bestCode);\r\n            $('#btnPromo').click();\r\n        }\r\n    }\r\n};",
	"maurices": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon' && $('#mar-cart-promo-codes').length) {\r\n      $('input[placeholder=\"enter promo codes\"]').val(code);\r\n      $('input[placeholder=\"enter promo codes\"]').get(0).dispatchEvent(changeEvent);\r\n      $('#mar-cart-promo-apply').click();\r\n    } else if (type === 'injectCoupon' && $('input[name=\"promo-code\"]').length) {\r\n      $(\".apply-promo-btn.tabbable\").removeAttr(\"disabled\");\r\n      $('input[name=\"promo-code\"]').val(code);\r\n      $('input[name=\"promo-code\"]').get(0).dispatchEvent(changeEvent);\r\n      $('.apply-promo-btn.tabbable').click();\r\n    } else if (type === 'removeInjectedCoupon' && $('#mar-cart-promo-codes').length) {\r\n      $('.mar-icon.icon-x').click();\r\n    } else if (type === 'removeInjectedCoupon' && $('.promo-item-remove.icon-x').length) {\r\n      $('.promo-item-remove.icon-x').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 2000);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.asc-discounts-display.float--right:contains(\"-$\"), .order-summary-content-right:contains(\"-$\") ', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"maxstudio": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        if ($('.summary-details-amrules strong', responseHTML).text().indexOf(code) !== -1) {\r\n            var savings = parseFloat($('.summary-details-amrules .price', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload()\r\n        }\r\n    }\r\n};",
	"maxstudio.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n        if ($piggyJq('.summary-details-amrules strong', responseHTML).text().indexOf(code) !== -1) {\r\n            var savings = parseFloat($piggyJq('.summary-details-amrules .price', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload()\r\n        }\r\n    }\r\n};",
	"mdfactor": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#shopping-cart-totals-table .price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"mead": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.orderPromoDiscount dd:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"medexsupply": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('form[name=\"cart_quantity\"] > div.product:eq(1) > div.one:eq(3)', responseHTML).html().replace('-', '').replace(\/[^0-9|\\.]\/g, ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n        \r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n};",
	"mediamarkt": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.cototals-value.cototals-grandtotal:contains(\"\u20ac\")').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat(response.summary.totalPrice.replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"mediashop": "var ExternalProvider = {\r\n    origPrice: 0,\r\n    init: function () {\r\n        this.origPrice = parseFloat($('.cart-sum div:eq(2)').text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newPrice = parseFloat($('.cart-sum div:eq(2)', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        var savings = this.origPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#wk_gutschein').val(bestCode);\r\n            $('#btn_gutschein').click();\r\n        }\r\n    }\r\n};",
	"mediastorehouse": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var str = $('div:contains(\"\u00a3-\"):last', responseHTML).text();\r\n    var pos = str.indexOf(':') + 1;\r\n\r\n    str = str.slice(pos, str.length);\r\n\r\n    var savings = parseFloat(str.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"mediatemple": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        if (!response.errors) {\r\n            var savings = response.charges.discounts.amt;\r\n            if (savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"medicalsupplydepot": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'injectCoupon') {\r\n            $('#promocode').val(code);\r\n            $('.form-inline button:contains(\"Apply\")')[0].click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 300);\r\n    },\r\n\r\n    isCartPage: function () {\r\n        return \/checkout\\\/shopping_cart\/.test(location.href);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var discount = this.isCartPage() ? '.well-section.cart-summary-discount-applied span:contains(\"$\")' : '.cart-summary-discount-applied .pull-right';\r\n\r\n        var savings = parseFloat($(discount, responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"medifast1": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'applyCouponUrl') {\r\n      var formData = {\r\n        code: code,\r\n        CSRFToken: $(\"input[name='CSRFToken']\").val(),\r\n        CSRFToken: $(\"input[name='CSRFToken']\").val()\r\n      };\r\n\r\n      return formData;\r\n    }\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.savingsAmt', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"code\"]').val(bestCode);\r\n      $('#promoCode button').click();\r\n    }\r\n  }\r\n};",
	"medimops": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var parseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#test_basketVoucherDiscount_1', parseHTML)[0].innerHTML.replace(\/[^0-9|,.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"medionshopde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.cart-item__total').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.cart-item__total', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestcode) {\r\n    if (bestcode) location.reload();\r\n  }\r\n};",
	"medixselect": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td[id=\"block.carttotals.cell.discount\"]', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"medpex": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('td:contains(\"-\"):contains(\"\u20ac\"):eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"medshopexpress": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = Math.abs(response.mini_cart.promo_rate);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promo-code-input').val(bestCode);\r\n      $('#promo-code-input').get(0).dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\r\n      $('#promo-code-submit').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));;\r\n    }\r\n  }\r\n};",
	"meinelinse": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat($('#shopping-cart-totals-table tbody tr .a-right.v-middle:contains(-)', $.parseHTML(response)).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#discount-coupon-form').submit();\r\n        }\r\n    }\r\n};",
	"melijoe": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.tunnel-checkbox-price', responseHTML).eq(0).text().replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discount-name').val(bestCode);\r\n            $('#submit-discount').click();\r\n        }\r\n    }\r\n};",
	"melissaanddoug": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n      var applyUrlInput = $('#___jpCouponUrl');\r\n      var applyUrl = $('#cart-items-form, #dwfrm_billing').attr('action');\r\n  \r\n      if (!applyUrlInput.length) {\r\n        applyUrlInput = document.createElement('input');\r\n        applyUrlInput.id = '___jpCouponUrl';\r\n        applyUrlInput.style.display = 'none';\r\n        (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n        applyUrlInput = $('#___jpCouponUrl');\r\n      }\r\n  \r\n      applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n  \r\n      if ($('#dwfrm_billing').length) {\r\n        $.ajax({\r\n          url: 'https:\/\/www.melissaanddoug.com\/on\/demandware.store\/Sites-melissaanddoug-Site\/default\/Cart-AddCouponJson',\r\n          data: {\r\n            couponCode: code,\r\n            format: 'ajax',\r\n            firstName: '',\r\n            lastName: '',\r\n            address1: '',\r\n            address2: '',\r\n            country: 'us',\r\n            city: '',\r\n            state: '',\r\n            region: '',\r\n            postal: '',\r\n            postalcode: '',\r\n            phone: '',\r\n            originalemail: '',\r\n            confirmemail: '',\r\n          },\r\n          type: 'GET',\r\n          async: false,\r\n        });\r\n      }\r\n    },\r\n    parse: function (response) {\r\n      var respHTML = $.parseHTML(response);\r\n      var savings = parseFloat($('.order-totals__order-discount', respHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n  \r\n      return {\r\n        success: savings > 0,\r\n        savings: Number.isNaN(savings) ? 0.00 : savings\r\n      };\r\n    },\r\n    complete: function (bestCode) {\r\n      if (bestCode) {\r\n        if (!$('#dwfrm_billing').length) {\r\n          $('#dwfrm_cart_couponCode').val(bestCode);\r\n          $('#add-coupon').click();\r\n        } else { location.reload(); }\r\n      }\r\n    }\r\n  };\r\n  ExternalProvider.__prepareUrl();",
	"memoryfoamwarehouse": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"menkind": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match('discount_amount\\\":\\\"-(.*)base_discount_amount\\\":\\\"-')[0].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('#coupon_code').val(bestCode);\r\n                $('button[value=\"Apply Discount\"]').click();\r\n            } else {\r\n                $('#discount-code').val(bestCode);\r\n                var s = document.createElement('script');\r\n                s.type = 'text\/javascript';\r\n                var code = `jQuery('#discount-code').trigger('change');jQuery('button[value=\"Apply Discount\"]').click();`;\r\n                s.appendChild(document.createTextNode(code));\r\n                document.body.appendChild(s);\r\n            }\r\n        }\r\n    },\r\n\r\n    isCartPage: function () {\r\n        return \/checkout\\\/cart\/.test(location.href);\r\n    },\r\n};",
	"merrell": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var resultUrlInput = $('#___jpResultUrl');\r\n    var resultUrl = this.isCartPage() ? $('#cart-items-form')[0].action : 'https:\/\/www.merrell.com\/on\/demandware.store\/Sites-merrell_us-Site\/default\/Cart-UpdateBasketTotals';\r\n    if (!resultUrlInput.length) {\r\n      resultUrlInput = document.createElement('input');\r\n      resultUrlInput.id = '___jpResultUrl';\r\n      resultUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n      resultUrlInput = $('#___jpResultUrl');\r\n    }\r\n\r\n    resultUrlInput.attr('value', resultUrl);\r\n  },\r\n\r\n  isCartPage: function () {\r\n    return \/US\\\/en\\\/billing\/.test(location.pathname);\r\n  },\r\n\r\n  parse: function (response) {\r\n    var parseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-savings-amount', parseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"meshuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('#PT_PP_WP1_WPT_WPCC_lblPrice').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('#PT_PP_WP1_WPT_WPCC_lblPrice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#PT_PP_WP1_WPT_WPCC_edVoucher').val(bestCode);\r\n      $('#PT_PP_WP1_WPT_WPCC_btnRunVoucher').click();\r\n      location.reload();\r\n    }\r\n  }\r\n};",
	"metrostyle": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discountvalue.discount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"meundies": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = 'https:\/\/www.meundies.com' + $('.edit_order').attr('action');\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        utf8: $('input[name=\"utf8\"]').val(),\r\n        _method: $('input[name=\"_method\"]').val(),\r\n        authenticity_token: $('input[name=\"authenticity_token\"]').val(),\r\n        'order[coupon_code]': code,\r\n        commit: 'Apply'\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-promo-total', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"michaels": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.order-summary-container ul > li .value:first').text().replace(\/[^0-9.]\/g, ''));\r\n        var newTotal = parseFloat($('.price-adjusted-total:first', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($(\"#checkout-container\").length != 0) {\r\n                location.reload();\r\n            } else {\r\n                $(\"#dwfrm_cart_couponCode\").val(bestCode);\r\n                $(\"#add-coupon\").click();\r\n            }\r\n        }\r\n    }\r\n};",
	"michaelstars": "var ExternalProvider = {\r\n    parse: function (response) {\r\n      var responseHTML = $.parseHTML(response);\r\n      var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n      var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n      var savings = oldTotal - newTotal;\r\n  \r\n      return {\r\n        success: savings > 0,\r\n        savings: Number.isNaN(savings) ? 0.00 : savings\r\n      };\r\n    },\r\n    complete: function (bestCode) {\r\n      if (bestCode) {\r\n        $('#checkout_reduction_code').val(bestCode);\r\n        $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n      }\r\n    }\r\n  };",
	"microspotch": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        if ($('#__jpApplyUrl').length === 0) {\r\n            var url = 'https:\/\/www.microspot.ch\/mspocc\/occ\/msp\/users\/';\r\n\r\n            if (location.href.match('guest')) {\r\n                url = url + 'anonymous\/carts\/' + localStorage.getItem('cartId');\r\n            } else {\r\n                var __authorization = document.cookie.match(\/accessToken=([\\w-])+\/g)[0].split('=')[1];\r\n\r\n                url = url + localStorage.getItem('uid') + '\/carts\/' + localStorage.getItem('cartId');\r\n                $('body').append('<input type=\"hidden\" id=\"__authorization\" value=\"Bearer ' + __authorization + '\" \/>');\r\n            }\r\n\r\n            $('body').append('<input type=\"hidden\" id=\"__jpApplyUrl\" value=\"' + url + '\" \/>');\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('aside > div._3TaYpX > div._16b53X > span._1ywp9D').text());\r\n        var newTotal = parseFloat(response.totalPrice.value);\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"mikasa": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"milanoo": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('#autoUsedCoupons_price', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"milanoo.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('#autoUsedCoupons_price', responseHTML).filter(function(){\r\n            return $(this).text().indexOf('Save') > -1;\r\n        });\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"mileskimball": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var oldSavings = parseFloat($('.total-list__item.total-list__item--score .text-group-addon')[0].innerHTML.replace(\/[^0-9|.]\/g, ''))\r\n        var newSavings = parseFloat(response.Totals.Total._amount)\r\n        var savings = oldSavings - newSavings;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"milkmakeup": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount .value', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"millets": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match('data-saving=\"(.*)\"><\/span>')[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"mindfactory": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = $('table.table td:eq(3) p', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '') \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"miniinthebox": "var ExternalProvider = {\r\n\t\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n\t\tvar couponSuccess = response.success;\r\n\t\t\r\n\t\tif (couponSuccess) {\r\n\t\t\t\r\n\t\t\tvar codeFound = response.detail.discountMsg.toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\t\t\tif (codeFound) {\r\n\r\n\t\t\t\tvar discount = Number(response.detail.discountValue);\r\n\t\t\t\r\n\t\t\t\treturn {\r\n\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\tsavings: discount\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t}; \r\n    },\r\n    complete: function(bestCode, bestSavings) {\r\n\r\n\t\t$('#to-use-coupon')[0].click();\r\n\t\t$('#couponCode').val(bestCode);\r\n\t\t$('#couponApply').click();\t\t\r\n\r\n    }\r\n\r\n}",
	"mintvelvet": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.basket-summary-promotion-value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"mioskincareuk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.responsiveBasket_totalValue').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.responsiveBasket_totalValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"mioskincarefr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var clearCouponUrl= 'https:\/\/www.mioskincare.fr' + $('.responsiveBasket_removeItem.responsiveBasket_removeItem-discount', responseHTML).attr(\"href\");\r\n        $.ajax({\r\n            url: clearCouponUrl,\r\n            async: false\r\n        });\r\n\r\n        var savings = parseFloat($('.responsiveBasket_bodyItem.responsiveBasket_totalSavingsPrice', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"mioskincareuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var clearCouponUrl = 'https:\/\/www.mioskincare.fr' + $('.responsiveBasket_removeItem.responsiveBasket_removeItem-discount', responseHTML).attr('href');\r\n\r\n    $.ajax({\r\n      url: clearCouponUrl,\r\n      async: false\r\n    });\r\n\r\n    var savings = parseFloat($('.responsiveBasket_bodyItem.responsiveBasket_totalSavingsPrice', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#discountcode').val(bestCode);\r\n      $('#add-discount-code').click();\r\n    }\r\n  }\r\n};",
	"mirapodo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = Math.abs(response.order.products[0].discounts[0].priceTotal.value.value);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"misfit": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response.total);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n      \r\n         window.location.reload(true);\r\n    }\r\n};",
	"missguided": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var url = window.location.pathname;\r\n\r\n        if (isEUR = url.match(\/(de|fr)\/g)) {\r\n            currency = 'EUR';\r\n            locale = localeMapping[isEUR.shift().toUpperCase()];\r\n        } else if (url.match(\/en\/g)) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"missguidedfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.order-summary__totals-amount--final').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = response.total.unformatted_total \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"missguideduk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldPrice = parseFloat($('.order-summary__totals-list--grand-total>dd').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat(response.total.total.replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"missionrs": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"missselfridge": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.summary_price:contains(\"-\")', responseHTML).text().replace(\/[^.0-9|]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"misterspex": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.grid2.last', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"misterspexde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.grid2.last', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"misterspexfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#TotalPrice .last b:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $(\"input[name='promotionCode']\").val(bestCode);\r\n      $(\"input[name='promotionCode']\").next().click();\r\n    }\r\n  }\r\n};",
	"mixbook": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.c-cart-summary--savings', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"mjtrim": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        response = $.parseHTML(response);\r\n        var discountAmt = $('.tax-checkout-discount', response);\r\n        if(discountAmt) {\r\n            return {\r\n                success: true,\r\n                savings: Number(discountAmt.text().replace(\/[^0-9|\\.]\/g, ''))\r\n            };\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        location.reload();\r\n    }\r\n};",
	"mjtrim.mobile": "var ExternalProvider = {\r\n    \r\n    init: function() {\r\n        \r\n        $.fn.serializeObject = function()\r\n        {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function() {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n    \r\n    prepare: function(action, code) {\r\n        return $('#cart_items').serializeObject();\r\n    },\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n    }\r\n};",
	"mlbshop": "var ExternalProvider = {\r\n  userId: '',\r\n  __prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"userid\", __initialdata__.renderProps.location.state.optimisticReducers.checkout.cart.cartInfo.cartId);';\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var value = $('body').attr('userid');\r\n\r\n    var applyUrlInput = $('#__applyUrl');\r\n    var applyUrl = 'https:\/\/www.mlbshop.com\/api\/cart\/' + value + '\/promotion';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__applyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__applyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    applyUrlInput.attr('data-cookie', this.getCookie('xsrft'));\r\n  },\r\n  getCookie: function (cookieName) {\r\n    var name = cookieName + '=';\r\n    var ca = document.cookie.split(';');\r\n\r\n    for (var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n\r\n      while (c.charAt(0) === ' ') {\r\n        c = c.substring(1);\r\n      }\r\n\r\n      if (c.indexOf(name) === 0) {\r\n        return decodeURIComponent(c.substring(name.length, c.length));\r\n      }\r\n    }\r\n\r\n    return '';\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.data.cart.summary.discountTotal.baseValue);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCheckoutPage: function () {\r\n    return location.pathname === '\/payment';\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      if (!this.isCheckoutPage()) {\r\n        $('#coupon-code-medium').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n        $('#coupon-code-medium').trigger('input').trigger('change');\r\n        $('.coupon-entry-apply button:eq(1)')[0].click();\r\n        $('#coupon-code-medium').val('');\r\n      } else {\r\n        $('#couponCode').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n        $('#couponCode').trigger('input').trigger('change');\r\n        $('.coupon-entry-apply button')[0].click();\r\n        $('#couponCode').val('');\r\n      }\r\n    }\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"mmoga": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.bestTotal td:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"mobilefun": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.summary);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"mobiles": "var ExternalProvider = {\r\n  beforeInit: function() {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function() {\r\n        retries++;\r\n        $('form[data-voucher=\"remove_form\"] button').click();\r\n        if ($('form[data-voucher=\"remove_form\"] button').length < 1 || retries < 3) {\r\n          clearInterval(interval);\r\n          setTimeout(() => resolve(), 1000);\r\n        } else if (retries === 3) {\r\n          resolve();\r\n        }\r\n      }, 2000);\r\n    })\r\n  },  \r\n  init: function() {\r\n    this.oldTotal = parseFloat($('.basket-today-price span.basket-price').first().text().replace(\/[^0-9|.]\/g, ''));\r\n  },\r\n  parse: function (response) {\r\n    let newTotal = this.oldTotal;\r\n    if(response.result === 'success') {\r\n      const responseHTML = $.parseHTML(response.basketTotalsHtml);\r\n      newTotal = parseFloat($('.basket-today-price span.basket-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    }\r\n    let savings = this.oldTotal - newTotal;\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"mobilityhouse": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = 'USD';\r\n        var url = window.location.pathname;\r\n\r\n        if (url.match(\/de\/g)) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.DE;\r\n        } else if (url.match(\/int_en\/g)) {\r\n            newCurrency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        } else if (url.match(\/fr\/g)) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.FR;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"mobstub": "var ExternalProvider = {\r\n\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.content);\r\n        var savings = parseFloat($('.discount', responseHTML).text().replace('$', ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n\r\n};",
	"modanisa": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n        var newCurrency;\r\n\r\n        if ($('body').hasClass('de')) {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        } else if ($('body').hasClass('gb')) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if ($('body').hasClass('fr')) {\r\n            locale = localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        } else {\r\n            locale = localeMapping.US;\r\n            newCurrency = 'USD';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.basketSummary);\r\n        var savings = parseFloat($('.basketSummary-value-couponDiscount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"modaoperandi": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('.promo-code-option-link').click();\r\n      $('.mojo-input.open-promo-box').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('.mojo-input.open-promo-box').trigger('input').trigger('change');\r\n      $('button:contains(\"Apply\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('#PromotionContainer-v2 > div > label > span').click();\r\n      $('#PromotionContainer-v2 > div > div > div > div > span').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 600);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 70);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('#PromotionContainer-v2').text().replace(\/[^.0-9]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('.mojo-input.open-promo-box').val(bestCode);\r\n      $('button:contains(\"Apply\")').click();\r\n    }\r\n  }\r\n};",
	"modcloth": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount .value', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        this.clearCoupon(responseHTML);\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    },\r\n    clearCoupon(responseHTML) {\r\n        var $form = $('#cart-items-form', responseHTML);\r\n        var data = $form.serializeArray();\r\n        data.push({\r\n            name: 'dwfrm_cart_coupons_i0_deleteCoupon',\r\n            value: 'Remove'\r\n        });\r\n        if ($form.length) {\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: $form.attr('action'),\r\n                data: data,\r\n                success: function () {\r\n                    return;\r\n                },\r\n                error: function () {\r\n                    return;\r\n                },\r\n                async: false\r\n            });\r\n        }\r\n    }\r\n};",
	"modells": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount > .value:contains(-$)', responseHTML).text().replace(\/[^.0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"modernhausfrau": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.bw-checkout-2__summary-coupon span:contains(\"-\")', responseHTML).first().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"modlily": "var ExternalProvider ={\r\n    parse:function(response,status,$xhr,code){\r\n        var success = response.error && response.error.indexOf('You save') >= 0;\r\n\r\n        var responseHTML = $('<output>').append($.parseHTML(response.error));\r\n\r\n        var savings = $('font', responseHTML).attr('orgp');\r\n\r\n        return {\r\n            success: success,\r\n            savings: success ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n\r\n    complete:function(bestCode,bestSavings){\r\n        if(bestCode){\r\n            $('#verify_box').val(bestCode);\r\n            $('#verify_bt').click();\r\n        }\r\n    }\r\n}",
	"modlily.mobile": "var ExternalProvider ={\r\n    parse:function(response,status,$xhr,code){\r\n        var success = response.error && response.error.indexOf('You save') >= 0;\r\n\r\n        var responseHTML = $piggyJq('<output>').append($piggyJq.parseHTML(response.error));\r\n\r\n        var savings = $piggyJq('font', responseHTML).attr('orgp');\r\n\r\n        return {\r\n            success: success,\r\n            savings: success ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n\r\n    complete:function(bestCode,bestSavings){\r\n        if(bestCode){\r\n            $piggyJq('#verify_box').val(bestCode);\r\n            $piggyJq('#js_applyBtn').click();\r\n        }\r\n    }\r\n}",
	"modzfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.col-sm-2.col-md-3.no-padd.text-right', responseHTML).eq(1).text().replace(\/[^0-9]\/g, '') \/ 100);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"mojomarketplace": "var ExternalProvider = {\r\n    _prepareSession: function () {\r\n        var sessionObject = this.getCookie('CakeCookie[cartId]');\r\n\r\n        sessionObject = sessionObject.replace(\/[^a-zA-Z0-9\\-]+\/gim, '');\r\n\r\n        if (sessionObject) {\r\n            var applyUrlInput = $('#__jpDynSessConf');\r\n\r\n            if (!applyUrlInput.length) {\r\n                applyUrlInput = document.createElement('input');\r\n                applyUrlInput.id = '__jpDynSessConf';\r\n                applyUrlInput.style.display = 'none';\r\n                (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n                applyUrlInput = $('#__jpDynSessConf');\r\n            }\r\n\r\n            applyUrlInput.attr('value', sessionObject);\r\n        }\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.results.coupons[0].Coupon.adjustment;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestSavings, bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    },\r\n    getCookie: function (cookieName) {\r\n\r\n        var name = cookieName + '=';\r\n        var ca = document.cookie.split(';');\r\n\r\n        for (var i = 0; i < ca.length; i++) {\r\n            var c = ca[i];\r\n\r\n            while (c.charAt(0) === ' ') {\r\n                c = c.substring(1);\r\n            }\r\n\r\n            if (c.indexOf(name) === 0) {\r\n                return decodeURIComponent(c.substring(name.length, c.length));\r\n            }\r\n        }\r\n\r\n        return '';\r\n    }\r\n};\r\n\r\nExternalProvider._prepareSession();",
	"moleskine": "var ExternalProvider = {\r\n    init: function () {\r\n        this.oldTotal = parseFloat($('#CC-orderSummary-orderTotal .ordersumprice, #CC-checkoutOrderSummary-orderTotal .ordersumprice').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    },\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n        var selector = location.host;\r\n\r\n        if (selector.match('gb')) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'EUR';\r\n        } else if (selector.match('de')) {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        } else if (selector.match('fr')) {\r\n            locale = localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    prepare: function (action, code) {\r\n        var clickEvent = new Event('change', {\r\n            bubbles: true,\r\n            cancelable: true\r\n        });\r\n\r\n        if (action === 'injectCoupon') {\r\n            $('#CC-promotionDetails-promoCode').val(code);\r\n            $('#CC-promotionDetails-promoCode').get(0).dispatchEvent(clickEvent);\r\n            $('#CC-promotion-applyCode')[0].click();\r\n        } else if (action === 'removeInjectedCoupon') {\r\n            $('#CC-orderSummary-couponEntry-0 a, #CC-checkoutOrderSummary-couponEntry-0 a')[0].click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 800);\r\n    },\r\n    parse: function () {\r\n        var newTotal = parseFloat($('#CC-orderSummary-orderTotal .ordersumprice, #CC-checkoutOrderSummary-orderTotal .ordersumprice').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"moleskinefr": "var ExternalProvider = {\r\n  init: function () {\r\n    this.oldTotal = parseFloat($('#CC-orderSummary-orderTotal .ordersumprice, #CC-checkoutOrderSummary-orderTotal .ordersumprice').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n  },\r\n  prepare: function (action, code) {\r\n    var clickEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (action === 'injectCoupon') {\r\n      $('#CC-promotionDetails-promoCode').val(code);\r\n      $('#CC-promotionDetails-promoCode').get(0).dispatchEvent(clickEvent);\r\n      $('#CC-promotion-applyCode')[0].click();\r\n    } else if (action === 'removeInjectedCoupon') {\r\n      $('#CC-orderSummary-couponEntry-0 a, #CC-checkoutOrderSummary-couponEntry-0 a')[0].click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    var self = this;\r\n\r\n    if (step === 'injectCoupon') {\r\n      this._timeout = setInterval(function () {\r\n        if ($('#CC-orderSummary-couponEntry-0 a, #CC-checkoutOrderSummary-couponEntry-0 a')) {\r\n          clearTimeout(self._timeout);\r\n          setTimeout(next, 500);\r\n        }\r\n      }, 200);\r\n    } else {\r\n      this._timeout = setInterval(function () {\r\n        if ($('#CC-orderSummary-couponEntry-0 a, #CC-checkoutOrderSummary-couponEntry-0 a')) {\r\n          clearTimeout(self._timeout);\r\n          setTimeout(next, 500);\r\n        }\r\n      }, 200);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var newTotal = parseFloat($('#CC-orderSummary-orderTotal .ordersumprice, #CC-checkoutOrderSummary-orderTotal .ordersumprice').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  }\r\n};",
	"momoxfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#test_basketVoucherDiscount_1', responseHTML).text().replace(\",\",\".\").replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode){\r\n    if (bestCode) {\r\n        $('input[name=\"voucherNr\"]').val(bestCode)\r\n        $('#test_basketVoucherAdd').click();\r\n    }\r\n  }\r\n};",
	"mona": "var ExternalProvider = {\r\n    prepare: function (type) {\r\n        var catalogId = $('input[name=\"catalogId\"]').val();\r\n        var langId = $('input[name=\"langId\"]').val();\r\n        var storeId = $('input[name=\"storeId\"]').val();\r\n        \r\n        if (type === 'applyCouponUrl') {\r\n            var queue = $(document).queue(this.queueName);\r\n\r\n            queue.unshift(function (next) {\r\n                $.ajax({\r\n                    url: 'https:\/\/www.mona.de\/OrderCalculate',\r\n                    type: 'GET',\r\n                    data: {\r\n                        catalogId: catalogId,\r\n                        langId: langId,\r\n                        storeId: storeId,\r\n                        krypto: '' \r\n                    },\r\n                    success: function () {\r\n                        $.ajax({\r\n                            url: 'https:\/\/www.mona.de\/webapp\/wcs\/stores\/servlet\/AjaxPromotionCodesView',\r\n                            type: 'GET',\r\n                            data: {\r\n                                langId: langId,\r\n                                catalogId: catalogId,                                \r\n                                storeId: storeId,\r\n                                krypto: '', \r\n                                ddkey: 'http:OrderCalculate'\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n            $(document).queue(this.queueName, queue);\r\n        }\r\n    },    \r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.promoLine span:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n     \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"mondialtissus": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\") ', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"monnierfreres": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-USD $\")', responseHTML).eq(0).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('.btn_coupon').click();\r\n    }\r\n  }\r\n};",
	"monoprice": "var ExternalProvider = {    \r\n    parse: function(response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response['Summary']),\r\n            savings = parseFloat($('.promo-msg:contains('+code+') > span:eq(1)', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings) {\r\n          return {\r\n            success: true,\r\n            savings: savings\r\n          }\r\n        }\r\n        return {\r\n          success: false,\r\n          savings: 0.0\r\n        }        \r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        location.reload();\r\n    }\r\n};",
	"monsoon": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#basketDiscounts', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#Promo').val(bestCode);\r\n            $('input[name=\"applyPromo\"]').click();\r\n        }\r\n    }\r\n};",
	"monsterproducts": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n    \tif (type === 'resultUrl') { return ;}\r\n    \tvar formData = {};\r\n    \t$('input').each(function (){\r\n    \t\tvar name = this.name;\r\n    \t\tif (name.includes('$cartItem') && name.includes('$quantity')) {\r\n    \t\t\tformData[name] = $(this).val();\r\n    \t\t}\r\n    \t});\r\n    \tif (type === 'applyCouponUrl') {\r\n\t    \tformData['ctl13$orderSummary$coupon$couponCode'] = code;\r\n\t    \tformData['__EVENTTARGET'] = 'ctl13$orderSummary$coupon$applyCoupon2';\r\n    \t}\r\n    \tif (type === 'clearCouponUrl') {\r\n    \t\tformData['__EVENTTARGET'] = 'ctl13$orderSummary$coupon$appliedCoupons$ctl01$remove';\r\n    \t\tformData['ExpSKU'] = $('input[name=ExpSKU]').val();\r\n    \t}\r\n\r\n    \tformData['__VIEWSTATE'] = $('input[name=__VIEWSTATE]').val();\r\n    \tformData['__VIEWSTATEGENERATOR'] = $('input[name=__VIEWSTATEGENERATOR]').val();\r\n    \tformData['__ASYNCPOST'] = 'true';\r\n    \treturn formData;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar savings = parseFloat($('td[data-orderdiscount]').data('orderdiscount'));\r\n\r\n    \tif (savings) {\r\n    \t\treturn {\r\n    \t\t\tsuccess: true,\r\n    \t\t\tsavings: savings\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"moo": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var curHref = location.href;\r\n\r\n        if (curHref.match(\/de\/g)) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (curHref.match(\/uk\/g)) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.retail-price .price-full', responseHTML).text().replace(',','.').replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.retail-price .price-actual', responseHTML).text().replace(',','.').replace(\/[^.0-9]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"moosejaw": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    let savings = 0;\r\n    $.ajax({\r\n      url: 'https:\/\/www.moosejaw.com\/moosejaw\/shop\/ShopCartDisplayView',\r\n      type: 'POST',\r\n      async: false,\r\n      success: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        savings = parseFloat($('.section-table-discount-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n      }\r\n    });\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCode').val(bestCode);\r\n      $('#WC_PromotionCodeDisplay_links_1').get(0).dispatchEvent(new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true\r\n      }));\r\n    }\r\n  }\r\n};",
	"morris4x4center": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.summary);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"moss": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.totalDiscount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"voucher\"]').val(bestCode);\r\n      $('input.btn.btn-block.center-block.btn-primary.btn-large.btn-primary--submit.text-uppercase').click();\r\n    }\r\n  }\r\n};",
	"motherhood": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var ApplyUrlInput = $('#continue-shopping');\r\n        var ApplyUrl = 'https:\/\/www.motherhood.com\/on\/demandware.store\/Sites-mh-us-Site\/default\/Cart-AddCouponJson?';\r\n\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('form');\r\n            ApplyUrlInput.id = 'continue-shopping';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#continue-shopping');\r\n            ApplyUrlInput.attr('action', ApplyUrl);\r\n        }\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (this.isCheckoutPage()) {\r\n            if (type === 'applyCouponUrl') {\r\n                data = {\r\n                    couponCode: code,\r\n                    format: 'ajax'\r\n                };\r\n\r\n                return data;\r\n            }\r\n        } else if (type === 'applyCouponUrl') {\r\n            data = {\r\n                dwfrm_cart_shipments_i0_items_i0_quantity: $(\"input[name='dwfrm_cart_shipments_i0_items_i0_quantity\").val(),\r\n                dwfrm_cart_couponCode: code,\r\n                dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon',\r\n                dwfrm_cart_updateCart: 'dwfrm_cart_updateCart'\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    isCheckoutPage: function () {\r\n        if (document.querySelector('.payment-method-options') !== null) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount.discount:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"motivescosmetics": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        var inputs = ['mCountry', 'firstName', 'lastName', 'mAddr1', 'mAddr2', 'mAddr3', 'mAddr4', 'mAddr5',\r\n            'mAddr6', 'mAddr7', 'mArea', 'mDistrict', 'mCity', 'mState',\r\n            'mPCode', 'email', 'phone', 'shpCountry', 'shpFirstName', 'shpLastName',\r\n            'shpAddr1', 'shpAddr2', 'shpAddr3', 'shpAddr4', 'shpAddr5', 'shpAddr6', 'shpAddr7', 'shpArea',\r\n            'shpDistrict', 'shpCity', 'shpState', 'shpPCode', 'pcID', 'sameAsShipping',\r\n            'ccMask', 'ccExpMM', 'ccExpYY', 'cardNum', 'pickup', 'vendorCodeList',\r\n            'vendorTotalList', 'currentEGUICode', 'isPOBox', 'fraudSessionID', 'vendorCnt'];\r\n\r\n        data = this.InputToObject(inputs);\r\n        data.shippingSelection1 = $('input[name=\"shippingSelection1\"]:eq(0)').is(':checked') ? $('input[name=\"shippingSelection1\"]:eq(0)').val() : $('input[name=\"shippingSelection1\"]:eq(1)').val();\r\n        data.ccNo = '';\r\n        data.ccExpMM = '';\r\n        data.ccExpYY = '';\r\n        data.cardCVV = '';\r\n        data.gcRemove = '';\r\n        data.gcNumLs = '';\r\n        data.pinLs = '';\r\n        data.gcCheck = '';\r\n        data.gcBalance = '';\r\n        data.gcNum = '';\r\n        data.pin = '';\r\n        data.promoCode = code;\r\n        data.smsPhone = '';\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('.col-md-3:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon').val(bestCode);\r\n            $('#applyCoupon').click();\r\n        }\r\n    },\r\n    InputToObject: function (inputs) {\r\n        var result = {};\r\n\r\n        inputs.forEach(function (name) {\r\n            result[name] = $(\"input[name='\" + name + \"']\").val();\r\n        });\r\n\r\n        return result;\r\n    }\r\n};",
	"motorola": "var ExternalProvider = {\r\n  init: function () {\r\n    this.oldTotal = parseFloat($('.summary-label:contains(\"Price\")').next().text().replace(\/[^0-9|.]\/g, ''));\r\n  },\r\n  prepare: function (step, code) {\r\n    this.code = code;\r\n    if (step === 'applyCouponUrl') {\r\n      let data = this.serializeForm();\r\n      data.new_promo_code = code;\r\n      return data;\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response[1].data);\r\n    let newTotal = parseFloat($('.summary-label:contains(\"Price\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n    let respFromBuildId = $('#motorola-blc-cart-promo-codes-form-wrapper input[name=\"form_build_id\"]', responseHTML).val();\r\n    this.removeCoupon(respFromBuildId);\r\n    let savings = this.oldTotal - newTotal;\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  removeCoupon: function (respFromBuildId) {\r\n    $.post('https:\/\/www.motorola.com\/us\/system\/ajax', {\r\n      new_promo_code: '',\r\n      form_build_id: respFromBuildId,\r\n      form_id: \"motorola_blc_cart_promo_codes_form\",\r\n      _triggering_element_name: ExternalProvider.code,\r\n      _triggering_element_value: 'Remove'\r\n    });\r\n  },\r\n  serializeForm: function () {\r\n    let serializeData = $('#motorola-blc-cart-promo-codes-form-wrapper form').serializeArray();\r\n    let formData = {};\r\n    serializeData.forEach(data => {\r\n      formData[data.name] = data.value\r\n    });\r\n    return formData;\r\n  }\r\n};",
	"motosport": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response.cart);\r\n        var savings = $('.cart-savings td', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"mountainhardwear": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount .value', responseHTML).text().replace(\/[$()-]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        location.reload(true);\r\n    }\r\n};",
	"mountainsidemedical": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"mountainwarehouse": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0;\r\n\r\n        if ($('.h3:contains(\"-$\")', responseHTML).length) {\r\n            savings = parseFloat($('.h3:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        } else {\r\n            savings = parseFloat($('.h3:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#CouponCode').val(bestCode);\r\n            $(\".button[value='Apply']\").trigger('click');\r\n        }\r\n    }\r\n};",
	"mouth": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line--reduction .order-summary__emphasis', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').removeClass('btn--disabled');\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').removeAttr('disabled');\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').trigger('click');\r\n        }\r\n    }\r\n};",
	"mpgsport": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var pathnameUrl = $('#___jpPathnameUrl');\r\n        var pathname = window.location.pathname;\r\n\r\n        pathnameUrl = document.createElement('input');\r\n        pathnameUrl.id = '___jpPathnameUrl';\r\n        pathnameUrl.style.display = 'none';\r\n        (document.body || document.head || document.documentElement).appendChild(pathnameUrl);\r\n        pathnameUrl = $('#___jpPathnameUrl');\r\n        pathnameUrl.attr('value', pathname);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.total-line--reduction .total-line__price span', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestSavings, bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"mrporter": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('#subtotal_row').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('#subtotal_row', response).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"mrsfields": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    parse: function(response, status, $xhr, code){\r\n        if(response.totals) {\r\n            var savings  = response.totals.discount;\r\n            if(savings > 0){\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        location.reload(true)\r\n    }\r\n};",
	"mscdirect": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"requestData\", requestData);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var requestData = $('body').attr('requestData');\r\n        var ApplyUrlInput = $('#___jpApplyUrl');\r\n        var ApplyUrl = 'https:\/\/www.mscdirect.com\/webapp\/wcs\/stores\/servlet\/ResponsiveShoppingCartView?' + requestData + '';\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('input');\r\n            ApplyUrlInput.id = '___jpApplyUrl';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        ApplyUrlInput.attr('value', ApplyUrl);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-you-save:eq( 1 )', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        savings = (Math.floor(100 * savings) \/ 100).toFixed(2);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"mtbakervapor": "var ExternalProvider = {\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var totalPrice = this.isCartPage() ? 'div.order-total > div.value' : 'td.order-value';\r\n        var oldPrice = parseFloat($(totalPrice).text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('div.order-total > div.value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var couponField = $('#dwfrm_billing_couponCode').length === 0 ? '#dwfrm_cart_couponCode' : '#dwfrm_billing_couponCode';\r\n            $(couponField).val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"promovacances": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (action, code) {\r\n        var formData = $('#vpcForm').serializeObject();\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                bonReduction: code\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#code-promo span', responseHTML).text().replace(\/[^0-9]\/g, ''));\r\n\r\n        if ($('#code-promo span', responseHTML).text().match(',')) savings \/= 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#bonReduction').val(bestCode);\r\n            $('.calculer').click();\r\n        }\r\n    }\r\n};",
	"murad": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response[0].coupons[0].discountedAmount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"musclefood": "var ExternalProvider = {\r\n  prepare: function (step, code) {\r\n    if (step === 'applyCouponUrl') {\r\n      $('input[name=\"coupon_code\"]').val(code);\r\n\r\n      return { formData: $('input[name=\"coupon_code\"]').parents('form').serialize() };\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.subtotals-item__value:contains(\"- \u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"musiciansfriend": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n\r\n        var couponData = {},\r\n            clearCouponData = {};\r\n\r\n        var formInputs = [].slice.call($('#couponForm input')),\r\n            clearCouponFormInputs = [].slice.call($('#removeCouponForm input'));\r\n\r\n        formInputs.forEach(function(e){\r\n            couponData[$(e).attr('name')] = $(e).val();\r\n        })\r\n\r\n        clearCouponFormInputs.forEach(function(e){\r\n            clearCouponData[$(e).attr('name')] = $(e).val();\r\n        })\r\n\r\n\r\n        \/\/ THIS SITE HAS CASE SENSITIVE COUPONS. THEY SHOULD ALL BE LOWERCASE\r\n        couponData[\"\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode\"] = code.toLowerCase();\r\n        clearCouponData[\"\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode\"] = code.toLowerCase();\r\n\r\n        \r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return couponData;\r\n        }\r\n\r\n        if(type === \"clearCouponUrl\"){\r\n            return clearCouponData;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('.coupon dd', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n        if(codeFound) {\r\n\r\n            var savings = Number($('.coupon dt', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving){\r\n\r\n        $('#inputtedCouponCode').val(bestCode);\r\n        $('#couponSubmit').click();\r\n    }\r\n}",
	"mybeautique": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.panel--td.column--total-price.block:contains(\"-\"):eq(0)', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.add-voucher--field').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        }\r\n    }\r\n};",
	"mychelledermaceuticals": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"mydays": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('#orderTotal').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat(response.orderTotalValue);\r\n        var savings = (oldTotal - newTotal);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"myevergreen": "var ExternalProvider = {\r\n    init: function () {\r\n        this._cartTotal = parseFloat($('#shopping-cart-totals-table tfoot .price').text().replace(\/[^0-9|.]\/g, ''));\r\n    },\r\n\r\n    _prepareUrl: function () {\r\n        var className = $('body').attr('class');\r\n\r\n        this.isCart = className === undefined;\r\n\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isCartPage() ? 'https:\/\/www.myevergreen.com\/checkout\/cart\/couponPost\/' : 'https:\/\/www.myevergreen.com\/po_ccc\/onepage\/applyCoupon\/';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (this.isCartPage()) {\r\n            if (type === 'applyCouponUrl') {\r\n                data = {\r\n                    remove: 0,\r\n                    coupon_code: code\r\n                };\r\n            } else {\r\n                data = {\r\n                    coupon_code: code\r\n                };\r\n            }\r\n\r\n            if (type === 'clearCouponUrl') {\r\n                data = {\r\n                    remove: 1,\r\n                    coupon_code: code\r\n                };\r\n            }\r\n        } else {\r\n            if (type === 'applyCouponUrl') {\r\n                data = {\r\n                    coupon_code: code\r\n                };\r\n            }\r\n        }\r\n\r\n        return data;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        if (this.isCartPage()) {\r\n            var responseHTML = $.parseHTML(response);\r\n            var newTotal = parseFloat($('#shopping-cart-totals-table tfoot .price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n            var savings = parseFloat(this._cartTotal - newTotal);\r\n        } else {\r\n            var parseJSON = JSON.parse(response);\r\n\r\n            savings = parseFloat(parseJSON.messages[0].substring(48, 60).replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (this.isCartPage()) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply Coupon\"]').click();\r\n        } else {\r\n            $('#use_coupon_code').click();\r\n            $('#po_ccc_coupon_code').val(bestCode);\r\n            $('#po_ccc-apply').click();\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        return \/checkout\\\/cart\/.test(location.href);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"mygeekboxfrance": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.responsiveBasket_discountValue', responseHTML).text().replace(',', '.').replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"myheritage": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('#currency').val();\r\n\r\n        if (selector === 'string:EUR') {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === 'string:GBP') {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else {\r\n            locale = localeMapping['US'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"mylabbox": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var coupons = response.data.coupons;\r\n        var savings = 0;\r\n\r\n        coupons.forEach(coupon => {\r\n            if (coupon.id.toLowerCase() === code.toLowerCase()) {\r\n                savings = parseFloat(coupon.discount);\r\n            }\r\n        });\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"mymms": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var applyUrlInput = $('#__jpCouponUrl');\r\n    var isCheckout = !$('.mz-checkoutform').length;\r\n    var applyUrl = isCheckout ? 'https:\/\/www.mms.com\/api\/commerce\/carts\/' + $('input[name=\"id\"]').val() + '\/coupons\/CLAIMCODE' : 'https:\/\/www.mms.com\/api\/commerce\/orders\/' + location.href.split('\/')[5] + '\/coupons\/CLAIMCODE';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.discountTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\n\r\nExternalProvider.__prepareUrl();",
	"myposterde": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var o = {};\r\n      var a = this.serializeArray();\r\n\r\n      $.each(a, function () {\r\n        if (o[this.name] !== undefined) {\r\n          if (!o[this.name].push) {\r\n            o[this.name] = [o[this.name]];\r\n          }\r\n\r\n          o[this.name].push(this.value || '');\r\n        } else {\r\n          o[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return o;\r\n    };\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      var formData = $('#form-cart').serializeObject();\r\n\r\n      formData = Object.assign(formData, {\r\n        code: code,\r\n        'button-voucher': ''\r\n      });\r\n\r\n      data = formData;\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.order-price--total .price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.order-price--total .price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"myproteinde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.athenaBasket_totalSavingsPrice:eq(0)', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        $.ajax({\r\n            url: $('.athenaBasket_removeItem-discount', responseHTML).attr('href'),\r\n            mode: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"myproteinfr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.athenaBasket_totalSavingsPrice', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/fr.myprotein.com\/' + $('.athenaBasket_removeItem-discount', responseHTML).attr('href'),\r\n            method: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"myproteinus": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('.responsiveSubMenu_sessionSettingsText').eq(0).text().replace(\/([-.a-z])\/g, \"\").trim();\r\n        if (selector === \"EUR\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"GBP\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (selector === \"EUR\") {\r\n            locale = localeMapping['FR'];\r\n            currency = \"EUR\";\r\n        }\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var clearUrlInput = $('#___clearUrl');\r\n        var applyUrl = this.isDESite() ? 'https:\/\/de.myprotein.com\/my.basket' : 'https:\/\/www.myprotein.com\/my.basket';\r\n        var clearUrl = this.isDESite() ? 'https:\/\/de.myprotein.com\/my.basket' : 'https:\/\/www.myprotein.com\/my.basket';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        if (!clearUrlInput.length) {\r\n            clearUrlInput = document.createElement('input');\r\n            clearUrlInput.id = '___clearUrl';\r\n            clearUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n            clearUrlInput = $('#___clearUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        clearUrlInput.attr('value', clearUrl);\r\n    },\r\n    isDESite: function () {\r\n        return location.href.match('de.myprotein.com');\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.athenaBasket_totalValue').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.athenaBasket_totalValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var discount = oldTotal - newTotal;\r\n        var savings = this.isDESite() ? discount \/ 100 : discount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"myron": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.promo.you-save', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#voucherCode').val(bestCode);\r\n            $('#voucherCode_btn').click();\r\n        }\r\n    }\r\n};",
	"mysensualsecrets": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"mytheresade": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount-block .price:contains(\"- \u20ac\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('.giftcard_code').val(bestCode);\r\n      $('button[onclick=\"giftcardForm.submit()\"]').click();\r\n    }\r\n  }\r\n};",
	"mytoys": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        couponCode: code,\r\n        errors: [],\r\n        messages: [],\r\n        type: 'coupon'\r\n      };\r\n\r\n      return JSON.stringify(data);\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.totalsum').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = response.order.basketTotal.value.value;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"myvega": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"myvitaminsde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat($('.responsiveBasket_discountValue', $.parseHTML(response)).text().replace(\/[^0-9|.]\/g, '') \/ 100);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.replace('https:\/\/www.myvitamins.de\/my.basket');\r\n    }\r\n};",
	"na-kd": "var ExternalProvider = {\r\n\tparse: function (response) {\r\n\t\tvar savings = response.discountCodeSavings;\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: savings > 0,\r\n\t\t\tsavings: isNaN(savings) ? 0.00 : savings\r\n\t\t};\r\n\t},\r\n\r\n\tcomplete: function (bestCode) {\r\n\t\tif (bestCode) location.reload();\r\n\t}\r\n};",
	"namecheap": "var ExternalProvider = {\r\n\r\n    _originalTotal: 0,\r\n\r\n    init: function () {\r\n        this._originalTotal = parseFloat($('.sticky .cart li.subtotal').text().replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n\r\n        var couponData = {};\r\n\r\n        var formInputs = [].slice.call($('#aspnetForm input, #aspnetForm select'));\r\n\r\n        formInputs.forEach(function (e) {\r\n            $(e).attr('name') !== undefined ? (couponData[$(e).attr('name')] = $(e).val()) : false;\r\n        });\r\n\r\n\r\n        couponData[\"ctl00$ctl00$ctl00$ctl00$base_content$web_base_content$home_content$page_content_left$cartPromoTextBox\"] = code;\r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return couponData;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var newTotal = parseFloat($('.sticky .cart li.subtotal', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var discount = this._originalTotal - newTotal;\r\n\r\n        if (discount > 0) {\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n};",
	"nastygal": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.order-total:eq(0)').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.order-total:eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if (oldTotal > newTotal) {\r\n            savings = parseFloat($('.order-discount td:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_billing_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"nationalbusinessfurniture": "var ExternalProvider = {\r\n  prepareUrl: function () {\r\n    $('body').attr('token', 'Bearer ' + localStorage.accessToken);\r\n  },\r\n  parse: function (response) {\r\n    var savings = response.amount;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#tst_reviewAndPayPage_promoCode').val(bestCode);\r\n      $('.btn.btn-secondary.btn-navy').click();\r\n    };\r\n  }\r\n};\r\nExternalProvider.prepareUrl();",
	"nationalgeographic": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            $('#checkout_reduction_code').val(code);\r\n\r\n            return $('#checkout_reduction_code').closest('form').serializeArray();\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span.reduction-code__text:contains(\"-\")', responseHTML).text().split('-')[1].replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"pens": "var ExternalProvider = {\r\n  oldTotal: 0,\r\n  __prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpResultUrl');\r\n    var applyUrl = window.location.href;\r\n    \r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpResultUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpResultUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function () {\r\n    var self = this;\r\n    var savings = 0;\r\n    var requestId = $('#___jpResultUrl').val().match('_requestid=(.*)')[1];\r\n\r\n    $.ajax({\r\n      url: 'https:\/\/www.pens.com\/site\/common\/promoCodeFlyoutSuccessful.jsp?context=coupon&amp;applyCouponFailed=false&_requestid=' + requestId,\r\n      mode: 'GET',\r\n      async: false\r\n    });\r\n\r\n    $.ajax({\r\n      url: $('#___jpResultUrl').val(),\r\n      mode: 'GET',\r\n      async: false,\r\n      success: function (result) {\r\n        var responseHTML = $.parseHTML(result);\r\n        self.oldTotal = parseFloat($('.totalCol strong').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.totalCol strong', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        savings = self.oldTotal - newTotal;\r\n      }\r\n    });\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"nationalpen": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var uID = $('input[name=\"UID\"]').val();\r\n        var applyUrlInput = $('#___jpApplyUrl');\r\n        var applyUrl = 'https:\/\/www.nationalpen.co.uk\/uk\/validateVoucher.asp?UID=' + uID + '';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpApplyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                tracker: '',\r\n                taken: '0',\r\n                ItemID: '',\r\n                voucherCode: code\r\n            };\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"- \u00a3\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"voucherCode\"]').val(bestCode);\r\n            $('button:contains(\"Apply Voucher\")').click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"nativeremedies": "var ExternalProvider = {\r\n    init: function() {\r\n        this.priceSelector = \"#shopping-cart-totals-table tfoot tr:first .a-right:last\";\r\n        this.initialPrice = this.getCurrentPrice();\r\n    },\r\n    cleanPrice: function(price) {\r\n        return parseFloat(price.trim().replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n    getCurrentPrice: function(context) {\r\n        return this.cleanPrice($(this.priceSelector, context || document).last().text());\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newPrice = this.getCurrentPrice(responseHTML);\r\n        var savings = this.initialPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"natori": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode){\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"naturalcollection": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"naturalhealthyconcepts": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    if (action === 'injectCoupon') {\r\n      $('#promocode').val(code);\r\n      $('.cart-promocode-form-summary-button-apply-promocode-nhc').click();\r\n    } else {\r\n      $('.cart-promocode-list-item-container a')[0].click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    setTimeout(function () {\r\n      var maxWait = 500;\r\n      var waited = 0;\r\n      var selector = $('.cart-promocode-list-item-container a').length;\r\n      var waitForClose = setInterval(function () {\r\n        var confirmed = step === 'injectCoupon' ? selector : !selector;\r\n\r\n        if ((confirmed) || (waited > maxWait)) {\r\n          clearInterval(waitForClose);\r\n          setTimeout(function () {\r\n            next();\r\n          }, 200);\r\n        }\r\n\r\n        waited++;\r\n      }, 10);\r\n    }, 50);\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.order-wizard-cart-promocode-grid-right').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promocode').val(bestCode);\r\n      $('.cart-promocode-form-summary-button-apply-promocode-nhc').click();\r\n    }\r\n  }\r\n};",
	"naturalizer": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0.00;\r\n\r\n        savings = parseFloat($('.right.discount-text', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"naturalizerca": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount-text', responseHTML).text().replace(\/[^.0-9|]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCartPage: function () {\r\n        return \/Cart\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (!this.isCartPage()) {\r\n                $('#promoCodeInput').val(bestCode);\r\n                $('.js-submit-promo-btn').click();\r\n            } else {\r\n                $('#PromoCode').val(bestCode);\r\n                $('#submitPromoCode')[0].click();\r\n            }\r\n\r\n        }\r\n    }\r\n};",
	"naturals-inc": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let newTotal = parseFloat($('.order-summary__emphasis').eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n    let oldTotal = parseFloat($('.order-summary__emphasis', responseHTML).eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n    let savings = newTotal - oldTotal;\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"naturalvitality": "var ExternalProvider = {\r\n    cartParams: {},\r\n    __prepareUrl: function () {\r\n        var s = document.createElement('script');\r\n        var code;\r\n        var page = location.href.match('cart') ? 'cart' : 'checkout';\r\n        code = \"jQuery('body').attr('cartParams', JSON.stringify(wc_\" + page + '_params));';\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n        $('#temp').remove();\r\n        this.cartParams = JSON.parse($('body').attr('cartParams'));\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            return {\r\n                security: this.cartParams.apply_coupon_nonce,\r\n                coupon_code: code\r\n            };\r\n        } else if (type === 'clearCouponUrl') {\r\n            return {\r\n                security: this.cartParams.remove_coupon_nonce,\r\n                coupon: code\r\n            };\r\n        }\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.woocommerce-Price-amount.amount').eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.order-total .woocommerce-Price-amount.amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal.toFixed(2) - newTotal;\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider.__prepareUrl();",
	"naturzeit": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"nautica": "var ExternalProvider = {\r\n    prepareUrl: function () {\r\n        var Ids = $('#cart-items-form').attr('action');\r\n        var clearUrlInput = $('#___jpCouponUrl');\r\n\r\n        if (Ids === undefined) {\r\n            Ids = 'https:\/\/www.nautica.com\/on\/demandware.store\/Sites-nau-Site\/default\/Cart-AddCoupon?couponCode=CLAIMCODE&format=ajax';\r\n        }\r\n\r\n        if (!clearUrlInput.length) {\r\n            clearUrlInput = document.createElement('input');\r\n            clearUrlInput.id = '___jpCouponUrl';\r\n            clearUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n            clearUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        clearUrlInput.attr('value', Ids);\r\n    },\r\n    parse: function (response, a, $b, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var validCode = $('.cartcoupon.clearfix .value', responseHTML).text().trim() === code;\r\n        var savings = validCode ? parseFloat($('.order-discount td:nth-child(2)', responseHTML).text().replace(\/[^0-9.]\/g, '')) : 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode && !($('#cart-items-form').length < 1)) {\r\n            $('input[name=\"dwfrm_cart_couponCode\"]').val(bestCode);\r\n            $('#add-coupon').click();\r\n        } else {\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\nExternalProvider.prepareUrl();",
	"nearlynatural": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"neat": "var ExternalProvider = {\r\n    userId: '',\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"userid\", window.checkoutConfig.quoteData.entity_id);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('userid');\r\n\r\n        this.userId = value;\r\n        $('body').removeAttr(name);\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.totals.base_discount_amount.toString().replace(\/[^0-9|.]\/g, ''));\r\n     \r\n         return {\r\n             success: savings > 0,\r\n             savings: isNaN(savings) ? 0.00 : savings\r\n         };\r\n    },  \r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discount-code, #coupon_code').val(bestCode);\r\n            var s = document.createElement('script');\r\n            s.type = 'text\/javascript';\r\n            var code = `jQuery('#block-discount-heading').click();jQuery('#discount-code').trigger('change');jQuery('button[value=\"Apply Discount\"]').click();`;\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n };\r\n \r\n ExternalProvider._prepareUrl();",
	"neckermann": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = 0;\r\n    var existingSaving = $(\"div[class*='BasketOverview__savings'] div[class*='BasketOverview__amount']\");\r\n\r\n    if (existingSaving.length !== 0) {\r\n      var oldTotal = parseFloat(existingSaving.text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n      var newTotal = parseFloat(response.basket.savings.replace(\/,\/, '.'));\r\n\r\n      savings = newTotal - oldTotal;\r\n    } else {\r\n      savings = parseFloat(response.basket.savings.replace(\/,\/, '.'));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"neimanmarcus": "var ExternalProvider = {\r\n    _numberCleanRegexp: \/[^\\d.\\-]\/g,\r\n    _sortDesc: function (a, b) {\r\n        return b - a;\r\n    },\r\n    _parseNodeFloat: function (node) {\r\n        return parseFloat(node.innerText.replace(ExternalProvider._numberCleanRegexp, '')) || 0;\r\n    },\r\n    parse: function (response) {\r\n        var fail = {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n        var $response = $.parseHTML(response);\r\n        if ($('.BadPromoCode.error', $response).text().length) {\r\n            return fail;\r\n        }\r\n        var savings = $('.promo.amt', $response)\r\n            .toArray()\r\n            .map(this._parseNodeFloat)\r\n            .map(function (num) {\r\n                return num * -1;\r\n            })\r\n            .sort(this._sortDesc);\r\n\r\n        if (!savings.length || savings[0] <= 0) {\r\n            return fail;\r\n        }\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"nestbedding": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"nestlearning": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"neutrogena": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount td:eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"newbalance": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount .total-value', responseHTML).eq(0).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"newchic": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var success = response.discountControllerHtml.indexOf('<input type=\"hidden\" value=\"' + code + '\" id=\"couponText\"\/>') >= 0\r\n            && !response.hasOwnProperty('noDiscount');\r\n        var savings = parseFloat(response.discountList.coupon_discount.discount);\r\n\r\n        return {\r\n            success: success,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        location.reload();\r\n    }\r\n};",
	"newchic.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var success = !response.hasOwnProperty('noDiscount') && response.message !== 'Invalid Coupon Code';\r\n        var savings = parseFloat(response.discountList.coupon_discount.discount);\r\n\r\n        return {\r\n            success: success,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        location.reload();\r\n    }\r\n};",
	"newegg": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#PromotionCode').val(bestCode);\r\n      $('.code-group li .button-tertiary .button-icon-left').click();\r\n    }\r\n  }\r\n};",
	"neweggca": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        function serializeObject(a) {\r\n            var o = {};\r\n\r\n            $.each(a, function () {\r\n                o[this.name] = this.value || '';\r\n            });\r\n\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('form[name=\"form1\"]').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        data.PromotionCode = code;\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data.SubmitTypeValue = 'PROMOTCODESUBMIT';\r\n        } else {\r\n            data.SubmitTypeValue = 'CLEARPROMOTCODE';\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"newfrog": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings;\r\n\r\n        if (Object.prototype.hasOwnProperty.call(response.content, 'code_saving')) {\r\n            savings = response.content.code_saving.replace(\/[^0-9.]\/g, '');\r\n        }\r\n\r\n\r\n        return {\r\n            success: savings > 0.00,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"coupon\"]').val(bestCode);\r\n            $('#apply_coupon').click();\r\n        }\r\n    }\r\n};",
	"newfrog.mobile": "var ExternalProvider = {\r\n    $: window.$piggyJq,\r\n\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = this.$('#__jpApplyCouponUrl');\r\n        var clearUrlInput = this.$('#__jpClearCouponUrl');\r\n        var resultUrlInput = this.$('#__jpResultUrl');\r\n        var orderId = this.retrieveWindowVariable('orderID', 'checkoutConfig.quoteData.entity_id');\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__jpApplyCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = this.$('#__jpApplyCouponUrl');\r\n        }\r\n\r\n        if (!clearUrlInput.length) {\r\n            clearUrlInput = document.createElement('input');\r\n            clearUrlInput.id = '__jpClearCouponUrl';\r\n            clearUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n            clearUrlInput = this.$('#__jpClearCouponUrl');\r\n        }\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '__jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = this.$('#__jpResultUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', '\/rest\/m_newfrog\/V1\/guest-carts\/' + orderId + '\/coupons\/CLAIMCODE');\r\n        clearUrlInput.attr('value', '\/rest\/m_newfrog\/V1\/guest-carts\/' + orderId + '\/coupons');\r\n        resultUrlInput.attr('value', '\/rest\/m_newfrog\/V1\/guest-carts\/' + orderId + '\/payment-information');\r\n    },\r\n\r\n    retrieveWindowVariable: function (name, variable) {\r\n        var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\r\n        var script = document.createElement('script');\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = this.$('body').attr('tmp_' + name);\r\n\r\n        this.$('body').removeAttr('tmp_' + name);\r\n\r\n        return value;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var total = response.totals || false;\r\n\r\n        return {\r\n            success: total && total.coupon_code.toLowerCase() === code.toLowerCase(),\r\n            savings: Math.abs(total.discount_amount) || 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"newlook": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var url = window.location.pathname;\r\n\r\n        if (isEUR = url.match(\/(de|fr)\/g)) {\r\n            currency = 'EUR';\r\n            locale = localeMapping[isEUR.shift().toUpperCase()];\r\n        } else if (url.match(\/uk\/g)) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('#bag-footer__promo-code').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#bag-footer__promo-code').trigger('input').trigger('change');\r\n            $('button:contains(\"Apply code\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('.coupon-remove').click()\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if ($('.coupon-remove').get(0) || counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 300);\r\n    },\r\n    parse: function () {\r\n        var savings = parseFloat($('.order-summary__row.order-summary__row--promo').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#bag-footer__promo-code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#bag-footer__promo-code').trigger('input').trigger('change');\r\n            $('button:contains(\"Apply code\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        }\r\n    }\r\n};",
	"newrepublic": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = $('.total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"newvitality": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        var cartqty = jQuery('.quantity input').attr('name');\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"security\", wc_cart_params.remove_coupon_nonce);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var security = $('body').attr('security');\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n\r\n                coupon_code: code,\r\n                apply_coupon: 'Apply',\r\n                _wpnonce: $('_wpnonce').val(),\r\n                _wp_http_referer: '\/cart\/'\r\n\r\n            };\r\n            data[cartqty] = $('.quantity input').val();\r\n        }\r\n\r\n        if (type === 'clearCouponUrl') {\r\n            data = {\r\n                security: security,\r\n                coupon: code\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.saving_amt span.woocommerce-Price-amount.amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"newyorkandcompany": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var clearCouponUrlInput = $('#___jpClearCouponUrl');\r\n        var applyUrl = this.isCartPage() ? 'https:\/\/www.nyandcompany.com\/cart\/gadgets\/?_DARGS=\/cart\/gadgets\/cartCouponCode.jsp'\r\n            : 'https:\/\/www.nyandcompany.com\/checkout\/gadgets\/checkoutCouponErrorMessage.jsp?_DARGS=\/checkout\/gadgets\/billingForm.jsp.apply_coupon';\r\n        var resultUrl = this.isCartPage() ? 'https:\/\/www.nyandcompany.com\/cart\/cart.jsp' : 'https:\/\/www.nyandcompany.com\/checkout\/checkoutOrderSummary.jsp';\r\n        var clearCouponUrl = this.isCartPage() ? 'https:\/\/www.nyandcompany.com\/cart\/cart.jsp?_DARGS=\/cart\/gadgets\/promotionCodeDisplay.jsp.cartRemoveCouponForm_1'\r\n            : 'https:\/\/www.nyandcompany.com\/checkout\/gadgets\/checkoutCouponErrorMessage.jsp?_DARGS=\/checkout\/gadgets\/getAvailableCoupons.jsp.billingRemoveCouponForm_1';\r\n\r\n        \/\/ Append apply url input\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        \/\/ Append result url input\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        \/\/ Append result url input\r\n        if (!clearCouponUrlInput.length) {\r\n            clearCouponUrlInput = document.createElement('input');\r\n            clearCouponUrlInput.id = '___jpClearCouponUrl';\r\n            clearCouponUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearCouponUrlInput);\r\n            clearCouponUrlInput = $('#___jpClearCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        resultUrlInput.attr('value', resultUrl);\r\n        clearCouponUrlInput.attr('value', clearCouponUrl);\r\n    },\r\n    isCartPage: function () {\r\n        return !\/checkout\/.test(location.href);\r\n    },\r\n    prepare: function (type, code) {\r\n        var clearData = {};\r\n\r\n        function serializeObject(a) {\r\n            var o = {};\r\n\r\n            $.each(a, function () {\r\n                o[this.name] = this.value || '';\r\n            });\r\n\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = this.isCartPage() ? $('#addCartCouponForm').serializeArray() : $('#billingAddcheckoutCouponForm').serializeArray();\r\n        var data = serializeObject(formDataArray);\r\n\r\n        \/\/ If data needs to be prepared\r\n        if (type === 'applyCouponUrl') {\r\n            if (this.isCartPage()) {\r\n                data.code = code;\r\n            } else {\r\n                data['\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode'] = code;\r\n            }\r\n\r\n            return data;\r\n        } else if (type === 'clearCouponUrl') {\r\n            if (this.isCartPage()) {\r\n                clearData._dyncharset = $(\"input[name='_dyncharset']\").val();\r\n                clearData._dynSessConf = $(\"input[name='_dynSessConf']\").val();\r\n                clearData['\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponSuccessURL'] = '\/cart\/cart.jsp';\r\n                clearData['_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponSuccessURL'] = ' ';\r\n                clearData['\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponErrorURL'] = '\/cart\/cart.jsp';\r\n                clearData['_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponErrorURL'] = ' ';\r\n                clearData['\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode'] = code;\r\n                clearData['_D:\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode'] = ' ';\r\n                clearData['\/atg\/commerce\/promotion\/CouponFormHandler.cart'] = true;\r\n                clearData['_D:\/atg\/commerce\/promotion\/CouponFormHandler.cart'] = '';\r\n                clearData['\/atg\/commerce\/promotion\/CouponFormHandler.removeCoupon'] = 'Submit';\r\n                clearData['_D:\/atg\/commerce\/promotion\/CouponFormHandler.removeCoupon'] = '';\r\n                clearData._DARGS = '\/cart\/gadgets\/promotionCodeDisplay.jsp.cartRemoveCouponForm_1';\r\n            } else {\r\n                clearData._dyncharset = $(\"input[name='_dyncharset']\").val();\r\n                clearData._dynSessConf = $(\"input[name='_dynSessConf']\").val();\r\n                clearData['\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponSuccessURL'] = '\/checkout\/gadgets\/checkoutCouponErrorMessage.jsp';\r\n                clearData['_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponSuccessURL'] = ' ';\r\n                clearData['\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponErrorURL'] = '\/checkout\/gadgets\/checkoutCouponErrorMessage.jsp';\r\n                clearData['_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCouponErrorURL'] = ' ';\r\n                clearData['\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode'] = code;\r\n                clearData['_D:\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode'] = ' ';\r\n                clearData['\/atg\/commerce\/promotion\/CouponFormHandler.removeCoupon'] = 'Submit';\r\n                clearData['_D:\/atg\/commerce\/promotion\/CouponFormHandler.removeCoupon'] = '';\r\n                clearData._DARGS = '\/cart\/gadgets\/promotionCodeDisplay.jsp.cartRemoveCouponForm_1';\r\n            }\r\n\r\n            return clearData;\r\n        }\r\n\r\n        return {};\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = this.isCartPage() ? parseFloat($('.floatright:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''))\r\n            : parseFloat($('.t-cell.line-value.discounted', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"newyorkpass": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var formData = this.getFormData();\r\n\r\n        formData.ctl00$MainContentArea$refSubmitted = code;\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            return formData;\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var codeFound = $('input#refSubmitted', responseHTML).val().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound) {\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('tr:last-child td.totals b').text().replace(\/[^0-9|.]\/g, '')) * 100;\r\n            var newPrice = Number($('tr:last-child td.totals b', responseHTML).text().replace(\/[^0-9|.]\/g, '')) * 100;\r\n            var savings = (oldPrice - newPrice) \/ 100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n\r\n            return result;\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        var formData = this.getFormData();\r\n\r\n        formData.ctl00$MainContentArea$refSubmitted = bestCode;\r\n        $.post('https:\/\/www.newyorkpass.com\/En\/prices\/', formData, function () {\r\n            location.reload();\r\n        });\r\n    },\r\n    getFormData: function () {\r\n        var formData = {};\r\n\r\n        var formInputs = [].slice.call($('#pageForm input:not([type=\"radio\"]), #pageForm select, #pageForm input[type=\"radio\"]:checked'));\r\n\r\n        formInputs.forEach(function (e) {\r\n            formData[$(e).attr('name')] = $(e).val();\r\n        });\r\n\r\n        formData.__EVENTTARGET = 'ctl00$MainContentArea$OfferCodeSubmit';\r\n\r\n        return formData;\r\n    }\r\n};",
	"newyorkpass.mobile": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var formData = this.getFormData();\r\n\r\n        formData.ctl00$MainContentArea$refSubmitted = code;\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            return formData;\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var codeFound = $('input#refSubmitted', responseHTML).val().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound) {\r\n            var adultPricesDiscounted = [];\r\n            var childPricesDiscounted = [];\r\n\r\n            var adultPricesNormal = [];\r\n            var childPricesNormal = [];\r\n\r\n            $('.productPriceShowHide tr:not(:first-child):not(:last-child)', responseHTML).each(function (i) {\r\n                var $tr = $(this);\r\n                var fullPrice = parseFloat($tr.children(':nth-child(2)').text().replace(\/[^0-9|.]\/g, ''));\r\n                var discount = parseFloat($tr.find(':nth-child(3) span').text().replace(\/[^0-9|.]\/g, ''));\r\n                var discountPrice = fullPrice - (isNaN(discount) ? 0 : discount);\r\n\r\n                if (i % 2 !== 0) {\r\n                    childPricesNormal.push(fullPrice);\r\n                    childPricesDiscounted.push(discountPrice);\r\n                } else {\r\n                    adultPricesNormal.push(fullPrice);\r\n                    adultPricesDiscounted.push(discountPrice);\r\n                }\r\n            });\r\n\r\n            var adultPrice;\r\n            var childPrice;\r\n            var adSave;\r\n            var adultFullPrice;\r\n            var childFullPrice;\r\n            var adultSaving;\r\n            var childSaving;\r\n\r\n            var adultPasses = parseInt($('#adultPassesSelect').text(), 10);\r\n            var childPasses = parseInt($('#childPassesSelect').text(), 10);\r\n            var duration = $('#passDurationSelect').prop('value');\r\n\r\n            adultPrice = parseFloat(adultPricesDiscounted[duration] * adultPasses);\r\n            childPrice = parseFloat(childPricesDiscounted[duration] * childPasses);\r\n\r\n            adultFullPrice = parseFloat(adultPricesNormal[duration] * adultPasses);\r\n            childFullPrice = parseFloat(childPricesNormal[duration] * childPasses);\r\n\r\n            adultSaving = adultFullPrice - adultPrice;\r\n            childSaving = childFullPrice - childPrice;\r\n\r\n            adSave = parseFloat(adultSaving + childSaving).toFixed(2);\r\n\r\n            if (adSave > 0) {\r\n                result = {\r\n                    success: true,\r\n                    savings: adSave\r\n                };\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        var formData = this.getFormData();\r\n\r\n        formData.__EVENTTARGET = 'ctl00$MainContentArea$nextBttn';\r\n        formData.ctl00$MainContentArea$refSubmitted = bestCode;\r\n        $.post('https:\/\/www.newyorkpass.com\/En\/order-products\/', formData, function () {\r\n            location.reload();\r\n        });\r\n    },\r\n    getFormData: function () {\r\n        var formData = {};\r\n\r\n        var formInputs = [].slice.call($('#pageForm input:not([type=\"radio\"]), #pageForm select, #pageForm input[type=\"radio\"]:checked'));\r\n\r\n        formInputs.forEach(function (e) {\r\n            formData[$(e).attr('name')] = $(e).val();\r\n        });\r\n\r\n        formData.__EVENTTARGET = 'ctl00$MainContentArea$OfferCodeSubmit';\r\n\r\n        return formData;\r\n    }\r\n};",
	"nfleuropeshopde": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = 'USD';\r\n        var selector = $('#orderSummaryContainer .summaryTotals .summaryLineRight:last').text();\r\n\r\n        if (selector.includes('\u20ac')) {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        } else if (selector.includes('\u00a3')) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"nflshop": "var ExternalProvider = {\r\n\r\n   prepare: function (type, code) {\r\n\r\n        var data = {};\r\n\r\n        data['codeEntered'] = code;\r\n        data['rand'] = Math.floor(Math.random() * 10001)\r\n        data['shipTotal'] = $('#checkoutShippingTotalValue').text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return data;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.CouponAmount;\r\n        \r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n\r\n        \/\/ Creating the final GET request\r\n        $.get('https:\/\/www.nflshop.com\/coupon\/check?codeEntered=' +bestCode+ '&rand=' +Math.floor(Math.random() * 10001)+ '&shipTotal=' +$('#checkoutShippingTotalValue').text().replace(\/[^0-9|\\.]\/g, ''), function(){\r\n            location.reload();\r\n        })\r\n    }\r\n}",
	"nflshop.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n        if(response.CartData.OrderTotals){\r\n            var savings = response.CartData.OrderTotals.PromotionApplied;\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"nike": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (action === 'injectCoupon') {\r\n      if (this.isCheckoutPage()) {\r\n        $('#prepaidCard').click();\r\n        $('input[name=\"promoCode\"]').val('');\r\n        $('input[name=\"promoCode\"]').val(code);\r\n        $('input[name=\"promoCode\"]').get(0).dispatchEvent(changeEvent);\r\n        $('button:contains(\"APPLY\"):eq(1)').removeAttr('disabled');\r\n        $('button:contains(\"APPLY\"):eq(1)').click();\r\n      } else {\r\n        $('a:contains(\"Do you\")')[0].click();\r\n        $('input[name=\"promotionCode\"]').val('');\r\n        $('input[name=\"promotionCode\"]').val(code);\r\n        $('input[name=\"promotionCode\"]').get(0).dispatchEvent(changeEvent);\r\n        $('button:contains(\"Apply\")').removeAttr('disabled');\r\n        $('button:contains(\"Apply\")').click();\r\n      }\r\n    } else if (action === 'removeInjectedCoupon') {\r\n      if (this.isCheckoutPage()) {\r\n        $('.custom-x-button').click();\r\n      } else {\r\n        $('.css-1d3gj1t').click();\r\n      }\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 2000);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  isCheckoutPage: function () {\r\n    return \/checkout\/.test(location.href);\r\n  },\r\n  parse: function (response) {\r\n    var savings = 0.00;\r\n\r\n    if (this.isCheckoutPage()) {\r\n      savings = parseFloat($('.discountTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      savings = parseFloat($('div[data-automation=\"summary-promo-discount\"]').text().replace(\/[^0-9|.]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      var changeEvent = new Event('change', {\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n\r\n      if (this.isCheckoutPage()) {\r\n        $('#prepaidCard').click();\r\n        $('input[name=\"promoCode\"]').val('');\r\n        $('input[name=\"promoCode\"]').val(bestCode);\r\n        $('input[name=\"promoCode\"]').get(0).dispatchEvent(changeEvent);\r\n        $('button:contains(\"APPLY\"):eq(1)').removeAttr('disabled');\r\n        $('button:contains(\"APPLY\"):eq(1)').click();\r\n      } else {\r\n        $('a:contains(\"Do you\")')[0].click();\r\n        $('input[name=\"promotionCode\"]').val('');\r\n        $('input[name=\"promotionCode\"]').val(bestCode);\r\n        $('input[name=\"promotionCode\"]').get(0).dispatchEvent(changeEvent);\r\n        $('button:contains(\"Apply\")').removeAttr('disabled');\r\n        $('button:contains(\"Apply\")').click();\r\n      }\r\n    }\r\n  }\r\n};",
	"ninashoes": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ninewest": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var s = document.createElement('script');\r\n\r\n        s.type = 'text\/javascript';\r\n\r\n        var code = \"document.querySelector('body').setAttribute('params', window.checkoutConfig.quoteData.entity_id);\";\r\n\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n        s.remove();\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.totals.base_discount_amount * -1;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('body').removeAttr('params');\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"nisbets": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount:contains(\"\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#js-voucher-code-text').val(bestCode);\r\n      $('#js-voucher-apply-btn').click();\r\n    }\r\n  }\r\n};",
	"nisbetsde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.col-xs-4.col-sm-3.col-md-4.discount', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#js-voucher-code-text').val(bestCode);\r\n            $('#js-voucher-apply-btn').click();\r\n        }\r\n    }\r\n};",
	"nisbetsfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.col-xs-4.col-sm-3.col-md-4.discount', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#js-voucher-code-text').val(bestCode);\r\n      $('#js-voucher-apply-btn').click();\r\n    }\r\n  }\r\n};",
	"nisolo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"noco": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.checkoutSideBarHtml);\r\n    var savings = parseFloat($('.right_part:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"nolo": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        this.savings = parseFloat($('.checkout-total-default .cart-totals-price .price', responseHTML).text().replace(this.regularExpression, ''));\r\n\r\n        if (this.savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: this.savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: this.savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        $('#coupon_code').val(bestCode);\r\n        $('.btn-apply-coupon').click();\r\n    },\r\n    savings: 0.00,\r\n    regularExpression: \/[^0-9|.]\/g\r\n};",
	"nordgreen": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('#in-context-paypal-metadata').attr('data-currency');\r\n\r\n        if (selector === 'EUR') {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === 'USD') {\r\n            currency = 'USD';\r\n            locale = localeMapping['US'];\r\n        }\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"nordgreende": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"- \u20ac\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"nordgreenuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"nordstrom": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n        if (type === \"applyCouponUrl\") {\r\n            return JSON.stringify({\"promocode\":code});  \r\n        }\r\n        \r\n        return null;\r\n    },\r\n    parse: function(response, status, $xhr, code)\r\n    {   \r\n        try\r\n        {   \r\n            var result = {\r\n                            success: false,\r\n                            savings: 0.00\r\n                        };\r\n                                     \r\n            if (response !== 'undefined' && response.hasOwnProperty('Order')\r\n                && response.Order.hasOwnProperty('PromotionCode')\r\n                && response.Order.hasOwnProperty('OrderInvoice')\r\n                && response.Order.OrderInvoice.hasOwnProperty('Discount')\r\n                && response.Order.PromotionCode == code) \r\n            {     \r\n                return {\r\n                    success: true,\r\n                    savings:  Number(response.Order.OrderInvoice.Discount.replace(\/[^0-9|\\.]\/g, ''))\r\n                };\r\n            }    \r\n                   \r\n            return result; \r\n                      \r\n        }\r\n        catch(err) {\r\n            return result;\r\n        }                \r\n    },\r\n    complete: function(bestCode, bestSavings)\r\n    {\r\n        location.reload();\r\n    }\r\n}",
	"nordstrom.mobile": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n        if (type === \"applyCouponUrl\") {\r\n            return JSON.stringify({\"promocode\":code});  \r\n        }\r\n        \r\n        return null;\r\n    },\r\n    parse: function(response, status, $xhr, code)\r\n    {   \r\n        try\r\n        {   \r\n            var result = {\r\n                            success: false,\r\n                            savings: 0.00\r\n                        };\r\n                                     \r\n            if (response !== 'undefined' && response.hasOwnProperty('Order')\r\n                && response.Order.hasOwnProperty('PromotionCode')\r\n                && response.Order.hasOwnProperty('OrderInvoice')\r\n                && response.Order.OrderInvoice.hasOwnProperty('Discount')\r\n                && response.Order.PromotionCode == code) \r\n            {     \r\n                return {\r\n                    success: true,\r\n                    savings:  Number(response.Order.OrderInvoice.Discount.replace(\/[^0-9|\\.]\/g, ''))\r\n                };\r\n            }    \r\n                   \r\n            return result; \r\n                      \r\n        }\r\n        catch(err) {\r\n         console.log(\"ERROR:\"+err);\r\n            return result;\r\n        }                \r\n    },\r\n    complete: function(bestCode, bestSavings)\r\n    {\r\n        location.reload();\r\n    }\r\n}",
	"nordstromrack": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#total-discount', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.standard-form__sub-content input[name=\"code\"]').val(bestCode);\r\n            $('.standard-form__sub-content button').click();\r\n        }\r\n    }\r\n};",
	"nordvpn": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldPrice = $('.Text.lead span:contains(\"$\")').text().replace(\/[^0-9.]\/g, '');\r\n    var newPrice = response.cost;\r\n    var savings = oldPrice - newPrice;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      var clickEvent = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: false,\r\n        focus: true\r\n      });\r\n\r\n      $('a[class=\"Link micro Link--neutral Link--underline\"]').get(0).dispatchEvent(clickEvent);\r\n      $('#order_credit-card-form_coupon_field').prop('value', bestCode);\r\n\r\n      var changeEvent = new Event('change', {\r\n        bubbles: true,\r\n        cancelable: false\r\n      });\r\n      $('#order_credit-card-form_coupon_field').get(0).dispatchEvent(changeEvent);\r\n      $('.Button--disabled').removeClass('Button--disabled').removeAttr('disabled').click();\r\n\r\n      var clickEvent = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: false,\r\n        focus: true\r\n      });\r\n\r\n      $('#credit-cards-form .Button--blue').get(0).dispatchEvent(clickEvent);\r\n    }\r\n  },\r\n  dispatchEvent: function (element, event) {\r\n    var eventHandler = document.createEvent('HTMLEvents');\r\n\r\n    eventHandler.initEvent(event, true, true);\r\n    element.get(0).dispatchEvent(eventHandler);\r\n\r\n    return this;\r\n  }\r\n};",
	"norma24": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.item--price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"northerntool": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#OrderTotalDetail_keycodeDiscount_2', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#keyCode').val(bestCode);\r\n            document.getElementById('payType').value = 'applykeycode';\r\n            document.getElementById('paymentform').submit();\r\n        }\r\n    }\r\n};",
	"northerntool.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0.00;\r\n\r\n        if (response.summary.promos) {\r\n            var promos = response.summary.promos;\r\n\r\n            for (var i = 0, len = promos.length; i < len; i++) {\r\n                savings += parseFloat(promos[i].value);\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"notebooksbilliger": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('#coupon_code').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#coupon_code').trigger('input').trigger('change');\r\n      $('#coupon_button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else {\r\n      $('#coupon_clear').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if (step === 'injectCoupon') {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = $('#coupon_message_box').is(':visible');\r\n          \r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 200);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 40);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('#ot_coupon_total .total_value:contains(\"-\")').text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"notino": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.product-item.insurance h2 .price:eq(1)', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discount_code').val(bestCode);\r\n            $('#discount_submit').click();\r\n        }\r\n    }\r\n};",
	"notonthehighstreet": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"- \u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"novashe": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('#voucher .cart_couponcode_save', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"novatech": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__item-value:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"novica": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = location.href.match('secure2') ? 'https:\/\/secure2.novica.com\/checkout\/' : 'https:\/\/secure1.novica.com\/checkout\/';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var savings = response.TARGETS['ordertotal-codediscount'].CONTENT;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"nu3de": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.totals .sum.float-left .total').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat(response.grandTotal) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"nuance": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n        function serializeObject(a) {\r\n            var o = {};\r\n            $.each(a, function() {\r\n                o[this.name] = this.value || '';\r\n            });\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('form[name=\"ShoppingCartForm\"]').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data['couponCode'] = code;\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('#dr_priceTotal .dr_price.dr_totals').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('#dr_priceTotal .dr_price.dr_totals', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"nume": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"base_discount_amount\":-([0-9|.]+)\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"nunnbush": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0.00;\r\n        var data = {\r\n            checkout: 'checkout',\r\n            'checkout:txtSearchbox': 'Search',\r\n            flash360obj: undefined,\r\n            'checkout:tblCartLines:0:lstQuantity': $('#checkout\\\\:tblCartLines\\\\:0\\\\:lstQuantity').val(),\r\n            'checkout:txtPromoCode': code,\r\n            'checkout:hdnStyleCategory': null,\r\n            'checkout:txtOptIn': $('#checkout\\\\:txtOptIn').val(),\r\n            'javax.faces.ViewState': $('input[name=\"javax.faces.ViewState\"]').val(),\r\n            'javax.faces.source': 'checkout:btnUpdate',\r\n            'javax.faces.partial.event': 'click',\r\n            'javax.faces.partial.execute': 'checkout:btnUpdate checkout:txtPromoCode',\r\n            'javax.faces.partial.render': '@all',\r\n            'javax.faces.behavior.event': 'action',\r\n            'javax.faces.partial.ajax': true,\r\n        }\r\n        $.ajax({\r\n            url: 'https:\/\/www.nunnbush.com\/shop\/shoppingCart.html',\r\n            mode: 'POST',\r\n            data: data,\r\n            success: function (result) {\r\n                savings = parseFloat($('#checkout\\\\:lblPromoAmount', $.parseHTML(result)).text().replace(\/[^0-9|.]\/g, ''));\r\n            },\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            document.getElementById('checkout:txtPromoCode').value = bestCode;\r\n            document.getElementById(\"checkout:btnUpdate\").click();\r\n        }\r\n    }\r\n};",
	"nursingpillow": "var ExternalProvider = {\r\n    \r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var savings = response && response.discount ? parseFloat(response.discount) : 0.00;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomplete: function (bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n}",
	"nuxeuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"nydj": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.PromoCodeInfo.Discount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if(bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"nyxcosmetics": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount td:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"o2": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match('promocodesaving(.*)')[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#code').val(bestCode);\r\n      $('#updateBasket').prop('disabled', false);\r\n      $('#updateBasket').click();\r\n    }\r\n  }\r\n};",
	"oakfurnitureking": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('#shopping-cart-totals-table .price:contains(-)', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestcode) {\r\n    if (bestcode) location.reload();\r\n  }\r\n};",
	"oasap": "var ExternalProvider = {\r\n    discountId: \"\",\r\n    prepare: function (action) {\r\n        if (action !== 'clearCouponUrl') return false;\r\n        var data = {};\r\n        data['deleteDiscount'] = this.discountId;\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        this.discountId = $('input[name=\"deleteDiscount\"]', responseHTML).val();\r\n        var savings = parseFloat($('.cart_couponcode_save', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"oasap.mobile": "var ExternalProvider = {\r\n    discountId: \"\",\r\n    prepare: function (action) {\r\n        if (action !== 'clearCouponUrl') return false;\r\n        var data = {};\r\n        data['deleteDiscount'] = this.discountId;\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('form[name=\"coupon-code\"] di dd', responseHTML).text().replace(\/[$-]\/g, ''));\r\n        var deleteDiscountUrl = $('.ordercon-total a', responseHTML).attr('href');\r\n        if (deleteDiscountUrl) {\r\n            var searchString = deleteDiscountUrl.split('?')[1];\r\n            var urlParams = new URLSearchParams(searchString);\r\n            this.discountId = urlParams.get('deleteDiscount');\r\n        }\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"obide": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.total-amount.online').text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('.total-amount.online', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"ocado": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('#basketSummaryTotal')[0].innerHTML.replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newPrice = parseFloat($('#basketSummaryTotal', responseHTML)[0].innerHTML.replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = parseFloat(oldPrice - newPrice);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountId').val(bestCode);\r\n            $('#voucherCode').click();\r\n        }\r\n    }\r\n};",
	"odabash": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"odlo": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var newCurrency = 'USD';\r\n    var selector = location.pathname.split('\/')[1];\r\n\r\n    if (selector === 'fr') {\r\n      newCurrency = 'EUR';\r\n      locale = localeMapping.FR;\r\n    } else if (selector === 'de') {\r\n      newCurrency = 'EUR';\r\n      locale = localeMapping.DE;\r\n    } else if (selector === 'gb') {\r\n      newCurrency = 'GBP';\r\n      locale = localeMapping.GB;\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.order-value').text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n    var newTotal = parseFloat($('.order-value', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n    var lang = $('input[name=\"lang\"]').val();\r\n\r\n    $.ajax({\r\n      url: 'https:\/\/www.odlo.com\/on\/demandware.store\/Sites-odlo-eu-Site\/' + lang + '\/Cart-SubmitForm',\r\n      type: 'POST',\r\n      data: {\r\n        dwfrm_cart_coupons_i0_deleteCoupon: 'Supprimer',\r\n        dwfrm_cart_updateCart: 'dwfrm_cart_updateCart',\r\n        dwfrm_cart_couponCode: '',\r\n        csrf_token: $('input[name=\"csrf_token\"]').val()\r\n      },\r\n      async: false\r\n    });\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"officedepot": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data.cpnreferrer = 'checkout';\r\n      data.currentStep = 'checkout';\r\n      data.referralCode = code;\r\n      data.checkoutCoupon = true;\r\n      data.creditCardExpMonth = '';\r\n      data.creditCardExpYear = '';\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savings = Math.abs(response.orderSummary.coupon);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"officedesigns": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"officediscount": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.x_ugsDiscount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"officefurniture": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = 'https:\/\/www.officefurniture.com\/shoppingcart.aspx';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                __LASTFOCUS: $('#__LASTFOCUS').val(),\r\n                __EVENTTARGET: 'ctl00$MainContent$Cart$PromoCodeLinkButton',\r\n                __EVENTARGUMENT: $('#__EVENTARGUMENT').val(),\r\n                __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n                __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n                __EVENTVALIDATION: $('#__EVENTVALIDATION').val(),\r\n                ctl00$NavBarSearchForm$DesktopSearchText: $('input[name=\"ctl00$NavBarSearchForm$DesktopSearchText\"]').val(),\r\n                ctl00$NavBarSearchForm$MobileSearchText: $('input[name=\"ctl00$NavBarSearchForm$MobileSearchText\"]').val(),\r\n                ctl00$NavBarSearchForm$TabletSearchText: $('input[name=\"ctl00$NavBarSearchForm$TabletSearchText\"]').val(),\r\n                ctl00$MainContent$Cart$BasketVendorRepeater$ctl01$BasketItemsRepeater$ctl01$OptionsListBox: $('input[name=\"ctl00$MainContent$Cart$BasketVendorRepeater$ctl01$BasketItemsRepeater$ctl01$OptionsListBox\"]').val(),\r\n                ctl00$MainContent$Cart$BasketVendorRepeater$ctl01$BasketItemsRepeater$ctl01$OptionNum: $('input[name=\"ctl00$MainContent$Cart$BasketVendorRepeater$ctl01$BasketItemsRepeater$ctl01$OptionNum\"]').val(),\r\n                ctl00$MainContent$Cart$BasketVendorRepeater$ctl01$BasketItemsRepeater$ctl01$ItemOID: $('input[name=\"ctl00$MainContent$Cart$BasketVendorRepeater$ctl01$BasketItemsRepeater$ctl01$ItemOID\"]').val(),\r\n                ctl00$MainContent$Cart$BasketVendorRepeater$ctl01$BasketItemsRepeater$ctl01$QuantityTextBox: $('input[name=\"ctl00$MainContent$Cart$BasketVendorRepeater$ctl01$BasketItemsRepeater$ctl01$QuantityTextBox\"]').val(),\r\n                ctl00$MainContent$Cart$PromoCodeTextBox: code,\r\n                ctl00$MainContent$CartMobile$BasketVendorRepeater$ctl00$BasketItemsRepeater$ctl00$OptionsListBox: $('#ctl00_MainContent_CartMobile_BasketVendorRepeater_ctl00_BasketItemsRepeater_ctl00_OptionsListBox').find(':selected').val(),\r\n                ctl00$MainContent$CartMobile$BasketVendorRepeater$ctl00$BasketItemsRepeater$ctl00$OptionNum: $('#ctl00_MainContent_CartMobile_BasketVendorRepeater_ctl00_BasketItemsRepeater_ctl00_OptionNum').val(),\r\n                ctl00$MainContent$CartMobile$BasketVendorRepeater$ctl00$BasketItemsRepeater$ctl00$ItemOID: $('#ctl00_MainContent_CartMobile_BasketVendorRepeater_ctl00_BasketItemsRepeater_ctl00_ItemOID').val(),\r\n                ctl00$MainContent$CartMobile$BasketVendorRepeater$ctl00$BasketItemsRepeater$ctl00$QuantityTextBox: $('#ctl00_MainContent_CartMobile_BasketVendorRepeater_ctl00_BasketItemsRepeater_ctl00_QuantityTextBox').val(),\r\n                ctl00$MainContent$CartMobile$PromoCodeTextBox: $('#ctl00_MainContent_CartMobile_PromoCodeTextBox').val()\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#ctl00_MainContent_Cart_PromoLabel', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"officesupply": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.ot_coupon', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ohpacha": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#total_discount', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        var clearUrl = $('.delete_voucher', responseHTML).attr(\"href\");\r\n        $.ajax({\r\n            url: clearUrl,\r\n            type: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"oldnavy": "var ExternalProvider = {\r\n    $: window.$piggyJq || jQuery,\r\n    _prepareSession: function () {\r\n        var sessionObject = this.getCookie('unknownShopperId');\r\n\r\n        sessionObject = sessionObject.replace(\/[^a-zA-Z0-9]+\/gim, '');\r\n\r\n        if (sessionObject) {\r\n            var applyUrlInput = this.$('#__jpDynSessConf');\r\n\r\n            if (!applyUrlInput.length) {\r\n                applyUrlInput = document.createElement('input');\r\n                applyUrlInput.id = '__jpDynSessConf';\r\n                applyUrlInput.style.display = 'none';\r\n                (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n                applyUrlInput = this.$('#__jpDynSessConf');\r\n            }\r\n\r\n            applyUrlInput.attr('value', sessionObject);\r\n        }\r\n    },\r\n    prepare: function (actionType, couponCode) {\r\n        var formData = {};\r\n\r\n        if (actionType === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                op: 'apply',\r\n                path: '\/shoppingBag\/applyPromo',\r\n                value: couponCode\r\n            });\r\n        }\r\n\r\n        if (actionType === 'clearCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                op: 'remove',\r\n                path: '\/shoppingBag\/removePromo\/' + couponCode\r\n            });\r\n        }\r\n\r\n        return JSON.stringify(formData);\r\n    },\r\n    parse: function (response, status, $xhr, couponCode) {\r\n        var appliedPromotion = response.shoppingBag.appliedPromotions;\r\n        var codeFound = false;\r\n        var savings = 0.00;\r\n\r\n        if (Array.isArray(appliedPromotion)) {\r\n            appliedPromotion.forEach(function (code) {\r\n                if (code.code.toLowerCase() === couponCode.toLowerCase()) {\r\n                    codeFound = true;\r\n                    savings = ExternalProvider.parseAmount(code.promoDiscountTotal);\r\n                }\r\n            });\r\n        } else if (appliedPromotion && appliedPromotion.code.toLowerCase() === couponCode.toLowerCase()) {\r\n            codeFound = true;\r\n            savings = this.parseAmount(appliedPromotion.promoDiscountTotal);\r\n        }\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        };\r\n    },\r\n    parseAmount: function (string) {\r\n        return string ? parseFloat(string.replace(\/[^0-9|.]\/g, '')) : 0.00;\r\n    },\r\n    getCookie: function (cookieName) {\r\n        var name = cookieName + '=';\r\n        var ca = document.cookie.split(';');\r\n\r\n        for (var i = 0; i < ca.length; i++) {\r\n            var c = ca[i];\r\n\r\n            while (c.charAt(0) === ' ') {\r\n                c = c.substring(1);\r\n            }\r\n\r\n            if (c.indexOf(name) === 0) {\r\n                return decodeURIComponent(c.substring(name.length, c.length));\r\n            }\r\n        }\r\n\r\n        return '';\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareSession();",
	"oldtimecandy": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsNode = $('td.a-right:contains(\"Discount \")', responseHTML).next().find('span.price');\r\n        var savingsText = savingsNode.text();\r\n        var savings = parseFloat(savingsText.replace(this.nonPriceRegex, '').toString());\r\n        if(savings > 0){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"olehenriksen": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = this.isCartPage() ? 'https:\/\/www.olehenriksen.com\/cart?dwcont=' + $('#cart-items-form').attr('action').match('dwcont=(.*)')[1] : 'https:\/\/www.olehenriksen.com\/on\/demandware.store\/Sites-OLE-Site\/default\/Cart-AddCoupon?couponCode=CLAIMCODE&format=ajax';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl' && this.isCartPage()) {\r\n      data.dwfrm_cart_couponCode = code,\r\n      data.dwfrm_cart_addCoupon = 'dwfrm_cart_addCoupon';\r\n\r\n      return data;\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return $('.cart-coupon-code').length > 0;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = 0;\r\n\r\n    if (this.isCartPage()) {\r\n      savings = parseFloat($('.order-totals-row.order-discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      $.ajax({\r\n        url: 'https:\/\/www.olehenriksen.com\/on\/demandware.store\/Sites-OLE-Site\/default\/COSummary-Start?onepageentry=true',\r\n        type: 'GET',\r\n        async: false,\r\n        success: function (result) {\r\n          savings = parseFloat($('.order-totals-row.order-discount', $.parseHTML(result)).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n      });\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      if (this.isCartPage()) {\r\n        $('#dwfrm_cart_couponCode').val(bestCode);\r\n        $('#add-coupon').click();\r\n      } else {\r\n        location.reload();\r\n      }\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"oliberte": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n    \tvar params = this.serializeObject($('.checkout__form').closest('form').serializeArray());\r\n    \tparams.promo_code = code;\r\n    \tparams.button_action = 'Apply Promo Code';\r\n    \tparams.onestepcheckoutjson = 1;\r\n    \treturn params;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n    \tif (response && response.promo_code && response.promo_code == code) {\r\n    \t\treturn {\r\n\t            success: true,\r\n\t            savings: parseFloat(response.cart_promo_value ? response.cart_promo_value : 0)\r\n\t        }\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function() {\r\n    \tlocation.reload();\r\n    },\r\n    serializeObject: function(a) {\r\n        var o = {};\r\n        $.each(a, function() {\r\n            o[this.name] = this.value || '';\r\n        });\r\n        return o;\r\n    }\r\n}",
	"olivegarden": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var ApplyUrlInput = $('#___jpApplyUrl');\r\n        var cart = 'https:\/\/www.olivegarden.com\/DardenAjaxURLRedirectServlet?_DARGS=\/cartridges\/cart-coupon\/cart-coupon.jsp.couponApply_form';\r\n        var checkout = 'https:\/\/www.olivegarden.com\/togo\/includes\/couponMessage.jsp?rePrice=Total&_DARGS=\/cartridges\/checkout-detail\/checkout-detail.jsp.couponApply_form';\r\n        var rcart = 'https:\/\/www.olivegarden.com\/DardenAjaxURLRedirectServlet?_DARGS=\/cartridges\/cart-coupon\/cart-coupon.jsp.couponRemove_form';\r\n        var rcheckout = 'https:\/\/www.olivegarden.com\/togo\/includes\/couponMessage.jsp?rePrice=Total&_DARGS=\/cartridges\/checkout-detail\/checkout-detail.jsp.couponRemove_form';\r\n        var ApplyUrl = this.isCheckoutPage() ? checkout : cart;\r\n        var ClearUrl = this.isCheckoutPage() ? rcheckout : rcart;\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('input');\r\n            ApplyUrlInput.id = '___jpApplyUrl';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        ApplyUrlInput.attr('value', ApplyUrl);\r\n        ApplyUrlInput.attr('data-value', ClearUrl);\r\n    },\r\n    prepare: function (action, code) {\r\n        var data = {};\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            if (this.isCheckoutPage()) {\r\n                data = {\r\n                    _dyncharset: 'UTF-8',\r\n                    '\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode': code,\r\n                    '_D:\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode': '',\r\n                    '\/atg\/commerce\/promotion\/CouponFormHandler.postCheckout': true,\r\n                    '_D:\/atg\/commerce\/promotion\/CouponFormHandler.postCheckout': '',\r\n                    '\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon': 'apply Coupon Code',\r\n                    '_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon': '',\r\n                    payAtRestaurantSelected: 'false',\r\n                    _DARGS: '\/cartridges\/checkout-detail\/checkout-detail.jsp.couponApply_form',\r\n                    fromPage: '\/commerce\/checkout'\r\n                };\r\n            } else {\r\n                data = {\r\n                    _dyncharset: 'UTF-8',\r\n                    '\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode': code,\r\n                    '_D:\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode': '',\r\n                    '\/atg\/commerce\/promotion\/CouponFormHandler.postCheckout': $(\"input[name='_D:\/atg\/commerce\/promotion\/CouponFormHandler.postCheckout']\").val(),\r\n                    '_D:\/atg\/commerce\/promotion\/CouponFormHandler.postCheckout': '',\r\n                    rePrice: 'subTotal',\r\n                    AJAX_FUNCTION: 'applyCoupon',\r\n                    '\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon': 'Claim Coupon Code',\r\n                    '_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon': '',\r\n                    _DARGS: '\/cartridges\/cart-coupon\/cart-coupon.jsp.couponApply_form',\r\n                    fromPage: '\/cart'\r\n                };\r\n            }\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    isCheckoutPage: function () {\r\n        return location.pathname === '\/commerce\/checkout';\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#coupon_disc_val', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n}\r\nExternalProvider._prepareUrl();",
	"oliverbonas": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.GB;\r\n        var newCurrency = 'GBP';\r\n        var country = location.pathname.split('\/')[1].toString();\r\n\r\n        if (country === 'ie' || country === 'IE') {\r\n            newCurrency = 'EUR';\r\n        } else if (country === 'us' || country === 'US') {\r\n            newCurrency = 'USD';\r\n            locale = localeMapping.US;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    __prepareUrl: function () {\r\n        var applyUrlInput = $('#__applyUrl');\r\n        var applyUrl = location.origin + '\/api\/basket\/coupon\/add';\r\n        var selector = $('.flag-icon').attr('class');\r\n\r\n        if (selector.match('flag-icon-ie')) {\r\n            applyUrl = location.origin + '\/ie\/api\/basket\/coupon\/add';\r\n        } else if (selector.match('flag-icon-us')) {\r\n            applyUrl = location.origin + '\/us\/api\/basket\/coupon\/add';\r\n        }\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__applyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#__applyUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response) {\r\n        var savings = -response.checkoutPatch.totals.discount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider.__prepareUrl();",
	"omronhealthcare": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (type, code) {\r\n        var formData = $('form[name=\"ShoppingCartForm\"]').serializeObject();\r\n\r\n        formData.couponCode = code;\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#dr_discountTotal nobr', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"onaterafr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-total-discount', responseHTML).last().text().replace(\",\",\".\").replace(\/[^0-9|.]\/g, ''));\r\n  \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ondis24": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.couponData td strong', responseHTML).text().replace(\/,\/g, '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"voucherNr\"]').val(bestCode);\r\n            $('.submitButton.largeButton.btn').click();\r\n        }\r\n    }\r\n};",
	"one": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat((response.productPrices[0].lines[response.productPrices[0].lines.length - 1].displayPrice).replace(\/[^0-9|.]\/g, ''));\r\n  \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#rebateCouponCode').val(bestCode);\r\n      $('#btnRebateUpdate').click();\r\n    }\r\n  }\r\n};",
	"one800baskets": "var ExternalProvider = { \r\n    prepare: function(type,code){\r\n                \r\n        if(type === \"clearCouponUrl\"){\r\n            var data = {\r\n                'langId': -1,\r\n                'storeId': $('input[name=\"storeId\"]')[0].value,\r\n                'catalogId': $('input[name=\"catalogId\"]')[0].value,\r\n                'needsToRemove': 'Promotion',\r\n                'promotionCode': code\r\n                };\r\n            return data;\r\n        }\r\n\r\n        return null\r\n    },\r\n    parse: function(response, status, $xhr, code)\r\n    {\t\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('#PromotionCodeForm > div.appliedPromoDetails', responseHTML).text().indexOf(code) >= 0;\r\n\t\t\r\n        if (codeFound) {\r\n            var oldPrice = parseFloat($('#orderTotalBalance').val());\r\n            var newPrice = parseFloat($('#orderTotalBalance', responseHTML).val());\r\n\t\t\tvar discount = oldPrice - newPrice;\r\n\t\t\tif (discount > 0) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\tsavings: discount\r\n\t\t\t\t}\r\n\t\t\t}\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\r\n\t\t$('#BP-InnerPromoBoxArea').css('display', \"\");\r\n        $('#promoCode').val(bestCode);\r\n\t\t$('#divApplyBtnStatic > a > img').click();\r\n    }\r\n}",
	"one800baskets.mobile": "var ExternalProvider = { \r\n    prepare: function(type,code){\r\n                \r\n        if(type === \"clearCouponUrl\"){\r\n            var data = {\r\n                'langId': -1,\r\n                'storeId': $('input[name=\"storeId\"]')[0].value,\r\n                'catalogId': $('input[name=\"catalogId\"]')[0].value,\r\n                'needsToRemove': 'Promotion',\r\n                'promotionCode': code\r\n                };\r\n            return data;\r\n        }\r\n\r\n        return null\r\n    },\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('#orderTotalBalance').val());\r\n        var newPrice = parseFloat($('#orderTotalBalance', responseHTML).val());\r\n\t\tvar discount = oldPrice - newPrice;\r\n\t\tif (discount > 0) {\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: discount\r\n\t\t\t}\r\n\t\t}\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\t\t$('#BP-InnerPromoBoxArea').css('display', \"\");\r\n        $('#promoCode').val(bestCode);\r\n\t\t$('#divApplyBtnStatic > a > img').click();\r\n    }\r\n}",
	"onebladeshave": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"onegarden": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.basket-item.total-price:contains(\"Product Total\")').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.basket-item.total-price:contains(\"Product Total\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#disccode').val(bestCode);\r\n            $('#btn_applycode').click();\r\n        }\r\n    }\r\n};",
	"onehanesplace": "var ExternalProvider = {\r\n    prepare: function (actionType, couponCode) {\r\n        var sObj = $('#PromotionCodeForm').serializeArray();\r\n        var formData = this.serializeFormObject(sObj);\r\n\r\n        if (actionType !== 'resultUrl') {\r\n            var inputCode = $('#promoCode');\r\n\r\n            formData.promoCode = couponCode;\r\n            formData.taskType = (actionType === 'applyCouponUrl') ? 'A' : 'R';\r\n            formData.finalView = 'AjaxOrderItemDisplayView';\r\n            formData.requesttype = 'ajax';\r\n\r\n            inputCode.val(couponCode);\r\n            inputCode.attr('value', couponCode);\r\n            inputCode.value = couponCode;\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var savings = 0;\r\n        var oldTotal = $('#WC_SingleShipmentOrderTotalsSummary_td_2').text().replace(\/[^0-9.]\/g, '');\r\n        var newTotal = $('#WC_SingleShipmentOrderTotalsSummary_td_13', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '');\r\n        savings = parseFloat(oldTotal) - parseFloat(newTotal);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    },\r\n    serializeFormObject: function (obj) {\r\n        var data = {};\r\n\r\n        $.each(obj, function () {\r\n            data[this.name] = this.value || '';\r\n        });\r\n\r\n        return data;\r\n    }\r\n};",
	"oneida": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"base_discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"onekingslane": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.discountvalue.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"onepiecefr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.large);\r\n        var savings = parseFloat($('.curr-amount:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n  \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"onetravel": "var ExternalProvider = {\r\n    queueName: '_cfq',\r\n    retrieveWindowVariable: function (name, variable) {\r\n        var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + \"); }\\n\";\r\n        var script = document.createElement('script');\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $(\"body\").attr(\"tmp_\" + name);\r\n        $(\"body\").removeAttr(\"tmp_\" + name);\r\n\r\n        return value;\r\n    },\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = jQuery('#__jpCouponUrl');\r\n        var applyUrl, sidpath = this.retrieveWindowVariable('sidpath', 'sidpath');\r\n        if ($('#AirBillingDetail').length) {\r\n            applyUrl = 'https:\/\/www.onetravel.com\/fpnext\/Payment\/ApplyPromoCode' + sidpath + '?&promocode=CLAIMCODE&s=';\r\n        } else if ($('#trReedemCoupon').length) {\r\n            applyUrl = 'http:\/\/www.onetravel.com\/Package\/CrossSellV2\/CrossSellV2Service.asmx\/ApplyPromoCodeV1?';\r\n        } else if ($('.htlRoomDetails').length) {\r\n            applyUrl = 'https:\/\/www.onetravel.com\/FPNextHotel\/Payment\/AddOrRemovePromoDiscount' + sidpath + '&';\r\n        } else {\r\n            applyUrl = 'https:\/\/www.onetravel.com\/carnext\/Payment\/ApplyPromoCode' + sidpath + '?s=' + this.retrieveWindowVariable('fps', 'fps') + '&';\r\n        }\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement(\"input\");\r\n            applyUrlInput.id = '__jpCouponUrl';\r\n            applyUrlInput.style.display = \"none\";\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = jQuery('#__jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var supplierCode = $('#hdnSupplierCode').val();\r\n        var hotelPropCode = $('#hdnHotelPropCode').val();\r\n        var roomCode = $('#hdnRoomCode').val();\r\n        var isRemove = false;\r\n        var EID = $('#hdnEid').val();\r\n        var data = {};\r\n\r\n        if ($('.htlRoomDetails').length && type === 'applyCouponUrl') {\r\n            data = {\r\n                'promoCode': code,\r\n                'supplierCode': supplierCode,\r\n                'hotelPropCode': hotelPropCode,\r\n                'roomCode': roomCode,\r\n                'isRemove': isRemove,\r\n                'EID': EID\r\n            }\r\n            return JSON.stringify(data);\r\n        }\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('div.col-xs-12.no-gutter.price-itinerary.pricing1 > ul.col-xs-12.price-itinerary__list.discount-price__list.bold.is--gray-back.totdiscount > li.col-xs-4.price-itinerary__item > span.currency', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promodiv').css('display', 'block');\r\n            $('#PromoCode').val(bestCode);\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#PromoCode').trigger('input').trigger('change');\r\n            $('#applyPromoCode').get(0).dispatchEvent(clickEvent);\r\n        }\r\n\r\n    }\r\n}\r\nExternalProvider._prepareUrl();",
	"onetravel.tablet": "var ExternalProvider = {\r\n    queueName: '_cfq',\r\n    retrieveWindowVariable: function (name, variable) {\r\n        var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\r\n        var script = document.createElement('script');\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $piggyJq('body').attr('tmp_' + name);\r\n\r\n        $piggyJq('body').removeAttr('tmp_' + name);\r\n\r\n        return value;\r\n    },\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = jQuery('#__jpCouponUrl');\r\n        var applyUrl,\r\n            sidpath = this.retrieveWindowVariable('sidpath', 'sidpath');\r\n\r\n        if ($piggyJq('#AirBillingDetail').length) {\r\n            applyUrl = 'https:\/\/www.onetravel.com\/fpnext\/Payment\/ApplyPromoCode' + sidpath + '&';\r\n        } else if ($piggyJq('#trReedemCoupon').length) {\r\n            applyUrl = 'http:\/\/www.onetravel.com\/Package\/CrossSellV2\/CrossSellV2Service.asmx\/ApplyPromoCodeV1?';\r\n        } else if ($piggyJq('.htlRoomDetails').length) {\r\n            applyUrl = 'https:\/\/www.onetravel.com\/FPNextHotel\/Payment\/AddOrRemovePromoDiscount' + sidpath + '&';\r\n        } else {\r\n            applyUrl = 'https:\/\/www.onetravel.com\/carnext\/Payment\/ApplyPromoCode' + sidpath + '?s=' + this.retrieveWindowVariable('fps', 'fps') + '&';\r\n        }\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = jQuery('#__jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type !== 'applyCouponUrl') return false;\r\n        if ($piggyJq('#trReedemCoupon').length) return JSON.stringify({ promoCode_: code });\r\n\r\n        if ($piggyJq('.htlRoomDetails').length) {\r\n            return JSON.stringify({\r\n                PromoCode: code,\r\n                SupplierCode: $piggyJq('#hdnSupplierCode').val(),\r\n                HotelPropCode: $piggyJq('#hdnHotelPropCode').val(),\r\n                RoomCode: $piggyJq('#hdnRoomCode').val(),\r\n                IsRemove: 'false'\r\n            });\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML,\r\n            savings;\r\n\r\n        \/\/ Vacation packages also contain result url, so calling it here as an AJAX request.\r\n        if (response.d && response.d.indexOf(\"'IsSucceed': true\") !== -1) {\r\n            $piggyJq.ajax({\r\n                type: 'POST',\r\n                url: 'http:\/\/www.onetravel.com\/Package\/CrossSellV2\/CrossSellV2Service.asmx\/GetCartHTML',\r\n                cache: false,\r\n                data: JSON.stringify({ isFullHtml_: true }),\r\n                async: false,\r\n                headers: {\r\n                    Accept: 'text\/plain, *\/*',\r\n                    'Content-Type': 'application\/json; charset=UTF-8'\r\n                },\r\n                success: function (result) {\r\n                    responseHTML = $piggyJq.parseHTML(result.d);\r\n                    savings = parseFloat($piggyJq('#lblPromoDiscount .fpamount', responseHTML).text());\r\n                }\r\n            });\r\n\r\n            if (savings) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n            }\r\n\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        } \/\/ For other options (flight, hotel & car booking), the response contains the discount\r\n\r\n        responseHTML = $piggyJq.parseHTML(response);\r\n\r\n        if ($piggyJq('.htlRoomDetails').length) {\r\n            savings = parseFloat($piggyJq('#CouponSection .currencyPayment', responseHTML).text().replace('$', ''));\r\n        } else if ($piggyJq('.CarPaymentTitle').length) {\r\n            savings = parseFloat($piggyJq('#dvTotalDiscount .currencyPayment', responseHTML).text().replace('$', ''));\r\n        } else {\r\n            savings = parseFloat($piggyJq('.totdiscount .currencyPayment', responseHTML).text().replace('$', ''));\r\n        }\r\n\r\n        if ($piggyJq('#promomessage', responseHTML).text().indexOf('Congratulations') !== -1 ||\r\n            $piggyJq('#PromoValidationMessage', responseHTML).text().indexOf('has been accepted') !== -1 ||\r\n            (!$piggyJq('#promomessage', responseHTML).length && $piggyJq('#dvTotalDiscount', responseHTML).length)) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        var clickEvent = document.createEvent('MouseEvents');\r\n\r\n        clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\r\n\r\n        if ($piggyJq('#txtPromoCode').length) {\r\n            $piggyJq('#txtPromoCode').val(bestCode);\r\n            $piggyJq('#btnPromoCode').click();\r\n        } else if ($piggyJq('.htlRoomDetails').length) {\r\n            location.reload(true);\r\n        } else if ($piggyJq('.CarPaymentTitle').length) {\r\n            $piggyJq('#PromoCode').val(bestCode);\r\n            $piggyJq('#_trCoupon a').get(0).dispatchEvent(clickEvent);\r\n        } else {\r\n            $piggyJq('#PromoCode').val(bestCode);\r\n            $piggyJq('#promodiv a').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"onetravel.mobile": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action != 'applyCouponUrl') return null;\r\n\r\n        var urlParams = new URLSearchParams(location.search);\r\n        var data;\r\n\r\n        if ($('#dvBookFlight').length) data = '{ \"sid\": ' + urlParams.get('sid') + ', \"cid\": ' + urlParams.get('cid') + ', \"promoCode\": \"' + code + '\" }';\r\n        else data = '{ \"sid\": ' + urlParams.get('sid') + ', \"couponCode\": \"' + code + '\" }';\r\n\r\n        return data;\r\n    },\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = jQuery('#__jpCouponUrl'),\r\n            applyUrl;\r\n\r\n        if ($('#dvBookFlight').length) applyUrl = 'https:\/\/m.onetravel.com\/api\/flightbook\/applypromocode';\r\n        else if ($('#dvBookHotel').length) applyUrl = 'https:\/\/m.onetravel.com\/api\/hotelsearch\/applypromocodev2';\r\n        else applyUrl = 'https:\/\/m.onetravel.com\/api\/carbook\/applypromocode';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = jQuery('#__jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response) {\r\n        var savings = Math.abs(response.Data.promoDiscount);\r\n\r\n        if (response.Message.indexOf('Congratulations') !== -1 && savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"oneworld": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat($('span:contains(\"-\u00a3\")', response.summary).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"oneworldmemorials": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"onlineamishfurniture": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"onlinefabricstore": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (action, code) {\r\n        var formData = $('#shippingForm').serializeObject();\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                CouponCode: code\r\n            });\r\n        } else {\r\n            formData = Object.assign(formData, {\r\n                CouponCode: null\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.Discount.Amount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#CouponCode').val(bestCode);\r\n            $('#applyCouponCodeBtn').click();\r\n        }\r\n    }\r\n};",
	"onlineprintersfr": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('input[name=\"input_voucher\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('input[name=\"input_voucher\"]').trigger('input').trigger('change');\r\n            $('.opidVoucherOKBtn.btn_change').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('.opidVoucherDeleteBtn.btn_change').click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 500);\r\n    },\r\n    parse: function () {\r\n        var savings = parseFloat($('.basket_footer_price:contains(\"-\")').text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"onlineshoes": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.bfx-total-grandtotal').text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - response.basketTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n\r\n};",
	"only": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector;\r\n        if (location.href.includes('home')) {\r\n            selector = $('.footer-navigation__locale-link').attr(\"title\")\r\n        }\r\n        else {\r\n            selector = $('.cart-summary__total__value').text().replace(\/[A-z.0-9,]\/g, '').trim();\r\n        }\r\n\r\n        if (selector === \"\u20ac\" || selector.match(\"France\")) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['FR'];\r\n        } else if (selector === \"\u00a3\" || selector.match(\"United Kingdom\")) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"onlynaturalpet": "function serializeObject(a) {\r\n  var o = {};\r\n\r\n  $.each(a, function () {\r\n    o[this.name] = this.value || '';\r\n  });\r\n\r\n  return o;\r\n}\r\nvar ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyCouponUrl = $('#applyCouponUrl');\r\n    var url = location.href;\r\n\r\n    if (!applyCouponUrl.length) {\r\n      applyCouponUrl = document.createElement('input');\r\n      applyCouponUrl.id = 'applyCouponUrl';\r\n      applyCouponUrl.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n      applyCouponUrl = $('#applyCouponUrl');\r\n      applyCouponUrl.attr('value', url);\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return \/onlynaturalpet.com\\\/cart\\\/shoppingcart\/.test(location.href);\r\n  },\r\n  prepare: function (type, code) {\r\n    var formDataArray = $('#CmsMainForm').serializeArray();\r\n    var data = serializeObject(formDataArray);\r\n\r\n    if (type === 'applyCouponUrl' && this.isCartPage()) {\r\n      data.ctl09$MainContentArea$ctl00$ctl00$ThemedControlModule1$ThemeThemedControlModule1$txtCartCouponCode = code;\r\n      data.ctl09$MainContentArea$ctl00$ctl00$ThemedControlModule1$ThemeThemedControlModule1$btnCartCouponApply = 'Apply';\r\n    }\r\n    if (type === 'applyCouponUrl' && !this.isCartPage()) {\r\n      data.ctl09$MainContentArea$ctl00$ctl00$ThemedControlModule1$ThemeThemedControlModule1$tbNewCoupon = code;\r\n      data.ctl09$MainContentArea$ctl00$ctl00$ThemedControlModule1$ThemeThemedControlModule1$btnSubmitNewCoupon = 'Apply';\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = 0.00;\r\n    var newTotal = 0.00;\r\n    var savings = 0.00;\r\n\r\n    if (this.isCartPage()) {\r\n      oldTotal = parseFloat($('.total-cost #ctl09_MainContentArea_ctl00_ctl00_ThemedControlModule1_ThemeThemedControlModule1_lblSubtotal').text().replace(\/[^0-9.]\/g, ''));\r\n      newTotal = parseFloat($('.total-cost #ctl09_MainContentArea_ctl00_ctl00_ThemedControlModule1_ThemeThemedControlModule1_lblSubtotal', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n      savings = oldTotal - newTotal;\r\n    } else {\r\n      savings = parseFloat($('#ctl09_MainContentArea_ctl00_ctl00_ThemedControlModule1_ThemeThemedControlModule1_lblCouponDiscount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"opensky": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.properties.paymentsTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"opodo": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var bookingData = JSON.parse($('#promotional-codes-options').attr('data-value')).bookingId;\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        bookingId: bookingData,\r\n        nextPage: 'PAYMENT_PAGE',\r\n        promotionalCodes: [{ code: code }],\r\n        removal: false\r\n      };\r\n    }\r\n\r\n    return JSON.stringify(data);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.promoCodeList[0].discount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"promotionalCode\"]').val(bestCode);\r\n      $('.promo_code_button').click();\r\n    }\r\n  }\r\n};",
	"opposuits": "var ExternalProvider = {\r\n    parse: function(response){\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $(\".discount\", responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    \r\n    complete: function (bestCode, bestSavings) {\r\n        if(bestCode) {\r\n            $(\"#promoCode\").val(bestCode);\r\n            $( \"#applyPromo\" ).trigger(\"click\");\r\n        }\r\n    }\r\n};",
	"oraliv": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};",
	"orbitz": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = false;\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        couponCode: code,\r\n        tripid: $(\"body\").attr(\"data-tripid\"),\r\n        tlCouponAttach: 1,\r\n        tlCouponCode: code,\r\n        oldTripTotal: $(\".amount-value:last()\").text(),\r\n        oldTripGrandTotal: $(\".amount-value:last()\").text(),\r\n        productType: $(\"body\").attr(\"data-producttype\"),\r\n        binPrefix: null\r\n      };\r\n    } else if (type === 'clearCouponUrl') {\r\n      data = {\r\n        tripid: $(\"body\").attr(\"data-tripid\"),\r\n        tlCouponRemove: 1,\r\n        tlCouponCode: code,\r\n        productType: $(\"body\").attr(\"data-producttype\"),\r\n        oldTripTotal: $(\".amount-value:last()\").text(),\r\n        oldTripGrandTotal: $(\".amount-value:last()\").text(),\r\n        binPrefix: null\r\n      };\r\n    }\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.couponModel.couponDiscount.amount.replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ordnancesurvey": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0.00;\r\n        var data = {\r\n            remove: 0,\r\n            coupon_code: code\r\n        }\r\n        $.ajax({\r\n            url: 'https:\/\/www.ordnancesurvey.co.uk\/shop\/checkout\/cart\/couponPost\/',\r\n            mode: 'POST',\r\n            data: data,\r\n            success: function (result) {\r\n                savings = parseFloat($('.price:contains(\"-\u00a3\")', $.parseHTML(result)).text().replace(\/[^0-9|.]\/g, ''));\r\n            },\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code, input[name=\"coupon_code\"]').val(bestCode);\r\n            $('button[value=\"Update total\"], input[value=\"Update Total\"]').click();\r\n        }\r\n    }\r\n};",
	"organifi": "var ExternalProvider = {\r\n  oldTotal: '',\r\n  init: function () {\r\n    this.oldTotal = parseFloat($('.ch-value.ch-subtotal-value').text().replace(\/[^.0-9]\/g, ''));\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('#coupon_code').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#coupon_code').trigger('input').trigger('change');\r\n      $('.btn-coupon').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.ch-coupon-switcher span:contains(\"Remove\")').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    var counter = 0;\r\n    var codeApplyTime = setInterval(function () {\r\n      counter += 1;\r\n\r\n      if (counter > 8) {\r\n        clearInterval(codeApplyTime);\r\n        next();\r\n      }\r\n    }, 400);\r\n  },\r\n  parse: function () {\r\n    var newTotal = parseFloat($('.ch-value.ch-total-price-value:contains(\"$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('#coupon_code').trigger('input').trigger('change');\r\n      $('.btn-coupon').click();\r\n    }\r\n  }\r\n};",
	"orionde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.basket-summary dd:eq(1) span:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n     \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"orvis": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat((response.d.orderTotals.order_allowance_total).replace('$', ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"orvisuk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat((response.d.orderTotals.order_allowance_total).replace('\u00a3', ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#special_offer').val(bestCode);\r\n            $('.btn_get_balance').click();\r\n        }\r\n    }\r\n};",
	"oshkosh": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount.discount', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"otel": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        return {\r\n            success: !response.error_message && response.campaign && response.campaign.toLowerCase() === code.toLowerCase(),\r\n            savings: parseFloat(response.discount_amount)\r\n        }\r\n    },\r\n\r\n    dispatchEvent: function(ele, event) {\r\n\r\n        var evt = document.createEvent(\"HTMLEvents\");\r\n        evt.initEvent(event, true, true);\r\n        ele.get(0).dispatchEvent(evt);\r\n        return this;\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(!bestCode) return false;\r\n\r\n        var promotionToggle = $('.checkout-page__promotion-toggle');\r\n        if(promotionToggle.length) {\r\n            this.dispatchEvent(promotionToggle, 'click');\r\n        }\r\n\r\n        setTimeout(function() {\r\n\r\n            var promotionField = $('.checkout-page__field'),\r\n                promotionBtn = $('.checkout-page__promotion .checkout-page__promotion-content button');\r\n\r\n            promotionField.val(bestCode).trigger('change');\r\n            ExternalProvider\r\n                .dispatchEvent(promotionField, 'change')\r\n                .dispatchEvent(promotionBtn, 'click');\r\n        }, 100);\r\n    }\r\n};",
	"otel.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        return {\r\n            success: !response.error_message && response.campaign && response.campaign.toLowerCase() === code.toLowerCase(),\r\n            savings: parseFloat(response.discount_amount)\r\n        }\r\n    },\r\n\r\n    dispatchEvent: function(ele, event) {\r\n\r\n        var evt = document.createEvent(\"HTMLEvents\");\r\n        evt.initEvent(event, true, true);\r\n        ele.get(0).dispatchEvent(evt);\r\n        return this;\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        var promotionToggle = $('.checkout-item--i-have-a-promo-code');\r\n        if(!bestCode || !promotionToggle.length) return false;\r\n\r\n        if(promotionToggle.length) {\r\n            this.dispatchEvent(promotionToggle, 'click');\r\n        }\r\n\r\n        setTimeout(function() {\r\n\r\n            var promotionField = $('.checkout-item--enter-code .field-group--apply .field'),\r\n                promotionBtn = $('.checkout-item--enter-code .field-group--apply .field-icon__right');\r\n\r\n            promotionField.val(bestCode).trigger('change');\r\n            ExternalProvider\r\n                .dispatchEvent(promotionField, 'change')\r\n                .dispatchEvent(promotionBtn, 'click');\r\n        }, 100);\r\n    }\r\n};",
	"otterbox": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-totals-table-cell.value.t-color-red', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"otto": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var multipleDiscountSavings = 0;\r\n    var savings = 0;\r\n\r\n    $.each($('.or_prices__price:contains(\"-\")', responseHTML), function () {\r\n      multipleDiscountSavings += parseFloat($(this, responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n      savings = multipleDiscountSavings;\r\n    });\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ouidad": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response)\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ourcampusmarket": "var ExternalProvider = {\r\n  _manualApply: function (code) {\r\n    var setDeeperInput = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, 'value').set;\r\n    var submit = new Event('input', { bubbles: true });\r\n\r\n    setDeeperInput.call($('input[placeholder=\"Promo code\"]')[0], code);\r\n    $('input[placeholder=\"Promo code\"]')[0].dispatchEvent(submit);\r\n    $('button:contains(\"Apply\")').click();\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      this._manualApply(code);\r\n    }\r\n\r\n    return null;\r\n  },\r\n  whenReady: function (step, next) {\r\n    var timer = setInterval(function () {\r\n      if ($('button:contains(\"Apply\") span:last span').length < 1) {\r\n        clearInterval(timer);\r\n        setTimeout(next, 500);\r\n      }\r\n    }, 200);\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('div p:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) this._manualApply(bestCode);\r\n  }\r\n};",
	"outdoortechnology": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"outfitter": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.item-total:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"overstock": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var data = JSON.parse(response);\r\n        var message = data.messages.length;\r\n        var savings = 0;\r\n        if (message === 0) {\r\n            savings = parseFloat(data.jsonTotals.couponSavings.toString().replace(\/[^0-9.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        var clickEvent = new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        });\r\n\r\n        if (bestCode) {\r\n            $(\"input[name='UsePromoCode']\").click();\r\n            $(\"input[aria-label='promo code field']\").val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $(\"input[aria-label='promo code field']\").trigger('input').trigger('change');\r\n\r\n            if (!\/guestcustomer=true\/.test(location.href)) {\r\n                setTimeout(function () {\r\n                    $(\"button[aria-label='promo code apply button']\").click();\r\n                    setTimeout(function () {\r\n                        location.reload();\r\n                    }, 1000);\r\n                }, 500);\r\n            } else {\r\n                setTimeout(function () {\r\n                    $(\"button[aria-label='promo code apply button']\")[0].dispatchEvent(clickEvent);\r\n                }, 500);\r\n            }\r\n        }\r\n    }\r\n};",
	"overstocksheetclub": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"overtons": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var token = $('input[name=\"csrf_token\"]:first').val();\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      return {\r\n        dwfrm_cart_couponCode: code,\r\n        dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon',\r\n        csrf_token: token\r\n      };\r\n    } else if (type === 'clearCouponUrl') {\r\n      return {\r\n        dwfrm_cart_couponCode: '',\r\n        dwfrm_cart_coupons_i0_deleteCoupon: 'Remove',\r\n        csrf_token: token\r\n      };\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.right-col:contains(\"-\")', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"oxfamonlineshop": "var ExternalProvider = {\r\n  prepare: function (step, code) {\r\n    if (step === 'applyCouponUrl') {\r\n      let data = this.serializeFormData($('#frmMain'));\r\n      data.container_0$contentprimary_0$PromoCodes$PromoCode = code;\r\n      data.container_0$contentprimary_0$PromoCodes$ApplyPromoCode = 'Apply';\r\n      return data;\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.alt-totals h5.savings span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  serializeFormData: function (form) {\r\n    let formArray = form.serializeArray();\r\n    let formData = {}\r\n    formArray.forEach(data => { formData[data.name] = data.value });\r\n    return formData;\r\n  }\r\n};",
	"oxybuleveiletjeuxfr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.recap_command_reduc_adv.boxFlexContainer span:contains(\"-\")', responseHTML).text().replace(\/[^.|0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#Code').val(bestCode);\r\n            $('.ok_btn').eq(0).click();\r\n        }\r\n    }\r\n};",
	"oxygenplus": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"oyobox": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('span:contains(\"-$\")', responseHTML)[0].innerHTML.replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"oznaturals": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"pacificcoast": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    $.get('\/cart', (response) => {\r\n      const responseHTML = $.parseHTML(response);\r\n      let requestUrl = $('#cart-items-form', responseHTML).attr('action');\r\n      this.createInput('requestUrl', requestUrl);\r\n    });\r\n  },\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('tr.order-discount td', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  createInput: function(id, value) {\r\n    if(document.getElementById(id) === null) {\r\n      let createdInput = document.createElement(\"input\");\r\n      createdInput.id = id;\r\n      createdInput.setAttribute('type', 'hidden');\r\n      createdInput.setAttribute('value', value);\r\n      (document.body || document.head || document.documentElement).appendChild(createdInput);\r\n    } else {\r\n      document.getElementById(id).value = value;\r\n    }\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"pacsun": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var ApplyUrlInput = $('#checkout-form');\r\n        var ApplyUrl = 'https:\/\/www.pacsun.com\/on\/demandware.store\/Sites-pacsun-Site\/default\/COCheckoutUtil-AddPromoCode?format=ajax&instart_disable_injection=true';\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('form');\r\n            ApplyUrlInput.id = 'checkout-form';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#checkout-form');\r\n\r\n            ApplyUrlInput.attr('action', ApplyUrl);\r\n        }\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (!this.isCheckoutPage()) {\r\n            if (type === 'applyCouponUrl') {\r\n                data = {\r\n                    dwfrm_cart_couponCode: code,\r\n                    dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon',\r\n                    csrf_token: $('input[name=\"csrf_token\"]').val()\r\n                };\r\n\r\n                return data;\r\n            }\r\n        } else if (type === 'applyCouponUrl') {\r\n            data = {\r\n                couponCode: code\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    isCheckoutPage: function () {\r\n        if (document.querySelector('#dwfrm_billing_paymentMethods_creditCard_owner') !== null) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var checkout = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        if (!this.isCheckoutPage()) {\r\n            return {\r\n                success: savings > 0,\r\n                savings: isNaN(savings) ? 0.00 : savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: checkout > 0,\r\n            savings: isNaN(checkout) ? 0.00 : checkout\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        location.reload(true);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"pacsun.tablet": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $piggyJq('#__jpCouponUrl');\r\n        var applyUrl = location.protocol + '\/\/www.pacsun.com\/on\/demandware.store\/Sites-pacsun-Site\/default\/Checkout-AddPromoCode';\r\n        var clearUrlInput = $piggyJq('#__jpClearUrl');\r\n        var clearUrl = location.protocol + '\/\/www.pacsun.com\/on\/demandware.store\/Sites-pacsun-Site\/default\/Checkout-DeletePromoCode';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $piggyJq('#__jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n\r\n        if (!clearUrlInput.length) {\r\n            clearUrlInput = document.createElement('input');\r\n            clearUrlInput.id = '__jpClearUrl';\r\n            clearUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n            clearUrlInput = $piggyJq('#__jpClearUrl');\r\n        }\r\n\r\n        clearUrlInput.attr('value', clearUrl);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n\r\n        if ($piggyJq('.bonusitem', responseHTML).text() === 'Applied') {\r\n            var savings = parseFloat($piggyJq('p:eq(1) span:eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"pacsun.mobile": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $piggyJq('#__jpCouponUrl');\r\n        var applyUrl = location.protocol + '\/\/www.pacsun.com\/on\/demandware.store\/Sites-pacsun-Site\/default\/mCheckout-AddPromoCode';\r\n        var clearUrlInput = $piggyJq('#__jpClearUrl');\r\n        var clearUrl = location.protocol + '\/\/www.pacsun.com\/on\/demandware.store\/Sites-pacsun-Site\/default\/mCheckout-DeletePromoCode';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $piggyJq('#__jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n\r\n        if (!clearUrlInput.length) {\r\n            clearUrlInput = document.createElement('input');\r\n            clearUrlInput.id = '__jpClearUrl';\r\n            clearUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n            clearUrlInput = $piggyJq('#__jpClearUrl');\r\n        }\r\n\r\n        clearUrlInput.attr('value', clearUrl);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n\r\n        if ($piggyJq('.bonusitem', responseHTML).text() === 'Applied') {\r\n            var savings = parseFloat($piggyJq('p:eq(1) span:eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"paddywax": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"pagoda": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.promo-highlight .promo.row .col-xs-4', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"paige": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        if(response.PromoCodeInfo && response.PromoCodeInfo.Discount){\r\n            var savings = response.PromoCodeInfo.Discount;\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"palgrave": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var script = $('script:contains(\"Wicket.Event.add\")').text();\r\n    var getString = script.match(',\"u\":\"(.*)0-shopCart-tokenContainer-tokenForm-couponInputContainer-couponButton');\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = getString[1].slice(0, -3);\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('div[wicketpath=\"shopCart_miniBasketPanel_sumPricePanel_pricePanel_fragment_savingPrice\"]', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"panasonic": "var ExternalProvider = {\r\n    customVar: null,\r\n    parse: function (response, status, $xhr, code) {\r\n        try {\r\n            var result;\r\n\r\n            result = {\r\n                success: false,\r\n                savings: 0\r\n            };\r\n\r\n            var responseHTML = $.parseHTML(response);\r\n            var codeFound = $('div.cart-footer-left span.value', responseHTML).text().indexOf(code) >= 0;\r\n\r\n            if (codeFound) {\r\n                var currentTotal = Number($('tr.order-total > td:nth-child(2)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n                var discount = 0;\r\n\r\n                \/\/ save first total\r\n                if (this.customVar == null) {\r\n                    this.customVar = currentTotal;\r\n                } else {\r\n                    discount = this.customVar - currentTotal;\r\n                }\r\n\r\n                if (this.customVar !== 0) {\r\n                    result = {\r\n                        success: true,\r\n                        savings: discount\r\n                    };\r\n                }\r\n            }\r\n\r\n            return result;\r\n        } catch (err) {\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n    }\r\n\r\n};",
	"pandahall": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('#GrandTotal').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('#GrandTotal', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"panerabread": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        var clickEvent = new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        });\r\n\r\n        if (action === 'injectCoupon') {\r\n            $('#promoCode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#promoCode').trigger('input').trigger('change');\r\n            $('form[ng-submit=\"applyDiscount()\"] input[value=\"Apply\"]').get(0).dispatchEvent(clickEvent);\r\n        } else if (action === 'removeInjectedCoupon') {\r\n            $('form[name=\"balance\"] i').get(0).dispatchEvent(clickEvent);\r\n        }\r\n\r\n        return null;\r\n    },\r\n    whenReady: function(step, next)\r\n    {\r\n        if ( (step == 'injectCoupon') || (step == 'removeInjectedCoupon') ) {\r\n            setTimeout(function() {\r\n                var maxWait = 200, waited = 0;\r\n                var waitForClose = setInterval(function() {\r\n                    var confirmed = !$(\".cls_loadingMask\").length;\r\n                    if ((confirmed) || (waited > maxWait)) {\r\n                        clearInterval(waitForClose);\r\n                        setTimeout(function() {\r\n                            next();\r\n                        }, 500);\r\n                    }\r\n                    waited++;\r\n                }, 10);\r\n            }, 50);\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat($('label:contains(\"-\")').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"papajohns": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHtml = $.parseHTML(response);\r\n        var savings = parseFloat($('.discounts-amount.amount', responseHtml).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode)  location.reload();\r\n    }\r\n};",
	"papamurphys": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#bVendorDiscount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#CouponCodeText').val(bestCode);\r\n      $('#EnterCouponCodeBtn').prop('disabled', false);\r\n      $('#EnterCouponCodeBtn').click();\r\n    }\r\n  }\r\n};",
	"paperchase": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = location.href;\r\n\r\n        if (selector.contains('en_de')) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector.contains('en_gb')) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    _prepareUrl: function () {\r\n        var s = document.createElement('script');\r\n\r\n        s.type = 'text\/javascript';\r\n        s.id = 'eid';\r\n\r\n        var code = \"document.querySelector('body').setAttribute('eid', window.checkoutConfig.quoteData.entity_id);\";\r\n\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.totals.base_discount_amount * -1;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"papermart": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function () {\r\n        retries++;\r\n        ExternalProvider.hasPromoCodeApplied() && $('.mat-card-content button:contains(\"RESET\")').click();\r\n        if (ExternalProvider.hasPromoCodeApplied() === false && retries < 3) {\r\n          clearInterval(interval);\r\n          resolve();\r\n        } else if (retries === 3) {\r\n          resolve();\r\n        }\r\n      }, 2000);\r\n    })\r\n  },\r\n  hasPromoCodeApplied: function() {\r\n    return $('.mat-card-content button:contains(\"RESET\")').length > 0\r\n  },\r\n  __prepareUrl: function () {\r\n    this.createEventInstance();\r\n    this.createScript();\r\n  },\r\n  createScript: function() {\r\n    const script = document.createElement('script');\r\n    let scriptContent = `\r\n      var createInput = ${this.createInput.toString()};\r\n      var quoteData = JSON.parse(window.localStorage.QuoteData);\r\n      var accessToken = window.sessionStorage.access_token;\r\n      createInput('quoteId', quoteData.quoteID);\r\n      createInput('accessToken', 'Bearer ' + accessToken);\r\n    `;\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n    $('#tmpScript').remove();\r\n  },\r\n  parse: function (response) {\r\n    let savings = Math.abs(parseFloat(response.discounteAmount));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    $('.mat-form-field-wrapper input[placeholder=\"Enter Code\"]').val(bestCode);\r\n    $('.mat-form-field-wrapper input[placeholder=\"Enter Code\"]').get(0).dispatchEvent(this.inputEvent);\r\n    $('button:contains(\"APPLY\")').get(0).dispatchEvent(this.clickEvent);\r\n  },\r\n  createInput: function (id, value) {\r\n    if (document.getElementById(id) === null) {\r\n      let createdInput = document.createElement(\"input\");\r\n      createdInput.id = id;\r\n      createdInput.setAttribute('type', 'hidden');\r\n      createdInput.setAttribute('value', value);\r\n      (document.body || document.head || document.documentElement).appendChild(createdInput);\r\n    } else {\r\n      document.getElementById(id).value = value;\r\n    }\r\n  },\r\n  createEventInstance: function() {\r\n    this.inputEvent = new Event('input', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n    this.clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  },\r\n};\r\nExternalProvider.__prepareUrl();",
	"papersource": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"parallels": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n\r\n        function serializeObject(a) {\r\n            var o = {};\r\n            $.each(a, function() {\r\n                o[this.name] = this.value || '';\r\n            });\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('form[name=\"cleverForm\"]').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data['buttonaddCoupon'] = 'javascript:purchaseCouponCode';\r\n            data['purchaseCouponCode'] = code;\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.cbCartTotalDiscount .cbDictionaryValue', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = parseFloat($savings.text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            if(savings > 0.00){\r\n                return {\r\n                    success: true,\r\n                    savings: parseFloat(savings)\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            $('[for=\"listenerCleverCartCoupon\"]')[0].click();\r\n            $('input[name=\"purchaseCouponCode\"]').val(bestCode);\r\n            $('input[name=\"buttonaddCoupon\"]')[0].click();\r\n        }\r\n    }\r\n};",
	"parkcameras": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response.basketHtml);\r\n    let discountSelector = this.isCartPage() ? '.basket .rowHeading:contains(\"-\u00a3\")' : '.voucherTotal:contains(\"-\u00a3\")';\r\n    let savings = (responseHTML !== null) ? parseFloat($(discountSelector, responseHTML).text().replace(\/[^0-9|.]\/g, '')) : 0;\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  isCartPage: function() {\r\n    return \/basket\/.test(location.pathname);\r\n  }\r\n};",
	"pnf": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('#couponCode').val(code);\r\n      $('.btnDoCoupon').click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $(\"#couponRemove a\").click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 13000);\r\n          }\r\n          waited++;\r\n        }, 70);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('dd:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#couponCode').val(bestCode);\r\n      $('.btnDoCoupon').click();\r\n    }\r\n  }\r\n};",
	"parksleepfly": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var csrfTokenInput = $('#___jpcsrf-token');\r\n        var xsrfTokenInput = $('#___jpxsrf-token');\r\n\r\n        var applyUrl = window.location.href + '\/coupon';\r\n        var csrfToken = $('meta[name=\"csrf-token\"]')[0].content;\r\n        var xsrfToken = decodeURIComponent(document.cookie).split(';').filter(function (i, n) {\r\n            return \/XSRF-TOKEN\/g.exec(i);\r\n        })[0].split('XSRF-TOKEN=')[1];\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        if (!csrfTokenInput.length) {\r\n            csrfTokenInput = document.createElement('input');\r\n            csrfTokenInput.id = '___jpcsrf-token';\r\n            csrfTokenInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(csrfTokenInput);\r\n            csrfTokenInput = $('#___jpcsrf-token');\r\n        }\r\n\r\n        if (!xsrfTokenInput.length) {\r\n            xsrfTokenInput = document.createElement('input');\r\n            xsrfTokenInput.id = '___jpxsrf-token';\r\n            xsrfTokenInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(xsrfTokenInput);\r\n            xsrfTokenInput = $('#___jpxsrf-token');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        xsrfTokenInput.attr('value', xsrfToken);\r\n        csrfTokenInput.attr('value', csrfToken);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.message.pricing.discount;\r\n\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"parksleepfly.mobile": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var csrfTokenInput = $('#___jpcsrf-token');\r\n        var xsrfTokenInput = $('#___jpxsrf-token');\r\n\r\n        var applyUrl = window.location.href + '\/coupon';\r\n        var csrfToken = $('meta[name=\"csrf-token\"]')[0].content;\r\n        var xsrfToken = decodeURIComponent(document.cookie).split(';').filter(function (i, n) {\r\n            return \/XSRF-TOKEN\/g.exec(i);\r\n        })[0].split('XSRF-TOKEN=')[1];\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        if (!csrfTokenInput.length) {\r\n            csrfTokenInput = document.createElement('input');\r\n            csrfTokenInput.id = '___jpcsrf-token';\r\n            csrfTokenInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(csrfTokenInput);\r\n            csrfTokenInput = $('#___jpcsrf-token');\r\n        }\r\n\r\n        if (!xsrfTokenInput.length) {\r\n            xsrfTokenInput = document.createElement('input');\r\n            xsrfTokenInput.id = '___jpxsrf-token';\r\n            xsrfTokenInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(xsrfTokenInput);\r\n            xsrfTokenInput = $('#___jpxsrf-token');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        xsrfTokenInput.attr('value', xsrfToken);\r\n        csrfTokenInput.attr('value', csrfToken);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.message.pricing.discount;\r\n\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"partsexpress": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        function serializeObject(a) {\r\n            var o = {};\r\n\r\n            $.each(a, function () {\r\n                o[this.name] = this.value || '';\r\n            });\r\n\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('#aspnetForm').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data.ctl00$ctl00$MainContent$uxCart$uxCart$btnApplyCoupon = 'Apply';\r\n            data.ctl00$ctl00$MainContent$uxCart$uxCart$ecoupon = code;\r\n        } else if (type === 'clearCouponUrl') {\r\n            data.__EVENTTARGET = 'ctl00$ctl00$MainContent$uxCart$uxCart$lbRemoveCoupon';\r\n            data.ctl00$ctl00$MainContent$uxCart$uxCart$ecoupon = code;\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#uxShoppingCartOrderTotal_DiscountDisplay', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            $('#ctl00_ctl00_MainContent_uxCart_uxCart_ecoupon').val(bestCode);\r\n            $('#ctl00_ctl00_MainContent_uxCart_uxCart_btnApplyCoupon').click();\r\n        }\r\n    }\r\n};",
	"partsgeek": "var ExternalProvider = {\r\n    parse: function(response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('div.cart-totals-heading:contains(\"Discount:\")', responseHTML).next().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    }\r\n};",
	"patisseriemasmoudi": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#total_discount', responseHTML).text().replace(',', '.');\r\n\r\n        savings = parseFloat(savings.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"patpat": "var ExternalProvider = {\r\n  prepare: function (step, code) {\r\n    if (step === 'injectCoupon') {\r\n      this.inputCodeField(code);\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if (step === 'injectCoupon') {\r\n      this.waitForSelector(this.isLoaded, this.getDiscount.bind(this, next), 200);\r\n    }\r\n  },\r\n  inputCodeField: function (code) {\r\n    const codeField = $('input[placeholder*=\"Promo Code\"]');\r\n    const submitButton = $('input[placeholder*=\"Promo Code\"]').next();\r\n    codeField.val(code);\r\n    codeField.get(0).dispatchEvent(this.changeInputEvent);\r\n    submitButton.get(0).dispatchEvent(this.clickEvent);\r\n  },\r\n  waitForSelector: function (isResolved, runNext, maxWait) {\r\n    let waited = 0;\r\n    let waitForClose = setInterval(function () {\r\n      if (waited > maxWait || isResolved()) {\r\n        clearInterval(waitForClose);\r\n        runNext();\r\n      }\r\n      waited++;\r\n    }, 20);\r\n  },\r\n  isLoaded: function () {\r\n    return !$('.voucher-box').length;\r\n  },\r\n  getDiscount: function (next) {\r\n    ExternalProvider.promoCodeSavings = $('.cart-summary .right:contains(\"-\")').text();\r\n    next();\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat(this.promoCodeSavings.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      this.inputCodeField(bestCode);\r\n    }\r\n  },\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var newCurrency = $('.currency span').text();\r\n    var selector = $('.country span').text();\r\n\r\n    if (selector === 'United Kingdom') {\r\n      locale = localeMapping.GB;\r\n    } else if (selector === 'Germany') {\r\n      locale = localeMapping.DE;\r\n    } else if (selector === 'France') {\r\n      locale = localeMapping.FR;\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  createEventInstance: function () {\r\n    this.changeInputEvent = new Event('input', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n    this.clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  }\r\n};\r\nExternalProvider.createEventInstance();",
	"paulaschoice": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('input[placeholder=\"Enter Coupon Code\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[placeholder=\"Enter Coupon Code\"]').trigger('input').trigger('change');\r\n      $('input[type=\"submit\"]').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    var counter = 0;\r\n    var codeApplyTime = setInterval(function () {\r\n      counter += 1;\r\n\r\n      if (counter > 8) {\r\n        clearInterval(codeApplyTime);\r\n        next();\r\n      }\r\n    }, 300);\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.medium2.normalcase>div:contains(-$)').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n};",
	"paulayoung": "var ExternalProvider = {\r\n  init: function () {\r\n    \/\/ Attach handler to catch failing http requests and keep track of them,\r\n    \/\/ we'll be needing them because this site doesn't show which codes\r\n    \/\/ failed on the resultUrl hence this hack!\r\n    this._failAjax = [];\r\n    var that = this;\r\n    $(document).ajaxError(function (event, request, settings) {\r\n      var code = settings.data.split('=')[1];\r\n      that._failAjax.push(code);\r\n    });\r\n  },\r\n  parse: function (response, status, $xhr, code) {\r\n    var responseHTML = $.parseHTML(response);\r\n    \/\/ If this request didn't fail, then we are hoping the coupon worked\r\n    if (this._failAjax.indexOf(code) === -1) {\r\n      var savings = parseFloat($('.ml-basket-you-saved-value', responseHTML).text().replace('$', ''));\r\n      if (savings) {\r\n        return {\r\n          success: true,\r\n          savings: savings\r\n        };\r\n      }\r\n    }\r\n\r\n    return {\r\n      success: false,\r\n      savings: 0.00\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    \/\/ Remove the ajax error handler\r\n    if (bestCode) {\r\n      $(document).off('ajaxError');\r\n      location.reload();\r\n    }\r\n  }\r\n};",
	"paulfredrick": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n\r\n      $.each(data, function () {\r\n        if (object[this.name] !== undefined) {\r\n          if (!object[this.name].push) {\r\n            object[this.name] = [object[this.name]];\r\n          }\r\n\r\n          object[this.name].push(this.value || '');\r\n        } else {\r\n          object[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return object;\r\n    };\r\n  },\r\n  __prepareUrl: function () {\r\n    var applyUrlInput = $('#__applyUrl');\r\n    var applyUrl = this.getCheckoutType() ? $('form[name=\"form1\"]').attr('action') : 'https:\/\/www.paulfredrick.com\/checkout\/checkout.aspx';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__applyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__applyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (this.getCheckoutType()) {\r\n      if (type === 'applyCouponUrl') {\r\n        data = $('form[name=\"form1\"]').serializeObject();\r\n        data.ctl00$MainContent$PromoCodes$PromoCodeTextBox = code;\r\n        data['ctl00$MainContent$PromoCodes$ApplyPromoButton.x'] = 0;\r\n        data['ctl00$MainContent$PromoCodes$ApplyPromoButton.y'] = 0;\r\n\r\n        return data;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        ctl00$txtSearchDesktop: null,\r\n        ctl00$txtSearchTablet: null,\r\n        ctl00$txtMobileSearchSub: null,\r\n        ctl00$MainContent$LoginForm$UserName: null,\r\n        ctl00$MainContent$LoginForm$Password: null,\r\n        ctl00$MainContent$txtbillingfirstname: null,\r\n        ctl00$MainContent$txtbillinglastname: null,\r\n        ctl00$MainContent$txtbillingaddress1: null,\r\n        ctl00$MainContent$txtbillingaddress2: null,\r\n        ctl00$MainContent$ddlbillingcountry: 'US',\r\n        ctl00$MainContent$txtbillingcity: null,\r\n        ctl00$MainContent$ddlbillingaustate: 0,\r\n        ctl00$MainContent$ddlbillingusstate: 0,\r\n        ctl00$MainContent$ddlbillingcastate: 0,\r\n        ctl00$MainContent$ddlbillingjpstate: '',\r\n        ctl00$MainContent$txtotherbillingstate: null,\r\n        ctl00$MainContent$txtbillingzip: null,\r\n        ctl00$MainContent$txtbillingphone: null,\r\n        ctl00$MainContent$txtbillingemail: null,\r\n        ctl00$MainContent$chkbillingoffers: 'on',\r\n        ctl00$MainContent$chkbillinguseshippinginfo: 'on',\r\n        ctl00$MainContent$txtshippingfirstname: null,\r\n        ctl00$MainContent$txtshippinglastname: null,\r\n        ctl00$MainContent$txtshippingaddress1: null,\r\n        ctl00$MainContent$txtshippingaddress2: null,\r\n        ctl00$MainContent$ddlshippingcountry: 'US',\r\n        ctl00$MainContent$txtshippingcity: null,\r\n        ctl00$MainContent$ddlshippingaustate: 0,\r\n        ctl00$MainContent$ddlshippingusstate: 0,\r\n        ctl00$MainContent$ddlshippingcastate: 0,\r\n        ctl00$MainContent$ddlshippingjpstate: '',\r\n        ctl00$MainContent$txtothershippingstate: null,\r\n        ctl00$MainContent$txtshippingzip: null,\r\n        ctl00$MainContent$txtshippingphone: null,\r\n        ctl00$MainContent$ddShippingMethod: null,\r\n        ctl00$MainContent$txtGCNumber: null,\r\n        ctl00$MainContent$txtGCAmount: null,\r\n        ctl00$MainContent$ddlpaymenttype: null,\r\n        ctl00$MainContent$txtpaymentnameoncard: null,\r\n        ctl00$MainContent$txtpaymentcardnumber: null,\r\n        ctl00$MainContent$ddlpaymentexpmonth: null,\r\n        ctl00$MainContent$ddlpaymentexpyear: null,\r\n        ctl00$MainContent$txtpaymentcardsecuritycode: null,\r\n        ctl00$MainContent$txtpaymentcomment: null,\r\n        'ctl00$MainContent$PromoCodes$ApplyPromoButton.x': 0,\r\n        'ctl00$MainContent$PromoCodes$ApplyPromoButton.y': 0,\r\n        ctl00$MainContent$txtGiftWrapTo: null,\r\n        ctl00$MainContent$txtGiftWrapOccasion: null,\r\n        ctl00$MainContent$txtGiftWrapFrom: null,\r\n        ctl00$MainContent$txtGiftWrapMessage: null,\r\n        ctl00$MainContent$hdnShippingSameAsBilling: null,\r\n        ctl00$MainContent$hdnselectedshippingcountry: 'us',\r\n        ctl00$MainContent$hdnselectedshippingstate: null,\r\n        ctl00$MainContent$hdnselectedbillingcountry: null,\r\n        ctl00$MainContent$hdnselectedbillingstate: null,\r\n        ctl00$MainContent$hdnLoadShippingMethodFromOrders: true,\r\n        ctl00$MainContent$hdnJSIsPagePostback: 'Yes',\r\n        ctl00$MainContent$hdnShippingCountrychanged: 'yes',\r\n        ctl00$MainContent$UserBillingState: null,\r\n        ctl00$MainContent$UserShippingState: null,\r\n        ctl00$MainContent$hdnSelectedShippingMethod: null,\r\n        ctl00$MainContent$hdnBilllingAddressName: null,\r\n        ctl00$MainContent$hdnShippingAddressName: null,\r\n        ctl00$MainContent$hdnTest: null,\r\n        ctl00$MainContent$hdnCreditCardNumber: null,\r\n        ctl00$MainContent$hdnCCYear: null,\r\n        ctl00$MainContent$hdnNextActivePanel: 'billing',\r\n        ctl00$Footer$txtEmailAddress: null,\r\n        ctl00$txtMobileSearch: null,\r\n        ctl00$hdnNecktieflag: null,\r\n        __EVENTTARGET: $('#__EVENTTARGET').val(),\r\n        __EVENTARGUMENT: $('#__EVENTARGUMENT').val(),\r\n        __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n        ctl00$MainContent$txtPromoCode: code,\r\n        __ASYNCPOST: 'true',\r\n        ctl00$MainContent$btnApplyPromo: 'APPLY'\r\n      };\r\n\r\n      return data;\r\n    }\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = 0;\r\n    var newTotal = 0;\r\n    var savings = 0;\r\n\r\n    if (this.getCheckoutType()) {\r\n      savings = parseFloat($('#ctl00_MainContent_DiscountContainer span', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      oldTotal = parseFloat($('.span-subtotal').text().replace(\/[^0-9|.]\/g, ''));\r\n      newTotal = parseFloat($('.span-subtotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n      savings = oldTotal - newTotal;\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  getCheckoutType: function () {\r\n    return location.pathname === '\/checkout\/cart.aspx';\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"paulsboutique": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('#sdk_switcher:eq(0)').attr('class');\r\n\r\n        if (selector.match('de')) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector.match('gb')) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (selector.match('fr')) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['FR'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var checkoutConfigString = response.substring(response.indexOf('{\"payment\":'));\r\n        checkoutConfigString = checkoutConfigString.substring(0, checkoutConfigString.indexOf(']};') + 2)\r\n        var checkoutConfigObject = JSON.parse(checkoutConfigString);\r\n        var savings = Math.abs(checkoutConfigObject.totalsData.discount_amount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"payless": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"payless.mobile": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        \/\/ If data needs to be prepared\r\n        if (type === 'applyCouponUrl') {\r\n            var data = {\r\n                Email: '',\r\n                Coupons: [\r\n                    {\r\n                        Code: code\r\n                    }\r\n                ]\r\n            };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        if (response.resultset.Cart.Coupons && response.resultset.Cart.Coupons[0]) {\r\n            var savings = response.resultset.Cart.Coupons[0].CouponValue.Value;\r\n\r\n            return {\r\n                success: savings > 0,\r\n                savings: isNaN(savings) ? 0.00 : savings\r\n            };\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"pbskids": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(JSON.parse(response).review);\r\n        var piggySavings = parseFloat($('tr.summary-details-amrules.summary-details .price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = parseFloat($('tr.summary-details-amrules.summary-details .price').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        if (piggySavings > savings) {\r\n            savings = piggySavings;\r\n        } else {\r\n            savings = 0;\r\n        }\r\n\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestcode) {\r\n        $('#coupon_code_onestepcheckout').val(bestcode);\r\n        $('#add_coupon_code_button').click();\r\n    }\r\n};",
	"peaceloveworld": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"peacocks": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"formKey\", window.ewmgCheckoutConfig.formKey);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.discount_total);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('input[name=\"discount_code\"]').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('input[name=\"discount_code\"]').trigger('input').trigger('change');\r\n            $('.button--secondary:contains(\"Add\")')[0].click();\r\n        }\r\n    }\r\n\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"pebblegrey": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat(response.match('subtotal(.*)base_subtotal')[0].replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat(response.match('grand_total(.*)base_grand_total')[0].replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"pediped": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var object = {};\r\n            var arr = this.serializeArray();\r\n\r\n            $.each(arr, function () {\r\n                if (object[this.name] !== undefined) {\r\n                    if (!object[this.name].push) {\r\n                        object[this.name] = [object[this.name]];\r\n                    }\r\n                    object[this.name].push(this.value || '');\r\n                } else {\r\n                    object[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return object;\r\n        };\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            var $form = $('#aspnetForm');\r\n\r\n            $form.find('#ctl00_MainContentHolder_txtDiscountCode').val(code);\r\n            $form.append('<input type=\"hidden\" value=\"Apply\" name=\"ctl00$MainContentHolder$btnAddDiscountCode\" value=\"ctl00$MainContentHolder$btnAddDiscountCode\">');\r\n\r\n            return $form.serializeObject();\r\n        }\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#ctl00_MainContentHolder_lblSavingsAmount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"peekcloppenburg": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price-saving.qa-cart-voucher-total.currency', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n     \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"peepsandcompany": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon').val(bestCode);\r\n            $('.button-a.arrow-right').click();\r\n        }\r\n    }\r\n};",
	"pelicanwater": "var ExternalProvider = {\r\n    init: function() {\r\n        $.fn.serializeObject = function()\r\n        {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function() {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n\r\n    prepare: function(action, code) {\r\n        if(['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n        var formData = $('input[name=\"checkout_payment\"]').serializeObject();\r\n        formData = Object.assign(formData, {\r\n            payment: 'authorizenet_aim',\r\n            dc_redeem_code: (action === 'applyCouponUrl') ? code : 'REMOVE'\r\n        });\r\n\r\n        return formData;\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var $response = $.parseHTML(['<div>', response, '<\/div>'].join('')),\r\n            discountWrap = $('#ot_table_discounts', $response);\r\n\r\n        return {\r\n            success: discountWrap.length,\r\n            savings: parseFloat(discountWrap.find('.totalBox').text().replace(\/[^0-9|\\.]\/g, ''))\r\n        };\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n}",
	"peltzshoes": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.NewTotalDiscount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"penningtons": "var ExternalProvider = {\r\n\r\n    parse: function(response) {\r\n\r\n        if (response.success) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(response.amount.replace(\/[^0-9|\\.]\/g, ''))\r\n            }\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n    \r\n    complete: function(bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n\r\n};",
	"peonyandme": "'use strict';\r\n\r\nvar ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    _prepareUrl: function(){\r\n        var applyCouponUrl = $('#applyCouponUrl');\r\n        if(!applyCouponUrl.length) {\r\n            applyCouponUrl = document.createElement(\"input\");\r\n            applyCouponUrl.id = 'applyCouponUrl';\r\n            applyCouponUrl.style.display = \"none\";\r\n            (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n            applyCouponUrl = $('#applyCouponUrl');\r\n            applyCouponUrl.attr('value', $('#dwfrm_cart').attr('action'));\r\n        }\r\n    },\r\n    prepare: function (type, code) {\r\n        var form = $('#dwfrm_cart');\r\n        if (type === \"applyCouponUrl\"){\r\n            form.find('input[name=\"dwfrm_cart_couponCode\"]').val(code);\r\n            this.addHiddenValue(form, 'dwfrm_cart_addCoupon', 'Apply');\r\n            return form.serialize();\r\n        } else if(type === \"clearCouponUrl\") {\r\n            form.find('input[name=\"dwfrm_cart_couponCode\"]').val('');\r\n            this.addHiddenValue(form, 'dwfrm_cart_coupons_i0_deleteCoupon', 'Remove');\r\n            return form.serialize();\r\n        }\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var totalNode = $('div.itemtotals', responseHTML);\r\n        var oldTotalNode = totalNode.find('span.value > strike');\r\n        var oldTotal = oldTotalNode.text().replace(this.nonPriceRegex, '').toString();\r\n        var newTotalNode = totalNode.find('span.totalprice');\r\n        var newTotal = newTotalNode.text().replace(this.nonPriceRegex, '').toString();\r\n\r\n        if(oldTotal.length > 0 && newTotal.length > 0){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(oldTotal) - parseFloat(newTotal)\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSaving){\r\n        location.reload(true);\r\n    },\r\n\r\n    addHiddenValue: function(form, name, value){\r\n        $('<input>').attr({\r\n            type: 'hidden',\r\n            name: name,\r\n            value: value\r\n        }).appendTo(form);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"pepboys": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, couponCode) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var nodeDiscount = $('.span12.lpadded.red > .ftDiscount', responseHTML);\r\n\r\n        this.savings = nodeDiscount.text().replace(this.nonPriceRegex, '');\r\n\r\n        var str = this.savings;\r\n\r\n        var arr = str.replace(\/(\\.\\d\\d)(\\d)\/g, '$1 $2').split(' ').map(function (item) {\r\n            return Number(parseFloat(item).toFixed(2));\r\n        });\r\n\r\n        var result = arr.reduce(function (item, sum) {\r\n            return item + sum;\r\n        }, 0).toFixed(2);\r\n\r\n        this.savings = result;\r\n\r\n        return {\r\n            success: this.savings > 0,\r\n            savings: isNaN(this.savings) ? 0.00 : this.savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    },\r\n    savings: 0.00,\r\n    regularExpression: \/[^0-9|.]\/g\r\n};",
	"performancebike": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_4', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"perfumania": "var ExternalProvider = {\r\n    \r\n    _prepareUrl: function() {\r\n\r\n\t\tvar applyUrlInput = $('#__jpCouponUrl'),\r\n\t\t\tapplyUrl = $('#ShopCartForm').attr('action');\r\n\t\tif(!applyUrlInput.length) {\r\n\t\t\tapplyUrlInput = document.createElement(\"input\");\r\n\t\t\tapplyUrlInput.id = '__jpCouponUrl';\r\n\t\t\tapplyUrlInput.style.display = \"none\";\r\n\t\t\t(document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n\t\t\tapplyUrlInput = $('#__jpCouponUrl');\r\n\t\t}\r\n        \r\n\t\tapplyUrlInput.attr('value', applyUrl);\r\n\t},\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#orderTotals > ul > li.discount > span:eq(1)', responseHTML).html().replace('-', '').replace('$', ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"perfume": "var ExternalProvider = {\r\n  parse: function (response, status, $xhr, code) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var couponApplied = $('#form4 span.flag', responseHTML);\r\n    var savings = 0.00;\r\n    var row;\r\n\r\n    couponApplied.each(function () {\r\n      if ($(this).text().toLowerCase().indexOf(['coupon', code.toLowerCase(), 'applied'].join(' ')) !== -1) {\r\n        $('.cartsubtotal .rightmq2', responseHTML).each(function () {\r\n          row = $(this);\r\n\r\n          if ($('span', $row).text().indexOf('Coupon') !== -1) {\r\n            savings = Math.abs(parseFloat(row.text().replace(\/[^0-9|.]\/g, '')));\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"perfumeemporium": "var ExternalProvider = {\r\n  serializeObejct: function (formArray) {\r\n    var returnArray = {};\r\n    for (var i = 0; i < formArray.length; i++) {\r\n      returnArray[formArray[i]['name']] = formArray[i]['value'];\r\n    }\r\n    return returnArray;\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n    if (type === 'applyCouponUrl') {\r\n      data = this.serializeObejct($('form[name=\"frmSample\"]').serializeArray());\r\n      data = $.extend(data, {\r\n        CouponCode: code\r\n      });\r\n    }\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHtml = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"($\")', responseHtml).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) this.inputCode(bestCode);\r\n  },\r\n  inputCode: function (bestCode) {\r\n    if ($('input[name=\"CouponCode\"]').length) {\r\n      $('input[name=\"CouponCode\"]').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[name=\"CouponCode\"]').trigger('input').trigger('change');\r\n      $('#ccinfo > div:nth-child(3) > div:nth-child(1) > input').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else {\r\n      location.reload();\r\n    }\r\n  }\r\n};",
	"perfumesclub": "var ExternalProvider = {\r\n  prepare: function (step) {\r\n    if (step === 'applyCouponUrl') {\r\n      this.interval = setInterval(() => { window.stop() }, 250);\r\n    } else {\r\n      clearInterval(this.interval);\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#costesContainer .hideStep1 div:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    clearInterval(this.interval);\r\n    if (bestCode) location.reload();\r\n  },\r\n};",
	"perkyjerky": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"perriconemd": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"perryellis": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.order-total').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('.order-total', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#dwfrm_cart_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n    }\r\n  }\r\n};",
	"personalabs": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(-)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $.ajax({\r\n        url: 'https:\/\/shop.personalabs.com\/remote\/v1\/apply-code',\r\n        type: 'POST',\r\n        data: {\r\n          code: bestCode\r\n        },\r\n        success: function () {\r\n          location.reload();\r\n        }\r\n      });\r\n    }\r\n  }\r\n};",
	"personalcreations": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var object = {};\r\n            var data = this.serializeArray();\r\n            $.each(data, function () {\r\n                if (object[this.name] !== undefined) {\r\n                    if (!object[this.name].push) {\r\n                        object[this.name] = [object[this.name]];\r\n                    }\r\n                    object[this.name].push(this.value || '');\r\n                } else {\r\n                    object[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return object;\r\n        };\r\n    },\r\n    prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var urlParams = $('#cartForm').length ? $('#cartForm').attr('action').replace('\/ShoppingCart\/Checkout', '') : '';\r\n        var urlMatchingApply = $('#opBodyForm').length ? 'https:\/\/orders.personalcreations.com' + $('#opBodyForm').attr('action').replace('Navigate', 'ApplySpecialCode') : '';\r\n        var urlMatchingApplyResult = $('#opBodyForm').length ? 'https:\/\/orders.personalcreations.com' + $('#opBodyForm').attr('action').replace('Navigate', 'UpdateOrderSummary') : '';\r\n        var applyUrl = this.isCartPage() ? 'https:\/\/cart.personalcreations.com\/ShoppingCart\/ApplySpecialCode' + urlParams : urlMatchingApply;\r\n        var resultUrl = this.isCartPage() ? 'https:\/\/cart.personalcreations.com\/ShoppingCart\/UpdateCartItems' + urlParams : urlMatchingApplyResult;\r\n\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        applyUrlInput.attr('result', resultUrl);\r\n    },\r\n    prepare: function (action, code) {\r\n        var formDataCart = $('#cartForm').serializeObject();\r\n        var formDataCheckout = {};\r\n        if (action === 'applyCouponUrl' && this.isCartPage()) {\r\n            formDataCart = Object.assign(formDataCart, {\r\n                SpecialCode: code\r\n            });\r\n            return formDataCart;\r\n        } else if (action === 'applyCouponUrl' && !this.isCartPage()) {\r\n            formDataCheckout = {\r\n                EditMode: 'False',\r\n                TrackingDictionaryJson: '',\r\n                TrackingDictionaryDeltaJson: '',\r\n                DisplayEmailMarketingOptIn: 'True',\r\n                EmailOptInSelected: true,\r\n                EmailOptInSelected: false,\r\n                AllowedCodes: 'All',\r\n                OldPrid: '',\r\n                OldPridRaw: '',\r\n                OldPridRawType: '',\r\n                IsReviewOrderSpecialCodeApplied: '',\r\n                SpecialCode: code,\r\n                deliveryRebateLinkText: 'Delivery Rebate&lt;\/br&gt;Click Here',\r\n                amountCharged: $('input[name=\"amountCharged\"]:first').val(),\r\n                AllowedCodes: 'All',\r\n            };\r\n            return formDataCheckout;\r\n        }\r\n        if (action === 'resultUrl' && !this.isCartPage()) {\r\n            formDataCheckout = {\r\n                EditMode: 'False',\r\n                TrackingDictionaryJson: '',\r\n                TrackingDictionaryDeltaJson: '',\r\n                DisplayEmailMarketingOptIn: 'True',\r\n                EmailOptInSelected: true,\r\n                EmailOptInSelected: false,\r\n                AllowedCodes: 'All',\r\n                OldPrid: '',\r\n                OldPridRaw: '',\r\n                OldPridRawType: '',\r\n                IsReviewOrderSpecialCodeApplied: '',\r\n                SpecialCode: code,\r\n                deliveryRebateLinkText: 'Delivery Rebate&lt;\/br&gt;Click Here',\r\n                amountCharged: $('input[name=\"amountCharged\"]:first').val(),\r\n                AllowedCodes: 'All',\r\n            };\r\n            return formDataCheckout;\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        if ($('#specialCodeTxtBox').length) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0;\r\n        if (this.isCartPage()) {\r\n            var newTotal = parseFloat($('.quantityAndPrice .price .value:eq(1)', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n            var oldTotal = parseFloat($('.subTotalsContainer .value').text().replace(\/[^.0-9]\/g, ''));\r\n            savings = parseFloat(oldTotal - newTotal);\r\n        } else {\r\n            savings = parseFloat($('.orderSummaryDetails:last .orderSummaryItem:last .discount:last', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider.prepareUrl();",
	"personalizationmall": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#ctl00_mainContent_rowCouponTotal', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#ctl00_mainContent_txtCouponCode').val(bestCode);\r\n            $('#ctl00_mainContent_cmdReviseDiscout').click();\r\n        }\r\n    }\r\n};",
	"personalizationuniverse": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n\r\n      $.each(data, function () {\r\n        if (object[this.name] !== undefined) {\r\n          if (!object[this.name].push) {\r\n            object[this.name] = [object[this.name]];\r\n          }\r\n\r\n          object[this.name].push(this.value || '');\r\n        } else {\r\n          object[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    var formData = $('#PromotionCodeForm').serializeObject();\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      formData = Object.assign(formData, {\r\n        promoCode: code\r\n      });\r\n\r\n      return formData;\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#promotionAmt', responseHTML).val().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCode').val(bestCode);\r\n      $('a[name=\"Apply Promotion Button\"]')[0].click();\r\n    }\r\n  }\r\n};",
	"personalizedplanet": "var ExternalProvider = {\r\n    init: function() {\r\n        this.priceSelector = \"#shopping-cart-totals-table tfoot tr:first .a-right:last strong:last\";\r\n        this.initialPrice = this.getCurrentPrice();\r\n    },\r\n    cleanPrice: function(price) {\r\n        return parseFloat(price.trim().replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n    getCurrentPrice: function(context) {\r\n        return this.cleanPrice($(this.priceSelector, context || document).last().text());\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newPrice = this.getCurrentPrice(responseHTML);\r\n        var savings = this.initialPrice - newPrice;\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function() {\r\n        location.reload();\r\n    }\r\n};",
	"personalizedplanet.mobile": "var ExternalProvider = {\r\n    init: function() {\r\n        this.priceSelector = \"#shopping-cart-totals-table tfoot tr:first .a-right:last strong:last\";\r\n        this.initialPrice = this.getCurrentPrice();\r\n    },\r\n    cleanPrice: function(price) {\r\n        return parseFloat(price.trim().replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n    getCurrentPrice: function(context) {\r\n        return this.cleanPrice($piggyJq(this.priceSelector, context || document).last().text());\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n        var newPrice = this.getCurrentPrice(responseHTML);\r\n        var savings = this.initialPrice - newPrice;\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function() {\r\n        location.reload();\r\n    }\r\n};",
	"petcarerx": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseObject = response.filter(function (e) { return e.Title === \"PROMO CODE\" })[0]\r\n        var savings = parseFloat(responseObject.total_savings.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#newcoupon_textbox').val(bestCode);\r\n            $('.formBtn').click();\r\n        }\r\n    }\r\n};",
	"petcaresupplies": "'use strict';\r\n\r\nvar ExternalProvider = {\r\n    _prepareUrl: function(){\r\n        var applyCouponUrl = $('#applyCouponUrl');\r\n        if(!applyCouponUrl.length) {\r\n            applyCouponUrl = document.createElement(\"input\");\r\n            applyCouponUrl.id = 'applyCouponUrl';\r\n            applyCouponUrl.style.display = \"none\";\r\n            (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n            applyCouponUrl = $('#applyCouponUrl');\r\n            applyCouponUrl.attr('value', window.location.href);\r\n        }\r\n    },\r\n    prepare: function(action, code) {\r\n        var form = $('#form1');\r\n        if(action === 'applyCouponUrl') {\r\n            var serialized = this.applyCouponToForm(form, code).serialize();\r\n            return serialized;\r\n        } else if(action === 'clearCouponUrl'){\r\n            var serialized = this.applyCouponToForm(form, '').serialize();\r\n            return serialized;\r\n        }\r\n        return null;\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsHTML = $('#ContentPlaceHolder1_lblCpnDisc, #ContentPlaceHolder1_Cart_lblCouponDisc', responseHTML);\r\n        var savingsText = savingsHTML.text();\r\n        var savings = savingsText.replace(\/[^0-9|\\.]\/g, '').toString();\r\n        if(savings.length > 0){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings) {\r\n        if (bestCode) location.reload(true);\r\n    },\r\n\r\n    applyCouponToForm: function(form, code){\r\n        this.addHiddenValue(form, '__ASYNCPOST', true);\r\n        if($('#ContentPlaceHolder1_TxtCoupon').length > 0) {\r\n            \/\/cart\r\n            form.find('input[name=\"ctl00$ContentPlaceHolder1$TxtCoupon\"]').val(code);\r\n            this.addHiddenValue(form, 'ctl00$ScriptManager1', 'ctl00$ContentPlaceHolder1$upMycart|ctl00$ContentPlaceHolder1$btnCouponApply');\r\n            this.addHiddenValue(form, 'ctl00$ContentPlaceHolder1$btnCouponApply', 'Apply');\r\n        } else if($('input[name=\"ctl00$ContentPlaceHolder1$Cart$TxtCoupon\"]').length > 0) {\r\n            \/\/checkout\r\n            form.find('input[name=\"ctl00$ContentPlaceHolder1$Cart$TxtCoupon\"]').val(code);\r\n            this.addHiddenValue(form, 'ctl00$ScriptManager1', 'ctl00$ContentPlaceHolder1$Cart$updCart|ctl00$ContentPlaceHolder1$Cart$Cmd_Calc');\r\n            this.addHiddenValue(form, 'ctl00$ContentPlaceHolder1$Cart$Cmd_Calc', 'Apply');\r\n        }\r\n\r\n        return form;\r\n    },\r\n\r\n    addHiddenValue: function (form, name, value) {\r\n        $('<input>').attr({\r\n            type: 'hidden',\r\n            name: name,\r\n            value: value\r\n        }).appendTo(form);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"petco": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (action, code) {\r\n        if (['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return {};\r\n\r\n        var formData = $('#PromotionCodeForm').serializeObject();\r\n\r\n        if (action === 'clearCouponUrl') {\r\n            formData.taskType = 'R';\r\n        }\r\n\r\n        formData.promoCode = code;\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_4_tel', responseHTML).val());\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#enter-promo-code').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#enter-promo-code').get(0).dispatchEvent(changeEvent);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#WC_PromotionCodeDisplay_links_1').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"peterhahn": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-article-column.price:contains(\"-\")', responseHTML).eq(0).text().replace(\/[^0-9|.]\/g, '') \/ 100);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"peterthomasroth": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount .value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"petfooddirect": "var ExternalProvider={\r\n    oldCartPrice:0,\r\n    init: function(){\r\n        var price = $(\"#shopping-cart-totals-table tfoot .price\").text().replace(\/[^0-9|\\.]\/g,'')\r\n        if(price)\r\n            this.oldCartPrice = parseFloat(price)\r\n        if(this.oldCartPrice == NaN)\r\n            this.oldCartPrice = 0    \r\n    },\r\n    \r\n    parse:function(response,status,$xhr,code){\r\n        var jqObj = $.parseHTML(response)\r\n        var newPrice = parseFloat($(\"#shopping-cart-totals-table tfoot .price\",jqObj).text().replace(\/[^0-9|\\.]\/g,''))\r\n        var discount = this.oldCartPrice - newPrice\r\n        if(discount>0){\r\n            return{\r\n                success:true,\r\n                savings:discount\r\n            }\r\n        }\r\n        return{\r\n            success:false,\r\n            savings:0.0\r\n        }\r\n    },\r\n\r\n    complete:function(bestCode,bestSavings){\r\n        location.reload()\r\n    }\r\n}",
	"petitbateau": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        function retrieveWindowVariable(variable) {\r\n            var scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { $('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + \")); }\\n\";\r\n            var script = document.createElement('script');\r\n            script.id = 'tmpScript';\r\n            script.appendChild(document.createTextNode(scriptContent));\r\n            (document.body || document.head || document.documentElement).appendChild(script);\r\n            var value = $(\"body\").attr(\"tmp_\" + variable);\r\n            $(\"body\").removeAttr(\"tmp_\" + variable);\r\n\r\n            return JSON.parse(value);\r\n        }\r\n\r\n        if (type == 'applyCouponUrl') {\r\n            var data = {\r\n                PromoCode: code\r\n            };\r\n\r\n            data['__RequestVerificationToken'] = retrieveWindowVariable('$.onestop.user.viewModel.attachAntiForgeryToken()').__RequestVerificationToken;\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.os-col-summary .subtotal').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('.os-col-summary .subtotal', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if (savings > 0.00) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"petsathome": "var ExternalProvider = {\r\n  __init: function() {\r\n    this.createEventInstance();\r\n    this.__prepareUrl();\r\n  },\r\n  __prepareUrl: function() {\r\n    const script = document.createElement('script');\r\n    let scriptContent = `\r\n      var createInput = ${this.createInput.toString()};\r\n      var catalogId = WCParamJS.catalogId;\r\n      var storeId = WCParamJS.storeId;\r\n      createInput('catalogId', catalogId);\r\n      createInput('storeId', storeId);\r\n    `;\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n    $('#tmpScript').remove();\r\n  },\r\n  parse: function () {\r\n    let savings = this.getDiscountRequest();\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#add-promocode').get(0).click();\r\n      setTimeout(() => {\r\n        this.inputBestCode(bestCode);\r\n      }, 200);\r\n    }\r\n  },\r\n  inputBestCode: function(bestCode) {\r\n    $('input[name=\"promo\"]').val(bestCode).get(0).dispatchEvent(new Event('input', { bubbles: true }));\r\n    $('#apply-promo-button').click();\r\n  },\r\n  getDiscountRequest: function() {\r\n    let discount = 0;\r\n    let catalogId = $('#catalogId').val();\r\n    let storeId = $('#storeId').val();\r\n    let orderId = $('input[name=\"orderId\"]').val();\r\n    $.ajax({\r\n      url: `https:\/\/www.petsathome.com\/shop\/OrderTotalsDisplayView?catalogId=${catalogId}&orderId=${orderId}&langId=-1&storeId=${storeId}&promoModal=open`,\r\n      type: 'POST',\r\n      data: {\r\n        requesttype: 'ajax'\r\n      },\r\n      async: false,\r\n      success: function(response) {\r\n        const responseHTML = $.parseHTML(response);\r\n        discount = parseFloat($('.basket-summary__discount:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n      }\r\n    });\r\n    return discount;\r\n  },\r\n  createInput: function(id, value) {\r\n    if(document.getElementById(id) === null) {\r\n      let createdInput = document.createElement(\"input\");\r\n      createdInput.id = id;\r\n      createdInput.setAttribute('type', 'hidden');\r\n      createdInput.setAttribute('value', value);\r\n      (document.body || document.head || document.documentElement).appendChild(createdInput);\r\n    } else {\r\n      document.getElementById(id).value = value;\r\n    }\r\n  },\r\n  createEventInstance: function () {\r\n    this.mouseClick = new MouseEvent('click', { view: window, bubbles: true, cancelable: true });\r\n    this.inputEvent = new Event('input', { bubbles: true });\r\n  },\r\n};\r\nExternalProvider.__init();",
	"petsmart": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var $response = $.parseHTML(response);\r\n        var couponApplied = $('.product-coupon-discount', $response);\r\n        var codeFound = couponApplied.filter(function () {\r\n            return $('.applied-promo-code', $(this)).text().toLowerCase() === code.toLowerCase();\r\n        });\r\n        var oldTotal = parseFloat($('.order-value').text().replace('$', ''));\r\n        var savings = oldTotal - parseFloat($('.order-value', $response).text().replace('$', ''));\r\n\r\n        return {\r\n            success: codeFound.length !== 0,\r\n            savings: codeFound.length ? savings : 0\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"petsupplies": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = !this.isBillingPage() ? 'https:\/\/www.petsupplies.com\/Cart.aspx' : 'https:\/\/www.petsupplies.com\/BillingShipping.aspx';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        var formData = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            if (!this.isBillingPage) {\r\n                formData = {\r\n                    op: '0',\r\n                    eids: '[38,38,52]' };\r\n            }\r\n\r\n            formData = {\r\n                op: '0',\r\n                eids: '[39,39]' };\r\n\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: 'https:\/\/www.petsupplies.com\/EventTracker.ashx',\r\n                cache: false,\r\n                data: formData,\r\n                contentType: 'application\/x-www-form-urlencoded'\r\n            });\r\n        }\r\n\r\n        if (type === 'clearCouponUrl') {\r\n            formData = {\r\n                __EVENTTARGET: $('#__EVENTTARGET').val(),\r\n                __EVENTARGUMENT: $('#__EVENTARGUMENT').val(),\r\n                __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n                __VIEWSTATEGENERATOR: $('#__VIEWSTATE').val(),\r\n                _forgeryToken: $('#_forgeryToken').val(),\r\n                ctl00$ctl00$InjectedHeaderControl$Search: $('#ctl00_ctl00_InjectedHeaderControl_Search').val(),\r\n                qty73064779: $('#qty73064779').val(),\r\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$btnUndoPromoCode: '',\r\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$ddlDonationAmount: $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_ddlDonationAmount').find(':selected').val(),\r\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$hidCartItemId: ''\r\n            };\r\n\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: 'https:\/\/www.petsupplies.com\/Cart.aspx',\r\n                cache: false,\r\n                data: formData,\r\n                contentType: 'application\/x-www-form-urlencoded'\r\n            });\r\n        }\r\n\r\n        if (type === 'resultUrl') {\r\n            if (!this.isBillingPage()) {\r\n                data = {\r\n                    __EVENTTARGET: $('#__EVENTTARGET').val(),\r\n                    __EVENTARGUMENT: $('#__EVENTARGUMENT').val(),\r\n                    __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n                    __VIEWSTATEGENERATOR: $('#__VIEWSTATE').val(),\r\n                    _forgeryToken: $('#_forgeryToken').val(),\r\n                    ctl00$ctl00$InjectedHeaderControl$Search: $('#ctl00_ctl00_InjectedHeaderControl_Search').val(),\r\n                    qty73064779: $('#qty73064779').val(),\r\n                    ctl00$ctl00$CenterContentArea$MainContent$ctl00$txtPromoCode: code,\r\n                    ctl00$ctl00$CenterContentArea$MainContent$ctl00$btnPromoCode: '',\r\n                    ctl00$ctl00$CenterContentArea$MainContent$ctl00$ddlDonationAmount: $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_ddlDonationAmount').find(':selected').val(),\r\n                    ctl00$ctl00$CenterContentArea$MainContent$ctl00$hidCartItemId: $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_hidCartItemId').val()\r\n                };\r\n\r\n                return data;\r\n            }\r\n\r\n            data = {\r\n                __EVENTTARGET: $('#__EVENTTARGET').val(),\r\n                __EVENTARGUMENT: $('#__EVENTARGUMENT').val(),\r\n                __LASTFOCUS: $('#__LASTFOCUS').val(),\r\n                __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n                __VIEWSTATEGENERATOR: $('#__VIEWSTATE').val(),\r\n                _forgeryToken: $('#_forgeryToken').val(),\r\n                ctl00$MainContent$billingShipping$TxtBxEmail: '',\r\n                ctl00$MainContent$billingShipping$TxtBxFName: '',\r\n                ctl00$MainContent$billingShipping$TxtBxLName: '',\r\n                ctl00$MainContent$billingShipping$TxtBxAddy1: '',\r\n                ctl00$MainContent$billingShipping$TxtBxAddy2: '',\r\n                ctl00$MainContent$billingShipping$TxtBxCity: '',\r\n                ctl00$MainContent$billingShipping$DDLState: '',\r\n                ctl00$MainContent$billingShipping$TxtBxZip: '',\r\n                ctl00$MainContent$billingShipping$DDLCountry: '',\r\n                ctl00$MainContent$billingShipping$TxtBxCompany: '',\r\n                ctl00$MainContent$billingShipping$TxtBxDayPhone: '',\r\n                ctl00$MainContent$billingShipping$TxtBxEveningPhone: '',\r\n                ctl00$MainContent$billingShipping$TxtBxFax: '',\r\n                ctl00$MainContent$billingShipping$billHdnCountryUpdate: '',\r\n                ctl00$MainContent$billingShipping$TxtBxGuestPw: '',\r\n                ctl00$MainContent$billingShipping$TxtBxGuestPwConf: '',\r\n                ctl00$MainContent$billingShipping$chkShippingIsSameAsBilling: 'on',\r\n                ctl00$MainContent$billingShipping$TxtBxShipFName: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipLName: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipAddy1: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipAddy2: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipCity: '',\r\n                ctl00$MainContent$billingShipping$DDLShipState: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipZip: '',\r\n                ctl00$MainContent$billingShipping$DDLShipCountry: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipCompany: '',\r\n                ctl00$MainContent$billingShipping$TxtBxShipDayPhone: '',\r\n                ctl00$MainContent$billingShipping$shipHdnCountryUpdate: '',\r\n                hidUpgradeEligible: 'true',\r\n                ctl00$MainContent$billingShipping$grpPaymentOptions: 'radbtnCreditCard',\r\n                ctl00$MainContent$billingShipping$hdnEditOrAddCard: '0',\r\n                ctl00$MainContent$billingShipping$DDLCCType: '',\r\n                ctl00$MainContent$billingShipping$TxtBxCCNum: '',\r\n                ctl00$MainContent$billingShipping$TxtBxCCV: '',\r\n                ctl00$MainContent$billingShipping$DDLExpMonth: '',\r\n                ctl00$MainContent$billingShipping$DDLExpYear: '',\r\n                ctl00$MainContent$billingShipping$TxtGiftCoupon: '',\r\n                ctl00$MainContent$billingShipping$txtGiftCard: '',\r\n                ctl00$MainContent$billingShipping$txtGiftCardPin: '',\r\n                ctl00$MainContent$billingShipping$txtPromoCode: code,\r\n                ctl00$MainContent$billingShipping$btnPromoCode: '',\r\n                ctl00$MainContent$billingShipping$chkEmailOptOut: 'on',\r\n                ctl00$MainContent$billingShipping$hdnAutoShipUpdates: ''\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    isBillingPage: function () {\r\n        return \/BillingShipping\/.test(location.href);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0;\r\n\r\n        if (!this.isBillingPage) {\r\n            savings = parseFloat($('.cart-product-savings:contains(\"$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        } else {\r\n            savings = parseFloat($('.right-align.highlight-text.promo-amount-value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_txtPromoCode').val(bestCode);\r\n        $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_btnPromoCode').click();\r\n        $('#ctl00_MainContent_billingShipping_txtPromoCode').val(bestCode);\r\n        $('ctl00_MainContent_billingShipping_btnPromoCode').click();\r\n        $('#switchNewOffer').click();\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"pfaltzgraff": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.match('discount_amount\":\"-(.*)base_discount_amount\":\"-')[0].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('#coupon_code').val(bestCode);\r\n                $('button[value=\"Apply Discount\"').click();\r\n            } else {\r\n                var data = {\r\n                    remove: 0,\r\n                    coupon_code: bestCode\r\n                };\r\n\r\n                $.ajax({\r\n                    url: 'https:\/\/www.pfaltzgraff.com\/checkout\/cart\/couponPost\/',\r\n                    type: 'POST',\r\n                    dataType: 'json',\r\n                    data: data,\r\n                    async: false\r\n                });\r\n                location.reload();\r\n            }\r\n        }\r\n    },\r\n\r\n    isCartPage: function () {\r\n        return \/checkout\\\/cart\/.test(location.href);\r\n    }\r\n};",
	"pfflyers": "var ExternalProvider = {\r\n  prepare: function (step, code) {\r\n    if (step === 'applyCouponUrl') {\r\n      return { couponCode: code };\r\n    } else if (step === 'clearCouponUrl') {\r\n      return {\r\n        promoCode: code,\r\n        couponToken: this.getCookieByName('couponToken')\r\n      };\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    const htmlContainer = $('<div><\/div>');\r\n    const responseHTML = htmlContainer.html(response);\r\n    let savings = parseFloat($('.promo p:contains(\"-$\")', responseHTML).text().split('(')[1].replace(\/[^0-9.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  getCookieByName: function (name) {\r\n    let value = '; ' + document.cookie;\r\n    let parts = value.split('; ' + name + '=');\r\n    if (parts.length === 2) return parts.pop().split(';').shift();\r\n  },\r\n};",
	"pflanzenkoelle": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.panel--td.column--total-price.block.is--align-right', responseHTML).text().replace(\/[^0-9|]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"sVoucher\"]').val(bestCode).closest('form').submit();\r\n    }\r\n  }\r\n};",
	"pharmapacks": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#CheckoutTotals strong:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    }\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"couponcode\"').val(bestCode);\r\n      $('.button.dark.cart-btns').click();\r\n    }\r\n  }\r\n};",
	"philosophy": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"phonesoap": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var str = $('.reduction-code__text:contains(\"-$\"):last', responseHTML).text();\r\n    var pos = str.indexOf(\"(\") + 1;\r\n    str = str.slice(pos, str.lastIndexOf(\")\"));\r\n    var savings = parseFloat(str.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"photobookworldwidesdnbhd": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('input[placeholder=\"Enter Voucher Code here\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[placeholder=\"Enter Voucher Code here\"]').trigger('input').trigger('change');\r\n      $('.row.my-4 button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.modal.show .close').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    setTimeout(function () {\r\n      var maxWait = 200;\r\n      var waited = 0;\r\n      var selector = $('.modal.show').length;\r\n      var waitForClose = setInterval(function () {\r\n        var confirmed = step === 'injectCoupon' ? selector : !selector;\r\n\r\n        if ((confirmed) || (waited > maxWait)) {\r\n          clearInterval(waitForClose);\r\n          setTimeout(function () {\r\n            next();\r\n          }, 500);\r\n        }\r\n\r\n        waited++;\r\n      }, 10);\r\n    }, 50);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('tbody .d-lg-table-cell', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[placeholder=\"Enter Voucher Code here\"]').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[placeholder=\"Enter Voucher Code here\"]').trigger('input').trigger('change');\r\n      $('.row.my-4 button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  }\r\n};",
	"photography": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (this.isCartPage()) {\r\n      data = {\r\n        ctl00_ATKScriptManager_HiddenField: $('#ctl00_ATKScriptManager_HiddenField').val(),\r\n        __EVENTTARGET: type === 'applyCouponUrl' ? 'ctl00$MainBodyContainer$ApplyCoupon' : 'ctl00$MainBodyContainer$AppliedCoupons$ctl01$RemoveCoupon',\r\n        __EVENTARGUMENT: '',\r\n        __VIEWSTATE: '',\r\n        ctl00$Master_VSKey: $('#ctl00_Master_VSKey').val(),\r\n        ctl00$MainBodyContainer$cpePrints_ClientState: '',\r\n        ctl00$MainBodyContainer$NonPrintLineItems$ctl00$hidLineItemID: $('#ctl00_MainBodyContainer_NonPrintLineItems_ctl00_hidLineItemID').val(),\r\n        ctl00$MainBodyContainer$NonPrintLineItems$ctl00$ProductQuantity: $('#ctl00_MainBodyContainer_NonPrintLineItems_ctl00_ProductQuantity').val(),\r\n        ctl00$MainBodyContainer$NonPrintLineItems$ctl00$Attributes$ctl01$hidAttributeID: $('#ctl00_MainBodyContainer_NonPrintLineItems_ctl00_Attributes_ctl01_hidAttributeID').val(),\r\n        ctl00$MainBodyContainer$NonPrintLineItems$ctl00$Attributes$ctl01$hidAttributeDetailID: '',\r\n        ctl00$MainBodyContainer$NonPrintLineItems$ctl00$Attributes$ctl01$AttributeValueList: $('#ctl00_MainBodyContainer_NonPrintLineItems_ctl00_Attributes_ctl01_AttributeValueList').val(),\r\n        ctl00$MainBodyContainer$NonPrintLineItems$ctl00$Attributes$ctl01$AttributeValueTextExtender_ClientState: '',\r\n        ctl00$MainBodyContainer$NonPrintLineItems$ctl00$Attributes$ctl01$AttributeValueRegExExtender_ClientState: '',\r\n        ctl00$MainBodyContainer$NonPrintLineItems$ctl00$Instructions: '',\r\n        ctl00$MainBodyContainer$CouponCode: code,\r\n        ctl00$MainBodyContainer$hidBorderToApplyAfterUpdateCart: '',\r\n        ctl00$MainBodyContainer$hidPrintItemsToSwapToNewProductID: '',\r\n        ctl00$MainBodyContainer$hidPromptForSwapToNewProductID: ''\r\n      };\r\n    } else {\r\n      data = {\r\n        ctl00_ATKScriptManager_HiddenField: $('#ctl00_ATKScriptManager_HiddenField').val(),\r\n        __EVENTTARGET: type === 'applyCouponUrl' ? 'ctl00$MainBodyContainer$ApplyGiftCertificate' : 'ctl00$MainBodyContainer$AppliedDiscounts$ctl01$RemoveDiscount',\r\n        __EVENTARGUMENT: '',\r\n        __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n        __VIEWSTATEGENERATOR: $('#__VIEWSTATEGENERATOR').val(),\r\n        ctl00$Master_VSKey: '',\r\n        ctl00$MainBodyContainer$BBID: '',\r\n        ctl00$MainBodyContainer$GiftCertificateCode: code,\r\n        ctl00$MainBodyContainer$GiftCertificateCodeRFVExtender_ClientState: '',\r\n        ctl00$MainBodyContainer$OrderInstructions: '',\r\n        ctl00$MainBodyContainer$CardType: '',\r\n        ctl00$MainBodyContainer$txtCardNumber: '',\r\n        ctl00$MainBodyContainer$txtCardNumberRFVExtender_ClientState: '',\r\n        ctl00$MainBodyContainer$CardMonth: '',\r\n        ctl00$MainBodyContainer$CardYear: ''\r\n\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#ctl00_MainBodyContainer_DiscountTotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      var clickEvent = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n\r\n      if (this.isCartPage()) {\r\n        $('#ctl00_MainBodyContainer_CouponCode').val(bestCode);\r\n        $('#ctl00_MainBodyContainer_ApplyCoupon').get(0).dispatchEvent(clickEvent);\r\n      } else {\r\n        $('#ctl00_MainBodyContainer_GiftCertificateCode').val(bestCode);\r\n        $('#ctl00_MainBodyContainer_ApplyGiftCertificate').get(0).dispatchEvent(clickEvent);\r\n      }\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return $('#ctl00_MainBodyContainer_txtCardNumber').length === 0;\r\n  }\r\n};",
	"photos": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.discount-amount', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"picanovauk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__item-value:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon-number').val(bestCode);\r\n      $('#apply-coupon').click();\r\n    }\r\n  }\r\n};",
	"pictureframes": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var entityId = '';\r\n    var entityIdElement = $('#__jpEntityId');\r\n    $.ajax({\r\n      url: 'https:\/\/www.pictureframes.com\/checkout\/#payment',\r\n      type: 'GET',\r\n      async: false,\r\n      success: function (response) {\r\n        entityId = response.match(\/entity_id\":\"(.*)\/)[1].split('\"')[0];\r\n      }\r\n    });\r\n\r\n    if (entityIdElement.length < 1) {\r\n      $('<input>').attr({\r\n        id: '__jpEntityId',\r\n        value: entityId,\r\n        type: 'hidden'\r\n      }).appendTo('body');\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(Math.abs(response.totals.base_discount_amount));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"pictureitoncanvas": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n        var storeCode = $('#Store_Code').val(),\r\n            Session_ID = $('#Session_ID').val(),\r\n            fallbackPaymentMethod = 'authnet:AmerExp',\r\n            paypaladvActive = false,\r\n            randomNum = generateRandNo(),\r\n            PaymentMethodValue = $('#PaymentMethod').val(),\r\n            shippingMethod = $('#ShippingMethod').val();\r\n\r\n        function generateRandNo(){return Math.ceil(Math.random() * 1000000);}\r\n\r\n        function AJAXpaymentMethodValue(){\r\n            var PaymentMethodModule = $('#PaymentMethod').val().split(':')[0];\r\n            if(PaymentMethodModule === 'paypalpro' && $('#PaymentMethod').val() !== 'paypalpro:PAYP'){\r\n                return fallbackPaymentMethod;\r\n            } else {\r\n                return PaymentMethodValue;\r\n            }\r\n        }\r\n\r\n        var data = {};\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data = {\r\n                Screen: 'OPAY',\r\n                Action: 'RDMCPN,CTAX,SHIP,ORDR',\r\n                Store_Code: storeCode,\r\n                Session_ID: Session_ID,\r\n                Checkout_Version: 'OOPC',\r\n                contentToUpdate: 'coupon,basket',\r\n                coupon: code,\r\n                value: 'no',\r\n                PaymentMethod: AJAXpaymentMethodValue(),\r\n                ShippingMethod: shippingMethod,\r\n                v: randomNum\r\n            };\r\n\r\n            if( paypaladvActive ){\r\n                data.contentToUpdate += ',payment';\r\n            }\r\n        } else {\r\n            data = {\r\n                Screen: 'OOPC',\r\n                Action: 'REMOVECOUPONS',\r\n                Store_Code: storeCode,\r\n                Session_ID: Session_ID,\r\n                Checkout_Version: 'OOPC',\r\n                contentToUpdate: 'coupon,basket',\r\n                clearFreeShipping: 'true',\r\n                v: randomNum\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('#basket-totals .formatted-total').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('#basket-totals .formatted-total', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"picturesongold": "var ExternalProvider = {\r\n    parse: function (response, code) {\r\n        var $response = $.parseHTML(response),\r\n            $promo = $('input[name=\"promo\"]', $response),\r\n            $cartTotal = $('.tableContent .cartTotals', $response),\r\n            codeFound = $promo.val().toLowerCase() === code.toLowerCase(),\r\n            savings = 0.00, $item;\r\n\r\n        $cartTotal.each(function () {\r\n            $item = $(this);\r\n            if ($item.text().indexOf('Discount') !== -1) {\r\n                savings = parseFloat($item.next().text().replace(\/[^0-9|.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"picturesongold.mobile": "var ExternalProvider = {\r\n    init: function() {\r\n        $.fn.serializeObject = function()\r\n        {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function() {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n\r\n    prepare: function (action, code) {\r\n        if(['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n        var formData = $('form[name=\"checkoutShip\"]').serializeObject();\r\n\r\n        formData = Object.assign(formData, {\r\n            promo: action === 'applyCouponUrl' ? code : ' ',\r\n            x: 213,\r\n            y: 29\r\n        });\r\n\r\n        return formData;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var $response = $.parseHTML(response),\r\n            $cartTotal = $('.tblContNew .cartTotalsHd', $response),\r\n            codeFound = false, savings = 0.00, $item;\r\n\r\n        $cartTotal.each(function() {\r\n            $item = $(this);\r\n            if($item.text().indexOf('Discount') !== -1) {\r\n\r\n                codeFound = true;\r\n                savings = parseFloat($item.next('.cartTotalsHd').text().replace(\/[^0-9|.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n}",
	"pier1": "var ExternalProvider = {\r\n  init: function () {\r\n    if ($('.coupon-remove').length > 0) {\r\n      var appliedCode = $('.coupon-code span').text();\r\n\r\n      $.ajax({\r\n        url: 'https:\/\/www.pier1.com\/on\/demandware.store\/Sites-pier1_us-Site\/default\/Cart-RemoveCoupon',\r\n        mode: 'GET',\r\n        data: { couponCode: appliedCode }\r\n      });\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(Math.abs(response.coupons.appliedCoupons[0].discount.value));\r\n    \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"pimkiefr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount .rate-item', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"pimsleur": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'applyCouponUrl') {\r\n      if (this.isCartPage() === true) {\r\n        $.ajax({\r\n          url: $('#cart-items-form').attr('action'),\r\n          type: 'POST',\r\n          async: false,\r\n          data: {\r\n            dwfrm_cart_shipments_i0_items_i0_quantity: $('input[name=\"dwfrm_cart_shipments_i0_items_i0_quantity\"]').val(),\r\n            dwfrm_cart_updateCart: 'dwfrm_cart_updateCart',\r\n            dwfrm_cart_couponCode: code,\r\n            dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon'\r\n          }\r\n        });\r\n      } else {\r\n        $.ajax({\r\n          url: 'https:\/\/shop.pimsleur.com\/on\/demandware.store\/Sites-Pimsleur-Site\/default\/Cart-AddCouponJson?couponCode=' + code + '&format=ajax',\r\n          type: 'GET',\r\n          async: false\r\n        });\r\n\r\n        if (type === 'resultUrl') {\r\n          $.ajax({\r\n            url: $('#dwfrm_billing').attr('action'),\r\n            type: 'POST',\r\n            async: false\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = 0;\r\n\r\n    if (this.isCartPage() === true) {\r\n      savings = parseFloat($('.discount .value', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    } else {\r\n      var oldTotal = parseFloat($('.order-subtotal').text().replace(\/[^0-9.]\/g, ''));\r\n      var newTotal = parseFloat($('.order-subtotal', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n      savings = oldTotal - newTotal;\r\n    }\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      if (this.isCartPage() === true) {\r\n        $('#dwfrm_cart_couponCode').val(bestCode);\r\n        $('#add-coupon').click();\r\n      } else {\r\n        location.reload();\r\n      }\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return $('#dwfrm_cart_couponCode').length === 1;\r\n  }\r\n};",
	"pinkbasis": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"pinkclassy": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = $('.dropdown-toggle.dropdown-toggle-arrow').last().text();\r\n\r\n        if (newCurrency === 'EUR') {\r\n            locale = (localeMapping.FR || localeMapping.DE);\r\n        } else if (newCurrency === 'GBP') {\r\n            locale = localeMapping.GB;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var validCoupon = response.error === '';\r\n        var responseHTML = $.parseHTML(response.content);\r\n        var discAmt = parseFloat($('.text-danger.Arial', responseHTML).eq(0).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = validCoupon ? discAmt : 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"pinklily": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.coupon_value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        var couponId = $('.cart-total-label a', responseHTML).attr('href');\r\n\r\n\r\n        if (couponId) {\r\n            couponId = couponId.replace('\/cart.php?action=removecoupon&couponid=', '');\r\n            $.ajax({\r\n                url: 'https:\/\/pinklily.com\/cart.php?action=removecoupon&couponid=' + couponId,\r\n                async: false\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"pipingrock": "\/\/ If it detects an AJAX header, it doesn't return the full page.\r\n$.ajaxSettings.beforeSend = function(xhr){\r\n    xhr.setRequestHeader('X-Requested-With', {toString: function(){ return ''; }});\r\n};\r\n\r\n\r\nvar ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        \/\/ Below are functional hacks to get the price change\r\n        var oldPrice = Number($('.cart-value-g_subtotal_after_discounts').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n            newPrice = Number($('.cart-value-g_subtotal_after_discounts', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n            savings = (oldPrice - newPrice)\/100;\r\n\r\n\r\n        if (savings > 0){\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"pixiemarket": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    var savings = oldTotal - newTotal;\r\n\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"pizzahut": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        \r\n        var subTotalHTML = $('#sub-total h4:contains(Subtotal)').parent().next().find('h4').html();\r\n        var subTotal = subTotalHTML ? parseFloat(subTotalHTML.replace(\/[^0-9|\\.]\/g, '')) : 0.00;\r\n        var discountedSubTotal = 0.00;\r\n        var savings = 0.00;\r\n\r\n        if (response && response.summary_info && response.summary_info.subtotal) {\r\n\r\n            discountedSubTotal = parseFloat(response.summary_info.subtotal.replace(\/[^0-9|\\.]\/g, ''));\r\n            savings = subTotal - discountedSubTotal;\r\n\r\n            if (savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n\r\n};",
	"pizzahut.mobile": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        \r\n        var subTotalHTML = $('.ph-mobile-cart p:contains(Subtotal)').parent().next().find('p').html();\r\n        var subTotal = subTotalHTML ? parseFloat(subTotalHTML.replace(\/[^0-9|\\.]\/g, '')) : 0.00;\r\n        var discountedSubTotal = 0.00;\r\n        var savings = 0.00;\r\n        \r\n        if (response && response.summary_info && response.summary_info.subtotal) {\r\n\r\n            discountedSubTotal = parseFloat(response.summary_info.subtotal.replace(\/[^0-9|\\.]\/g, ''));\r\n            savings = subTotal - discountedSubTotal;\r\n\r\n            if (savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            window.location.assign('https:\/\/www.pizzahut.com\/#\/order');\r\n            location.reload(true);\r\n        }\r\n    }\r\n\r\n};",
	"pkwteilede": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.cart.discount_sum);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"plainlazy": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code__text:contains(\"-\u00a3\")', responseHTML).text().split('\u00a3')[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"planethosterfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.html);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestcode) {\r\n    if (bestcode) location.reload();\r\n  }\r\n};",
	"planetsports": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount-totals .price', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"planetsportsde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount-totals .price', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"planttherapy": "var ExternalProvider = {\r\n  isCartPage: function () {\r\n    return \/shopping-cart\/gi.test(location.href);\r\n  },\r\n  parse: function (response) {\r\n    var responseHtml = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.cart-summary h4.whole, .basket-total-amount').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.cart-summary h4.whole', responseHtml).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = parseFloat(oldTotal - newTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && this.isCartPage()) {\r\n      $('#l-coupon-code').val(bestCode);\r\n      $('#l-coupon-code-button').click();\r\n    } else if (bestCode) location.reload();\r\n  }\r\n};",
	"playmobilfr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.value:contains(\"-\") ', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"plowhearth": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"plukka": "var ExternalProvider = {\r\n    init: function() {\r\n        this.priceSelector = \".bag__totals-total .bag__totals-value\";\r\n        this.codeSelector = '#promoCodeForm [type=text]';\r\n        this.codeSubmit = '#promoCodeForm [type=submit]';\r\n        this.codeRemove = '.js-remove-discount';\r\n        this.codeErrors = '#promoCodeForm .error'\r\n        this.initialPrice = this.getCurrentPrice();\r\n    },\r\n    cleanPrice: function(price) {\r\n        return parseFloat(price.trim().replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n    getCurrentPrice: function() {\r\n        return this.cleanPrice($(this.priceSelector).last().text());\r\n    },\r\n    prepare: function (action, code) {\r\n        if (action == 'removeInjectedCoupon' && this.codeRemove){\r\n            $(this.codeRemove).click();\r\n            return;\r\n        }\r\n        $(this.codeErrors).remove();\r\n        $(this.codeSelector).val(code).change();\r\n        $(this.codeSubmit).click();\r\n    },\r\n    whenReady: function (step, next) {\r\n        if(step == 'removeInjectedCoupon') {\r\n            setTimeout(function(){\r\n                next();\r\n            }, 1000);\r\n            return;\r\n        }\r\n        var counter = 0,\r\n            self = this;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n            if (self.initialPrice != self.getCurrentPrice() || $(self.codeErrors).length || counter > 30) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 100);\r\n    },\r\n    parse: function (response) {\r\n        var price = this.getCurrentPrice(),\r\n            savings = this.initialPrice - price;\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    }\r\n};",
	"plusinlove": "var ExternalProvider = {\r\n    oldCartPrice: 0,\r\n    init: function () {\r\n        var price = $('#AllPriceCount_span').text().replace(\/[^0-9|.]\/g, '');\r\n\r\n        if (price) this.oldCartPrice = parseFloat(price);\r\n\r\n        if (isNaN(this.oldCartPrice)) this.oldCartPrice = 0;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var newPrice = parseFloat(response.amount_formated.replace(\/[^0-9|.]\/g, ''));\r\n        var savings = this.oldCartPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#disc_coupon').val(bestCode);\r\n            $('.couponbtn').click();\r\n            $('#disc_coupon').val('');\r\n        }\r\n    }\r\n};",
	"plutosport": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\"):eq(0)', responseHTML).text().replace(',','.').replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"pocode": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('tbody .text-right:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"polarnopyretusa": "var ExternalProvider = {\r\n    cartTotal: 0,\r\n    totalSelector: '.checkout_section_table tr tr:contains(\"Grand Total\") td:eq(1)',\r\n    init: function () {\r\n        this.cartTotal = parseFloat($(this.totalSelector).text().replace('$', ''));\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = this.cartTotal - parseFloat($(this.totalSelector, responseHTML).text().replace('$', ''));\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n}",
	"polarnopyretusa.mobile": "var ExternalProvider = {\r\n    cartTotal: 0,\r\n    totalSelector: '.checkout_section_table tr tr:contains(\"Grand Total\") td:eq(1)',\r\n    init: function () {\r\n        this.cartTotal = parseFloat($piggyJq(this.totalSelector).text().replace('$', ''));\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n        var savings = this.cartTotal - parseFloat($piggyJq(this.totalSelector, responseHTML).text().replace('$', ''));\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n}",
	"pollinelectronicde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat($('.panel--td.column--total-price:contains(\"-\")', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"sVoucher\"]').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        }\r\n    }\r\n};",
	"polomotorradde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.checkout-cart-td-right .price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"poolproducts": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.group.discount:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"popchartlab": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"popjulia": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldSavings = Number.isNaN(parseFloat($('b:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, ''))) ? 0.00 : parseFloat($('b:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = parseFloat(response.orderData.totals[1].price.price.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > oldSavings,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('.coupon-code').click();\r\n      $('span:contains(\"Enter code\")').click();\r\n      $('.input-code-val').val(bestCode);\r\n\r\n      var changeEvent = new Event('change', {\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n\r\n      $('.input-code-val').get(0).dispatchEvent(changeEvent);\r\n      $('button:contains(\"apply\")').click();\r\n    }\r\n  }\r\n};",
	"popreal": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.data.discount_amount);\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"porzellantreffde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#shopping-cart-totals-table span:contains(\"-\")', responseHTML).text().replace(\/,\/g, '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      jQuery('#coupon_code').val(bestCode);\r\n      jQuery('button[onclick=\"discountForm.submit(false)\"]').click();\r\n    }\r\n  }\r\n};",
	"posterxxlde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.text-red.cart-summary-price p:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n     \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#vcode').val(bestCode);\r\n            $('.button.button-grey').click();\r\n        }\r\n    }\r\n};",
	"potatoparcel": "var ExternalProvider = {\r\n    parse: function (response, a, $b, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var validCoupon = $('.reduction-code__text', responseHTML).last().text() === code;\r\n        var savings = validCoupon ? parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).attr('data-checkout-discount-amount-target') \/ 100) : 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"potterybarn": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var params = this.serializeObject($('form[id=\"paymentInformation').serializeArray());\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      params.couponCode = code;\r\n    }\r\n\r\n    return params;\r\n  },\r\n  serializeObject: function (a) {\r\n    var o = {};\r\n\r\n    $.each(a, function () {\r\n      o[this.name] = this.value || '';\r\n    });\r\n\r\n    return o;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldSavings = Number.isNaN(parseFloat($('.order-summary-tally-item-value.order-summary-tally-you-saved .price-amount').text().replace(\/[^0-9.]\/g, ''))) ? 0.00 : parseFloat($('.order-summary-tally-item-value.order-summary-tally-you-saved .price-amount').text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = parseFloat($('.order-summary-tally-item-value.order-summary-tally-you-saved .price-amount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > oldSavings,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCode').val(bestCode);\r\n      $('#applyPromo').click();\r\n    }\r\n  }\r\n};",
	"powersystems": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.promo-discount-total span:contains(\"$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"powersystems.mobile": "var ExternalProvider = {\r\n    _getSerializedArray: function ($el) {\r\n        var data = {};\r\n        var form_data = $el.serializeArray();\r\n        $.each(form_data, function () {\r\n            data[this.name] = data[this.value] || ''\r\n        });\r\n        return data;\r\n    },\r\n    _originalTotal: 0,\r\n    init: function () {\r\n        this._originalTotal = parseFloat($('#CartSubTotal').text().replace(\/[^0-9|\\.]\/g,''));\r\n    },\r\n    prepare: function (action, code) {\r\n        var data;\r\n        if (action == 'applyCouponUrl') {\r\n            data = this._getSerializedArray($('#CartForm'));\r\n            data.CouponCode = code;\r\n            return data;\r\n        }\r\n        if (action == 'clearCouponUrl') {\r\n            data = this._getSerializedArray($('#CartForm'));\r\n            data.CouponCode = '';\r\n            return data;\r\n        }\r\n        \r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var newTotal = parseFloat($('#CartSubTotal', responseHTML).text().replace(\/[^0-9|\\.]\/g,''));\r\n        var discount = this._originalTotal - newTotal;\r\n        if (discount > 0) {\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"prana": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if(type == 'applyCouponUrl'){\r\n            var form = $('#firecheckout-form');\r\n            form.find('#coupon-code').val(code);\r\n            return this.serializeObject(form.serializeArray());\r\n        }\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    },\r\n    serializeObject: function (a) {\r\n        var o = {};\r\n\r\n        $.each(a, function () {\r\n            o[this.name] = this.value || '';\r\n        });\r\n\r\n        return o;\r\n    }\r\n};",
	"prcdirect": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply Coupon\"]').click();\r\n        }\r\n    }\r\n};",
	"premiummall": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.couponData .rightSide', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"voucherNr\"]').val(bestCode);\r\n            $('.input-group-btn > .btn').click();\r\n        }\r\n    }\r\n};",
	"premiummall": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.couponData .rightSide', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"voucherNr\"]').val(bestCode);\r\n            $('.input-group-btn > .btn').click();\r\n        }\r\n    }\r\n};",
	"preparewise": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.SubTotal td:contains(Coupon) + td em.ProductPrice', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n};",
	"prescriptives": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = $('td:contains(\"-$\")', responseHTML).eq(0).text().replace(\/[^0-9.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#form--offer_code--field--OFFER_CODE').val(bestCode);\r\n      $('.offer_submit').click();\r\n    }\r\n  }\r\n};",
	"prestigeflowers": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#otcoupon .totalBox', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"prettygreen": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.payment__promo-list__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    let clearCouponUrl = $('.payment__promo-list__name form', responseHTML).attr('action');\r\n    this.clearCoupon(clearCouponUrl);\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#id_voucher').val(bestCode);\r\n      $('#id_voucher_submit_button').click();\r\n    };\r\n  },\r\n  clearCoupon: function (url) {\r\n    $.ajax({\r\n      url: url,\r\n      type: 'POST',\r\n      data: { csrfmiddlewaretoken: $('input[name=\"csrfmiddlewaretoken\"]').val() },\r\n      async: false\r\n    });\r\n  }\r\n};",
	"prettylittercats": "var ExternalProvider = {\r\n    storeId: '',\r\n    rechargeCartId: '',\r\n    prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"store_id\", updateShipping)';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('store_id');\r\n\r\n        value = value.substring(value.indexOf('var post_data = {'));\r\n\r\n        var postData = value.substring(value.indexOf('{'), value.indexOf('}') + 1);\r\n        var storeId = postData.substring(postData.indexOf('store_id'), postData.indexOf(','));\r\n\r\n        var data = value.substring(value.indexOf('recharge_cart_id'));\r\n        var rechargeCartId = data.substring(data.indexOf('recharge_cart_id'), data.indexOf(','));\r\n\r\n        var storeIdParser = storeId.split(':');\r\n        var rechargeCartIdParses = rechargeCartId.split(':');\r\n\r\n        this.storeId = storeIdParser[1].replace(\/[^0-9.]\/g, '');\r\n        this.rechargeCartId = rechargeCartIdParses[1].replace(\/[^0-9.]\/g, '');\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                store_id: this.storeId,\r\n                recharge_cart_id: this.rechargeCartId,\r\n                discount_code: code,\r\n                customer_email: $('#checkout_email').val()\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        if (type === 'clearCouponUrl') {\r\n            data = {\r\n                store_id: this.storeId,\r\n                recharge_cart_id: this.rechargeCartId,\r\n                discount_code: 'nodiscount',\r\n                customer_email: $('#checkout_email').val()\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var discount = parseFloat(response.discount_amount);\r\n\r\n        return {\r\n            success: discount > 0,\r\n            savings: isNaN(discount) ? 0.00 : discount\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_discount_code').val(bestCode);\r\n            $('#apply_discount').click();\r\n        }\r\n    }\r\n};\r\nExternalProvider.prepareUrl();",
	"prettylittlething": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var numb = response.message.match(\/[\\d.]+\/);\r\n\r\n        numb = numb.join('');\r\n\r\n        var savings = parseFloat(numb);\r\n\r\n        if (savings > 0 && response.error == false) {\r\n            return { success: true, savings: savings };\r\n        }\r\n\r\n        return { success: false, savings: 0.00 };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#coupon').val(bestCode);\r\n            $('.coupon-block .btn--white').click();\r\n        }\r\n    }\r\n};",
	"prettylittlethingfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.message);\r\n    var savings = parseFloat($('.price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon').val(bestCode);\r\n      $('#coupon~button').click();\r\n    }\r\n  }\r\n};",
	"prettylittlethinguk": "var ExternalProvider = {\r\n  isCartPage: function () {\r\n    return \/cart\/.test(location.href);\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('#id_couponcode, #coupon').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#id_couponcode, #coupon').trigger('input').trigger('change');\r\n      $('.button.cart-coupons-button, span:contains(\"Apply\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.cart-coupons-change, span:contains(\"Change code\")').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 700);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = 0.00;\r\n\r\n    if (this.isCartPage()) {\r\n      savings = parseFloat($('div.cart-coupons-display > span.message > span').text().replace(\/[^.0-9]\/g, ''));\r\n    } else {\r\n      savings = parseFloat($('span:contains(\"-\u00a3\")').text().replace(\/[^.0-9]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#id_couponcode, #coupon').val(bestCode);\r\n      $('.button.cart-coupons-button, span:contains(\"Apply\")').click();\r\n    }\r\n  }\r\n};",
	"priceline": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('#desktop-promo-code').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#desktop-promo-code').trigger('input').trigger('change');\r\n      $('.coupon-btn').trigger('click');\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if (step == 'injectCoupon') {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          if (waited > maxWait) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 200);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 50);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('td.rightCol.ng-binding:contains(\"-\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#desktop-promo-code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#desktop-promo-code').trigger('input').trigger('change');\r\n      $('.coupon-btn').trigger('click');\r\n    }\r\n  }\r\n};",
	"primarygoods": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var selector = $('.payment-due__currency').text().replace(\/[0-9.,]\/g, '').trim();\r\n        var locale = '';\r\n\r\n        if (selector === 'USD') {\r\n            locale = localeMapping['US'];\r\n            currency = \"USD\";\r\n        } else if (selector === 'GBP') {\r\n            locale = localeMapping['GB'];\r\n            currency = \"GBP\";\r\n        } else {\r\n            locale = localeMapping['DE'];\r\n            currency = \"EUR\";\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"princetonwatches": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if (savings > 0) {\r\n\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if(bestCode){\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"printerinks": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        let locale;\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'var LOCALE = \"\";';\r\n        scriptContent += 'gts.forEach(element => {if (element[0] === \"google_base_country\"){LOCALE = element[1];} });';\r\n        scriptContent += 'body.setAttribute(\"currency\", LOCALE);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var currency = $('body').attr('currency');\r\n        $('body').removeAttr('currency');\r\n        locale = localeMapping[currency];\r\n        if (currency == 'DE') {\r\n            currency = 'EUR';\r\n        } else if (currency == 'GB') {\r\n            currency = 'GBP';\r\n        } else if (currency == 'FR') {\r\n            currency = 'EUR';\r\n        } else {\r\n            currency = 'USD';\r\n        }\r\n        return amount.toLocaleString(locale, { style: 'currency', currency:currency, minimumFractionDigits: 2 });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#ctl00_ContentPlaceHolder1_lblDiscounts', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#ctl00_ContentPlaceHolder1_txtCouponCode').val(bestCode);\r\n            $('#ctl00_ContentPlaceHolder1_btnEnterCoupon').click();\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"priverevaux": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"probikekit": "var ExternalProvider = {\r\n    removeCouponId: '',\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.responsiveBasket_discountValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var link = $('.responsiveBasket_removeItem.responsiveBasket_removeItem-discount', responseHTML).attr('href');\r\n\r\n        this.removeCouponId = link.substring(link.lastIndexOf('=') + 1);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    prepare: function (requestType) {\r\n        if (requestType === 'clearCouponUrl') {\r\n            return {\r\n                section: 'checkout',\r\n                page: 'basket',\r\n                removeOffer: this.removeCouponId\r\n            };\r\n        }\r\n        return false;\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"probikekituk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.responsiveBasket_discountValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"probikeshop": "var getCookie = function (sKey) {\r\n    if (!sKey) { return null; }\r\n    return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(\/[\\-\\.\\+\\*]\/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\r\n};\r\nvar ExternalProvider = {\r\n    _prepareAuthCookie: function () {\r\n        var auth = getCookie('XSRF-TOKEN');\r\n            var token = $('#___jpToken');\r\n    \r\n            if (!token.length) {\r\n                token = document.createElement('input');\r\n                token.id = '___jpToken';\r\n                token.style.display = 'none';\r\n                (document.body || document.head || document.documentElement).appendChild(token);\r\n                token = $('#___jpToken');\r\n            }\r\n            token.attr('value', auth);\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.detail.coupon.value);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: Number.isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareAuthCookie();",
	"professionalsupplementcenter": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = this.isCartPage() ? 'Cart.aspx' : 'GuestSelectPayment.aspx';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  isCartPage: function () {\r\n    return \/Cart\/.test(location.href);\r\n  },\r\n  prepare: function (type, code) {\r\n    if (this.isCartPage()) {\r\n      if (type === 'applyCouponUrl') {\r\n        var cartData = {\r\n          __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n          ctl00$contentMain$cartView$txtCouponCode: code,\r\n          __VIEWSTATEENCRYPTED: null,\r\n          ctl00$contentMain$cartView$btnApplyCoupon: $('#ctl00_contentMain_cartView_btnApplyCoupon').val()\r\n        };\r\n\r\n        return cartData;\r\n      }\r\n    } else if (type === 'applyCouponUrl') {\r\n      var checkoutData = {\r\n        __VIEWSTATE: $('#__VIEWSTATE').val(),\r\n        ctl00$contentMain$cartPreview$txtCouponCode: code,\r\n        ctl00$contentMain$cartPreview$btnApplyCoupon: $('#ctl00_contentMain_cartPreview_btnApplyCoupon').val()\r\n      };\r\n\r\n      return checkoutData;\r\n    }\r\n\r\n    return true;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var selector = this.isCartPage() ? '#ctl00_contentMain_cartView_rowDiscountAmt td:nth-child(2)' : '#ctl00_contentMain_cartPreview_rowDiscountAmt .aLeft';\r\n    var savings = parseFloat($(selector, responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"proflowers": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var applyUrlElement = $('#__jpCouponApplyUrl');\r\n    var cartId = $('.cartId').first().text().split(': ')[1];\r\n    var source = $('.product-link').attr('href').split('source=')[1] !== undefined ? $('.product-link').attr('href').split('source=')[1] : 'homenoref';\r\n    var applyUrl = 'https:\/\/api-gateway.proflowers.com\/ordering\/proflowers\/api\/carts\/' + cartId + '\/promotion\/coupon?source=' + source;\r\n\r\n    if (applyUrlElement.length < 1) {\r\n      $('<input>').attr({\r\n        id: '__jpCouponApplyUrl',\r\n        value: applyUrl,\r\n        type: 'hidden'\r\n      }).appendTo('body');\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary-totals .amount', responseHTML).last().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\n\r\nExternalProvider.__prepareUrl();",
	"prohealth": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"projectjuice": "var ExternalProvider = {\r\n  retrieveWindowVariable: function (name, variable) {\r\n    var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\r\n    var script = document.createElement('script');\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var value = $('body').attr('tmp_' + name);\r\n\r\n    $('body').removeAttr('tmp_' + name);\r\n\r\n    return value;\r\n  },\r\n  prepare: function (action, code) {\r\n    var formData = {};\r\n    var themeToken = this.retrieveWindowVariable('theme_token', 'JSON.stringify(Drupal.settings.ajaxPageState.theme_token)');\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      formData = $('#commerce-checkout-form-review');\r\n      formData.append('<input type=\"hidden\" name=\"_triggering_element_name\" value=\"coupon_add\">');\r\n      formData.append('<input type=\"hidden\" name=\"_triggering_element_value\" value=\"Add\">');\r\n      formData.find('input[name=\"commerce_promotion[coupon_code]\"]').val(code);\r\n\r\n      var data = formData.serializeArray();\r\n\r\n      data['commerce_promotion[coupon_code]'] = code;\r\n\r\n      var ids = document.querySelectorAll('*[id]:not([id=\"\"])');\r\n      var element = [];\r\n\r\n      Array.prototype.forEach.call(ids, function (el, i) {\r\n        element.push(el.id);\r\n      });\r\n\r\n      for (var i = 0; i < element.length; i++) {\r\n        data.push({\r\n          name: 'ajax_html_ids[]',\r\n          value: element[i]\r\n        });\r\n      }\r\n\r\n      formData.append('<input type=\"hidden\" name=\"ajax_page_state[theme]\" value=\"projectjuice\">');\r\n      formData.append('<input type=\"hidden\" name=\"ajax_page_state[theme_token]\" value=\"' + themeToken + '\">');\r\n      formData.append('<input type=\"hidden\" name=\"ajax_page_state[jquery_version]\" value=\"1.10\">');\r\n\r\n      $(\"input[name='_triggering_element_name']\").remove();\r\n      $(\"input[name='_triggering_element_value']\").remove();\r\n      $(\"input[name='ajax_page_state[theme]']\").remove();\r\n      $(\"input[name='_triggering_element_name']\").remove();\r\n      $(\"input[name='ajax_page_state[jquery_version]']\").remove();\r\n\r\n      return data;\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"projectnursery": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestSavings, bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"promondo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.text-bold~.text-bold').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('.text-bold~.text-bold', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"promotion": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var getAmount = response.match('discount_amount\":\"-(.*)base_discount_amount');\r\n        var savings = parseFloat(getAmount[1].replace(\/[^0-9|.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code, #discount-code').val(bestCode);\r\n            var s = document.createElement('script');\r\n            s.type = 'text\/javascript';\r\n            var code = `jQuery('#coupon_code, #discount-code').trigger('change');jQuery('button[value=\"Apply Discount\"]').click();`;\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n};",
	"provizsports": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[title=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"psprint": "var ExternalProvider = {\r\n  oldDiscount: 0,\r\n  __prepareUrl: function () {\r\n    this.oldDiscount = parseFloat($(\"span[data-bind*='currency: discountTotal()']:first\").text().replace(\/[^0-9|.]\/g, ''));\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action === 'injectCoupon') {\r\n      $('.left-part.coupon-code-billing').val(code);\r\n      var changeEvent = new Event('change', {\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n      $('.left-part.coupon-code-billing').get(0).dispatchEvent(changeEvent);\r\n      var clickEvent = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n      $('.right-part.apply-coupon-code-billing:eq(0)').get(0).dispatchEvent(clickEvent);\r\n    } else if (action === 'removeInjectedCoupon') {\r\n      $(\".apply-coupon-code-billing\").next().click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 650);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 50);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var discount = Number.isNaN(this.oldDiscount) ? 0.00 : this.oldDiscount;\r\n    var newDiscount = parseFloat($(\"span[data-bind*='currency: discountTotal()']:first\").text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = newDiscount > discount ? newDiscount - discount : 0;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('.left-part.coupon-code-billing').val(bestCode);\r\n      var changeEvent = new Event('change', {\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n      $('.left-part.coupon-code-billing').get(0).dispatchEvent(changeEvent);\r\n      var clickEvent = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n      $('.right-part.apply-coupon-code-billing:eq(0)').get(0).dispatchEvent(clickEvent);\r\n    }\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"puma": "var ExternalProvider = {\r\n    prepareUrl: function () {\r\n        var applyUrlInput = $('#___applyUrl');\r\n        var applyUrl = this.checkHost() ? 'https:\/\/eu.puma.com\/on\/demandware.store\/Sites-EU-Site\/en_DE\/Cart-AddCoupon?couponCode=CLAIMCODE' : 'https:\/\/us.puma.com\/on\/demandware.store\/Sites-EU-Site\/us_US\/Cart-AddCoupon?couponCode=CLAIMCODE';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___applyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___applyUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    checkHost: function () {\r\n        return location.host === 'eu.puma.com';\r\n    },\r\n    checkCart: function () {\r\n        return location.pathname !== '\/de\/en\/cart';\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var orginalSubtotal = this.checkCart() ? parseFloat($('#collapse-order-product-summary > div.totals.row > div.total-figures.container > div:nth-child(1) > div.col-4.totals-text > p > span')[0].innerHTML.replace(\/[^0-9]\/g, '')) \/ 100 : parseFloat($('.total-figures.container > div:nth-child(1) .sub-total > span')[0].innerHTML.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        var savings = parseFloat(orginalSubtotal) - parseFloat((response.totals.subTotal.replace(\/[^0-9]\/g, '') \/ 100));\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/eu.puma.com\/on\/demandware.store\/Sites-EU-Site\/en_DE\/Cart-RemoveCouponLineItem?code=' + code + '&uuid=' + response.totals.discounts.UUID,\r\n            type: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider.prepareUrl();",
	"purcosmetics": "var ExternalProvider = {\r\n\tparse: function (response, status, $xhr, code) {\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\tvar savings = parseFloat($('.summary-total .price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: savings > 0,\r\n\t\t\tsavings: isNaN(savings) ? 0.00 : savings\r\n\t\t};\r\n\t},\r\n\tcomplete: function (bestCode) {\r\n\t\tif (bestCode) {\r\n\t\t\t$(\"#coupon_code\").val(bestCode);\r\n\t\t\twindow.location.href = \"javascript:discountForm.submit(false);\"\r\n\t\t};\r\n\t}\r\n}",
	"pureformulas": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.item-promotion-total-price', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"pureprescriptions": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($(\".cart-discount .amount\", responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $(\"#coupon_code\").val(bestCode);\r\n            $(\"input[name='apply_coupon']\").click();\r\n        }\r\n    }\r\n}",
	"purevpn": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('#coupon_discount_amount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#cart-sumr-promo_fld_1').val(bestCode);\r\n      $('#collapsePromCode a')[0].click();\r\n    }\r\n  }\r\n};",
	"puritan": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-total-card span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      const codeField = this.isCartPage() ? $('#CouponCodeShoppingCart') : $('#Couponcodecheckout');\r\n      const submitButton = this.isCartPage() ? $('input[name=\"ApplyCoupon\"]') : $('button[name=\"ApplyCoupon\"]');\r\n      codeField.val(bestCode);\r\n      codeField.get(0).dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\r\n      submitButton.get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return \/shoppingcart\/.test(location.pathname);\r\n  }\r\n};",
	"purityproducts": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var sessionId = document.cookie.match(\/JSESSIONID=([A-z|0-9|.]+);\/)[1];\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = 'https:\/\/shop.purityproducts.com\/validateShowCartPromoCode;jsessionid=' + sessionId;\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('apply', applyUrl);\r\n  },\r\n  parse: function (response, status, $xhr, code) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var validCoupon = $('.id.promoCode', responseHTML).text().includes(code.toUpperCase());\r\n    var preAppliedDiscount = Number.isNaN(parseFloat($('.currency.promoDiscount span').text().replace(\/[^0-9|.]\/g, ''))) ? 0.00 : parseFloat($('.currency.promoDiscount span').text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = validCoupon && (parseFloat($('.currency.promoDiscount span', responseHTML).text().replace(\/[^0-9|.]\/g, '')) > preAppliedDiscount) ? parseFloat($('.currency.promoDiscount span', responseHTML).text().replace(\/[^0-9|.]\/g, '')) : 0.00;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $(\"#js_manualOfferCode\").val(bestCode);\r\n      $(\"a.standardBtn.action\")[0].click();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"purlisse": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.product__description .reduction-code__text', responseHTML).text().match(\/\\(-\\$([0-9|.]+)\\)\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"putmeinthestory": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.totalsHtml);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"pzijeans": "var ExternalProvider = {\r\n    oldCartPrice: 0,\r\n    init: function(){\r\n        this.oldCartPrice = parseFloat($('#v65-cart-total-estimate-cell').text().trim().replace(\/[^0-9|\\.]\/g,''))\r\n        if(isNaN(this.oldCartPrice))\r\n            this.oldCartPrice = 0\r\n        this.extendFunction()    \r\n    },\r\n    extendFunction:function(){\r\n         jQuery.fn.extend({\r\n             getSerializedArray:function(){\r\n                var form_array = $(this).serializeArray()\r\n\r\n                var data = {}\r\n                $.each(form_array,function(){\r\n                     data[this.name] = this.value||''\r\n                })\r\n                return data\r\n             }\r\n         }\r\n        )\r\n    },\r\n    prepare: function(requestType,code){\r\n       if(requestType == \"applyCouponUrl\"){\r\n           var form_array = $('form[name =\"form\"]').getSerializedArray()\r\n           form_array['CouponCode'] = code\r\n           form_array['btnCouponCode'] = 'Apply'\r\n           return form_array\r\n       }\r\n    },\r\n    parse: function(response,status,$xhr,code){\r\n        var jqObj = $.parseHTML(response)\r\n        var newPrice = parseFloat($('#v65-cart-total-estimate-cell',jqObj).text().trim().replace(\/[^0-9|\\.]\/g,''))\r\n        var discount = this.oldCartPrice - newPrice\r\n        if(discount > 0){\r\n            return{\r\n                success: true,\r\n                savings: discount\r\n            }\r\n        }\r\n        return{\r\n            success: false,\r\n            savings: 0\r\n        }\r\n    },\r\n   complete: function(bestCode,bestSavings){\r\n        location.reload()\r\n   } \r\n\r\n}",
	"qualtry": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"quayaustralia": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"quelle": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = Math.abs(response.redemptions.discounted.totalGross.value);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"quickzipsheet": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"quiksilver": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount-amt', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('.couponinput').val(bestCode);\r\n      $('.btn-apply-code button').click();\r\n    }\r\n  }\r\n};",
	"quill": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function () {\r\n        retries++;\r\n        if ($('.removeLnkCouponStackble').length) {\r\n          $('.removeLnkCouponStackble')[0].click();\r\n        }\r\n        if (!$('.removeLnkCouponStackble').length && retries < 3) {\r\n          clearInterval(interval);\r\n          resolve();\r\n        } else if (retries === 3) {\r\n          resolve();\r\n        }\r\n      }, 2000);\r\n    })\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.formRow .description:contains(\"Coupons\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"quiltingcompany": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestsavings) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"quizclothing": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.basket_discount_value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"qvcuk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#spanTotalPurchaseAmount1').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('#spanTotalPurchaseAmount1', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"qwerteefr": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = document.cookie.match(\/currency=([A-z]+)\/)[1].toUpperCase();\r\n\r\n        if (newCurrency === 'EUR') {\r\n            locale = localeMapping.FR;\r\n        } else if (newCurrency === 'GBP') {\r\n            locale = localeMapping.GB;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"racechip": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#shopping-cart-totals-table .a-right:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Redeem\"]').click();\r\n        }\r\n    }\r\n};",
	"rachelpally": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var discount = $('span:contains(\"-\")', responseHTML).text();\r\n        var start = discount.indexOf('(') + 1;\r\n        var savings = discount.slice(start, discount.lastIndexOf(')')).replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"rachelroy": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"radleylondon": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\u00a3\") ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      location.reload();\r\n    }\r\n  }\r\n};",
	"ragbone": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.order-total strong').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('.order-total strong', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"rainbowlight": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.summary-total .price', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"rainbowshops": "var ExternalProvider = {\r\n    _prepareUrl: function(){\r\n        var applyCouponUrl = $('#applyCouponUrl');\r\n        if(!applyCouponUrl.length) {\r\n            applyCouponUrl = document.createElement(\"input\");\r\n            applyCouponUrl.id = 'applyCouponUrl';\r\n            applyCouponUrl.style.display = \"none\";\r\n            (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n            applyCouponUrl = $('#applyCouponUrl');\r\n            applyCouponUrl.attr('value', $('#dwfrm_cart').attr('action'));\r\n        }\r\n    },\r\n\tinit: function() {\r\n\t\tthis._cartTotal = parseFloat($('.ordertotals .value').text().replace('$', ''));\r\n\t},\r\n    parse: function (response, status, $xhr, code) {\r\n    \tconst responseHTML = $.parseHTML(response);\r\n    \tconst newTotal = parseFloat($('.ordertotals .value', responseHTML).text().replace('$', ''));\r\n    \tconst savings = this._cartTotal - newTotal;\r\n    \tif (savings) {\r\n    \t\treturn {\r\n    \t\t\tsuccess: true,\r\n    \t\t\tsavings: savings\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\tcomplete: function(bestCode, bestSaving){\r\n\t\tlocation.reload(true);\r\n\t},\r\n}\r\n\r\nExternalProvider._prepareUrl();",
	"raise": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $('<div><\/div>');\r\n    responseHTML.html(response);\r\n    let promoLabel = $('#checkout-total td:contains(\"Promo\")', responseHTML);\r\n    let removeCouponLink = promoLabel.children('a').attr('href');\r\n    this.removeCouponField(removeCouponLink);\r\n    let savings = parseFloat(promoLabel.next().text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#order_coupon_code').val(bestCode);\r\n      $('input[name=\"commit\"]').click();\r\n    }\r\n  },\r\n  removeCouponField: function(link = null) {\r\n    if(link !== null || link !== undefined) {\r\n      $.ajax({\r\n        url: link,\r\n        type: 'DELETE',\r\n        async: false,\r\n        headers: {\r\n          'x-csrf-token': $('input[name=\"authenticity_token\"]').val(),\r\n        }\r\n      })\r\n    }\r\n  }\r\n};",
	"rakuten": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.coupon.discount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"rallyhouse": "var ExternalProvider = {\r\n    _popupPosition: function () {\r\n        if (this.isCartPage()) {\r\n            var parseHTML = ($('#piggyPromptTryCodes')[0].contentDocument.body);\r\n\r\n            $('#try-codes-activate-option', parseHTML)[0].style.marginLeft = '75%';\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#total-savings', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._popupPosition();",
	"ralphlauren": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-discount.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ralphlaurenuk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var success = !!$('.order-discount td:contains(\"- $\")', responseHTML).text();\r\n        var savings = $('.order-discount td:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: success,\r\n            savings: isNaN(success) && isNaN(savings) ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ramybrook": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary-totals span:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n     \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"randolphusa": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    function retrieveWindowVariable(variable) {\r\n      var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + variable + \"', JSON.stringify(\" + variable + ')); }\\n';\r\n      var script = document.createElement('script');\r\n\r\n      script.id = 'tmpScript';\r\n      script.appendChild(document.createTextNode(scriptContent));\r\n      (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n      var value = jQuery('body').attr('tmp_' + variable);\r\n\r\n      jQuery('body').removeAttr('tmp_' + variable);\r\n\r\n      return JSON.parse(value);\r\n    }\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        security: this.isCartPage() ? retrieveWindowVariable('wc_cart_params.apply_coupon_nonce') : retrieveWindowVariable('wc_checkout_params.apply_coupon_nonce'),\r\n        coupon_code: code\r\n      };\r\n    } else {\r\n      data = {\r\n        security: retrieveWindowVariable('wc_cart_params.remove_coupon_nonce'),\r\n        coupon: code\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  isCartPage: function () {\r\n    return \/cart\/.test(location.href);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-discount .woocommerce-Price-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"rapala": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.ordertotalsaving:eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"rawgeneration": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n    \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"rawlings": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var applyUrlInput = document.createElement('input');\r\n\r\n        applyUrlInput.id = '___jpCouponUrl';\r\n        applyUrlInput.style.display = 'none';\r\n        (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n\r\n        var clearUrlInput = document.createElement('input');\r\n\r\n        clearUrlInput.id = '___jpClearCouponUrl';\r\n        clearUrlInput.style.display = 'none';\r\n        (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n\r\n        if ($('#cart-items-form').length) {\r\n            $('#___jpCouponUrl, #___jpClearCouponUrl').attr('value', $('#cart-items-form').attr('action'));\r\n        } else if ($('#dwfrm_billing').length) {\r\n            $('#___jpCouponUrl').attr('value', 'https:\/\/www.rawlings.com\/on\/demandware.store\/Sites-rawlings-Site\/default\/Cart-AddCouponJson');\r\n            $('#___jpClearCouponUrl').attr('value', 'https:\/\/www.rawlings.com\/on\/demandware.store\/Sites-rawlings-Site\/default\/COBilling-UpdateSummary');\r\n        }\r\n    },\r\n    prepare: function (type, code) {\r\n        var data;\r\n\r\n        if ($('#cart-items-form').length) {\r\n            data = {\r\n                dwfrm_cart_couponCode: code,\r\n                dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon'\r\n            };\r\n        } else if ($('#dwfrm_billing').length) {\r\n            data = {\r\n                couponCode: code,\r\n                format: 'ajax'\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-value').text().replace(\/[^0-9.]\/g, '')) - parseFloat($('.order-value', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($('#cart-items-form').length) {\r\n                $('#dwfrm_cart_couponCode').val(bestCode);\r\n                $('#add-coupon').click();\r\n            }\r\n\r\n            if ($('#dwfrm_billing').length) {\r\n                $('#dwfrm_billing_couponCode').val(bestCode);\r\n                $('#add-coupon').click();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider.__prepareUrl();",
	"ray-ban": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = $('.wcs-shopping-subTotal-title.wcs-shopping-total-promotion.wcs-promotion_id_1.wcs-promo-color', responseHTML).text().replace(\/[^0-9.]\/g, '') || 0.00;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"razer": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.checkout-summary td:contains(\"-\"):eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"readingeggs": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.code-subtotal:contains(\"USD\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#code').val(bestCode);\r\n            $('input[value=\"Redeem\"]').click();\r\n        }\r\n    }\r\n};",
	"realde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.cart.coupon_value) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('#coupon_submit').click();\r\n    }\r\n  }\r\n};",
	"realher": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.product__price > .order-summary__small-text', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.product__price > .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n        savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"reallygoodstuff": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.savings div:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"rebeccaminkoff": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"redbox": "var ExternalProvider = {\r\n    prepare: function(actionType, couponCode) {\r\n        var formData = {};\r\n\r\n        if(actionType === 'applyCouponUrl') {\r\n            formData = {\r\n                applyOnlinePromotion: true,\r\n                promotionCode: couponCode,\r\n                runView: true,\r\n                applyCredit: false\r\n            };\r\n        }\r\n\r\n        if(actionType === 'clearCouponUrl') {\r\n            formData = {\r\n                applyOnlinePromotion: false,\r\n                promotionCode: couponCode,\r\n                runView: true,\r\n                applyCredit: false\r\n            };\r\n        }\r\n\r\n        return JSON.stringify(formData);\r\n    },\r\n    parse: function(response, status, $xhr, couponCode) {\r\n        var discountedAmount = response.d.data.cart.discountedAmount;\r\n\r\n        this.savings = parseFloat(discountedAmount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        if(this.savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: this.savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: this.savings\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSavings) {\r\n        if(bestCode) {\r\n            location.reload(true);\r\n        }\r\n    },\r\n    savings: 0.00\r\n};",
	"redbubble": "var ExternalProvider = {\r\n    oldTotal: 0,\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    init: function () {\r\n        $.ajaxSettings.beforeSend = function(xhr){\r\n            xhr.setRequestHeader('x-csrf-token', {toString: function(){ return $('meta[name=\"csrf-token\"]').attr(\"content\"); }});\r\n        };\r\n        this.oldTotal = parseFloat($('div[class^=\"app-entries-cart-components-Summary-Summary_label\"]').next().text().replace(this.nonPriceRegex, ''));\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var newTotal = response.summary.total;\r\n        var savings = this.oldTotal - newTotal;\r\n        if(savings > 0){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"reddressboutique": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var str = $('.reduction-code__text', responseHTML).text();\r\n        var pos = str.indexOf('(') + 1;\r\n        var slicedVal = str.slice(pos, str.lastIndexOf(')'));\r\n\r\n        var savings = parseFloat(slicedVal.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"redheart": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount .alignrt b', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCode').val(bestCode);\r\n      $('button:contains(\"APPLY CODE\")').click();\r\n    }\r\n  }\r\n};",
	"redlinesteel": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"reebok": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.totalsaving .summary_value:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"reeds": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    let savings = Math.abs(parseFloat(response.cart.discount_amount));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code, #discount-code').val(bestCode);\r\n      $('#coupon_code, #discount-code').get(0).dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\r\n      $('button[value=\"Apply Discount\"]').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  }\r\n};",
	"reef": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('#amount-after-giftcards-apply-summary').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('#amount-after-giftcards-apply-summary', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = parseFloat(oldTotal - newTotal);\r\n        if (savings > 0.00) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if(bestCode){\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"refrigiwear": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    if (action === 'injectCoupon') {\r\n      $('#cartPromotionCode').val(code);\r\n      $('#cartPromotionCode~button').click();\r\n    } else {\r\n      $('.ro-cart-promotion-code-remove').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    setTimeout(function () {\r\n      var maxWait = 200;\r\n      var waited = 0;\r\n      var selector = $('.ro-cart-applied-promotion-value').length;\r\n      var waitForClose = setInterval(function () {\r\n        var confirmed = step === 'injectCoupon' ? selector : !selector;\r\n\r\n        if ((confirmed) || (waited > maxWait)) {\r\n          clearInterval(waitForClose);\r\n          setTimeout(function () {\r\n            next();\r\n          }, 500);\r\n        }\r\n\r\n        waited++;\r\n      }, 10);\r\n    }, 50);\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.ro-cart-applied-promotion-value').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#cartPromotionCode').val(bestCode);\r\n      $('#cartPromotionCode~button').click();\r\n    }\r\n  }\r\n};",
	"regatta": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.cart.totals.raw.discount * -1;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"rei": "var ExternalProvider = {\r\n    oldTotal: 0,\r\n    init: function () {\r\n        this.oldTotal = parseFloat($('#summary-total').html().replace(\/[^0-9|.]\/g, ''));\r\n    },\r\n    prepare: function (action, code) {\r\n        if (action !== 'injectCoupon') return false;\r\n\r\n        if ($('#coupon-code').length > 0) {\r\n            $('#coupon-code').val(code);\r\n            $('.btn.btn-sm.btn-contrast.btn-primary.apply-coupon').click();\r\n        }\r\n\r\n        return false;\r\n    },\r\n    whenReady: function (step, next) {\r\n        var codeApplyTime;\r\n        var counter = 0;\r\n\r\n        if ($('.apply-coupon:not([disabled])').length) {\r\n            codeApplyTime = setInterval(function () {\r\n                counter += 1;\r\n\r\n                if ($('.apply-coupon:not([disabled])').length || counter > 200) {\r\n                    clearInterval(codeApplyTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        } else {\r\n            codeApplyTime = setInterval(function () {\r\n                counter += 1;\r\n\r\n                if ($('.apply-coupon:not([disabled])').length === 0 || counter > 200) {\r\n                    clearInterval(codeApplyTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        }\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var total = parseFloat($('#summary-total').html().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = this.oldTotal - total;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    }\r\n};\r\n\r\nExternalProvider.init();",
	"reifen": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('b:contains(\"- \")', responseHTML).last().text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"reifendirekt": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.cart_foot div').last().text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('.cart_foot div', responseHTML).last().text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n    var savings = parseFloat(oldTotal - newTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"reitmans": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        if (response.success && response.amount) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(response.amount.replace(\/[^0-9|\\.]\/g, ''))\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n        location.reload();\r\n    },\r\n    serializeFormObject: function(obj){\r\n        var data={}\r\n        $.each(obj,function(){\r\n            data[this.name] = this.value||''\r\n        })\r\n        return data\r\n    }\r\n}",
	"rejuvenateproducts": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"relaxtheback": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"renewlife": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var s = document.createElement('script');\r\n\r\n        s.type = 'text\/javascript';\r\n\r\n        var code = \"document.querySelector('body').setAttribute('params', window.checkoutConfig.quoteData.entity_id);\";\r\n\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n        s.remove();\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.totals.base_discount_amount * -1;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('body').removeAttr('params');\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"repairclinic": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if ((type === 'injectCoupon') && $('button:contains(\"Apply\"):last()').length) {\r\n      $('#promoCode').val(code);\r\n      $('#promoCode').get(0).dispatchEvent(changeEvent);\r\n      $('button:contains(\"Apply\"):last()').click();\r\n    }\r\n    else if ((type === 'removeInjectedCoupon') && $('button:contains(\"Apply\"):last()').length) {\r\n      $('.formButton.removeButton').click();\r\n    }\r\n    else if (type === 'injectCoupon') {\r\n      $('#promoCode').val(code);\r\n      $('#promoCode').get(0).dispatchEvent(changeEvent);\r\n      $('a:contains(\"Apply\"):last()').removeClass('disabled');\r\n      $('span:contains(\"Apply\")').click();\r\n    }\r\n    else if (type === 'removeInjectedCoupon') {\r\n      $('.promoRemoveButton').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1500);\r\n          }\r\n\r\n          waited++;\r\n        }, 80);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('span:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"reservebar": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"restaurant": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.cart .cartItems .totals .discount .amount', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"restaurant.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        if(response.JsonObject.Data && response.JsonObject.Data.order){\r\n            var savings = response.JsonObject.Data.order.savings;\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"restockit": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'applyCouponUrl') {\r\n      var form = $('#aspnetForm');\r\n\r\n      if ($('input[name=\"ctl00$rsiBodyContent$btnApplyCoupon.x\"]').length === 0) {\r\n        form.append('<input type=\"hidden\" name=\"ctl00$rsiBodyContent$btnApplyCoupon.x\" value=\"0\" \/>');\r\n        form.append('<input type=\"hidden\" name=\"ctl00$rsiBodyContent$btnApplyCoupon.y\" value=\"0\" \/>');\r\n      }\r\n\r\n      $('input[name=\"ctl00$rsiBodyContent$CouponCode\"]').val(code);\r\n\r\n      return form.serializeArray();\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('#rsis_MCartTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat(response.match('order_total\":(.*)\"')[1].replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#ctl00_rsiBodyContent_CouponCode').val(bestCode);\r\n      $('#ctl00_rsiBodyContent_btnApplyCoupon').click();\r\n    }\r\n  }\r\n};",
	"resttherapy": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"reuterde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.row.chk_pe_cc').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat(response.paymentModules.pe_cc.value);\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"revantoptics": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).last().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"revital": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"athenacosmetics": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"revivalanimal": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('div.text-right > span.subtotal > span.red', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function(bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"revo": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"revolutionbeauty": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var newCurrency = currency;\r\n    var selector = $('.b-country_selector-lang:eq(0)').text();\r\n\r\n    if (selector === 'GB') {\r\n      locale = localeMapping.GB;\r\n      newCurrency = 'GBP';\r\n    } else if (selector === 'DE') {\r\n      locale = localeMapping.DE;\r\n      newCurrency = 'EUR';\r\n    } else if (selector === 'FR') {\r\n      locale = localeMapping.FR;\r\n      newCurrency = 'EUR';\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"reynspooner": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ribblecyclescouk": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var discountRow = $('#shopping-cart-totals-table tbody tr', responseHTML)[1];\r\n        if ($('td:eq(0)', discountRow).text().indexOf(code) != -1) {\r\n            var savings = parseFloat($('td:eq(1)', discountRow).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n}",
	"ribblecyclescouk.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n        var discountRow = $piggyJq('#shopping-cart-totals-table tbody tr', responseHTML)[1];\r\n        if ($piggyJq('td:eq(0)', discountRow).text().indexOf(code) != -1) {\r\n            var savings = parseFloat($piggyJq('td:eq(1)', discountRow).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n}",
	"richersounds": "var ExternalProvider = {\r\n  isCartPage: function () {\r\n    return \/cart\/.test(location.href);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.responseText.match(\/\"value\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && this.isCartPage()) {\r\n      location.reload();\r\n    } else if (bestCode) {\r\n      jQuery('#discount-code-fake').val(bestCode);\r\n      var s = document.createElement('script');\r\n      s.type = 'text\/javascript';\r\n      var code = `jQuery('#discount-code-fake').trigger('change');jQuery('.action-apply').click();`;\r\n      s.appendChild(document.createTextNode(code));\r\n      document.body.appendChild(s);\r\n    }\r\n  }\r\n};",
	"rinkit": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"riteaid": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#shopping-cart-totals-table tfoot .price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('#shopping-cart-totals-table tfoot .price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"riverisland": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#bag-subtotal').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('#bag-subtotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"riverislanduk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.js__discount-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"roadrunnersports": "var ExternalProvider = {\r\n\r\n\tinit: function() {\r\n\t\t$.fn.serializeObject = function()\r\n\t\t{\r\n\t\t\tvar o = {};\r\n\t\t\tvar a = this.serializeArray();\r\n\t\t\t$.each(a, function() {\r\n\t\t\t\tif (o[this.name] !== undefined) {\r\n\t\t\t\t\tif (!o[this.name].push) {\r\n\t\t\t\t\t\to[this.name] = [o[this.name]];\r\n\t\t\t\t\t}\r\n\t\t\t\t\to[this.name].push(this.value || '');\r\n\t\t\t\t} else {\r\n\t\t\t\t\to[this.name] = this.value || '';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn o;\r\n\t\t};\r\n\t},\r\n\r\n\tprepare: function(action, code) {\r\n\t\tif(action != 'applyCouponUrl') return false;\r\n\r\n\t\tvar formData = $('#cartPromotionForm').serializeObject();\r\n\r\n\t\tformData['\/roadrunner\/commerce\/order\/purchase\/RRSCartModifierFormHandler.claimSourceCode'] = 'Apply';\r\n\t\tformData['_D:\/roadrunner\/commerce\/order\/purchase\/RRSCartModifierFormHandler.claimSourceCode'] = '';\r\n\r\n\t\treturn formData;\r\n\t},\r\n\r\n\tparse: function(response, status, $xhr, code) {\r\n\r\n\t\tvar $response = $.parseHTML(response),\r\n\t\t\tdiscountArea = $('#promo-code-discount', $response),\r\n\t\t\tcodeFound = false;\r\n\r\n\r\n\t\t$('.promo-code-code', discountArea).each(function(idx, element) {\r\n\t\t\tif($(element).text().toLowerCase().indexOf(code.toLowerCase()) != -1) {\r\n\t\t\t\tcodeFound = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(!codeFound) {\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: false,\r\n\t\t\t\tsavings: 0.00\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: true,\r\n\t\t\tsavings: parseFloat($('.promo-code-amount', discountArea).text().replace(\/[^0-9|\\.]\/g, ''))\r\n\t\t}\r\n\t},\r\n\t\r\n\tcomplete: function() {\r\n\t\tlocation.reload();\r\n\t}\r\n};",
	"robertdyas": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"robertgraham": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"rock": "var ExternalProvider = {\r\n    cartTotal: 0,\r\n    init: function () {\r\n        if ($('#minicart_summary').length) {\r\n            this.cartTotal = parseFloat($('#minicart_summary tr:last-child #convert').text().replace('$', ''));\r\n        } else {\r\n            this.cartTotal = parseFloat($('#cart_subtotal tr:last-child #convert').attr('amount'));\r\n        }\r\n    },\r\n\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = parseFloat($('.mini_cart_subtotal:eq(2) td:eq(1) strong', responseHTML).text().replace('$', ''));\r\n        var savings = this.cartTotal - newTotal;\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        location.reload(true);\r\n    }\r\n};",
	"rocketdog": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        var savings = parseFloat(oldTotal - newTotal);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"rocketlanguages": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var discount = (response.discount \/ 100);\r\n    var price = Number.isNaN(parseFloat($('span:contains(\"$\"):eq(4)', responseHTML).text().replace(\/[^0-9|.]\/g, ''))) ? parseFloat($('span:contains(\"$\"):eq(2)', responseHTML).text().replace(\/[^0-9|.]\/g, '')) : parseFloat($('span:contains(\"$\"):eq(4)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = parseFloat(price * discount);\r\n    var oldDiscount = Number.isNaN(parseFloat($('p:contains(\"Save\"):eq(2)').text().replace(\/[^0-9|.]\/g, ''))) ? 0.00 : parseFloat($('p:contains(\"Save\"):eq(2)').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n\r\n    return {\r\n      success: savings > oldDiscount,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"coupon\"]').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[name=\"coupon\"]').trigger('input').trigger('change');\r\n      $('input[name=\"coupon\"]').focus();\r\n      $('input[name=\"coupon\"]').blur();\r\n\r\n      if ($('.apply-coupon').length) {\r\n        $('.apply-coupon').click();\r\n      } else {\r\n        $('.coupon-applied').click();\r\n      }\r\n    }\r\n  }\r\n};",
	"rockler": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($(\".summary-details-amrules.summary-details td:contains(-)\", responseHTML)[0].innerHTML.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload(true)\r\n        }\r\n    }\r\n\r\n};",
	"rockport": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = this.isCheckoutPage() ? 'https:\/\/www.rockport.com\/on\/demandware.store\/Sites-RockportUS-Site\/default\/Cart-AddCouponJson?couponCode=CLAIMCODE&format=ajax' : $('#cart-items-form').attr('action');\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = 0;\r\n\r\n    if (!this.isCheckoutPage()) {\r\n      oldTotal = parseFloat($('.order-total .order-value').last().text().replace(\/[^0-9|.]\/g, ''));\r\n      newTotal = parseFloat($('.order-total .order-value', responseHTML).last().text().replace(\/[^0-9|.]\/g, ''));\r\n      savings = oldTotal - newTotal;\r\n    } else {\r\n      $.ajax({\r\n        url: 'https:\/\/www.rockport.com\/on\/demandware.store\/Sites-RockportUS-Site\/default\/COSummary-Start?onepageentry=true&format=ajax',\r\n        type: 'GET',\r\n        async: false,\r\n        success: function (result) {\r\n          savings = parseFloat($('.value:contains(\"-\")', $.parseHTML(result)).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n      });\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCheckoutPage: function () {\r\n    return $('.shipping-header').length === 1;\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && this.isCheckoutPage()) {\r\n      location.reload();\r\n    } else if (bestCode) {\r\n      $('#dwfrm_cart_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n      location.reload();\r\n    }\r\n\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"rockymountainatvmc": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n\r\n      $('input[name=\"offerCode\"]').val(code);\r\n      $('input[name=\"offerCode\"]').get(0).dispatchEvent(changeEvent);\r\n      $('button[name=\"applyOfferCodeBtn\"]').click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('button:contains(\"Remove\")').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1500);\r\n          }\r\n\r\n          waited++;\r\n        }, 80);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('#AppliedOfferCodeTable > tbody > tr > td:contains(\"$\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"romadesignerjewelry": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#checkout_reduction_code').trigger('input').trigger('change');\r\n            $('.field__input-btn.btn')[0].click();\r\n            $('#checkout_reduction_code').val('');\r\n        }\r\n    }\r\n};",
	"romanoriginals": "var ExternalProvider = {\r\n    init: function () {\r\n        $('.panel-title').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.totalDiscount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"romwe": "var ExternalProvider = {\r\n    isFR: function () {\r\n        return location.href.contains(\"fr.romwe\");\r\n    },\r\n    prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isFR() ? 'https:\/\/fr.romwe.com\/checkout\/cacu_total' : 'https:\/\/www.romwe.com\/checkout\/cacu_total';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n\r\n    },\r\n    prepare: function (type, code) {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"addressId\", checkout_data.addressList[0].addressId);';\r\n        scriptContent += 'body.setAttribute(\"shippingId\", checkout_data.shippingList[0].id);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var addressId = $('body').attr('addressId');\r\n        var shippingId = $('body').attr('shippingId');\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                address_id: addressId,\r\n                shipping_method_id: shippingId,\r\n                payment_id: '',\r\n                coupon: code,\r\n                use_insurance: '1',\r\n                use_wallet: '0',\r\n                comment: ''\r\n            }\r\n\r\n        } else {\r\n            data = {\r\n                address_id: addressId,\r\n                shipping_method_id: shippingId,\r\n                payment_id: '',\r\n                coupon: '',\r\n                use_insurance: '1',\r\n                use_wallet: '0',\r\n                comment: ''\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.info.couponPrice.amount);\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n\r\n            $(\"input[name='coupon']\").val(bestCode)\r\n            $(\".j-apply-coupon-btn\").removeClass('rw-btn-white')\r\n            $(\".j-apply-coupon-btn\").click()\r\n        }\r\n    },\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var cart = $(\".rw-fr:eq(4)\").text().replace(\/[0-9.,]\/g, '').trim();\r\n        var selector = this.isCartPage() ? cart : $(\".j-currency-title\").text();\r\n\r\n        if (selector === \"\u20ac\" || selector === \"EUR\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\" || selector === \"GBP\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    isCartPage: function () {\r\n        return \/checkout\/.test(location.href);\r\n    },\r\n};\r\nExternalProvider.prepareUrl();",
	"romwefr": "var ExternalProvider = {\r\n    isFR: function () {\r\n        return location.href.contains(\"fr.romwe\");\r\n    },\r\n    prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isFR() ? 'https:\/\/fr.romwe.com\/checkout\/cacu_total' : 'https:\/\/www.romwe.com\/checkout\/cacu_total';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n\r\n    },\r\n    prepare: function (type, code) {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"addressId\", checkout_data.addressList[0].addressId);';\r\n        scriptContent += 'body.setAttribute(\"shippingId\", checkout_data.shippingList[0].id);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var addressId = $('body').attr('addressId');\r\n        var shippingId = $('body').attr('shippingId');\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                address_id: addressId,\r\n                shipping_method_id: shippingId,\r\n                payment_id: '',\r\n                coupon: code,\r\n                use_insurance: '1',\r\n                use_wallet: '0',\r\n                comment: ''\r\n            }\r\n\r\n        } else {\r\n            data = {\r\n                address_id: addressId,\r\n                shipping_method_id: shippingId,\r\n                payment_id: '',\r\n                coupon: '',\r\n                use_insurance: '1',\r\n                use_wallet: '0',\r\n                comment: ''\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.info.couponPrice.amount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n\r\n            $(\"input[name='coupon']\").val(bestCode)\r\n            $(\".j-apply-coupon-btn\").removeClass('rw-btn-white')\r\n            $(\".j-apply-coupon-btn\").click()\r\n        }\r\n    },\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var cart = $(\".rw-fr:eq(4)\").text().replace(\/[0-9.,]\/g, '').trim();\r\n        var selector = this.isCartPage() ? cart : $(\".j-currency-title\").text();\r\n\r\n        if (selector === \"\u20ac\" || selector === \"EUR\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\" || selector === \"GBP\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n\r\n    isCartPage: function () {\r\n        return \/checkout\/.test(location.href);\r\n    },\r\n};\r\nExternalProvider.prepareUrl();",
	"rosebikes": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart__footer__prize--discount:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#voucherForm_voucher_code').val(bestCode);\r\n            $('.button.button--inline:last').click();\r\n        }\r\n    }\r\n};",
	"rosegal": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = $('#js_currencyBtn').text().trim();\r\n\r\n        if (newCurrency === 'GBP') {\r\n            locale = localeMapping.GB;\r\n        } else if (newCurrency === 'EUR') {\r\n            locale = localeMapping.FR;\r\n        } else {\r\n            newCurrency = 'USD';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var timeStamp = $('script[src*=\"exchange.html\"]').attr('src').split('=')[1];\r\n        var multiplier;\r\n        var criteria;\r\n\r\n        switch ($('#js_currencyBtn').text().trim()) {\r\n            case 'EUR':\r\n                criteria = \/my_array\\['EUR'\\] = ([0-9|.]+);\/;\r\n                break;\r\n            case 'GBP':\r\n                criteria = \/my_array\\['GBP'\\] = ([0-9|.]+);\/;\r\n                break;\r\n            default:\r\n                criteria = \/my_array\\['USD'\\] = ([0-9|.]+);\/;\r\n                break;\r\n        }\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/cart.rosegal.com\/exchange.html?v=' + timeStamp,\r\n            type: 'GET',\r\n            async: false,\r\n            success: function (res) {\r\n                multiplier = parseFloat(res.match(criteria)[1]);\r\n            }\r\n        });\r\n\r\n        var savings = Math.trunc(parseFloat(response.total.coupon_saving * multiplier) * 100) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"rosettastone": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"rosewe": "var ExternalProvider = {\r\n\r\n\tinit: function() {\r\n\r\n\t\tvar fbDiscount = $('#share_get_facebook_discount');\r\n\t\tif(fbDiscount.is(':checked')) {\r\n\t\t\tfbDiscount.click();\r\n\t\t}\r\n\t},\r\n\r\n\tparse: function(response, status, $xhr, code) {\r\n\r\n\t\tvar message = response.error;\r\n\r\n\t\tif(message.toLowerCase().indexOf('you save') === -1) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: false,\r\n\t\t\t\tsavings: 0.00\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar textAmount = \/>([^<]*)<\/gi.exec(message);\r\n\t\treturn {\r\n\t\t\tsuccess: true,\r\n\t\t\tsavings: parseFloat(textAmount[1].replace(\/[^0-9|\\.]\/g, ''))\r\n\t\t};\r\n\r\n\t},\r\n\r\n\tcomplete: function(bestCode) {\r\n\r\n\t\tif(bestCode) {\r\n\t\t\t$('#verify_box').val(bestCode);\r\n\t\t\t$('#verify_bt').click();\r\n\t\t}\r\n\t}\r\n};",
	"rosewe.mobile": "var ExternalProvider = {\r\n\r\n\tinit: function() {\r\n\r\n\t\tvar fbDiscount = $('#share_get_facebook_discount');\r\n\t\tif(fbDiscount.is(':checked')) {\r\n\r\n\t\t\tthis.dispatchEvent('tap', fbDiscount);\r\n\t\t\tthis.dispatchEvent('click', fbDiscount);\r\n\t\t}\r\n\t},\r\n\r\n\tdispatchEvent: function(event, element) {\r\n\r\n\t\tvar evt = document.createEvent(\"HTMLEvents\");\r\n\t\tevt.initEvent(event, true, true);\r\n\t\telement.get(0).dispatchEvent(evt);\r\n\t},\r\n\r\n\tparse: function(response, status, $xhr, code) {\r\n\r\n\t\tvar message = response.error;\r\n\r\n\t\tif(message.toLowerCase().indexOf('you save') === -1) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: false,\r\n\t\t\t\tsavings: 0.00\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar textAmount = \/>([^<]*)<\/gi.exec(message);\r\n\t\treturn {\r\n\t\t\tsuccess: true,\r\n\t\t\tsavings: parseFloat(textAmount[1].replace(\/[^0-9|\\.]\/g, ''))\r\n\t\t};\r\n\r\n\t},\r\n\r\n\tcomplete: function(bestCode) {\r\n\r\n\t\tif(bestCode) {\r\n\t\t\t$('#verify_box').val(bestCode);\r\n\r\n\t\t\tvar btn = $('#js_applyBtn');\r\n\t\t\tthis.dispatchEvent('tap', btn);\r\n\t\t\tthis.dispatchEvent('click', btn);\r\n\t\t}\r\n\t}\r\n};",
	"rosewholesale": "var ExternalProvider = {\r\n    init: function () {\r\n        this.grandTotal = $('#price_total').text().replace(\/[^0-9.]\/g, '');\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = parseFloat($('#price_total', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = this.grandTotal - newTotal;\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promotion_code').val(bestCode);\r\n            $('#applybtn').click();\r\n        }\r\n    }\r\n};",
	"rossmann": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n\r\n      $.each(data, function () {\r\n        if (object[this.name] !== undefined) {\r\n          if (!object[this.name].push) {\r\n            object[this.name] = [object[this.name]];\r\n          }\r\n\r\n          object[this.name].push(this.value || '');\r\n        } else {\r\n          object[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (type, code) {\r\n    var formData = $('#aspnetForm').serializeObject();\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      formData = Object.assign(formData, {\r\n        ctl00$Main$Coupons$ctl00$CouponCode$box: code,\r\n        __ASYNCPOST: true,\r\n        ctl00$ScriptManager1: 'ctl00$Main$updatepanel1|ctl00$Main$Coupons$ctl00$btCoupon',\r\n        __EVENTTARGET: 'ctl00$Main$Coupons$ctl00$btCoupon'\r\n      });\r\n\r\n      return formData;\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('dd:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"roundtablepizza": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"$-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"routeone": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#minicart-dropdown del .blu-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('#minicart-dropdown ins .blu-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"roxio": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var applyUrlInput = $('#__applyUrl');\r\n    var applyUrl = this.isStorePage() ? $('form[name=\"cleverForm\"]').attr('action') : 'https:\/\/shop.roxio.com\/store\/';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__applyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__applyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (action, code) {\r\n    if (this.isStorePage() && action === 'applyCouponUrl') {\r\n      return {\r\n        progress: 'default',\r\n        language: 'en',\r\n        currencyId: 'USD',\r\n        quantityrno_1: $('input[name=\"quantityrno_1\"]').val(),\r\n        notifier_quantityrno_2: $('input[name=\"notifier_quantityrno_2\"]').val(),\r\n        notifier_quantityrno_3: $('input[name=\"notifier_quantityrno_3\"]').val(),\r\n        taxExemptionDocument: null,\r\n        'notifier_x-iscompany': $('input[name=\"notifier_x-iscompany\"]').val(),\r\n        deliveryClearKatakana: $('input[name=\"deliveryClearKatakana\"]').val(),\r\n        deliveryCompany: null,\r\n        deliveryFirstname: null,\r\n        deliveryLastname: null,\r\n        deliveryClearRomanized: $('input[name=\"deliveryClearRomanized\"]').val(),\r\n        deliveryStreet1: null,\r\n        deliveryCity: null,\r\n        deliveryStateId: 'CA',\r\n        deliveryPostalcode: null,\r\n        deliveryCountryId: 'US',\r\n        deliveryEmail: null,\r\n        'x-newsletter': $('input[name=\"x-newsletter\"]').val(),\r\n        'notifier_x-newsletter': $('input[name=\"notifier_x-newsletter\"]').val(),\r\n        copyDeliveryToBillingIn: $('input[name=\"copyDeliveryToBillingIn\"]').val(),\r\n        copyDeliveryToLicenseeIn: $('input[name=\"copyDeliveryToLicenseeIn\"]').val(),\r\n        notifier_paymentSubTypeId: null,\r\n        paymentSubTypeId: $('input[name=\"paymentSubTypeId\"]').val(),\r\n        paymentCreditCardNumberSecure: null,\r\n        paymentCreditCardValidToMonth: null,\r\n        paymentCreditCardValidToYear: null,\r\n        paymentCreditCardCvv: null,\r\n        purchaseCouponCode: code,\r\n        buttonaddCoupon: 'Apply'\r\n      };\r\n    }\r\n\r\n    return {\r\n      Action: 'DisplayThreePgCheckoutShoppingCartPage',\r\n      SiteID: 'sonic',\r\n      Locale: 'en_US',\r\n      Form: 'com.digitalriver.template.form.ShoppingCartForm',\r\n      CallingPageID: 'ThreePgCheckoutShoppingCartPage',\r\n      CSRFAuthKey: null,\r\n      ORIG_VALUE_lineItemID$$1001: $('input[name=\"ORIG_VALUE_lineItemID$$1001\"]').val(),\r\n      lineItemID$$1001: $('input[name=\"lineItemID$$1001\"]').val(),\r\n      ORIG_VALUE_quantity$$1001: $('input[name=\"ORIG_VALUE_quantity$$1001\"]').val(),\r\n      quantity$$1001: $('input[name=\"quantity$$1001\"]').val(),\r\n      ORIG_VALUE_popName: 'PointOfSale_CouponEntryField',\r\n      popName: 'PointOfSale_CouponEntryField',\r\n      ORIG_VALUE_couponCode: null,\r\n      couponCode: code,\r\n      selectedCountry: 'US',\r\n      shippingOptionID: $('input[name=\"shippingOptionID\"]').val()\r\n    };\r\n  },\r\n  parse: function (response) {\r\n    var elementSelector = this.isStorePage() ? '#dr_priceTotal, .cbTtotal' : '#dr_priceTotal > td';\r\n    var responseResult = this.isStorePage() ? response : $.parseHTML(response);\r\n    var oldTotal = parseFloat($(elementSelector).text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($(elementSelector, responseResult).text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCode, input[name=\"purchaseCouponCode\"]').val(bestCode);\r\n      $('td.dr_couponCode > input.dr_button, input[name=\"buttonaddCoupon\"]').click();\r\n    }\r\n  },\r\n  isStorePage: function () {\r\n    return location.href.match('store.roxio.com');\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"roxy": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.red.itemtotals', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n            $('button[name=\"dwfrm_cart_addCoupon\"]').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"royalalbert": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      jQuery(\"#coupon_code\").val(bestCode);\r\n      jQuery(\".buttons-set button\").click();\r\n    }\r\n  }\r\n};",
	"royaldoulton": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.summary-total > td:eq(1) > .price', responseHTML).html().replace('-', '').replace('$', '').replace(\/[^0-9|\\.]\/g, ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n        \r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n};",
	"royalrobbins": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#discount-coupon-form > div > div.button-wrapper > button > span > span').click();\r\n        }\r\n    }\r\n};",
	"rstbrands": "var ExternalProvider = {\r\n  init: function () {\r\n    this.createEventInstance();\r\n    this.selector = location.pathname === '\/cart' ? '.cart-summary-amount-discount-total' : '.order-wizard-cart-summary-discount-total';\r\n  },\r\n  createEventInstance: function () {\r\n    this.submitEvent = new Event('submit', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  },\r\n  prepare: function (action, code) {\r\n    action === 'injectCoupon' && this.inputCodeField(code);\r\n  },\r\n  inputCodeField: function (code) {\r\n    $('#promocode').val(code);\r\n    $('.cart-promocode-form').get(0).dispatchEvent(this.submitEvent);\r\n  },\r\n  whenReady: function (step, next) {\r\n    if (step === 'injectCoupon') {\r\n      ExternalProvider.waitForSelector(next, ExternalProvider.isValidCoupon);\r\n    }\r\n  },\r\n  waitForSelector: function (next, isValid) {\r\n    var maxWait = 200; waited = 0;\r\n    var waitForClose = setInterval(function () {\r\n      if (waited > maxWait || isValid()) {\r\n        clearInterval(waitForClose);\r\n        $('.global-views-message-button').click();\r\n        next();\r\n      }\r\n      waited++;\r\n    }, 10);\r\n  },\r\n  parse: function (response) {\r\n    let savings = parseFloat($(this.selector).text().replace(\/[^0-9|.]\/g, ''));\r\n    $(this.selector).remove();\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) this.inputCodeField(bestCode);\r\n  },\r\n  isValidCoupon: function () {\r\n    return ($('.global-views-message-button').length > 1) ? false : $(this.selector).length > 0;\r\n  },\r\n};",
	"rueducommercefr": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            return JSON.stringify({ context: 'basket', recap: { coupon_code: code } });\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response, a, $b, code) {\r\n        var oldTotal = parseFloat(response[0].data.subTotal);\r\n        var newTotal = parseFloat(response[0].data.total);\r\n        var savings = oldTotal - newTotal;\r\n        var productsInfo = response[0].data.products;\r\n        var productCount = Object.keys(productsInfo).length;\r\n        var productId = [];\r\n        var couponId = '';\r\n        var compareCode = '';\r\n\r\n        for (var x = 0; x < productCount; x++) {\r\n            productId[x] = Object.keys(productsInfo)[x];\r\n\r\n            var promoExist = ('promotion' in productsInfo[productId[x]]) || (response[0].data.promotion.length > 0);\r\n\r\n            if (promoExist && !(response[0].data.promotion.length > 0)) {\r\n                compareCode = productsInfo[productId[x]].promotion.code;\r\n                couponId = productsInfo[productId[x]].promotion.id;\r\n            } else if (promoExist && (response[0].data.promotion.length > 0)) {\r\n                compareCode = response[0].data.promotion[0].code;\r\n                couponId = response[0].data.promotion[0].id;\r\n            }\r\n\r\n            if (compareCode === code && !$('.ctr-cart-basket').text().includes(code)) {\r\n                $.ajax({\r\n                    url: 'https:\/\/www.rueducommerce.fr\/panier\/api\/promotion\/delete',\r\n                    type: 'DELETE',\r\n                    async: false,\r\n                    headers: {\r\n                        'content-type': 'application\/json'\r\n                    },\r\n                    data: JSON.stringify({ recap: { id: couponId }, context: 'basket' })\r\n                });\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"runkeeper": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        location.reload(true);\r\n    }\r\n};",
	"russellstover": "var ExternalProvider = {\r\n    _prepareUrl: function() {\r\n\r\n        var resultUrl = $('#__jpResultUrl');\r\n        if(!resultUrl.length) {\r\n            resultUrl = document.createElement(\"input\");\r\n            resultUrl.id = '__jpResultUrl';\r\n            resultUrl.style.display = \"none\";\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrl);\r\n            resultUrl = $('#__jpResultUrl');\r\n        }\r\n\r\n        resultUrl.attr('value', this.isCartPage() ? '\/ShopCartDisplayView' : '\/CurrentOrderInformationView');\r\n    },\r\n\r\n    isCartPage: function() {\r\n        return \/AjaxOrderItemDisplayView\/gim.test(location.href);\r\n    },\r\n\r\n    parseAmount: function(string) {\r\n        return parseFloat(string.replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n        var $response = $.parseHTML(response),\r\n            promoUsed = $('.promotion_used', $response),\r\n            codeFound = false, selector = this.isCartPage() ? '#WC_SingleShipmentOrderTotalsSummary_td_13' : '#WC_SingleShipmentOrderTotalsSummary_td_10';\r\n\r\n        promoUsed.each(function() {\r\n            if($('p a', $(this)).text().toLowerCase().indexOf(code.toLowerCase()) !== -1) {\r\n                codeFound = true;\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: this.parseAmount($(selector).text()) - this.parseAmount($(selector, $response).text())\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"ruvilla": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsText = $('td.a-right > span.price:contains(\"-$\")', responseHTML).text();\r\n        var savings = parseFloat(savingsText.replace(this.nonPriceRegex, '').toString());\r\n        if(savings > 0){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"ryka": "var ExternalProvider = {\r\n\r\n\tparse: function (response, status, $xhr, code) {\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\tvar savings = parseFloat($('.summary-item .discount-text', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: savings > 0,\r\n\t\t\tsavings: isNaN(savings) ? 0.00 : savings\r\n\t\t};\r\n\t},\r\n\r\n\tcomplete: function (bestCode) {\r\n\t\tif (bestCode) location.reload(true);\r\n\t}\r\n};",
	"ryman": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.responseText.substring(response.responseText.indexOf(\"-\u00a3\"));\r\n        savings = savings.substring(0, savings.indexOf(\"<\"));\r\n        savings = parseFloat(savings.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"saatchiart": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                code: code\r\n            };\r\n            return JSON.stringify(data);\r\n        }\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = response.items['0'].price.discount_amount * 0.01;\r\n        var savings = parseFloat(responseHTML);\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.btn--link').click();\r\n            $('#input-with-place-holder-0').val(bestCode);\r\n            $(\"button:contains('Apply')\").click();\r\n        }\r\n    }\r\n};",
	"sabon": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"entity_id\", window.giftOptionsConfig.quoteId);';\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var user = '\/carts\/mine';\r\n    var entityId = $('body').attr('entity_id');\r\n\r\n    if ($('.fieldset.register.hidden-fields').length === 1) {\r\n      user = '\/guest-carts\/' + entityId;\r\n    }\r\n\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/www.sabonnyc.com\/rest\/default\/V1' + user + '\/coupons\/CLAIMCODE';\r\n    var resultUrlInput = $('#___jpResultUrl');\r\n    var resultUrl = 'https:\/\/www.sabonnyc.com\/rest\/default\/V1' + user + '\/payment-information';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n\r\n    if (!resultUrlInput.length) {\r\n      resultUrlInput = document.createElement('input');\r\n      resultUrlInput.id = '___jpResultUrl';\r\n      resultUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n      resultUrlInput = $('#___jpResultUrl');\r\n    }\r\n\r\n    resultUrlInput.attr('value', resultUrl);\r\n  },\r\n  parse: function (response) {\r\n    var savings = Math.abs(response.totals.discount_amount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#co-payment-form > .after-method > div > span').click();\r\n      $('#discount-code').val(bestCode);\r\n\r\n      var changeEvent = new Event('change', {\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n\r\n      $('#discount-code').get(0).dispatchEvent(changeEvent);\r\n      $('.action.action-apply.action-applied')[0].click();\r\n    }\r\n  }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"sacredlifeoils": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var selector = $('.payment-due__currency').text().replace(\/[0-9.,]\/g, '').trim();\r\n        var locale = '';\r\n\r\n        if (selector === 'USD') {\r\n            locale = localeMapping['US'];\r\n            currency = \"USD\";\r\n        } else if (selector === 'GBP') {\r\n            locale = localeMapping['GB'];\r\n            currency = \"GBP\";\r\n        } else {\r\n            locale = localeMapping['DE'];\r\n            currency = \"EUR\";\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"safetyglassesusa": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.responseText);\r\n        var savings = parseFloat($('.cart-total-value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($('#couponcode').length) {\r\n                $('#couponcode').val(bestCode);\r\n                $('input[value=\"Apply\"]').click();\r\n            } else {\r\n                $('input[name=\"redeemableCode\"]').val(bestCode);\r\n\r\n                var changeEvent = new Event('change', {\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n\r\n                $('input[name=\"redeemableCode\"]').get(0).dispatchEvent(changeEvent);\r\n                $('#applyRedeemableButton').click();\r\n            }\r\n        }\r\n    }\r\n};",
	"safishing": "var ExternalProvider = {\r\n    securityParam: {},\r\n    initSecurity: function () {\r\n        var checkoutConfigString = $('script:contains(\"wc_checkout_params\")').text();\r\n\r\n        checkoutConfigString = checkoutConfigString.substring(checkoutConfigString.indexOf('{\"ajax_url\":'));\r\n        checkoutConfigString = checkoutConfigString.substring(0, checkoutConfigString.indexOf('\"};') + 2);\r\n        this.securityParam = JSON.parse(checkoutConfigString);\r\n    },\r\n    prepare: function (action, code) {\r\n        var data = false;\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            data = {\r\n                security: this.securityParam.apply_coupon_nonce,\r\n                coupon_code: code\r\n            };\r\n        } else if (action === 'resultUrl') {\r\n            data = {\r\n                security: this.securityParam.update_order_review_nonce,\r\n                payment_method: 'stripe',\r\n                country: 'US',\r\n                state: '',\r\n                postcode: '',\r\n                city: '',\r\n                address: '',\r\n                address_2: '',\r\n                s_country: 'US',\r\n                s_state: '',\r\n                s_postcode: '',\r\n                s_city: '',\r\n                s_address: '',\r\n                s_address_2: ''\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.fragments['.woocommerce-checkout-review-order-table']);\r\n        var savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('input[name=\"apply_coupon\"]').click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider.initSecurity();",
	"saksfifthavenue": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n      return new Promise((resolve) => {\r\n        let retries = 0;\r\n        const interval = setInterval(function() {\r\n          retries++;\r\n          if ($('.hbc-promo-code-display__remove-link span').length) {\r\n            $('.hbc-promo-code-display__remove-link span').click();\r\n          }\r\n          if (!$('.hbc-promo-code-display__remove-link span').length && retries < 3) {\r\n            clearInterval(interval);\r\n            resolve();\r\n          } else if (retries === 3) {\r\n            resolve();\r\n          }\r\n        }, 2000);\r\n      })\r\n  },\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.hbc-price-display__subtotal').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat(response.cartSummary.grandTotal.replace('&#36;', ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"saksoff5th": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('.hbc-price-display__line-item--items-total .hbc-price-display__summary-price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var oldTax = parseFloat($('.hbc-price-display__summary-label:contains(\"Tax\")~span').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newSubtotal = parseFloat(response.cartSummary.grandTotal.replace('&#36;', ''));\r\n        var newShipping = (response.cartSummary.shippingCost === 'FREE') ? 0.00 : parseFloat(response.cartSummary.shippingCost.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        var oldTotalPreTax = oldTotal - oldTax;\r\n        var newTotalPreTax = newSubtotal + newShipping;\r\n        var savings = oldTotalPreTax - newTotalPreTax;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"saksoff5th.mobile": "var ExternalProvider = {\r\n\r\n    prepare: function (type, code) {\r\n        var data = false;\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = { promoCode: code, bmForm: 'applyPromoSaksBag' };\r\n        } else if (type === 'clearCouponUrl') {\r\n            data = { bmForm: 'remove_promo_code_saks_bag_service', promoCode: code };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        if (response.promoCodes && response.promoCodes.length > 0) {\r\n            var savings = parseFloat(response.cartSummary.promotionalSaving.replace(' &#36', '').replace(\/[^0-9|.]\/g, ''));\r\n\r\n            return {\r\n                success: savings > 0,\r\n                savings: isNaN(savings) ? 0.00 : savings\r\n            };\r\n        }\r\n\r\n        return false;\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sallybeauty": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount .rightalign', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"sallybeauty.mobile": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $piggyJq.parseHTML(response);\r\n        var savings = parseFloat($piggyJq('.discount .rightalign', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"saltcityoptics": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsText = $('span.price:contains(\"-$\")', response).text();\r\n        var savings = parseFloat(savingsText.replace(this.nonPriceRegex, '').toString());\r\n        if(savings > 0){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        location.reload(true);\r\n    }\r\n};",
	"saltlife": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"saltrock": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.template);\r\n        var savings = $.trim($('.amount.discount', responseHTML).text().replace(\/[$\u00a3-]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if ($('#uqdCodeBox').length) {\r\n            $('#uqdCodeBox').val(bestCode);\r\n            $('#uqdButton').click();\r\n        } else if (bestCode) {\r\n            $('.promo-code-slide input.thin').val(bestCode);\r\n            $('.promo-code-slide button').click();\r\n        }\r\n    }\r\n};",
	"saltwaterfish": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#cart-summary-container > table > tbody > tr:nth-child(5) > td:nth-child(2)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#id_dialog_coupon_code').val(bestCode);\r\n            $('#id_dialog_apply_coupon_code_button').click();\r\n        }\r\n    }\r\n};",
	"samash": "var ExternalProvider = {\r\n  applyUrl: '',\r\n  __prepareUrl: function () {\r\n    var applyUrlElement = $('#__jpCouponUrl');\r\n    this.applyUrl = this.isCheckoutPage() ? 'https:\/\/www.samash.com\/AjaxPromotionCodeManageApply' : 'https:\/\/www.samash.com\/webapp\/wcs\/stores\/servlet\/AjaxPromotionCodeManageApply';\r\n    if (applyUrlElement.length < 1) {\r\n      $('<input>', {\r\n        id: '__jpCouponUrl',\r\n        value: this.applyUrl,\r\n        type: 'hidden'\r\n      }).appendTo('body');\r\n    }\r\n    this.initSerializeObject();\r\n  },\r\n  initSerializeObject: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n      for (var i = 0; i < data.length; i++) {\r\n        object[data[i]['name']] = data[i]['value'];\r\n      }\r\n\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    return this.arrangeData(action, code);\r\n  },\r\n  arrangeData: function (action, code) {\r\n    var formData = formData = $('#PromotionCodeForm').serializeObject();\r\n    formData.promoCode = code;\r\n\r\n    if (action === 'clearCouponUrl') {\r\n      formData.taskType = 'R';\r\n      formData.calculationUsage = '-1,-2,-3,-4,-5,-6,-7';\r\n    }\r\n\r\n    if (action === 'resultUrl') {\r\n      formData = {};\r\n    }\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('#orderTotalPrice').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('#orderTotalPrice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $.ajax({\r\n        url: this.applyUrl,\r\n        type: 'POST',\r\n        data: this.arrangeData('applyCouponUrl', bestCode),\r\n        success: function () {\r\n          location.reload();\r\n        }\r\n      })\r\n    }\r\n  },\r\n  isCheckoutPage: function () {\r\n    return \/OrderShippingBillingView\/.test(location.pathname);\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"sammydress": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsHTML = $('.toCheckOut > .code > .row2 > ul > li:eq(1) > em > .my_shop_price', responseHTML).html();\r\n        var savings = savingsHTML ? parseFloat(savingsHTML.replace(\/[^0-9|\\.]\/g, '')) : 0.00;\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving) {\r\n\r\n        location.reload(true);\r\n\r\n    }\r\n\r\n};",
	"sammydress.mobile": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        if (response && response.coupon_amount && parseFloat(response.coupon_amount) > 0) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(response.coupon_amount)\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving) {\r\n\r\n        location.reload(true);\r\n\r\n    }\r\n\r\n};",
	"samsonite": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    let applyCouponUrl = $('form[action*=\"cart?dwcont\"]').attr('action');\r\n    this.createInput('requestUrl', applyCouponUrl);\r\n  },\r\n  prepare: function (step, code) {\r\n    switch (step) {\r\n      case 'applyCouponUrl':\r\n        return this.isCartPage() ? this.getCartData(true, code) : this.getCheckoutData(true, code);\r\n      case 'clearCouponUrl':\r\n        return this.isCartPage() ? this.getCartData(false) : this.getCheckoutData(false);\r\n    }\r\n  },\r\n  getCartData: function (isForApply, code) {\r\n    if (isForApply === true) {\r\n      this.couponId = '';\r\n      return {\r\n        csrf_token: $('input[name=\"csrf_token\"]').val(),\r\n        dwfrm_cart_couponCode: code,\r\n        dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon'\r\n      };\r\n    } else {\r\n      return {\r\n        csrf_token: $('input[name=\"csrf_token\"]').val(),\r\n        dwfrm_cart_couponCode: '',\r\n        dwfrm_cart_deleteCouponNew: 'Remove',\r\n        couponuuid: this.couponId\r\n      };\r\n    }\r\n  },\r\n  getCheckoutData: function (isForApply, code) {\r\n    if (isForApply) {\r\n      return {\r\n        csrf_token: $('input[name=\"csrf_token\"]').val(),\r\n        dwfrm_billing_securekey: $('input[name=\"dwfrm_billing_securekey\"]').val(),\r\n        dwfrm_billing_couponCode: code,\r\n        dwfrm_billing_applyCoupon: 'dwfrm_billing_applyCoupon'\r\n      };\r\n    } else {\r\n      return {\r\n        csrf_token: $('input[name=\"csrf_token\"]').val(),\r\n        dwfrm_billing_securekey: $('input[name=\"dwfrm_billing_securekey\"]').val(),\r\n        dwfrm_billing_couponCode: '',\r\n        dwfrm_billing_removeCoupon: 'Remove',\r\n        couponuuid: this.couponId\r\n      };\r\n    }\r\n  },\r\n  parse: function (response, status, xhr, code) {\r\n    const responseHTML = $.parseHTML(response);\r\n    this.couponId = $('.remove-coupon', responseHTML).attr('name');\r\n    let savings = parseFloat($('.promoCodes .code:contains(\"' + code + '\")', responseHTML).parent().text().split(\"(\")[1].replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  isCartPage: function () {\r\n    return $('#cart-line-items').length > 0;\r\n  },\r\n  createInput: function (id, value) {\r\n    if (document.getElementById(id) === null) {\r\n      let createdInput = document.createElement(\"input\");\r\n      createdInput.id = id;\r\n      createdInput.setAttribute('type', 'hidden');\r\n      createdInput.setAttribute('value', value);\r\n      (document.body || document.head || document.documentElement).appendChild(createdInput);\r\n    } else {\r\n      document.getElementById(id).value = value;\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"samsung": "var ExternalProvider = {\r\n    appendUuid: function () {\r\n        var cofundUUIDVal = this.getCookie('s_ecom_pfscid').split('|')[1];\r\n        var pigInput = $(\"<input type=\\\"hidden\\\" id=\\\"_cofund_uuid_val\\\" value='\" + cofundUUIDVal + \"'>\");\r\n\r\n        $('body').append(pigInput);\r\n    },\r\n    init: function () {\r\n        $.ajaxSettings.beforeSend = function (xhr) {\r\n            xhr.setRequestHeader('CSRF-Token', { toString: function () {\r\n                return 'undefined';\r\n            } });\r\n            xhr.setRequestHeader('x-client-request-id', { toString: function () {\r\n                return 'cart-info_order-summary_' + ExternalProvider.getCookie('s_ecom_pfscid').split('|')[0];\r\n            } \/\/ verify\r\n            });\r\n            xhr.setRequestHeader('x-ecom-app-id', { toString: function () {\r\n                return 'temp';\r\n            } });\r\n            xhr.setRequestHeader('x-ecom-cookie-credentials', { toString: function () {\r\n                return JSON.stringify({\r\n                    s_ecom_session: ExternalProvider.getCookie('s_ecom_session'),\r\n                    ecom_vi: ExternalProvider.getCookie('ecom_vi')\r\n                });\r\n            }\r\n            });\r\n            xhr.setRequestHeader('x-ecom-web-jwt', { toString: function () {\r\n                return ExternalProvider.getCookie('s_ecom_jwt');\r\n            } });\r\n        };\r\n    },\r\n    \/\/ https:\/\/www.w3schools.com\/js\/js_cookies.asp\r\n    getCookie: function (cname) {\r\n        var name = cname + '=';\r\n        var decodedCookie = decodeURIComponent(document.cookie);\r\n        var ca = decodedCookie.split(';');\r\n\r\n        for (var i = 0; i < ca.length; i++) {\r\n            var c = ca[i];\r\n\r\n            while (c.charAt(0) === ' ') {\r\n                c = c.substring(1);\r\n            }\r\n\r\n            if (c.indexOf(name) === 0) {\r\n                return c.substring(name.length, c.length);\r\n            }\r\n        }\r\n\r\n        return '';\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        if (response.cost.discount.amount) {\r\n            return {\r\n                success: true,\r\n                savings: response.cost.discount.amount\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};\r\n\r\nExternalProvider.appendUuid();",
	"sanctuaryclothing": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sanicarede": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#__jpCouponUrl');\r\n    var applyUrl = this.isCartPage() ? 'https:\/\/www.sanicare.de\/checkout\/addVoucher\/sTargetAction\/cart' : 'https:\/\/www.sanicare.de\/checkout\/addVoucher\/sTargetAction\/shippingPayment';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/checkout\/addVoucher\/sTargetAction\/cart' || location.pathname === '\/checkout\/cart';\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        sVoucher: code,\r\n        __csrf_token: 'input[name=\"__csrf_token\"]'\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.entry--total').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.entry--total', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"sVoucher\"]').val(bestCode);\r\n      $('.add-voucher--button').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"sanuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = Math.abs(response[0].productLineItems[0].priceAdjustments[0].basePrice.formattedString.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"sarenza": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var applyUrlInput = $('#__applyUrl');\r\n    var applyUrl = location.origin + '\/checkout\/basket\/discount-code\/apply';\r\n    var clearUrlInput = $('#__clearUrl');\r\n    var clearUrl = location.origin + '\/checkout\/basket\/discount-code\/delete';\r\n    var jsIsPaymentInput = $('#__jpIsPayment');\r\n    var jsIsPayment = !!location.origin.includes('checkout.sarenza');\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__applyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__applyUrl');\r\n    }\r\n\r\n    if (!clearUrlInput.length) {\r\n      clearUrlInput = document.createElement('input');\r\n      clearUrlInput.id = '__clearUrl';\r\n      clearUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n      clearUrlInput = $('#__clearUrl');\r\n    }\r\n\r\n    if (!jsIsPaymentInput.length) {\r\n      jsIsPaymentInput = document.createElement('input');\r\n      jsIsPaymentInput.id = '__jsIsPayment';\r\n      jsIsPaymentInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(jsIsPaymentInput);\r\n      jsIsPaymentInput = $('#__jsIsPayment');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    clearUrlInput.attr('value', clearUrl);\r\n    jsIsPaymentInput.attr('value', jsIsPayment);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.DiscountCode.FormatedDiscountAmount.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"sarenzade": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.DiscountCode.FormatedDiscountAmount.replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#DiscountCode').val(bestCode);\r\n            $('.form-send.button').click();\r\n        }\r\n    }\r\n};",
	"sarenzafr": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var applyUrlInput = $('#__applyUrl');\r\n    var applyUrl = location.origin + '\/checkout\/basket\/discount-code\/apply';\r\n    var clearUrlInput = $('#__clearUrl');\r\n    var clearUrl = location.origin + '\/checkout\/basket\/discount-code\/delete';\r\n    var jsIsPaymentInput = $('#__jpIsPayment');\r\n    var jsIsPayment = !!location.origin.includes('checkout.sarenza');\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__applyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__applyUrl');\r\n    }\r\n\r\n    if (!clearUrlInput.length) {\r\n      clearUrlInput = document.createElement('input');\r\n      clearUrlInput.id = '__clearUrl';\r\n      clearUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n      clearUrlInput = $('#__clearUrl');\r\n    }\r\n\r\n    if (!jsIsPaymentInput.length) {\r\n      jsIsPaymentInput = document.createElement('input');\r\n      jsIsPaymentInput.id = '__jsIsPayment';\r\n      jsIsPaymentInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(jsIsPaymentInput);\r\n      jsIsPaymentInput = $('#__jsIsPayment');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    clearUrlInput.attr('value', clearUrl);\r\n    jsIsPaymentInput.attr('value', jsIsPayment);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.DiscountCode.FormatedDiscountAmount.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"saturdaysnyc": "var ExternalProvider = {\r\n  _total: 0,\r\n  init: function () {\r\n    this._total = parseFloat($('.total .currency').text().replace(\/[0-9|.]\/g, \"\"));\r\n  },\r\n\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var total = parseFloat($('.total .currency', responseHTML).text().replace(\/[0-9|.]\/g, \"\"));\r\n    var savings = this._total - total;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('[name=\"discount\"]').val(bestCode);\r\n      $('#submit').click();\r\n    }\r\n  }\r\n};",
	"saturn": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.cototal-price').text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat(response.summary.totalPrice.replace(\/[^0-9.]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"saucony": "var ExternalProvider = {\r\n  cartTotal: 0,\r\n  init: function () {\r\n    this.cartTotal = parseFloat($('.order-total .textalign-right').text().replace(\/[^0-9|.]\/g, ''));\r\n  },\r\n\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = this.cartTotal - parseFloat($('.order-total .textalign-right', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"saverpoint": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping['US'];\r\n    var selector = $('.ekmpscart-cart-items-product-price-subtotal, .ekmpsco-side-summary-total__value').text().replace(\/[A-Z.0-9,]\/g, '').trim()[0];\r\n\r\n    if (selector === \"\u20ac\") {\r\n      currency = 'EUR';\r\n      locale = localeMapping['DE'];\r\n    } else if (selector === \"\u00a3\") {\r\n      currency = 'GBP';\r\n      locale = localeMapping['GB'];\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n  }\r\n};",
	"savilerowco": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n        var selector = $('.selected_text').text();\r\n\r\n        if (selector === '\u00a3' || selector.match('Pound')) {\r\n            newCurrency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        } else if (selector === '\u20ac' || selector.match('Euro')) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.DE;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.applied-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#apply-coupon').click();\r\n        }\r\n    }\r\n};",
	"savoryspiceshop": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.row.rowtotals div[style=\"text-align: right; color: teal;\"]', responseHTML)[0].innerHTML.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n\r\n};",
	"sc24": "var ExternalProvider = {\r\n  __prepareUrl: function (responseHTML) {\r\n    var clearUrl = $('a[href*=\"id_gutschein\"]', responseHTML).attr('href');\r\n\r\n    if (clearUrl !== undefined) {\r\n      var applyUrl = 'https:\/\/www.sc24.com' + clearUrl;\r\n        jQuery.ajaxSetup({async:false}); \r\n        $.get(applyUrl);\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    this.__prepareUrl(responseHTML);\r\n    var savings = parseFloat($('b:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"gutscheincode\"]').val(bestCode);\r\n      $('input[value=\"ok\"]').click();\r\n    }\r\n  }\r\n};",
	"scandinaviandesigncenter": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.dotted-value:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"scarlettandjo": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var newCurrency = currency;\r\n    var selector = $('.sod_label, .payment-due__price').text();\r\n\r\n    if (selector.match('\u00a3') || selector.match('GBP')) {\r\n      locale = localeMapping.GB;\r\n      newCurrency = 'GBP';\r\n    } else if (selector.src.match('\u20ac') || selector.match('EUR')) {\r\n      locale = localeMapping.DE;\r\n      newCurrency = 'EUR';\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"scarymommy": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"scdkey": "var ExternalProvider={\r\n  oldCartPrice: 0,  \r\n  __injectRuleSetSpan:function(){\r\n      var productid = $('.apply-coupon').attr('data-product_id')\r\n      var url = \"https:\/\/www.scdkey.com\/cart\/setCoupon\/\"+productid\r\n      var span_url = \"<span id='sm-coupon-url' data-attr-url='\"+url+\"' display='none' ><\/span>\";\r\n      $('body').append(span_url);\r\n  },  \r\n  init:function(){\r\n      var price = $('#total_amount').text().replace(\/[^0-9|\\.]\/g,'')\r\n      if(price)\r\n          this.oldCartPrice = parseFloat(price);\r\n      if(isNaN(this.oldCartPrice))\r\n          this.oldCartPrice = 0;    \r\n  },\r\n  parse:function(response,status,$xhr,code){\r\n      var jqObj = $.parseHTML(response.responseText);\r\n      var newPrice = parseFloat($('#total_amount',jqObj).text().replace(\/[^0-9|\\.]\/g,''))\r\n      var discount = this.oldCartPrice - newPrice;\r\n      if(discount > 0){\r\n          return{\r\n              success:true,\r\n              savings:discount\r\n          }\r\n      }\r\n\r\n      return{\r\n          success:false,\r\n          savings:0\r\n      }\r\n\r\n  },\r\n  complete:function(bestCode,bestSavings){\r\n      location.reload();    \r\n  }\r\n}\r\n\r\nExternalProvider.__injectRuleSetSpan();",
	"schecker": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        if ($('.basket_PriceWithoutDiscounts:contains(\"-\")', responseHTML).text()) {\r\n            var savings = parseFloat($('.basket_PriceWithoutDiscounts', responseHTML).text().split('-')[1].replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.basket_voucher_input').val(bestCode);\r\n            $('input[name=\"button_voucher\"]').click();\r\n        }\r\n    }\r\n};",
	"scholasticteacherstore": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.orderDiscount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"scholasticuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.to-pay:contains(\"\u00a3\")').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.to-pay:contains(\"\u00a3\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"schuhe24": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var htmlParse = $.parseHTML(response);\r\n        var savings = parseFloat($('.panel--td.column--total-price.block.is--align-right', htmlParse)[0].innerHTML.replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.add-voucher--field.is--medium.block').val(bestCode);\r\n            $('.add-voucher--panel.block-group .icon--arrow-right').click();\r\n        }\r\n    }\r\n};",
	"schuhuk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.d.discountAmount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"scorebig": "var ExternalProvider = {\r\n\tPromoReference: false,\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n\r\n\t\tvar codeFound = false;\r\n\t\tvar savings = 0.0;\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tif(response.Success== true ){\r\n\t\t\tcodeFound = true;\r\n\t\t\t\r\n\t\t\tsavings = Number(response.Data.CouponValue.replace( \/^\\D+\/g, ''));\r\n\t\t\t\r\n\t\t\tExternalProvider.PromoReference = response.Data.PromoReference;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'https:\/\/www.scorebig.com\/Checkout2\/RemoveAdjuster',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tasync: false,\r\n\t\t\t\tdata: {           \r\n\t\t\t\t\t'remove-coupone': '1',\r\n\t\t\t\t\t'type': 'Coupon',\r\n\t\t\t\t\t'PromoReference' : ExternalProvider.PromoReference,\r\n\t\t\t\t\t'action': 'remove'\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\treturn {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n\t\t\r\n\r\n        \r\n       \r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\t\t\r\n\t\t$.ajax({\r\n\t\t\t\turl: 'https:\/\/www.scorebig.com\/Checkout2\/ApplyAdjuster',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdata: {           \r\n\t\t\t\t\t'type': 'Coupon',\r\n\t\t\t\t\t'action': 'apply',\r\n\t\t\t\t\t'PromoReference': '00000000-0000-0000-0000-000000000000',\r\n\t\t\t\t\t'PromoCode': bestCode\r\n\t\t\t\t},\r\n\t\t\t\tsuccess:function(){\r\n\t\t\t\t\twindow.location = window.location;\r\n\t\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\t\r\n        \r\n\r\n    }\r\n    \r\n}",
	"scosche": "var ExternalProvider = {\r\n  prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n    scriptContent += 'body.setAttribute(\"jp_entity_id\", window.checkoutConfig.quoteData.entity_id);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var jp_entity_id = $('body').attr('jp_entity_id');\r\n    var applytUrlInput = $('#__jpApplyUrl');\r\n    var clearCouponInput = $('#__jpClearCouponUrl');\r\n    var applyUrl = 'https:\/\/www.scosche.com\/rest\/tech\/V1\/guest-carts\/' + jp_entity_id + '\/coupons\/CLAIMCODE';\r\n    var clearCouponUrl = 'https:\/\/www.scosche.com\/rest\/tech\/V1\/guest-carts\/' + jp_entity_id + '\/coupons';\r\n\r\n    if (applytUrlInput.length < 1 && clearCouponInput.length < 1) {\r\n      this.appendElement('__jpApplyUrl');\r\n      this.appendElement('__jpClearCouponUrl');\r\n    }\r\n    $('#__jpApplyUrl').val(applyUrl);\r\n    $('#__jpClearCouponUrl').val(clearCouponUrl);\r\n  },\r\n  appendElement: function (id) {\r\n    $('<input>').attr({\r\n      id: id,\r\n      type: 'hidden'\r\n    }).appendTo('body');\r\n  },\r\n  parse: function (response) {\r\n    var savings = 0;\r\n    if (response === true) {\r\n      jQuery.ajaxSetup({ async: false });\r\n      $.get('https:\/\/www.scosche.com\/checkout', function (response) {\r\n        savings = parseFloat(response.match(\/\"discount_amount\":\"-(.*),\"base_discount_amount\/)[1].replace(\/[^0-9|.]\/g, ''))\r\n      });\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      const codeField = this.isCartPage() ? $('#coupon_code') : $('#discount-code');\r\n      const submitButton = $('button[value=\"Apply Discount\"]');\r\n      codeField.val(bestCode);\r\n      codeField.get(0).dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\r\n      submitButton.get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return \/\\\/checkout\\\/cart\/.test(location.pathname);\r\n  }\r\n};\r\nExternalProvider.prepareUrl();",
	"scotchporter": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"scottevest": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#couponinfo:contains($)', responseHTML).text().match(\/\\(([^)]+)\\)\/)[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"scottsdalegolf": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['UK'];\r\n        var selector = $('#price').eq(0).text().replace(\/[-.A-z.0-9.,]\/g, '').trim();\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"$\") {\r\n            currency = 'USD';\r\n            locale = localeMapping['US'];\r\n        } else if (selector === \"\u00a3\") {\r\n            locale = localeMapping['UK'];\r\n            currency = \"GB\";\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var price = parseFloat($('.basketTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n        var discount = response.discountAmount;\r\n        var savings = '';\r\n\r\n        if (response.discountType === 'PERCENT') {\r\n            savings = price * discount \/ 100;\r\n        } else {\r\n            savings = discount;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"scrubsandbeyond": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"scrubshopper": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sears": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function () {\r\n        retries++;\r\n        if ($('.remove-coupon').length) {\r\n          $('.remove-coupon')[0].click();\r\n        }\r\n        if ($('.remove-coupon').length < 1 && retries < 3) {\r\n          clearInterval(interval);\r\n          resolve();\r\n        } else if (retries === 3) {\r\n          resolve();\r\n        }\r\n      }, 2000);\r\n    })\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action !== 'resultUrl') {\r\n      return JSON.stringify({\r\n        couponRequest: {\r\n          couponCode: code\r\n        }\r\n      });\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    let savings = parseFloat(response.response.ordSummary.couponsDiscount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    }\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n};",
	"searsca": "var ExternalProvider = {\r\n   \r\n    parse: function(response, status, $xhr, code)\r\n    {   \r\n        try\r\n        {                \r\n            var result = {\r\n                            success: false,\r\n                            savings: 0.00\r\n                        };\r\n                                     \r\n            if (response !== 'undefined'\r\n                && response.hasOwnProperty('response') \r\n                && response.response.hasOwnProperty('orderSummary')\r\n                && response.response.orderSummary.hasOwnProperty('orderTotal')) \r\n            {               \r\n                var oldPrice = parseFloat($('.order-total-value').text().replace(\/[^0-9|\\.]\/g, '')),\r\n                    newPrice = response.response.orderSummary.orderTotal;\r\n                        \r\n                if(newPrice < oldPrice)\r\n                {                \r\n                    var savings = oldPrice - newPrice;\r\n                          \r\n                    result = {\r\n                        success: true,\r\n                        savings: savings\r\n                    };\r\n                }    \r\n            }            \r\n            return result;           \r\n        }\r\n        catch(err) {\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }                \r\n    },\r\n    complete: function(bestCode, bestSavings)\r\n    {\r\n        location.reload();\r\n    }\r\n};",
	"seaside64": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.panel--td.column--total-price.block:contains(\"-\"):eq(0)', responseHTML).text().replace(\/,\/g, '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.add-voucher--field').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        }\r\n    }\r\n};",
	"seatgeek": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var clientIdUrlInput = $('#___jpClientId');\r\n        var tokenUrlInput = $('#___jpToken');\r\n        var clientIdUrl = this.retrieveUserId();\r\n        var tokenUrl = this.retrieveToken();\r\n\r\n        if (!clientIdUrlInput.length) {\r\n            clientIdUrlInput = document.createElement('input');\r\n            clientIdUrlInput.id = '___jpClientId';\r\n            clientIdUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clientIdUrlInput);\r\n            clientIdUrlInput = $('#___jpClientId');\r\n        }\r\n\r\n        if (!tokenUrlInput.length) {\r\n            tokenUrlInput = document.createElement('input');\r\n            tokenUrlInput.id = '___jpToken';\r\n            tokenUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(tokenUrlInput);\r\n            tokenUrlInput = $('#___jpToken');\r\n        }\r\n\r\n        clientIdUrlInput.attr('value', clientIdUrl);\r\n        tokenUrlInput.attr('value', tokenUrl);\r\n    },\r\n\r\n    retrieveUserId: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n\r\n        scriptContent += 'body.setAttribute(\"userid\", SG.API._clientId);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('userid');\r\n\r\n        $('body').removeAttr('userid');\r\n\r\n        return value;\r\n    },\r\n\r\n    retrieveToken: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n\r\n        scriptContent += 'body.setAttribute(\"token\", SG.API._accessToken);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = 'token ' + $('body').attr('token');\r\n\r\n        $('body').removeAttr('token');\r\n\r\n        return value;\r\n    },\r\n\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.available_discounts[0].discount.toString().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"sebago": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var oldTotal = parseFloat($('.order-total .textalign-right').text().replace('$', ''));\r\n        var savings = oldTotal - response.basketTotal;\r\n        if (response.status === 'OK' && savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n}",
	"secondspin": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('STRONG:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  isCartPage: function () {\r\n    return \/s\\\/cart\/.test(location.href);\r\n  },\r\n\r\n  complete: function (bestcode) {\r\n    if (bestcode && this.isCartPage()) location.reload();\r\n    else if (bestcode) {\r\n      document.getElementById('couponCode').value = bestcode;\r\n      document.querySelector('input[name=\"_eventId_addCoupon\"]').click();\r\n    }\r\n  }\r\n};",
	"selectfashion": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.basket_discount_value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"selections": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0.00;\r\n\r\n        if (this.isCartPage()) {\r\n            var savings = parseFloat($('.table.table-bordered .text-right:contains(\"-\")', responseHTML).eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n        } else {\r\n            var savings = parseFloat($('td:contains(\"\u00a3-\")', responseHTML).eq(0).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        return \/store\\\/checkout\\\/cart\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sennheiser": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = 'USD';\r\n        var selector = location.href;\r\n\r\n        if (selector.match('\/fr\/')) {\r\n            locale = localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = this.serializeObject($('form[name=\"ShoppingCartForm\"]').serializeArray());\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data.couponCode = code;\r\n        }\r\n\r\n        return data;\r\n    },\r\n    serializeObject: function (a) {\r\n        var o = {};\r\n\r\n        $.each(a, function () {\r\n            o[this.name] = this.value || '';\r\n        });\r\n\r\n        return o;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.discountTotal', responseHTML).text().replace(',', '.');\r\n\r\n        savings = parseFloat(savings.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sephorafr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-summary-col.value:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"sephra": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#shopping-cart-totals-table td:contains(\"Discount\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"seraphine": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings;\r\n\r\n        var discountTextCell = $('#shopping-cart-totals-table td:contains(\"Discount\")', responseHTML);\r\n\r\n        var success = discountTextCell.length === 1;\r\n\r\n        if (success) {\r\n            savings = discountTextCell.next().children('.price').text().replace(\/[^0-9.]\/g, '');\r\n        }\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n\r\n    complete: function()\r\n    {\r\n        location.reload();\r\n    }\r\n};",
	"serenataflowers": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = '';\r\n        if (location.href.includes('checkout')) {\r\n            selector = $('#basket-productprice').text().replace(\/[A-z.0-9,]\/g, '').trim();\r\n        } else {\r\n            selector = $('.total').text().replace(\/[A-z.0-9,]\/g, '');\r\n        }\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    init: function () {\r\n        $('#basket-voucher > td > a').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('#txtVoucherCode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#txtVoucherCode').trigger('input').trigger('change');\r\n            $('#lnkVoucherSaveChanges').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 250);\r\n    },\r\n    parse: function () {\r\n        var savings = parseFloat($('#checkout-edit-basket-voucher-discount').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"serenityhealth": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response[0].discounts[0].discountedAmount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"serenityhealth.mobile": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.data.cart.coupon.discountedAmount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#its_couponcode').val(bestCode);\r\n            $('#its_apply_couponcode').click();\r\n        }\r\n    }\r\n};",
	"seton": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat($('td:contains(\"-$\")', $.parseHTML(response)).eq(0).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $(\"button[value='Apply Coupon']\").click();\r\n        }\r\n    }\r\n};",
	"seven7jeans": "var ExternalProvider = {\r\n  prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = \"\/core\/api\" + $(\".edit-address-link\").attr(\"href\").replace(\"edit\", \"discounts\");\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n    applyUrlInput.attr('value', applyUrl)\r\n\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        discount: {\r\n          code: code\r\n        }\r\n      };\r\n      return JSON.stringify(data);\r\n    }\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.order.discount.amount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[placeholder=\"enter code\"]').val(bestCode);\r\n\r\n      var changeEvent = new Event('change', {\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n\r\n      $('input[placeholder=\"enter code\"]').get(0).dispatchEvent(changeEvent);\r\n\r\n      var clickEvent = new MouseEvent('click', {\r\n        view: window,\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n\r\n      $('button:contains(\"Apply\")').removeAttr('disabled');\r\n      $('button:contains(\"Apply\")').get(0).dispatchEvent(clickEvent);\r\n    }\r\n  }\r\n};\r\nExternalProvider.prepareUrl();",
	"sexshopvenize": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.rechnungspreis').eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.rechnungspreis', responseHTML).eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = (oldTotal - newTotal) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"grunt": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"shabbychic": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        var formData = [];\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            formData = $('.edit_checkout.animate-floating-labels:first').serializeArray();\r\n            formData.push({\r\n                name: 'checkout[reduction_code]',\r\n                value: code\r\n            });\r\n        }\r\n\r\n        if (action === 'clearCouponUrl') {\r\n            formData = $('.edit_checkout.animate-floating-labels:first').serializeArray();\r\n            formData.push({\r\n                name: 'checkout[clear_discount]',\r\n                value: 1\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"shambhala": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('button[title=\"Apply Coupon\"]').click();\r\n    }\r\n  }\r\n};",
	"sharperimage": "var ExternalProvider = {\r\n    cartTotal: 0,\r\n    _prepareUrl: function() {\r\n        var applyUrlInput = $('#__jpCouponUrl'),\r\n            applyUrl = $('#paymentForm').length ? $('#paymentForm').attr('action') : $('form[name=\"cartform\"]').attr('action');\r\n        if(!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement(\"input\");\r\n            applyUrlInput.id = '__jpCouponUrl';\r\n            applyUrlInput.style.display = \"none\";\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#__jpCouponUrl');\r\n        }\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    init: function () {\r\n        this.extendMethod();\r\n        this.cartTotal = $('.cartTotal').length\r\n            ? parseFloat($('.cart-total .col-sm-4').text().replace(\/[^0-9|.]\/g, ''))\r\n            : parseFloat($('td.total:eq(1)').text().replace(\/[^0-9|.]\/g, ''));\r\n    },\r\n    extendMethod: function () {\r\n        jQuery.fn.extend({\r\n            getSerializeData: function(){\r\n                var form_array = $(this).serializeArray()\r\n                var data = {}\r\n                $.each(form_array,function(){\r\n                    data[this.name] = this.value||''\r\n                })\r\n                return data\r\n            }\r\n        })\r\n    },\r\n    prepare: function (requestType, code){\r\n        var serialize_data;\r\n        if (requestType === 'applyCouponUrl') {\r\n            if ($('#paymentForm').length) {\r\n                serialize_data = $('#paymentForm').getSerializeData();\r\n                serialize_data['\/atg\/store\/order\/purchase\/BillingFormHandler.couponCode'] = code;\r\n                serialize_data['\/atg\/store\/order\/purchase\/BillingFormHandler.claimCoupon'] = 'Apply';\r\n            } else {\r\n                serialize_data = $('form[name=\"cartform\"]').getSerializeData();\r\n                serialize_data['\/atg\/store\/order\/purchase\/CartFormHandler.couponCode'] = code\r\n                serialize_data['\/atg\/store\/order\/purchase\/CartFormHandler.update'] = 'Apply'\r\n            }\r\n            return serialize_data\r\n        }\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = $('.cartTotal').length\r\n            ? parseFloat($('.cart-total .col-sm-4', responseHTML).text().replace(\/[^0-9|.]\/g, ''))\r\n            : parseFloat($('td.total:eq(1)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = this.cartTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promo-input').length;\r\n            $('#promo-input, #promo-code-textbox').val(bestCode);\r\n            $('#claimCouponButton, input[name=\"\/atg\/store\/order\/purchase\/CartFormHandler.update\"]').click();\r\n        }\r\n    }\r\n}\r\nExternalProvider._prepareUrl();",
	"shavemob": "var ExternalProvider = {\r\n  initializeSerializeObject: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n      for (var i = 0; i < data.length; i++) {\r\n        object[data[i]['name']] = data[i]['value'];\r\n      }\r\n\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    var formData = $('form[action=\"\/cart\/\"]').serializeObject();\r\n    formData.apply_coupon = \"Apply\";\r\n    formData.coupon_code = code;\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = 0;\r\n    if ($('.woocommerce-error', responseHTML).length < 1 || $('.woocommerce-error', responseHTML).text().includes(\"Coupon code already applied!\")) {\r\n      savings = parseFloat($('.cart-discount .amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.initializeSerializeObject();",
	"shearingsholidaysuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('#basic-price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat(response.BestPrice.replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promo-popover-btn').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n      $('#promoCode').val(bestCode);\r\n      $('#add-promocode-button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  }\r\n};",
	"sheds": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-total-item:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        $.ajax({\r\n            url: $('.coupons-active .link', responseHTML).attr('href'),\r\n            type: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (location.pathname.match('checkout')) {\r\n                $('#couponcode').val(bestCode);\r\n                $('#apply_code').click();\r\n            } else {\r\n                location.reload();\r\n            }\r\n        }\r\n    }\r\n};",
	"sheetmusicplus": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#couponDisplaySection dd span, #contentPromo', responseHTML).text().split('[')[0].replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"she-in": "var ExternalProvider = {\r\n    prepare: function(action, code) {\r\n        if(['applyCouponUrl', 'clearCouponUrl'].indexOf(action) == -1) return false;\r\n\r\n        var chkInsurance_value = \"\";\r\n        var us_totle_price = $('#sub_total .goods_price_USD').html();\r\n        if($(\"#chkInsurance\").hasClass(\"she-checkbox-checked\")){\r\n            chkInsurance_value = $(\"#chkInsurance\").attr(\"value\");\r\n        }\r\n        var use_wallet = 1;\r\n        if($('#use_wallet').is(':checked')){\r\n            use_wallet = 1;\r\n        }else{\r\n            use_wallet = 0;\r\n        }\r\n\r\n        return {\r\n            model         : 'coupon_point',\r\n            action        : 'coupon',\r\n            country_id    : $(\"#country\").val(),\r\n            coupons       : action == 'applyCouponUrl' ? code : '',\r\n            chkInsurance  : chkInsurance_value,\r\n            use_wallet    : use_wallet,\r\n            us_totle_price: us_totle_price\r\n        };\r\n    },\r\n    parse: function(response, $xhr, status, code) {\r\n        if (!response || response.code || response.result != 'success' || response.info.coupon.coupon != code) {\r\n            \r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            }\r\n        }\r\n\r\n        var currentPrice = this.parseAmount($('#sub_total .goods_price_USD').html());\r\n        return {\r\n            success: true,\r\n            savings: currentPrice - response.info.content.cart.goods_price.current_price.total_price\r\n        };\r\n    },\r\n    parseAmount: function(string) {\r\n        return parseFloat(string.replace(\/[^0-9|.]\/g, ''));\r\n    },\r\n    complete: function(bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sheinfr": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.FR;\r\n        var newCurrency = 'EUR';\r\n        var selector = $('.she-fr.total').text();\r\n\r\n        if (selector.includes('GBP')) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector.includes('US')) {\r\n            locale = localeMapping.US;\r\n            newCurrency = 'USD';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    prepare: function (type, code) {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n        var data = {};\r\n\r\n        scriptContent += 'body.setAttribute(\"shipping_method_id\", window.gbCoSsrData.checkout.results.shippingMethods[0].id);body.setAttribute(\"address_id\", window.gbCoSsrData.checkout.default_address.addressId);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var shippingMethodId = $('body').attr('shipping_method_id');\r\n        var addressId = $('body').attr('address_id');\r\n\r\n        data = {\r\n            address_id: addressId,\r\n            shipping_method_id: shippingMethodId,\r\n            payment_id: '',\r\n            coupon: code,\r\n            points: 0,\r\n            use_insurance: 1,\r\n            use_wallet: 0,\r\n            comment: '',\r\n            payment_code_unique: '',\r\n            is_shop_transit: 0\r\n        };\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.info.couponPrice.amount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var inputEvent = new Event('input', { bubbles: true });\r\n\r\n            inputEvent.simulated = true;\r\n            document.querySelectorAll('.input-sm')[0].value = bestCode;\r\n            document.querySelectorAll('.input-sm')[0].dispatchEvent(inputEvent);\r\n            $('.she-fl~a')[0].click();\r\n        }\r\n    }\r\n};",
	"shelving": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isCartPage() ? 'https:\/\/www.shelving.com\/ShoppingCart.asp' : 'https:\/\/www.shelving.com\/one-page-checkout.asp';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.v65-cart-giftcert-total font:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: !!savings,\r\n            savings: savings ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n    isCartPage: function () {\r\n        return !\/one-page-checkout\\.asp\/.test(location.href);\r\n    },\r\n    complete: function (bestCode, bestSaving) {\r\n        $('input[name=\"CouponCode\"]').val(bestCode);\r\n        var applyButton = this.isCartPage() ? '#v65-cart-coupon-entry-details-button' : 'input[name=\"btnCouponCode\"]';\r\n        $(applyButton).click();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"shethinx": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"shindigz": "var checkoutData = JSON.parse($('#data-mz-preload-checkout').text());\r\n\r\nvar pigInput = $('<input id=\"piggy-usx-id\" value=\"' + checkoutData.id + '\">');\r\n$('body').append(pigInput);\r\n\r\nvar headerData = JSON.parse($('#data-mz-preload-apicontext').text());\r\n\r\nvar ExternalProvider = {\r\n\r\n    createEvent:function(type, options){\r\n        var event;\r\n        options = $.extend({\r\n            bubbles: true,\r\n            cancelable: true,\r\n            view: window,\r\n            ctrlKey: false,\r\n            altKey: false,\r\n            shiftKey: false,\r\n            metaKey: false,\r\n            keyCode: 0,\r\n            charCode: undefined\r\n        }, options );\r\n\r\n        if ( document.createEvent ) {\r\n            try {\r\n                event = document.createEvent( \"KeyEvents\" );\r\n                event.initKeyEvent( type, options.bubbles, options.cancelable, options.view,\r\n                    options.ctrlKey, options.altKey, options.shiftKey, options.metaKey,\r\n                    options.keyCode, options.charCode );\r\n                \/\/ initKeyEvent throws an exception in WebKit\r\n                \/\/ see: http:\/\/stackoverflow.com\/questions\/6406784\/initkeyevent-keypress-only-works-in-firefox-need-a-cross-browser-solution\r\n                \/\/ and also https:\/\/bugs.webkit.org\/show_bug.cgi?id=13368\r\n                \/\/ fall back to a generic event until we decide to implement initKeyboardEvent\r\n            } catch( err ) {\r\n                event = document.createEvent( \"Events\" );\r\n                event.initEvent( type, options.bubbles, options.cancelable );\r\n                $.extend( event, {\r\n                    view: options.view,\r\n                    ctrlKey: options.ctrlKey,\r\n                    altKey: options.altKey,\r\n                    shiftKey: options.shiftKey,\r\n                    metaKey: options.metaKey,\r\n                    keyCode: options.keyCode,\r\n                    charCode: options.charCode\r\n                });\r\n            }\r\n        } else if ( document.createEventObject ) {\r\n            event = document.createEventObject();\r\n            $.extend( event, options );\r\n        }\r\n\r\n        if ( !!\/msie [\\w.]+\/.exec( navigator.userAgent.toLowerCase() ) || (({}).toString.call( window.opera ) === \"[object Opera]\") ) {\r\n            event.keyCode = (options.charCode > 0) ? options.charCode : options.keyCode;\r\n            event.charCode = undefined;\r\n        }\r\n\r\n        return event;\r\n    },\r\n    dispatchEvent: function(elem, type, event){\r\n        if ( elem.dispatchEvent ) {\r\n            elem.dispatchEvent( event );\r\n        } else if ( type === \"click\" && elem.click && elem.nodeName.toLowerCase() === \"input\" ) {\r\n            elem.click();\r\n        } else if ( elem.fireEvent ) {\r\n            elem.fireEvent( \"on\" + type, event );\r\n        }\r\n    },\r\n    similateEvent: function(elem, type, options){\r\n        var event = ExternalProvider.createEvent( type, options );\r\n        ExternalProvider.dispatchEvent( elem, type, event, options );\r\n    },\r\n    setCookie: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {\r\n        if (!sKey || \/^(?:expires|max\\-age|path|domain|secure)$\/i.test(sKey)) {\r\n            return false;\r\n        }\r\n        var sExpires = \"\";\r\n        if (vEnd) {\r\n            switch (vEnd.constructor) {\r\n                case Number:\r\n                    sExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; max-age=\" + vEnd;\r\n                    break;\r\n                case String:\r\n                    sExpires = \"; expires=\" + vEnd;\r\n                    break;\r\n                case Date:\r\n                    sExpires = \"; expires=\" + vEnd.toUTCString();\r\n                    break;\r\n            }\r\n        }\r\n        document.cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\r\n        return true;\r\n    },\r\n    prepare: function(type, code){\r\n        $.ajaxSettings.beforeSend = function(xhr){\r\n            xhr.setRequestHeader('x-vol-app-claims', {toString: function(){ return headerData.headers['x-vol-app-claims']; }});\r\n            xhr.setRequestHeader('x-vol-catalog', {toString: function(){ return headerData.headers['x-vol-catalog']; }});\r\n            xhr.setRequestHeader('x-vol-currency', {toString: function(){ return headerData.headers['x-vol-currency']; }});\r\n            xhr.setRequestHeader('x-vol-locale', {toString: function(){ return headerData.headers['x-vol-locale']; }});\r\n            xhr.setRequestHeader('x-vol-master-catalog', {toString: function(){ return headerData.headers['x-vol-master-catalog']; }});\r\n            xhr.setRequestHeader('x-vol-site', {toString: function(){ return headerData.headers['x-vol-site']; }});\r\n            xhr.setRequestHeader('x-vol-tenant', {toString: function(){ return headerData.headers['x-vol-tenant']; }});\r\n            xhr.setRequestHeader('x-vol-user-claims', {toString: function(){ return headerData.headers['x-vol-user-claims']; }});\r\n            if(type === 'clearCouponUrl'){\r\n                xhr.setRequestHeader('X-HTTP-Method-Override', {toString: function(){ return 'DELETE'; }});\r\n            }\r\n        };\r\n\r\n        var couponData = {};\r\n\r\n        couponData[code] = (type === 'applyCouponUrl');\r\n\r\n        ExternalProvider.setCookie('coupon', JSON.stringify(couponData), Infinity, '\/', 'www.shindigz.com');\r\n\r\n        return (type === 'clearCouponUrl') ? code: null;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n        if(response.discountTotal){\r\n            var savings = response.discountTotal;\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        $('#coupon-code').val(bestCode);\r\n        ExternalProvider.similateEvent($('#coupon-code')[0], 'change');\r\n\r\n        setTimeout(function(){\r\n            $('.code_input_btn')[0].click();\r\n        }, 100);\r\n    }\r\n};",
	"shindigz.mobile": "var ExternalProvider = {\r\n\r\n    headerData: {},\r\n\r\n    _prepareData: function() {\r\n\r\n\t\tvar checkoutData = JSON.parse($piggyJq('#data-mz-preload-checkout').text());\r\n\t\tvar pigInput = $piggyJq('<input id=\"piggy-usx-id\" value=\"' + checkoutData.id + '\">');\r\n\t\t$piggyJq('body').append(pigInput);\r\n\r\n\t\tthis.headerData = JSON.parse($piggyJq('#data-mz-preload-apicontext').text());\r\n    },\r\n\r\n    createEvent:function(type, options){\r\n        var event;\r\n        options = $piggyJq.extend({\r\n            bubbles: true,\r\n            cancelable: true,\r\n            view: window,\r\n            ctrlKey: false,\r\n            altKey: false,\r\n            shiftKey: false,\r\n            metaKey: false,\r\n            keyCode: 0,\r\n            charCode: undefined\r\n        }, options );\r\n\r\n        if ( document.createEvent ) {\r\n            try {\r\n                event = document.createEvent( \"KeyEvents\" );\r\n                event.initKeyEvent( type, options.bubbles, options.cancelable, options.view,\r\n                    options.ctrlKey, options.altKey, options.shiftKey, options.metaKey,\r\n                    options.keyCode, options.charCode );\r\n                \/\/ initKeyEvent throws an exception in WebKit\r\n                \/\/ see: http:\/\/stackoverflow.com\/questions\/6406784\/initkeyevent-keypress-only-works-in-firefox-need-a-cross-browser-solution\r\n                \/\/ and also https:\/\/bugs.webkit.org\/show_bug.cgi?id=13368\r\n                \/\/ fall back to a generic event until we decide to implement initKeyboardEvent\r\n            } catch( err ) {\r\n                event = document.createEvent( \"Events\" );\r\n                event.initEvent( type, options.bubbles, options.cancelable );\r\n\t\t\t\t$piggyJq.extend( event, {\r\n                    view: options.view,\r\n                    ctrlKey: options.ctrlKey,\r\n                    altKey: options.altKey,\r\n                    shiftKey: options.shiftKey,\r\n                    metaKey: options.metaKey,\r\n                    keyCode: options.keyCode,\r\n                    charCode: options.charCode\r\n                });\r\n            }\r\n        } else if ( document.createEventObject ) {\r\n            event = document.createEventObject();\r\n\t\t\t$piggyJq.extend( event, options );\r\n        }\r\n\r\n        if ( !!\/msie [\\w.]+\/.exec( navigator.userAgent.toLowerCase() ) || (({}).toString.call( window.opera ) === \"[object Opera]\") ) {\r\n            event.keyCode = (options.charCode > 0) ? options.charCode : options.keyCode;\r\n            event.charCode = undefined;\r\n        }\r\n\r\n        return event;\r\n    },\r\n    dispatchEvent: function(elem, type, event){\r\n        if ( elem.dispatchEvent ) {\r\n            elem.dispatchEvent( event );\r\n        } else if ( type === \"click\" && elem.click && elem.nodeName.toLowerCase() === \"input\" ) {\r\n            elem.click();\r\n        } else if ( elem.fireEvent ) {\r\n            elem.fireEvent( \"on\" + type, event );\r\n        }\r\n    },\r\n    similateEvent: function(elem, type, options){\r\n        var event = ExternalProvider.createEvent( type, options );\r\n        ExternalProvider.dispatchEvent( elem, type, event, options );\r\n    },\r\n\r\n    setCookie: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {\r\n        if (!sKey || \/^(?:expires|max\\-age|path|domain|secure)$\/i.test(sKey)) {\r\n            return false;\r\n        }\r\n        var sExpires = \"\";\r\n        if (vEnd) {\r\n            switch (vEnd.constructor) {\r\n                case Number:\r\n                    sExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; max-age=\" + vEnd;\r\n                    break;\r\n                case String:\r\n                    sExpires = \"; expires=\" + vEnd;\r\n                    break;\r\n                case Date:\r\n                    sExpires = \"; expires=\" + vEnd.toUTCString();\r\n                    break;\r\n            }\r\n        }\r\n        document.cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\r\n        return true;\r\n    },\r\n\r\n    prepare: function(type, code){\r\n\r\n\t\t$piggyJq.ajaxSettings.beforeSend = function(xhr){\r\n            xhr.setRequestHeader('x-vol-app-claims', {toString: function(){ return ExternalProvider.headerData.headers['x-vol-app-claims']; }});\r\n            xhr.setRequestHeader('x-vol-catalog', {toString: function(){ return ExternalProvider.headerData.headers['x-vol-catalog']; }});\r\n            xhr.setRequestHeader('x-vol-currency', {toString: function(){ return ExternalProvider.headerData.headers['x-vol-currency']; }});\r\n            xhr.setRequestHeader('x-vol-locale', {toString: function(){ return ExternalProvider.headerData.headers['x-vol-locale']; }});\r\n            xhr.setRequestHeader('x-vol-master-catalog', {toString: function(){ return ExternalProvider.headerData.headers['x-vol-master-catalog']; }});\r\n            xhr.setRequestHeader('x-vol-site', {toString: function(){ return ExternalProvider.headerData.headers['x-vol-site']; }});\r\n            xhr.setRequestHeader('x-vol-tenant', {toString: function(){ return ExternalProvider.headerData.headers['x-vol-tenant']; }});\r\n            xhr.setRequestHeader('x-vol-user-claims', {toString: function(){ return ExternalProvider.headerData.headers['x-vol-user-claims']; }});\r\n            if(type === 'clearCouponUrl'){\r\n                xhr.setRequestHeader('X-HTTP-Method-Override', {toString: function(){ return 'DELETE'; }});\r\n            }\r\n        };\r\n\r\n        var couponData = {};\r\n\r\n        couponData[code] = (type === 'applyCouponUrl');\r\n\r\n        ExternalProvider.setCookie('coupon', JSON.stringify(couponData), Infinity, '\/', 'www.shindigz.com');\r\n\r\n        return (type === 'clearCouponUrl') ? code: null;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        if(response.discountTotal){\r\n            var savings = response.discountTotal;\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        $piggyJq('#coupon-code').val(bestCode);\r\n        ExternalProvider.similateEvent($piggyJq('#coupon-code')[0], 'change');\r\n\r\n        setTimeout(function(){\r\n\t\t\t$piggyJq('.code_input_btn')[0].click();\r\n        }, 100);\r\n    }\r\n};\r\nExternalProvider._prepareData();",
	"shiseido": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount>.value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};",
	"shoebacca": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var discount = parseFloat(response.slice(response.indexOf('discount_amount') + 'discount_amount\":\"'.length, response.indexOf('base_discount_amount') - '\",\"'.length).replace(\/[^0-9]\\.\/g, ''));\r\n\r\n        return {\r\n            success: discount > 0,\r\n            savings: isNaN(discount) ? 0.00 : discount\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('#block-discount').click();\r\n                $('#coupon_code').val(bestCode);\r\n                $('#discount-coupon-form').submit();\r\n            } else {\r\n                $('#discount-code').val(bestCode);\r\n                var changeEvent = new Event('change', {\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n                $('#discount-code').get(0).dispatchEvent(changeEvent);\r\n                $('#discount-form').submit();\r\n            }\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        return $('#authnetcim-cc-number').length === 0;\r\n    }\r\n};",
	"shoebuy": "var getCookie = function (sKey) {\r\n    if (!sKey) { return null; }\r\n    return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(\/[\\-\\.\\+\\*]\/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\r\n};\r\n\r\nvar userCookie = getCookie('user').replace(\/\\|.*$\/, '');\r\n\r\nvar pigInput = $('<input id=\"piggy-usx\" value=\"' + userCookie + '\">');\r\n$('body').append(pigInput);\r\n\r\nvar ExternalProvider = {\r\n    prepare: function(type, code){\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            var data = {\r\n                promotionId: code.toUpperCase()\r\n            };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        if(response.orderSummary.order.summary){\r\n            var savings = response.orderSummary.order.summary.promotionApplied.replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n}",
	"shoebuy.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        if(response.summary.promos && response.summary.promos[0]){\r\n            var savings = response.summary.promos[0].value;\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"shoecarnival": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-discount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"shoeline": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = Number(response.couponTotals.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"shoemall": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var session = $('input[name=\"_dynSessConf\"]').val();\r\n        var result = $('input[name=\"\/atg\/userprofiling\/ProfileFormHandler.logoutSuccessURL\"]').val();\r\n\r\n        var applyCouponUrl = $('#__jpApplyUrl');\r\n        var checkoutUrl = this.isCartPage() ? 'cart\/gadgets\/?_DARGS=\/cart\/gadgets\/promotion.jsp' : 'checkout\/checkout.jsp?step=2';\r\n\r\n        if (!applyCouponUrl.length) {\r\n            applyCouponUrl = document.createElement('input');\r\n            applyCouponUrl.id = '__jpApplyUrl';\r\n            applyCouponUrl.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n            applyCouponUrl = $('#__jpApplyUrl');\r\n        }\r\n\r\n        applyCouponUrl.attr('value', checkoutUrl);\r\n\r\n        var clearCouponUrl = $('#__jpClearUrl');\r\n        var checkoutClearUrl = this.isCartPage() ? 'cart\/cart.jsp?_DARGS=\/cart\/gadgets\/promotion.jsp_AF&_dynSessConf=' + session + '&\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponSuccessURL=\/cart\/cart.jsp?step=&\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponErrorURL=\/cart\/cart.jsp?step=&\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon=true' : 'checkout\/checkout.jsp?step=2';\r\n\r\n        if (!clearCouponUrl.length) {\r\n            clearCouponUrl = document.createElement('input');\r\n            clearCouponUrl.id = '__jpClearUrl';\r\n            clearCouponUrl.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearCouponUrl);\r\n            clearCouponUrl = $('#__jpClearUrl');\r\n        }\r\n\r\n        clearCouponUrl.attr('value', checkoutClearUrl);\r\n\r\n        var resultCouponUrl = $('#__jpResultUrl');\r\n        var checkoutResultUrl = this.isCartPage() ? result : 'checkout\/checkout.jsp?step=2';\r\n\r\n        if (!resultCouponUrl.length) {\r\n            resultCouponUrl = document.createElement('input');\r\n            resultCouponUrl.id = '__jpResultUrl';\r\n            resultCouponUrl.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultCouponUrl);\r\n            resultCouponUrl = $('#__jpResultUrl');\r\n        }\r\n\r\n        resultCouponUrl.attr('value', checkoutResultUrl);\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\\\/cart\\.jsp\/gi.test(window.location.pathname);\r\n    },\r\n    prepare: function (action, code) {\r\n        var data = {};\r\n        var session = $('input[name=\"_dynSessConf\"]').val();\r\n\r\n        if (this.isCartPage()) {\r\n            if (action === 'applyCouponUrl') {\r\n                data = {\r\n                    _dyncharset: 'UTF-8',\r\n                    _dynSessConf: session,\r\n                    '\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponSuccessURL': '\/cart\/cart.jsp?step=',\r\n                    '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponSuccessURL': '',\r\n                    '\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponErrorURL': '\/cart\/cart.jsp?step=',\r\n                    '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponErrorURL': '',\r\n                    '\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': code,\r\n                    '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': '',\r\n                    '\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': 'submit',\r\n                    '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': '',\r\n                    _DARGS: '\/cart\/gadgets\/promotion.jsp'\r\n                };\r\n            } else if (action === 'clearCouponUrl') {\r\n                data = {\r\n                    _DARGS: '\/cart\/gadgets\/promotion.jsp_AF',\r\n                    _dynSessConf: session,\r\n                    '\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponSuccessURL': '\/cart\/cart.jsp?step=',\r\n                    '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': '',\r\n                    '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponSuccessURL': '',\r\n                    '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponErrorURL': '',\r\n                    '\/atg\/store\/order\/purchase\/CouponFormHandler.applyCouponErrorURL': '\/cart\/cart.jsp?step=',\r\n                    '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': '',\r\n                    '\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': '',\r\n                    '\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': true\r\n                };\r\n            }\r\n        } else if (action === 'applyCouponUrl' || action === 'resultUrl') {\r\n            data = {\r\n                _dyncharset: 'UTF-8',\r\n                _dynSessConf: session,\r\n                '\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': code,\r\n                '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': '',\r\n                '\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': 'submit',\r\n                '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': '',\r\n                _DARGS: '\/checkout\/gadgets\/checkoutStep2.jsp.1'\r\n            };\r\n        } else if (action === 'clearCouponUrl') {\r\n            data = {\r\n                _dyncharset: 'UTF-8',\r\n                _dynSessConf: session,\r\n                '\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': '',\r\n                '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.couponCode': '',\r\n                '\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': 'submit',\r\n                '_D:\/atg\/store\/order\/purchase\/CouponFormHandler.claimCoupon': '',\r\n                _DARGS: '\/checkout\/gadgets\/checkoutStep2.jsp.1'\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"shoemetro": "var ExternalProvider = {\r\n\tprepare: function(type, code){\r\n\t\tfunction serializeObject(a) {\r\n\t\t\tvar o = {};\r\n\t\t\t$.each(a, function() {\r\n\t\t\t\to[this.name] = this.value || '';\r\n\t\t\t});\r\n\t\t\treturn o;\r\n\t\t}\r\n\r\n\t\tvar formDataArray = $('#aspnetForm').serializeArray();\r\n\r\n\t\tvar data = serializeObject(formDataArray);\r\n\t\tdata['ctl00$PageContent$CouponCode'] = code;\r\n\r\n\t\t\/\/ If data needs to be prepared\r\n\t\tif(type == 'applyCouponUrl'){\r\n\t\t\tdata['ctl00$PageContent$btnUpdateCart3'] = 'Apply';\r\n\t\t} else {\r\n\t\t\tdata['ctl00$PageContent$btnRemoveCoupon'] = 'Delete';\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t},\r\n\tparse: function(response, status, $xhr, code){\r\n\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\r\n\t\tvar $savings = $('#ctl00_PageContent_ctrlCartSummary_lblDiscount', responseHTML);\r\n\r\n\t\t\/\/ If the element containing the savings value exists\r\n\t\tif($savings.length){\r\n\t\t\tvar savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: parseFloat(savings)\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t}\r\n\t}\r\n};",
	"shoepalace": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response.summary);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"shoepalace.mobile": "var ExternalProvider = {\r\n    parse: function(response,status,$xhr,code){\r\n        if(response.success&&(!response.error)){\r\n            var oldPrice = $('.grand-total > .value > .price').html().replace(\/[^0-9|\\.]\/g,'')\r\n            var jqObj = $.parseHTML(response.summary)\r\n            var newPrice = $('.grand-total > .value > .price',jqObj).html().replace(\/[^0-9|\\.]\/g,'')\r\n            var discount = parseFloat(oldPrice) - parseFloat(newPrice);\r\n            return{\r\n                success:true,\r\n                savings:discount\r\n            }\r\n            \r\n\r\n        }\r\n        return{\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode,bestSavings){\r\n        location.reload();\r\n    }\r\n}",
	"shoes": "var getCookie = function (sKey) {\r\n    if (!sKey) { return null; }\r\n    return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(\/[\\-\\.\\+\\*]\/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\r\n};\r\n\r\nvar userCookie = getCookie('user').replace(\/\\|.*$\/, '');\r\nvar pigInput = $('<input id=\"piggy-usx\" value=\"' + userCookie + '\">');\r\n$('body').append(pigInput);\r\n\r\nvar ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.orderSummary.order.summary.promotionApplied.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"shoesforcrews": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"shop": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n\r\n      $('#coupon-code').val(code);\r\n      $('#coupon-code').get(0).dispatchEvent(changeEvent);\r\n      $('#apply-coupon')[0].click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.js-coupon-remove').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 3000);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('.amount.discount.right').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon-code').val(bestCode);\r\n      $('#apply-coupon')[0].click();\r\n    }\r\n  }\r\n};",
	"shopakira": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('.discount-form a').eq(0).click();\r\n        }\r\n    }\r\n\r\n};",
	"shop-apotheke": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.promotion-entry-row .total-entry-price:contains(\"-\")', responseHTML).text().replace(\/,\/g, '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"shopblowltd": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.product__description .reduction-code__text', responseHTML).text().split('(')[1].replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"shopbop": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var subTotalOld = $('#subTotal .togglable .toggleOff').text().replace(\/[^0-9.]\/g, '');\r\n        var subTotalNew = $('#subTotal .togglable .toggleOff', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        var savings = subTotalOld - subTotalNew;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestSavings, bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"shopdisney": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: 'https:\/\/authorization.go.com\/token',\r\n            dataType: 'object',\r\n            data: { client_id: 'DSI-DISHOPWEB-PROD', grant_type: 'assertion', assertion_type: 'public' },\r\n            error: function (res) {\r\n                var jsonData = JSON.parse(res.responseText);\r\n                var token = $('#___jpToken');\r\n\r\n                if (!token.length) {\r\n                    token = document.createElement('input');\r\n                    token.id = '___jpToken';\r\n                    token.style.display = 'none';\r\n                    (document.body || document.head || document.documentElement).appendChild(token);\r\n                    token = $('#___jpToken');\r\n                }\r\n\r\n                token.attr('value', jsonData.token_type + ' ' + jsonData.access_token);\r\n\r\n                var access = $('#___jpaccess');\r\n\r\n                if (!access.length) {\r\n                    access = document.createElement('input');\r\n                    access.id = '___jpaccess';\r\n                    access.style.display = 'none';\r\n                    (document.body || document.head || document.documentElement).appendChild(access);\r\n                    access = $('#___jpaccess');\r\n                }\r\n\r\n                access.attr('value', jsonData.access_token);\r\n            }\r\n        });\r\n\r\n        var allCookies = localStorage.getItem('commerceContext');\r\n        var data = JSON.parse(allCookies);\r\n\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var commerceId = $('#___jpCommerceId');\r\n        var applyUrl = 'https:\/\/webvan-ip.disney.com\/api\/shopdisneyweb\/orders\/' + data.orderId + '\/promotions';\r\n        var resultUrl = 'https:\/\/webvan-ip.disney.com\/api\/shopdisneyweb\/orders\/' + data.orderId;\r\n        var commerceCode = data.commerceId;\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        if (!commerceId.length) {\r\n            commerceId = document.createElement('input');\r\n            commerceId.id = '___jpCommerceId';\r\n            commerceId.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(commerceId);\r\n            commerceId = $('#___jpCommerceId');\r\n        }\r\n\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        resultUrlInput.attr('value', resultUrl);\r\n        commerceId.attr('value', commerceCode);\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        var data;\r\n        var allCookies = localStorage.getItem('commerceContext');\r\n        var id = JSON.parse(allCookies);\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = '{\"orderPromotions\": [{\"orderId\": \"' + id.orderId + '\", \"promoCode\": \"' + code + '\"}]}';\r\n\r\n            return data;\r\n        }\r\n\r\n        return data;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var discountedSubtotal = parseFloat(response.orders[0].orderSummary.discountedSubtotal).toString().replace(\/[^0-9.]\/g, '');\r\n        var totalShippingDiscount = parseFloat(response.orders[0].orderSummary.totalShippingDiscount).toString().replace(\/[^0-9.]\/g, '');\r\n        var totalSavings = parseFloat(discountedSubtotal) + parseFloat(totalShippingDiscount);\r\n\r\n        return {\r\n            success: totalSavings > 0,\r\n            savings: isNaN(totalSavings) ? 0.00 : totalSavings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"shopgeox": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.totals.discount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"shopko": "var ExternalProvider = {\r\n    isCart: function () {\r\n        return $('#GRAND_ITEMS_TOTAL-value')[0] === undefined;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var discount = 0.00;\r\n        var shipping_discount = 0.00;\r\n        for (var i = response.totals.length - 1; i >= 0; i--) {\r\n            if (response.totals[i].label === 'Promotions:') {\r\n                discount = response.totals[i].value * -1\r\n            }\r\n            else if (response.totals[i].label === 'Shipping Discount:') {\r\n                shipping_discount = response.totals[i].value * -1\r\n            }\r\n        }\r\n        var savings = parseFloat(discount + shipping_discount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            $('#promoCode').val(bestCode);\r\n\r\n            if (this.isCart()) {\r\n                $('#promoCodeEntry > a')[0].click();\r\n            } else {\r\n                $('.formButton.apply.btn.btn-secondary.btn-apply-code.btn-apply-coupon')[0].click();\r\n            }\r\n\r\n            $('#promoCode').val('');\r\n        }\r\n    }\r\n};",
	"shopko.mobile": "var ExternalProvider = {\r\n    isCart: function () {\r\n        return $('#GRAND_ITEMS_TOTAL-value')[0] === undefined;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var origPrice = this.isCart() ? parseFloat($('.order-summary .label-value-container')[0].innerHTML.replace(\/[^0-9|.]\/g, '')) : parseFloat($('#GRAND_ITEMS_TOTAL-value').text().replace(\/[^0-9|.]\/g, ''));\r\n        var discountPrice = parseFloat(response.totals[0].value) === 0.00 ? origPrice : response.totals[0].value;\r\n\r\n        var savings = parseFloat(origPrice - discountPrice);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            $('#promoCode').val(bestCode);\r\n\r\n            if (this.isCart()) {\r\n                $('#promoCodeEntry > a')[0].click();\r\n            } else {\r\n                $('.formButton.apply.btn.btn-secondary.btn-apply-code.btn-apply-coupon')[0].click();\r\n            }\r\n\r\n            $('#promoCode').val('');\r\n        }\r\n    }\r\n};",
	"shoplc": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsText = $('li > span:contains(\"Discount\") ~ span', responseHTML).text();\r\n        var savings = parseFloat(savingsText.replace(this.nonPriceRegex, '').toString());\r\n        if(savings > 0){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        location.reload();\r\n    }\r\n};",
	"shopnicekicks": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().split('$')[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"shoppbs": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        var data = {};\r\n        var shoppingCart = JSON.parse(localStorage.getItem('shoppingCart'));\r\n        var items = [];\r\n        var ctr = 0;\r\n\r\n        for (ctr = 0; ctr < shoppingCart.items.length; ctr++) {\r\n            var item = {\r\n                availabilityDate: null,\r\n                catRefId: shoppingCart.items[ctr].catRefId,\r\n                commerceItemId: shoppingCart.items[ctr].commerceItemId,\r\n                commerceItemQuantity: shoppingCart.items[ctr].quantity,\r\n                detailedItemPriceInfo: shoppingCart.items[ctr].detailedItemPriceInfo,\r\n                discountInfo: [],\r\n                displayName: null,\r\n                expanded: false,\r\n                externalData: [],\r\n                giftWithPurchaseCommerceItemMarkers: [],\r\n                invalid: false,\r\n                orderableQuantityMessage: null,\r\n                productId: shoppingCart.items[ctr].productId,\r\n                quantity: shoppingCart.items[ctr].quantity,\r\n                rawTotalPrice: shoppingCart.items[ctr].rawTotalPrice,\r\n                selectedOptions: shoppingCart.items[ctr].selectedOptions,\r\n                selectedSkuProperties: [],\r\n                stockStatus: true\r\n            };\r\n\r\n            items.push(item);\r\n        }\r\n\r\n        data = {\r\n            catalogSourceCode: null,\r\n            combineLineItems: 'yes',\r\n            fraudData: null,\r\n            giftCertJSON: null,\r\n            giftMessage: null,\r\n            giftWrapJSON: null,\r\n            kitSkus: null,\r\n            orderKind: null,\r\n            orderSite: '[{ \"domain\": \"shop.pbs.org\"}]',\r\n            payments: [],\r\n            shoppingCart: {\r\n                items: items,\r\n                coupons: [\r\n                    {\r\n                        code: code,\r\n                        description: null,\r\n                        id: null,\r\n                        level: null,\r\n                        status: null\r\n                    }\r\n                ]\r\n            }\r\n        };\r\n\r\n        return JSON.stringify(data);\r\n    },\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('.total-line .price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = response.payments[0].amount;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var s = document.createElement('script');\r\n            var code = \"jQuery('input[aria-label=\\\"Enter Promo Code\\\"]').trigger('change');jQuery('button[data-bind=\\\"disabled: {condition: cart().items().length == 0 || isApplyCodeClicked, click: handleApplyCoupon}, inTabFlow: cart().items().length != 0\\\"]').click();\";\r\n\r\n            jQuery('input[aria-label=\"Enter Promo Code\"]').val(bestCode);\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n};",
	"shoppharmacie": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-entry-price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        $.ajax({\r\n            url: $('.promotion-entry-row .delete-entry-link', responseHTML).attr('href'),\r\n            type: 'GET',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"shopphilips": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsArray = $('.phi-cartstotal > div:eq(0) > div:eq(3)', responseHTML).html().split(\"<span\");\r\n        var savings = savingsArray && savingsArray.length > 0 ? parseFloat(savingsArray[0].replace('-', '').replace('$', '')) : 0.00;\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n\r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n\r\n        location.reload(true);\r\n\r\n    }\r\n\r\n};",
	"shoppingde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.panel--td.column--total-price.block.is--align-right:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"sVoucher\"]').val(bestCode);\r\n      $('.add-voucher--button.is--medium.btn.is--primary.is--center.block').click();\r\n    }\r\n  }\r\n};",
	"shopusacanoncom": "jQuery.fn.extend({\r\n    getSerializedArray: function () {\r\n        var data = {};\r\n        var formArray = $(this).serializeArray();\r\n\r\n        $.each(formArray, function () {\r\n            data[this.name] = this.value || '';\r\n        });\r\n\r\n        return data;\r\n    }\r\n});\r\n\r\nvar ExternalProvider = {\r\n    oldCartPrice: 0,\r\n    currentPath: '',\r\n    checkout: 'checkout',\r\n    cart: '',\r\n    prepare: function (requestType, code) {\r\n        if (requestType !== 'resultUrl') {\r\n            var formData = $('#PromotionCodeForm').getSerializedArray();\r\n\r\n            formData.taskType = (requestType === 'applyCouponUrl') ? 'A' : 'R';\r\n            formData.promoCode = code;\r\n            formData.requesttype = 'ajax';\r\n\r\n            return formData;\r\n        }\r\n\r\n        return null;\r\n    },\r\n    isDiscountPresent: function () {\r\n        return parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_4').text().replace(\/[^0-9|.]\/g, '')) || null;\r\n    },\r\n    isDiscountNotPresent: function () {\r\n        return parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13').text().replace(\/[^0-9|.]\/g, '')) || null;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var jqObj = $.parseHTML(response.responseText);\r\n        var oldPrice = 0.00;\r\n        var newPrice = 0.00;\r\n        var discount = 0.00;\r\n\r\n        if (this.isDiscountPresent()) {\r\n            oldPrice = this.isDiscountPresent();\r\n            newPrice = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_4', jqObj).text().replace(\/[^0-9|.]\/g, ''));\r\n            discount = oldPrice - newPrice;\r\n        } else {\r\n            oldPrice = this.isDiscountNotPresent();\r\n            newPrice = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13', jqObj).text().replace(\/[^0-9|.]\/g, ''));\r\n            discount = newPrice - oldPrice;\r\n        }\r\n\r\n        var savings = discount.toString().replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"shopusacanoncom.mobile": "jQuery.fn.extend({\r\n    getSerializedArray: function () {\r\n        var data = {};\r\n        var formArray = $(this).serializeArray();\r\n\r\n        $.each(formArray, function () {\r\n            data[this.name] = this.value || '';\r\n        });\r\n\r\n        return data;\r\n    }\r\n});\r\n\r\nvar ExternalProvider = {\r\n    oldCartPrice: 0,\r\n    currentPath: '',\r\n    checkout: 'checkout',\r\n    cart: '',\r\n    prepare: function (requestType, code) {\r\n        if (requestType !== 'resultUrl') {\r\n            var formData = $('#PromotionCodeForm').getSerializedArray();\r\n\r\n            formData.taskType = (requestType === 'applyCouponUrl') ? 'A' : 'R';\r\n            formData.promoCode = code;\r\n            formData.requesttype = 'ajax';\r\n\r\n            return formData;\r\n        }\r\n\r\n        return null;\r\n    },\r\n    isDiscountPresent: function () {\r\n        return parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_4').text().replace(\/[^0-9|.]\/g, '')) || null;\r\n    },\r\n    isDiscountNotPresent: function () {\r\n        return parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13').text().replace(\/[^0-9|.]\/g, '')) || null;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var jqObj = $.parseHTML(response.responseText);\r\n        var oldPrice = 0.00;\r\n        var newPrice = 0.00;\r\n        var discount = 0.00;\r\n\r\n        if (this.isDiscountPresent()) {\r\n            oldPrice = this.isDiscountPresent();\r\n            newPrice = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_4', jqObj).text().replace(\/[^0-9|.]\/g, ''));\r\n            discount = oldPrice - newPrice;\r\n        } else {\r\n            oldPrice = this.isDiscountNotPresent();\r\n            newPrice = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13', jqObj).text().replace(\/[^0-9|.]\/g, ''));\r\n            discount = newPrice - oldPrice;\r\n        }\r\n\r\n        var savings = discount.toString().replace(\/[^0-9|.]\/g, '');\r\n\r\n        \/\/ console.log('LOG: ', discount.toString().replace(\/[^0-9|.]\/g, ''), discount > 0);\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"shopvida": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"shopworldkitchen": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n\r\n        function serializeObject(a) {\r\n            var o = {};\r\n            $.each(a, function() {\r\n                o[this.name] = this.value || '';\r\n            });\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('#cart-items-form').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n        data['dwfrm_cart_updateCart'] = 'dwfrm_cart_updateCart:dwfrm_cart_updateCart';\r\n        data['cartAction'] = 'add';\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data['dwfrm_cart_couponCode'] = code;\r\n            data['dwfrm_cart_addCoupon'] = 'dwfrm_cart_addCoupon';\r\n        } else {\r\n            data['dwfrm_cart_coupons_i0_deleteCoupon'] = 'Remove';\r\n            data['dwfrm_cart_couponCode'] = '';\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('[data-discountamount]', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n};",
	"shopwss": "var ExternalProvider = {\r\n  parse: function (response, status, $xhr, code) {\r\n    var savings = parseFloat($('.c-minibasket-list__value.-promotion', $.parseHTML(response)).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n      return {\r\n        success: savings > 0,\r\n        savings: Number.isNaN(savings) ? 0.00 : savings        \r\n      };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"showroomprive": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.Cart.totalDiscount;\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.showroomprive.com\/MonPanier\/Ajax\/GetCart.aspx?action=promo_delete&oid=' + response.Cart.promos[0].id,\r\n            type: 'POST',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"shutterfly": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var totalDiscount = parseFloat($('.ft-summary-discounts .table-cell-currency').text().replace(\/[^0-9|\\.]\/g, ''))\r\n        var savings = 0.00\r\n        var totalSavings = parseFloat($('.table-savings.sale .table-cell-currency').text().replace(\/[^0-9|\\.]\/g, ''))\r\n\r\n        if (totalDiscount > 0) {\r\n            savings = totalSavings\r\n        } else {\r\n            savings = parseFloat(response.cartSummary.savedTotal.replace(\/[^0-9|\\.]\/g, ''))\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"shutterstock": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar couponNode = $('.t-coupon', responseHTML);\r\n    \tif(couponNode.text().toLowerCase().indexOf(code.toLowerCase()) > -1) {\r\n    \t\tvar savings = parseFloat(couponNode.find('.price').text().replace(\/[^0-9|\\.]\/g, ''));\r\n    \t\tif(savings > 0){\r\n    \t\t\treturn {\r\n    \t\t\t\tsuccess: true,\r\n            \t\tsavings: savings\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n    \t$('input[name=coupon_code]').val(bestCode);\r\n    \t$('.js_checkout-discount [type=submit]').click();\r\n    }\r\n}",
	"shuuemurausa": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'injectCoupon') {\r\n            if (this.isCartPage()) {\r\n                $('#dwfrm_cart_couponCode').val(code);\r\n                $('#add-coupon').click();\r\n            }\r\n\r\n            $('#dwfrm_couponcode_couponCode').val(code);\r\n            $('.c-cart__promo-button').click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 100);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order_discount td:eq(1)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    }\r\n};",
	"sierratradingpost": "var ExternalProvider = {\r\n    prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var cartApplyUrl = 'https:\/\/www.sierratradingpost.com\/cart\/applykeycode\/';\r\n        var checkoutApplyUrl = 'https:\/\/www.sierratradingpost.com\/checkout\/updateorderkeycode\/';\r\n        var applyUrl = this.isCartPage() ? cartApplyUrl : checkoutApplyUrl;\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl' && this.isCartPage()) {\r\n            data = {\r\n                KeyCode: code\r\n            };\r\n\r\n            return data;\r\n        } else if (type === 'applyCouponUrl' && !this.isCartPage()) {\r\n            data = {\r\n                'KeycodeModel.ReturnAction': 'Shipping',\r\n                'KeycodeModel.X.C': '',\r\n                'KeycodeModel.X.S.M': '',\r\n                'KeycodeModel.X.S.SecurityCode': '',\r\n                'KeycodeModel.X.S.IsRsaEncrypted': '',\r\n                'KeycodeModel.X.S.EncryptionKeyId': '',\r\n                'KeycodeModel.X.S.ApplyingForCobrandedCard': '',\r\n                'KeycodeModel.X.S.IsTjxRewardsCard': '',\r\n                'KeycodeModel.Keycode': code\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var savings = 0;\r\n        var responseHTML;\r\n\r\n        if (this.isCartPage()) {\r\n            responseHTML = $.parseHTML(response);\r\n\r\n            var cartOldTotal = parseFloat($('#orderTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n            var cartNewTotal = parseFloat($('#orderTotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n            savings = parseFloat(cartOldTotal - cartNewTotal);\r\n        } else if (!this.isCartPage()) {\r\n            responseHTML = $.parseHTML(response);\r\n\r\n            var checkoutOldTotal = parseFloat($('#orderTotalFormatted').text().replace(\/[^0-9|.]\/g, ''));\r\n            var checkoutNewTotal = parseFloat($('#orderTotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n            savings = parseFloat(checkoutOldTotal - checkoutNewTotal);\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('#keycodeInput').val(bestCode);\r\n                $('#applyKeycode').click();\r\n            } else {\r\n                $('#keycodeTextInput').val(bestCode);\r\n                $('#applyKeyCodeBtn').click();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider.prepareUrl();",
	"sierratradingpost.mobile": "var ExternalProvider = {\r\n    basketTotal: 0.00,\r\n\r\n    init: function() {\r\n        this.basketTotal = this.parseAmount($('#orderTotal').text());\r\n    },\r\n\r\n\tparseAmount: function(text) {\r\n\t\treturn parseFloat(text.replace(\/[^0-9|\\.]\/g, ''));\r\n\t},\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = this.basketTotal;\r\n        var newTotal = this.parseAmount($('#orderTotal', responseHTML).text());\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n        else{\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n    },\r\n    complete: function(bestCode){\r\n\t\tif(bestCode) {\r\n\t\t\t$.post('https:\/\/www.sierratradingpost.com\/ajax\/updatecartinfo', {}, function() {\r\n\t\t\t\twindow.location.reload(true);\r\n\t\t\t})\r\n\t\t}\r\n    }\r\n};",
	"sigmabeauty": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match(\/base_discount_amount\":-([0-9|.]+),\/)[1]);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"silentnight": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match('discount_amount(.*)base_discount_amount')[0].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"silkn": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n    \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"silvercuisine": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"silverfernbrand": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code__text', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ?0.00: savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"silverjeans": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.order-subtotal > .value.top').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newotal = parseFloat($('.order-subtotal:contains(\"Total Before Tax\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode && $('#dwfrm_cart_couponCode').length) {\r\n      $('#dwfrm_cart_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n    } else if (bestCode) {\r\n      $('#dwfrm_billing_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n    }\r\n  }\r\n}",
	"silverrushstyle": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#orderTotal table tbody tr td:nth-child(2)', responseHTML).text().match(\/\\((.*)\\)\/)[1].replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"simbamatelas": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"simplemobile": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.discount-amount.column', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"simplilearn": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = (response.data.general.coupon_amount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n      };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"simplyarganoilshop": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var currencyFormat = currency;\r\n        var locale = localeMapping.US;\r\n        var selector = $('#ekmps-currency').val();\r\n\r\n        if (selector.match(\"GBP\")) {\r\n            currencyFormat = 'GBP';\r\n            locale = localeMapping.GB;\r\n        } else if (selector.match(\"EUR\")) {\r\n            currencyFormat = 'EUR';\r\n            locale = localeMapping.DE;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: currencyFormat, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.ekmpscart-total-discounts', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"couponcode\"]').val(bestCode);\r\n            $('.ekmpscart-button').click();\r\n        }\r\n    }\r\n};",
	"simplybe": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.quantity-total:contains(\"- \u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"simplybeach": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.total-line__price.payment-due').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.total-line__price.payment-due', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(response) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"simplybeus": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n        var selector = location.pathname;\r\n\r\n        if (selector.match('-de\/') || selector.match('-fr\/')) {\r\n            locale = selector.match('-de\/') ? localeMapping.DE : localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        }\r\n        \r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.totalDiscounts.value;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"simplycook": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.discount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#show_voucher').click();\r\n            $('input[name=\"voucher\"]').val(bestCode);\r\n            $('.main_button').click();\r\n        }\r\n    }\r\n};",
	"simplysupplements": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(',','.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"simplytoimpress": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    oldTotal: 0,\r\n    init: function(){\r\n        this.oldTotal = this.getTotal();\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        if(type === \"applyCouponUrl\") {\r\n            var form = $('form[name=\"frm\"]').clone();\r\n            form.find('input[name=\"action\"]').val('set_discount');\r\n            this.addHiddenValue(form, 'value', code);\r\n            this.addHiddenValue(form, 'is_sample_only', '');\r\n            this.addHiddenValue(form, 'is_sample_only', '');\r\n            this.addHiddenValue(form, 'force', false);\r\n            return form.serialize();\r\n        }else if(type === \"clearCouponUrl\") {\r\n            return {\r\n                action: 'removePC',\r\n                value: '',\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code){\r\n        var newTotal = this.getTotal($.parseHTML(response));\r\n        var savings = this.oldTotal - newTotal;\r\n        if(savings > 0){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        location.reload(true)\r\n    },\r\n\r\n    getTotal: function(responseHTML){\r\n        if($('#total_dollar_amt').length > 0) {\r\n            var totalNode = $('#total_dollar_amt', responseHTML);\r\n            var toBeParsed = totalNode.text().replace(this.nonPriceRegex, '').toString();\r\n            return parseFloat(toBeParsed);\r\n        } else {\r\n            var totalNodeLabel = $('td.totals > strong:contains(\"Total\")', responseHTML);\r\n            var totalNode = totalNodeLabel.parent().next().children(\"strong\");\r\n            var toBeParsed = totalNode.text().replace(this.nonPriceRegex, '').toString();\r\n            return parseFloat(toBeParsed);\r\n        }\r\n    },\r\n\r\n    addHiddenValue: function(form, name, value){\r\n        $('<input>').attr({\r\n            type: 'hidden',\r\n            name: name,\r\n            value: value\r\n        }).appendTo(form);\r\n    }\r\n};",
	"singer22": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('#total_card_checkout')[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('#total_card_checkout', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n        var savings = parseFloat(oldPrice - newPrice);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"six02": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'injectCoupon') {\r\n            $('.c-checkout-promo-code .c-toggle .Link').click();\r\n            $('#input_voucherId').focus();\r\n            $('#input_voucherId').val(code);\r\n\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#input_voucherId').get(0).dispatchEvent(changeEvent);\r\n\r\n            $('.c-btn.c-btn--primary').click();\r\n        } else {\r\n            if ($('.c-order-summary-voucher').length === 0) {\r\n                return false;\r\n            }\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('.c-order-summary-voucher .Link.remove').get(0).dispatchEvent(clickEvent);\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 20) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 300);\r\n    },\r\n    parse: function () {\r\n        var savings = $('.c-order-summary .def-group .value:contains(\"-$\")').text().replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.c-checkout-promo-code .c-toggle .Link').click();\r\n            $('#input_voucherId').focus();\r\n            $('#input_voucherId').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#input_voucherId').get(0).dispatchEvent(changeEvent);\r\n\r\n            $('.c-btn.c-btn--primary').click();\r\n        }\r\n    }\r\n};",
	"six02-mobile": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action !== 'injectCoupon') return false;\r\n\r\n        if ($('#estimator_sourcecode').length) {\r\n            $('#estimator_sourcecode').val(code);\r\n\r\n            var clickEvent = document.createEvent('MouseEvents');\r\n\r\n            clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\r\n            $('#cartestimator_form a').get(0).dispatchEvent(clickEvent);\r\n        } else {\r\n            $('#CPCOrSourceCode').val(code);\r\n            $('#applyPromo').click();\r\n        }\r\n    },\r\n\r\n    whenReady: function (step, next) {\r\n        var codeApplyTime;\r\n        var counter = 0;\r\n\r\n        if ($('#estimator_sourcecode').length) {\r\n            codeApplyTime = setInterval(function () {\r\n                counter += 1;\r\n\r\n                if ($('#cartestimator_form a:visible').length || counter > 200) {\r\n                    clearInterval(codeApplyTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        } else {\r\n            codeApplyTime = setInterval(function () {\r\n                counter += 1;\r\n\r\n                if ($('#inventoryCheck_loading:visible').length === 0 || counter > 200) {\r\n                    clearInterval(codeApplyTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        }\r\n    },\r\n\r\n    parse: function (response) {\r\n        var savings;\r\n\r\n        if ($('#estimator_sourcecode').length) {\r\n            savings = parseFloat($('#estimated_savings .block-b').text().replace('$', ''));\r\n        } else {\r\n            savings = parseFloat($('#reviewPaneDiscountTotal').text().replace(\/[$-]\/g, ''));\r\n        }\r\n\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    }\r\n};",
	"sixpackbags": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"Checkout\", Shopify.Checkout.token);';\r\n    scriptContent += 'body.setAttribute(\"shopId\", __st.a);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var checkout = $('body').attr('Checkout');\r\n    var shopId = $('body').attr('shopId');\r\n    var applyUrlInput = $('#___jpApplyUrl');\r\n    var applyUrl = 'https:\/\/www.sixpackbags.com\/' + shopId + '\/checkouts\/' + checkout + '';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpApplyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total-line__price:eq(1) ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.field__input-btn.btn').removeAttr('disabled');\r\n      $('.field__input-btn.btn').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"skarlettblue": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var selector = '#shopping-cart-totals-table .price:last';\r\n        var oldPrice = parseFloat($(selector).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newPrice = parseFloat($(selector, responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n}",
	"skatehut": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"currency\", CURRENCY.code);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var locale = localeMapping.US;\r\n        var currencyFormat = currency;\r\n        var cc = $('body').attr('currency');\r\n\r\n        $('body').removeAttr('currency');\r\n\r\n        if (cc === 'GBP') {\r\n            locale = localeMapping.GB;\r\n            currencyFormat = 'GBP';\r\n        } else if (cc === 'EUR') {\r\n            locale = localeMapping.DE;\r\n            currencyFormat = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: currencyFormat, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat(jQuery('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#code').val(bestCode);\r\n            $('#basket-discount-submit').click();\r\n        }\r\n    }\r\n};",
	"skechers": "var ExternalProvider = {\r\n    timeout: null,\r\n    \r\n    whenReady: function(action, callback) {\r\n        if(action == 'injectCoupon') {\r\n            \r\n            var evt = document.createEvent(\"HTMLEvents\");\r\n            evt.initEvent(\"change\", true, true);\r\n            $(\"input[name='promogiftcard']\").get(0).dispatchEvent(evt);\r\n            return this.checkRequestSuccess(callback);\r\n        } else if (action == 'removeInjectedCoupon') {\r\n\r\n            var btnRemove = $('.js-remove-promo:eq(0)');\r\n            if (btnRemove.length) {\r\n                var evt = document.createEvent(\"HTMLEvents\");\r\n                evt.initEvent(\"click\", true, true);\r\n                btnRemove.get(0).dispatchEvent(evt);\r\n            }\r\n        }\r\n        \r\n        callback();\r\n    },\r\n    \r\n    checkRequestSuccess: function(_callback) {\r\n        if(!$(\"#promo-giftcard-message\").is(\":empty\")) {\r\n            _callback();\r\n        } else {\r\n            this.timeout = setTimeout(ExternalProvider.checkRequestSuccess, 100, _callback);\r\n        }\r\n    },\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        if(!$(\"#promo-giftcard-message .alert-success\").length) {\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n        \r\n        var firstDiscount = $('#js-applied-discounts-wrapper li:first-child'),\r\n            textDiscount = firstDiscount.text(),\r\n            extract = \/\\$([0-9|\\.]+)\/g.exec(textDiscount);\r\n        \r\n        if((new RegExp(code, 'gim')).test(textDiscount) || extract.length != 2) {\r\n            \r\n            return {\r\n                success: true,\r\n                savings: Number(extract[1])\r\n            }\r\n        } else {\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n\r\n        if(bestCode) {\r\n\r\n\t\t\tvar evt = document.createEvent(\"HTMLEvents\");\r\n\t\t\tevt.initEvent(\"change\", true, true);\r\n\t\t\t$(\"input[name='promogiftcard']\").get(0).dispatchEvent(evt);\r\n        }\r\n    }\r\n};",
	"skincarerx": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.responsiveBasket_bodyItem.responsiveBasket_totalSavingsPrice', responseHTML).html().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#discountcode').val(bestCode);\r\n      $('#add-discount-code').click();\r\n    }\r\n  }\r\n};",
	"skinnydiplondon": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"skinstore": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var selector = $(\".responsiveBasket_totalValue\").text().replace(\/[0-9.,]\/g, '').trim();\r\n        var locale = '';\r\n        switch (selector) {\r\n            case '\u20ac':\r\n                locale = localeMapping['FR'];\r\n                currency = \"EUR\";\r\n                break;\r\n            case '$':\r\n                locale = localeMapping['US'];\r\n                currency = \"USD\";\r\n                break;\r\n            case String.fromCharCode('163'):\r\n                locale = localeMapping['GB'];\r\n                currency = \"GBP\";\r\n                break;\r\n            default:\r\n                locale = localeMapping['DE'];\r\n                currency = \"EUR\";\r\n                break;\r\n        }\r\n\r\n        var storeCurrency = amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n\r\n        return storeCurrency;\r\n    },\r\n    parse: function (response) {\r\n        var savings = 0;\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        if ($('a[title=\"remove this offer\"]', responseHTML).length !== 0) {\r\n            savings = parseFloat($('.responsiveBasket_bodyItem.responsiveBasket_totalSavingsPrice', responseHTML).first().text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"skinstore.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.responsiveBasket_discountValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"skis": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var total = parseFloat($('.ordertotal:last .value span').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('.ordertotal:last .value span', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var savings = total - newTotal;\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            \/\/ location.reload();\r\n            $(\"[name=dwfrm_cart_couponCode]\").val(bestCode);\r\n            $(\"[name=dwfrm_cart_addCoupon]\").click();\r\n        }\r\n    }\r\n};",
	"skylum": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('#order-coupons').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#order-coupons').trigger('input').trigger('change');\r\n      $('div.panel-footer > div > div:nth-child(2) > button').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.dc-icon.dc-icon-cross-circle ').click();\r\n      $('#order-coupons').val('');\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200, waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$(\".cls_loadingMask\").length;\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 500);\r\n          }\r\n          waited++;\r\n        }, 10);\r\n      }, 50);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('span.price.text-success.total-price.ng-binding').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#order-coupons').val(bestCode);\r\n      $('div.panel-footer > div > div:nth-child(2) > button').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"slaters": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('#shopping-cart-totals-table > tfoot > tr > td:nth-child(2) > strong > span').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.price', responseHTML).eq(4).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply Coupon\"]').click();\r\n        }\r\n    }\r\n};",
	"sleefs": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis[data-checkout-discount-amount-target]', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"sleepingbaby": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sleepys": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    prepare: function (type, code) {\r\n        var form = $('#cart-items-form').clone();\r\n\r\n        if(type === 'applyCouponUrl'){\r\n            form.find('input[name=\"dwfrm_cart_couponCode\"]').val(code);\r\n            this.addHiddenValue(form, 'dwfrm_cart_addCoupon', 'dwfrm_cart_addCoupon');\r\n            return form.serialize();\r\n        } else if(type === 'clearCouponUrl') {\r\n            this.addHiddenValue(form, 'dwfrm_cart_coupons_i0_deleteCoupon', 'Remove');\r\n            return form.serialize();\r\n        }\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsText = $('tr.order-discount.discount > td:contains(\"- $\")', responseHTML).text();\r\n        var savings = parseFloat(savingsText.replace(this.nonPriceRegex, '').toString());\r\n        if(savings > 0){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving) {\r\n        location.reload(true);\r\n    },\r\n\r\n    addHiddenValue: function (form, name, value) {\r\n        $('<input>').attr({\r\n            type: 'hidden',\r\n            name: name,\r\n            value: value\r\n        }).appendTo(form);\r\n    }\r\n};",
	"slimmingsolutions": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('#coupon_code').val(bestCode);\r\n                $('button[title=\"Apply Voucher\"]').click();\r\n            }\r\n            else {\r\n                $('#iwd_opc_discount_input').val(bestCode);\r\n                $('#iwd_opc_apply_discount_button').click();\r\n            }\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    },\r\n};",
	"smartandsexy": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('.button:contains(\"Apply\")').eq(0).click();\r\n    }\r\n  }\r\n};",
	"smartbuyglasses": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        if (response.orderInfo_new && response.orderInfo_new.discountAmount) {\r\n            var savings = parseFloat(response.orderInfo_new.discountAmount.replace('$', ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings)\r\n    {\r\n        location.reload(true);\r\n    }\r\n\r\n};",
	"smartbuyglasses.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        if (response.orderInfo && response.orderInfo.discount_amount) {\r\n            var savings = parseFloat(response.orderInfo.discount_amount.replace('$', ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings)\r\n    {\r\n        $piggyJq('.shopping__cart__input').val(bestCode)\r\n        $piggyJq('.shopping__cart__btn').click()\r\n    }\r\n\r\n};",
	"smartbuyglassesde": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.orderInfo_new.discountAmount.replace('\u20ac', '').replace(',', '') \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"smartbuyglassesuk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.orderInfo.discount_amount.replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"smartfares": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.trans-info-grey:contains(\"(\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#ctl00_ctl00_bph_c1_PageControlID52702_PromoCode').val(bestCode);\r\n            $('#ctl00_ctl00_bph_c1_PageControlID52702_PromoCodeButton').click();\r\n        }\r\n    }\r\n};",
	"smarthome": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.summary);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code, #id_couponcode').val(bestCode);\r\n      $('button[value=\"Apply Coupon\"], #onestepcheckout-coupon-add').click();\r\n    }\r\n  }\r\n};",
	"smashbox": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n      $('#form--offer_code--field--OFFER_CODE').val(code);\r\n      $('#form--offer_code--field--OFFER_CODE').get(0).dispatchEvent(changeEvent);\r\n      $('.button.form-submit.js-offer-code-apply').click();\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('#form--offer_code--field--OFFER_CODE').val(\" \");\r\n      $('.button.form-submit.js-offer-code-apply').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1500);\r\n          }\r\n\r\n          waited++;\r\n        }, 80);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($(\".discount.value\").text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#form--offer_code--field--OFFER_CODE').val(bestCode);\r\n      $('.button.form-submit.js-offer-code-apply').click();\r\n    }\r\n  }\r\n};",
	"smiggle": "var ExternalProvider = {\r\n  __init: function () {\r\n    this.getRequestData();\r\n  },\r\n  getRequestData: function () {\r\n    this.createScript();\r\n    let requestData = JSON.parse($('#requestData').val());\r\n    this.authToken = $('input[name=\"authToken\"]').val();\r\n    this.orderId = $('input[name=\"currentOrderId\"]').val();\r\n    this.storeId = requestData.storeId;\r\n    this.catalogId = requestData.catalogId;\r\n  },\r\n  createScript: function () {\r\n    const script = document.createElement('script');\r\n    let scriptContent = `\r\n      var createInput = ${this.createInput.toString()};\r\n      createInput('requestData', JSON.stringify({\r\n        catalogId: WCParamJS.catalogId,\r\n        storeId: WCParamJS.storeId\r\n      }));\r\n    `;\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n    $('#tmpScript').remove();\r\n  },\r\n  prepare: function (step, code) {\r\n    switch (step) {\r\n      case 'applyCouponUrl':\r\n        return {\r\n          taskType: 'A',\r\n          promoCode: code,\r\n          storeId: this.storeId,\r\n          catalogId: this.catalogId,\r\n          langId: -1,\r\n          orderId: this.orderId,\r\n          authToken: this.authToken,\r\n          requesttype: 'ajax'\r\n        }\r\n      case 'resultUrl':\r\n        return {\r\n          catalogId: this.catalogId,\r\n          langId: -1,\r\n          storeId: this.storeId,\r\n          instart_disable_injection: true\r\n        }\r\n      case 'clearCouponUrl':\r\n        return {\r\n          taskType: 'R',\r\n          promoCode: code,\r\n          storeId: this.storeId,\r\n          catalogId: this.catalogId,\r\n          langId: -1,\r\n          orderId: this.orderId,\r\n          authToken: this.authToken,\r\n          requesttype: 'ajax'\r\n        }\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    const htmlContainer = $('<div><\/div>');\r\n    const responseHTML = htmlContainer.html(response);\r\n    let oldTotal = parseFloat($('.bag-checkout__total.bag-checkout__total--order').text().replace(\/[^0-9.]\/g, ''));    \r\n    let newTotal = parseFloat($('.bag-header-mobile__total-price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    let savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCode').val(bestCode);\r\n      $('#applyPromoCode').click();\r\n    }\r\n  },\r\n  createInput: function (id, value) {\r\n    if (document.getElementById(id) === null) {\r\n      let createdInput = document.createElement(\"input\");\r\n      createdInput.id = id;\r\n      createdInput.setAttribute('type', 'hidden');\r\n      createdInput.setAttribute('value', value);\r\n      (document.body || document.head || document.documentElement).appendChild(createdInput);\r\n    } else {\r\n      document.getElementById(id).value = value;\r\n    }\r\n  }\r\n};\r\nExternalProvider.__init();",
	"smithsonianstore": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.ml-basket-column.ml-basket-total-value.ml-discount-value', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"smkw": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('div:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestcode) {\r\n        if (bestcode) location.reload();\r\n    }\r\n};",
	"snagajob": "\/\/ Helper functions borrowed\r\n\/\/ from jwuery.simulate.js\r\n\/\/ https:\/\/github.com\/jquery\/jquery-simulate\/blob\/master\/jquery.simulate.js\r\n\r\nvar createEvent = function (type, options) {\r\n    var event;\r\n\r\n    options = $.extend({\r\n        bubbles: true,\r\n        cancelable: true,\r\n        view: window,\r\n        ctrlKey: false,\r\n        altKey: false,\r\n        shiftKey: false,\r\n        metaKey: false,\r\n        keyCode: 0,\r\n        charCode: undefined\r\n    }, options);\r\n\r\n    if (document.createEvent) {\r\n        try {\r\n            event = document.createEvent('KeyEvents');\r\n            event.initKeyEvent(type, options.bubbles, options.cancelable, options.view,\r\n                options.ctrlKey, options.altKey, options.shiftKey, options.metaKey,\r\n                options.keyCode, options.charCode);\r\n            \/\/ initKeyEvent throws an exception in WebKit\r\n            \/\/ see: http:\/\/stackoverflow.com\/questions\/6406784\/initkeyevent-keypress-only-works-in-firefox-need-a-cross-browser-solution\r\n            \/\/ and also https:\/\/bugs.webkit.org\/show_bug.cgi?id=13368\r\n            \/\/ fall back to a generic event until we decide to implement initKeyboardEvent\r\n        } catch (err) {\r\n            event = document.createEvent('Events');\r\n            event.initEvent(type, options.bubbles, options.cancelable);\r\n            $.extend(event, {\r\n                view: options.view,\r\n                ctrlKey: options.ctrlKey,\r\n                altKey: options.altKey,\r\n                shiftKey: options.shiftKey,\r\n                metaKey: options.metaKey,\r\n                keyCode: options.keyCode,\r\n                charCode: options.charCode\r\n            });\r\n        }\r\n    } else if (document.createEventObject) {\r\n        event = document.createEventObject();\r\n        $.extend(event, options);\r\n    }\r\n\r\n    if (!!\/msie [\\w.]+\/.exec(navigator.userAgent.toLowerCase()) || (({}).toString.call(window.opera) === '[object Opera]')) {\r\n        event.keyCode = (options.charCode > 0) ? options.charCode : options.keyCode;\r\n        event.charCode = undefined;\r\n    }\r\n\r\n    return event;\r\n};\r\nvar dispatchEvent = function (elem, type, event) {\r\n    if (elem.dispatchEvent) {\r\n        elem.dispatchEvent(event);\r\n    } else if (type === 'click' && elem.click && elem.nodeName.toLowerCase() === 'input') {\r\n        elem.click();\r\n    } else if (elem.fireEvent) {\r\n        elem.fireEvent('on' + type, event);\r\n    }\r\n};\r\nvar simulateEvent = function (elem, type, options) {\r\n    var event = createEvent(type, options);\r\n\r\n    dispatchEvent(elem, type, event, options);\r\n};\r\n\r\nvar ExternalProvider = {\r\n    parse: function (response) {\r\n        if (response.price) {\r\n            var oldTotal = parseFloat($('.checkout-price.total-price-label').text().replace(\/[^0-9|.]\/g, ''));\r\n            var newTotal = parseFloat(response.price.replace(\/[^0-9|.]\/g, ''));\r\n            var savings = oldTotal - newTotal;\r\n\r\n            return {\r\n                success: savings > 0,\r\n                savings: isNaN(savings) ? 0.00 : savings\r\n            };\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout-promo-link')[0].click();\r\n            $('#checkout-promo-code').val(bestCode);\r\n            simulateEvent($('#checkout-promo-code')[0], 'change');\r\n        }\r\n    }\r\n};",
	"snapfish": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var data = {\r\n            promotionName: code,\r\n            order_id: $('#orders').val(),\r\n            entered_coupons: code\r\n        };\r\n        \r\n        $.ajax({\r\n            url: 'https:\/\/www.snapfish.co.uk\/cart\/updatecart',\r\n            mode: 'POST',\r\n            data: data,\r\n            success: function (result) {\r\n                savings = result.productDiscount.totalDiscount;\r\n            },\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_id').val(bestCode);\r\n            $('#apply_coupon_btn').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        }\r\n    }\r\n};",
	"snapfishde": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            return {\r\n                order_id: $('#orders').val(),\r\n                promotionName: code,\r\n                entered_coupons: code\r\n            };\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.productDiscount.totalDiscount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_id').val(bestCode);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#apply_coupon_btn').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"snarkytea": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sneakersnstuff": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.cart-summary__value:first').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.cart-summary__value:first', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkoutcode').val(bestCode);\r\n      $('.checkout-code-form-button-label')[0].click();\r\n    }\r\n  }\r\n};",
	"snipesde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat(response.items[0].priceTotal.nonAdjustedPrice.replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat(response.totals.grandTotal.replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"soccer": "var ExternalProvider = {\r\n\r\n    _prepareData: function () {\r\n\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"storeId\", JSON.parse($(\"#store-config-json\").text()).wcsConfig.storeId);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('storeId');\r\n\r\n        this.userId = value;\r\n        $('body').removeAttr(name);\r\n    },\r\n\r\n    parseAmount: function (string) {\r\n        return parseFloat(string.replace(\/[^0-9.]\/g, ''));\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var codeFound = response && response.promotionCode && response.promotionCode.find(function (v) {\r\n            return v.code.toLowerCase() === code.toLowerCase();\r\n        });\r\n\r\n        if (codeFound) {\r\n            var savings = this.parseAmount(response.totalAdjustment);\r\n\r\n            if (savings > 0) {\r\n\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider._prepareData();",
	"soccerbox": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match('discount_amount\":\"-(.*)base_discount_amount\":\"-')[0].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"society6": "var ExternalProvider = {\r\n   \r\n    parse: function (response, status, $xhr, code) {\r\n         var responseHTML = $.parseHTML(response);\r\n         var savings = parseFloat($('.amount.middle.cart-discount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n     \r\n         return {\r\n             success: savings > 0,\r\n             savings: isNaN(savings) ? 0.00 : savings\r\n         };\r\n    },\r\n    \r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n };",
	"soerde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.panel--td.column--total-price.block.is--align-right:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('.add-voucher--field.block').val(bestCode);\r\n      $('.add-voucher--button.btn.is--primary.is--small.block').click();\r\n    }\r\n  }\r\n};",
	"soffe": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-$\") ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"soliver": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isCartPage() ? $('.jsNoFormValidation').attr('action') : $('#dwfrm_cov2checkout').attr('action');\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    isCartPage: function () {\r\n        if (document.getElementById('dwfrm_cart_couponCode') === null) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n    prepare: function (action, code) {\r\n        if (['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n        var data = {};\r\n\r\n        if (this.isCartPage()) {\r\n            data = {\r\n                view: 'ajax',\r\n                dwfrm_cart_shipments_i0_items_i0_quantity: $('.ta_quantity').attr('size'),\r\n                dwfrm_cart_couponCode: code,\r\n                dwfrm_cart_addCoupon: 'Add'\r\n            };\r\n        } else {\r\n            data = {\r\n                view: 'ajax',\r\n                dwfrm_cov2checkout_billing_couponCode: code,\r\n                dwfrm_cov2checkout_billing_giftcardPrefix: $('#dwfrm_cov2checkout_billing_giftcardPrefix').attr('value'),\r\n                dwfrm_cov2checkout_billing_giftcardNumber_d0mmuokaldfj: '',\r\n                dwfrm_cov2checkout_billing_giftcardPIN_d0ctkdmvrovx: '',\r\n                dwfrm_cov2checkout_expresscheckout: true,\r\n                dwfrm_cov2checkout_billing_addcoupon: ''\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var total = this.isCartPage() ? '.ta_miniCart_totalPrice' : '.ta_orderSummaryAddedTotal';\r\n        var oldTotal = parseFloat($(total).eq(0).text().replace(\/[^0-9]\/g, ''));\r\n        var newTotal = parseFloat($(total, responseHTML).eq(0).text().replace(\/[^0-9]\/g, ''));\r\n        var savings = (oldTotal - newTotal) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                location.reload();\r\n            } else {\r\n                jQuery('#dwfrm_cov2checkout_billing_couponCode').val(bestCode);\r\n\r\n                var s = document.createElement('script');\r\n\r\n                s.type = 'text\/javascript';\r\n                s.id = 'apply';\r\n\r\n                var code = \"jQuery('#dwfrm_cov2checkout_billing_couponCode').trigger('change');jQuery('#dwfrm_cov2checkout_billing_addcoupon').click();\";\r\n\r\n                s.appendChild(document.createTextNode(code));\r\n                document.body.appendChild(s);\r\n                $('#apply').remove();\r\n            }\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"soludos": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"soma": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyCouponUrl = $('#__jpApplyUrl');\r\n        var Url = '\/store\/common\/json\/cart.jsp?_DARGS=\/store\/common\/checkout\/cart.jsp.couponForm';\r\n\r\n        if (!applyCouponUrl.length) {\r\n            applyCouponUrl = document.createElement('input');\r\n            applyCouponUrl.id = '__jpApplyUrl';\r\n            applyCouponUrl.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n            applyCouponUrl = $('#__jpApplyUrl');\r\n        }\r\n\r\n        applyCouponUrl.attr('value', Url);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        if (response && response.promoDiscounts) {\r\n            for (var i in response.promoDiscounts) {\r\n                var promo = response.promoDiscounts[i];\r\n\r\n                if (promo.couponId && promo.couponId.toLowerCase().indexOf(code.toLowerCase()) > -1) {\r\n                    return {\r\n                        success: true,\r\n                        savings: parseFloat(promo.discountAmount.replace(\/[^0-9|.]\/g, ''))\r\n                    };\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSaving) {\r\n        location.reload(true);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"sonicelectronix": "var ExternalProvider = {\r\n\r\n    queueName: '_cfq',\r\n\r\n\tretrieveWindowVariable: function(name, variable) {\r\n\r\n\t\tvar scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + \"); }\\n\";\r\n\t\tvar script = document.createElement('script');\r\n\t\tscript.id = 'tmpScript';\r\n\t\tscript.appendChild(document.createTextNode(scriptContent));\r\n\t\t(document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n\t\tvar value = $(\"body\").attr(\"tmp_\" + name);\r\n\t\t$(\"body\").removeAttr(\"tmp_\" + name, '');\r\n\r\n\t\treturn value;\r\n\t},\r\n\r\n    prepare: function (action, code) {\r\n\t\tif(['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n\t\tvar dataLayer = JSON.parse(this.retrieveWindowVariable('dataLayer', 'JSON.stringify(dataLayer)'));\r\n\t\tvar cartItems = dataLayer.find(function(v) {\r\n\t\t\treturn v.pageType === 'cart';\r\n\t\t});\r\n\t\tif(!cartItems) return false;\r\n\r\n\t\tvar items = [];\r\n\t\tcartItems.cartItems.forEach(function(v) {\r\n            if(v.category !== 'Extended Warranties') {\r\n                items.push(v);\r\n            } else {\r\n                items[items.length - 1].warranty = v;\r\n            }\r\n        });\r\n\r\n\t\tvar formData = {\r\n\t\t\taction: 'update',\r\n\t\t\tzip: $('#zip').val(),\r\n\t\t\tcoupons: code\r\n        };\r\n\r\n\t\tvar key = 'quantity[PRODUCT_ID]',\r\n            keyWarranty = 'extended_warranty[PRODUCT_ID]';\r\n\t\titems.forEach(function(v) {\r\n            formData[key.replace('PRODUCT_ID', v.id)] = v.quantity;\r\n            formData[keyWarranty.replace('PRODUCT_ID', v.id)] = v.warranty ? v.warranty.id : '';\r\n        });\r\n\r\n\t\treturn formData;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var $response = $.parseHTML(response),\r\n            couponRows = $('.cartContainer .coupon_row', $response),\r\n            codeFound = false,\r\n            savings = 0.00,\r\n            codeRemoveUrl = false,\r\n            $row;\r\n\r\n        couponRows.each(function() {\r\n\r\n            $row = $(this);\r\n            if($('.coupon_text', $row).text().toLowerCase().indexOf('coupon code: ' + code.toLowerCase()) !== -1) {\r\n\r\n                codeFound = true;\r\n                savings = parseFloat($('.price_discounted', $row).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        \/\/Find url for remove coupon code\r\n        if(codeFound) {\r\n\r\n            var couponWrapper = $('#textfield', $response).closest('tbody');\r\n            $('tr', couponWrapper).each(function() {\r\n                $row = $(this);\r\n                if($('td', $row).text().toLowerCase().indexOf(code.toLowerCase()) !== -1) {\r\n\t\t\t\t\tcodeRemoveUrl = $('a', $row).prop('href');\r\n                }\r\n            });\r\n\r\n            if(codeRemoveUrl) {\r\n                var queue = $(document).queue(this.queueName);\r\n                queue.unshift(function(next) {\r\n\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\turl: codeRemoveUrl,\r\n\t\t\t\t\t\tcache: false,\r\n\t\t\t\t\t\tdata: ExternalProvider.prepare('clearCouponUrl', ''),\r\n\t\t\t\t\t\tcontentType: 'application\/x-www-form-urlencoded',\r\n\t\t\t\t\t\tdataType: 'html',\r\n\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\tnext();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function() {\r\n\t\t\t\t\t\t\tnext();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n                });\r\n\r\n                $(document).queue(this.queueName, queue);\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"sonicelectronix.mobile": "var ExternalProvider = {\r\n\r\n    queueName: '_cfq',\r\n\r\n\tretrieveWindowVariable: function(name, variable) {\r\n\r\n\t\tvar scriptContent = \"if (typeof \" + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + \"); }\\n\";\r\n\t\tvar script = document.createElement('script');\r\n\t\tscript.id = 'tmpScript';\r\n\t\tscript.appendChild(document.createTextNode(scriptContent));\r\n\t\t(document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n\t\tvar value = $(\"body\").attr(\"tmp_\" + name);\r\n\t\t$(\"body\").removeAttr(\"tmp_\" + name, '');\r\n\r\n\t\treturn value;\r\n\t},\r\n\r\n    prepare: function (action, code) {\r\n\t\tif(['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n\t\tvar dataLayer = JSON.parse(this.retrieveWindowVariable('dataLayer', 'JSON.stringify(dataLayer)'));\r\n\t\tvar cartItems = dataLayer.find(function(v) {\r\n\t\t\treturn v.pageType === 'cart';\r\n\t\t});\r\n\t\tif(!cartItems) return false;\r\n\r\n\t\tvar items = [];\r\n\t\tcartItems.cartItems.forEach(function(v) {\r\n            if(v.category !== 'Extended Warranties') {\r\n                items.push(v);\r\n            } else {\r\n                items[items.length - 1].warranty = v;\r\n            }\r\n        });\r\n\r\n\t\tvar formData = {\r\n\t\t\taction: 'update',\r\n\t\t\tzip: $('#zip').val(),\r\n\t\t\tcoupons: code\r\n        };\r\n\r\n\t\tvar key = 'quantity[PRODUCT_ID]',\r\n            keyWarranty = 'extended_warranty[PRODUCT_ID]';\r\n\t\titems.forEach(function(v) {\r\n            formData[key.replace('PRODUCT_ID', v.id)] = v.quantity;\r\n            formData[keyWarranty.replace('PRODUCT_ID', v.id)] = v.warranty ? v.warranty.id : '';\r\n        });\r\n\r\n\t\treturn formData;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var $response = $.parseHTML(response),\r\n            itemRows = $('.cat-br-list li', $response),\r\n            codeFound = false,\r\n            savings = 0.00,\r\n            codeRemoveUrl = false,\r\n            $row, $couponText;\r\n\r\n        itemRows.each(function() {\r\n\r\n            $row = $(this);\r\n\t\t\t$couponText = $('.coupon_text', $row);\r\n            if($couponText.length && $couponText.text().toLowerCase().indexOf('coupon code: ' + code.toLowerCase()) !== -1) {\r\n\r\n                codeFound = true;\r\n                savings = parseFloat($('.ui-grid-b .ui-block-c .price', $row).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        \/\/Find url for remove coupon code\r\n        if(codeFound) {\r\n\r\n        \tvar promoApplied = $('.promo-applied', $response),\r\n\t\t\t\tcouponIdx = 0;\r\n        \tpromoApplied.get(0).childNodes.forEach(function(v) {\r\n\r\n\t\t\t\tif(v.nodeType === 3) { \/\/Text element\r\n\t\t\t\t\tif(v.data.toLowerCase().indexOf(code.toLowerCase()) !== -1) {\r\n\t\t\t\t\t\tcodeRemoveUrl = promoApplied.find('a').eq(couponIdx).prop('href');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcouponIdx++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n            if(codeRemoveUrl) {\r\n                var queue = $(document).queue(this.queueName);\r\n                queue.unshift(function(next) {\r\n\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\turl: codeRemoveUrl,\r\n\t\t\t\t\t\tcache: false,\r\n\t\t\t\t\t\tdata: ExternalProvider.prepare('clearCouponUrl', ''),\r\n\t\t\t\t\t\tcontentType: 'application\/x-www-form-urlencoded',\r\n\t\t\t\t\t\tdataType: 'html',\r\n\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\tnext();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function() {\r\n\t\t\t\t\t\t\tnext();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n                });\r\n\r\n                $(document).queue(this.queueName, queue);\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"sonos": "var ExternalProvider = {\r\n    initialTotal: 0,\r\n    getMoneyFromText: function (text) {\r\n        return parseFloat(text.replace(\/[^0-9|.]\/g, '')) || 0;\r\n    },\r\n    init: function () {\r\n        this.initialTotal = this.getMoneyFromText($('#secondary .order-value b').text());\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var discount = 0;\r\n\r\n        if (response.success) {\r\n            var newTotal = response.baskettotal;\r\n            discount = this.initialTotal - newTotal;\r\n        }\r\n\r\n        return {\r\n            success: discount > 0,\r\n            savings: isNaN(discount) ? 0.00 : discount\r\n        };\r\n\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"sorel": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount .value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"soufeel": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#shopping-cart-totals-table span:contains(\"-$\")', responseHTML)[0].innerHTML.replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sourcebmx": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"southbeachdiet": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.totals .price').text().replace('$', ''));\r\n        var newTotal = parseFloat($('.totals .price', responseHTML).text().replace('$', ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"southmoonunder": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('.cartTotalsLast .cartSubTotal.cartVal').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('.cartTotalsLast .cartSubTotal.cartVal', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"sowaswillichauch": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.responsiveBasket_discountValue:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#discountcode').val(bestCode);\r\n      $('#add-discount-code').click();\r\n    }\r\n  }\r\n};",
	"soyezbcbgfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.DIC_Value);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"spafinder": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var promoType = response.info.map.promoType;\r\n    var savings = 0;\r\n\r\n    if (promoType === 'PERCENT') {\r\n      var percentage = parseFloat(response.info.map.itemPriceValue) \/ 100;\r\n\r\n      savings = parseFloat($('.subTotalVal > .wrappedPriceValue').text().replace(\/[^0-9|.]\/g, '')) * percentage;\r\n    } else {\r\n      savings = parseFloat(response.info.map.itemPriceValue);\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('.pCodeAddBtn_js').click();\r\n      $('#promoCodeInput').val(bestCode);\r\n      $('#promoCodeInput').removeClass('ghostText');\r\n      $('.link.cart-promocode-save-btn.car-summary-item-actions-btn.pCodeSaveBtn_js')[0].click();\r\n    }\r\n  }\r\n};",
	"speckproducts": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var ApplyUrlInput = $('#cart-items-form');\r\n        var ApplyUrl = 'https:\/\/www.speckproducts.com\/on\/demandware.store\/Sites-speck-Site\/default\/Cart-AddCouponJson?';\r\n\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('form');\r\n            ApplyUrlInput.id = 'cart-items-form';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#cart-items-form');\r\n            ApplyUrlInput.attr('action', ApplyUrl);\r\n        }\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (this.isCheckoutPage()) {\r\n            if (type === 'applyCouponUrl') {\r\n                data = {\r\n                    couponCode: code,\r\n                    format: 'ajax'\r\n                };\r\n\r\n                return data;\r\n            }\r\n        } else if (type === 'applyCouponUrl') {\r\n            data = {\r\n                dwfrm_cart_shipments_i0_items_i0_quantity: $(\"input[name='dwfrm_cart_shipments_i0_items_i0_quantity']\").val(),\r\n                dwfrm_cart_couponCode: code,\r\n                dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon',\r\n                dwfrm_cart_updateCart: 'dwfrm_cart_updateCart'\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    isCheckoutPage: function () {\r\n        if (document.querySelector('#is-CREDIT_CARD') !== null) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount.discount:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#dwfrm_billing_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n\r\n            if (this.isCheckoutPage()) {\r\n                location.reload();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"speedousa": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = $('.order_total_figures').text().replace(\/[^0-9|.]\/g, '');\r\n        var newPrice = $('.order_total_figures', responseHTML).text().replace(\/[^0-9|.]\/g, '');\r\n        var discount = parseFloat(oldPrice) - parseFloat(newPrice);\r\n\r\n        this.orderId = $('#currentOrderId', responseHTML).val();\r\n\r\n        if (discount) {\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        \/\/ need to make an additional ajax request apart from resultURL to save the coupon in session\r\n        var params = {};\r\n\r\n        params.storeId = $('#PromotionCodeForm input[name=\"storeId\"]').val();\r\n        params.catalogId = $('#PromotionCodeForm input[name=\"catalogId\"]').val();\r\n        params.langId = $('#PromotionCodeForm input[name=\"langId\"]').val();\r\n        params.orderItemId = '';\r\n        params.orderId = this.orderId;\r\n        params.calculationUsage = '-1,-2,-5,-6,-7';\r\n        params.calculateOrder = '1';\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.speedousa.com\/AjaxRESTOrderItemUpdate',\r\n            type: 'POST',\r\n            data: params,\r\n            success: function () {\r\n                location.reload();\r\n            },\r\n            error: function () {\r\n                location.reload();\r\n            }\r\n        });\r\n    }\r\n\r\n};",
	"speedyhen": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var locateSavings = response.match('\"discountSaving\">-(.*)<\/span><\/p>')[1];\r\n        var savings = parseFloat(locateSavings.match('&#163;(.*)')[1]);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"spencersgifts": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.message.match(\/\\$([0-9|.]+)\/)[1];\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promoCode').val(bestCode);\r\n            $('#promoCodeEntry input[type=\"button\"]').click();\r\n        }\r\n    }\r\n};",
	"spinlife": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('.sub-price-col.coupon', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"spirithalloween": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n        if(response.totals) {\r\n            for(var i in response.totals) {\r\n                if ( response.totals[i].key && response.totals[i].key == \"GRAND_ORDERS_DISCOUNT_TOTAL\" ) {\r\n                    var savings = parseFloat(response.totals[i].value.replace(\/[^0-9|\\.]\/g, ''));\r\n                    return {\r\n                        success: true,\r\n                        savings: savings\r\n                    };\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n        location.reload();\r\n    },\r\n    serializeFormObject: function(obj){\r\n        var data={}\r\n        $.each(obj,function(){\r\n            data[this.name] = this.value||''\r\n        })\r\n        return data\r\n    }\r\n}",
	"splendid": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var s = document.createElement('script');\r\n        s.type = 'text\/javascript';\r\n        s.id = 'eid';\r\n        var code = \"document.querySelector('body').setAttribute('eid', window.checkoutConfig.quoteData.entity_id);\";\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.totals.base_discount_amount * -1;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"sport2000fr": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'applyCouponUrl') {\r\n            return JSON.stringify({ discountCode: code });\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var validCoupon = !response.error;\r\n        var subSavings = 0.00;\r\n\r\n        for (var x = 0; x < response.discountCode.length; x++) {\r\n            if (code.toLowerCase() === response.discountCode[x].value.toLowerCase()) {\r\n                subSavings = response.discountCode[x].economy.toFixed(2);\r\n                break;\r\n            }\r\n        }\r\n\r\n        var savings = 0.00;\r\n\r\n        if (validCoupon) {\r\n            savings = subSavings;\r\n            $.ajax({\r\n                url: 'https:\/\/location-ski.sport2000.fr\/json\/cart\/remove\/code',\r\n                type: 'POST',\r\n                headers: { 'content-type': 'application\/json' },\r\n                async: false,\r\n                data: JSON.stringify({ discountCode: code })\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#cart-advantages').val(bestCode);\r\n            $('.cart-discountcode-fieldset.form-row button').click();\r\n        }\r\n    }\r\n};",
	"sportchek": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                vouchers: [code]\r\n            };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseJSON = $.parseJSON(response);\r\n        var savings = responseJSON.cartData.totalDiscounts.formattedValue.replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sportpursuit": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('input[name=\"coupon\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('input[name=\"coupon\"]').trigger('input').trigger('change');\r\n            $('.button:eq(2)').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('.remove-coupon').click();\r\n            $('input[name=\"coupon\"]').val('');\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n            setTimeout(function() {\r\n                var maxWait = 200, waited = 0;\r\n                var waitForClose = setInterval(function() {\r\n                    var confirmed = $('.remove-coupon').length;\r\n                    if ((confirmed) || (waited > maxWait)) {\r\n                        clearInterval(waitForClose);\r\n                        setTimeout(function() {\r\n                            next();\r\n                        }, 500);\r\n                    }\r\n                    waited++;\r\n                }, 10);\r\n            }, 50);\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discounts span:contains(\"-\")', responseHTML).eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"sportscheckde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price.price--discount', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"CreditNoteID\"]').val(bestCode);\r\n      $('.btn.form-buttons__submit.no-margin-bottom').click();\r\n    }\r\n  }\r\n};",
	"sportsmansguide": "var ExternalProvider = {\r\n\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        if (['applyCouponUrl', 'clearCouponUrl'].indexOf(type) === -1) return false;\r\n\r\n        var couponData = $('#paymentform').serializeObject();\r\n\r\n        couponData.CouponCode = (type === 'applyCouponUrl') ? code : '';\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            couponData.triggered_action = 'CouponSubmit';\r\n        } else {\r\n            couponData.triggered_action = 'RemoveCoupon' + code;\r\n        }\r\n\r\n        return couponData;\r\n    },\r\n\r\n    parseAmount: function (string) {\r\n        return parseFloat(string.replace(\/[^0-9|.]\/g, ''));\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        if (!response.html || (response.errors && response.errors.length)) {\r\n            return {\r\n                success: false,\r\n                savings: 0.00\r\n            };\r\n        }\r\n\r\n        var cart = $.parseHTML(response.html);\r\n        var grandTotal = '#summaryGrandTotal';\r\n\r\n        var savings = this.parseAmount($(grandTotal).text()) - this.parseAmount($(grandTotal, cart).text());\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#CouponCode').val(bestCode);\r\n            $('button[name=\"CouponSubmit\"]').click();\r\n        }\r\n    }\r\n};",
	"sportsmemorabilia": "var ExternalProvider = {\r\n\r\n    init: function () {\r\n\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        if (type == 'applyCouponUrl' || type == 'clearCouponUrl') {\r\n            var couponData = $('[name=\"cartform\"]').serializeObject();\r\n            couponData.coupon = code;\r\n            couponData.mode = (type == 'applyCouponUrl') ? \"add_coupon\" : \"unset_coupons\";\r\n            couponData.action = \"\";\r\n            return couponData\r\n        }\r\n        return null;\r\n    },\r\n\r\n    parseAmount: function (string) {\r\n        return parseFloat(string.replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var grandTotal = '#cart_totals_div .ProductPriceSmall:last';\r\n        var savings = this.parseAmount($(grandTotal).text()) - this.parseAmount($(grandTotal, responseHTML).text());\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"sportsshoes": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n        var s = document.createElement('script');\r\n        var code = \"document.querySelector('body').setAttribute('currency', window.currency);\";\r\n        var selector;\r\n\r\n        s.id = 'tempScript';\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n        $('#tempScript').remove();\r\n\r\n        selector = location.pathname.match('checkout\/guest\/details') ? $('#sideTotal').text() : $('body').attr('currency');\r\n\r\n        if (selector === 'EUR' || selector.match('\u20ac')) {\r\n            locale = localeMapping.DE;\r\n            currency = 'EUR';\r\n        } else if (selector === 'GBP' || selector.match('\u00a3')) {\r\n            locale = localeMapping.GB;\r\n            currency = 'GBP';\r\n        } else {\r\n            locale = localeMapping.US;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: currency, minimumFractionDigits: 2 });\r\n    },\r\n    isEmpty: function () {\r\n        return $('.mini_basket_summary_totals_total').text().replace(\/[A-z.0-9.:,]\/g, '').trim() === '';\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sportthieme": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsLoc = $('.cartSummary tr:eq(2) td:eq(1)', responseHTML).text();\r\n        var savings = 0;\r\n        if (savingsLoc.contains(\"-\")) {\r\n            savings = savingsLoc.replace(',', '.').replace(\/[^.0-9]\/g, '');\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"voucher\"]').text(bestCode);\r\n            $('.withTooltip input').click();\r\n        }\r\n    }\r\n};",
	"spreadshirtde": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'injectCoupon') {\r\n            $('#basket .coupon-code input').focus().val(code).blur();\r\n        } else if (action === 'removeInjectedCoupon') {\r\n            $('.remove-coupon').get(0).click();\r\n        }\r\n\r\n        return null;\r\n    },\r\n    whenReady: function(step, next) {\r\n        if ( (step == 'injectCoupon') || (step == 'removeInjectedCoupon') ) {\r\n            setTimeout(function() {\r\n                var maxWait = 100, waited = 0;\r\n                var waitForClose = setInterval(function() {\r\n                    var confirmed = $('.remove-coupon').length;\r\n                    if ((confirmed) || (waited > maxWait)) {\r\n                        clearInterval(waitForClose);\r\n                        setTimeout(function() {\r\n                            next();\r\n                        }, 200);\r\n                    }\r\n                    waited++;\r\n                }, 10);\r\n            }, 20);\r\n        }\r\n    },\r\n    parse: function () {\r\n        var savings = parseFloat($('.voucher-goods-discount .price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) $('#basket .coupon-code input').focus().val(bestCode).blur();\r\n    }\r\n};",
	"spreadshirtfr": "var ExternalProvider = {\r\n    init: function () {\r\n        var clickEvent = new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        });\r\n\r\n        $('#basket .remove-coupon').get(0).dispatchEvent(clickEvent);\r\n    },\r\n    __prepareUrl: function () {\r\n        var applyUrlInput = $('#__applyUrl');\r\n        var basketId = $('.logo').eq(0).attr('href').split('?')[1].split('=')[1];\r\n        var token = sessionStorage.getItem('token_' + basketId);\r\n        var applyUrl = 'https:\/\/checkout.spreadshirt.fr\/api\/v1\/baskets\/' + basketId + '\/coupons?mediaType=json&locale=fr_FR&token=' + token + '&apiKey=bac4047c-c9a6-4ef6-8fcf-6410f286425a';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__applyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#__applyUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (action, ccode) {\r\n        var data = { code: ccode };\r\n\r\n        return JSON.stringify(data);\r\n    },\r\n    parse: function (response) {\r\n        var responseId = response.id;\r\n        var basketId = $('.logo').eq(0).attr('href').split('?')[1].split('=')[1];\r\n        var token = sessionStorage.getItem('token_' + basketId);\r\n        var savings = 0.00;\r\n        var timeStamp = new Date();\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/checkout.spreadshirt.fr\/api\/v1\/baskets\/' + basketId + '?mediaType=json&locale=fr_FR&apiKey=bac4047c-c9a6-4ef6-8fcf-6410f286425a&timestamp=' + timeStamp.getTime(),\r\n            type: 'GET',\r\n            async: false,\r\n            success: function (res) {\r\n                savings = res.discounts[0].type === 'voucherItem' ? res.discounts[0].price.display : res.discounts[1].price.display;\r\n            }\r\n        });\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/checkout.spreadshirt.fr\/api\/v1\/baskets\/' + basketId + '\/coupons\/' + responseId + '?mediaType=json&locale=fr_FR&method=delete&token=' + token + '&apiKey=bac4047c-c9a6-4ef6-8fcf-6410f286425a',\r\n            type: 'POST',\r\n            async: false\r\n        });\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) $('#basket .coupon-code input').focus().val(bestCode).blur();\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"spri": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let discountText = $('.reduction-code__text:contains(\"-$\")', responseHTML).text().split('(')[1];\r\n    let savings = parseFloat(discountText.replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"spyassociates": "var ExternalProvider = {\r\n  prepare: function (type) {\r\n    if (type === 'clearCouponUrl') {\r\n      $.ajax({\r\n        url: 'https:\/\/spyassociates.com\/cart.php',\r\n        type: 'GET',\r\n        async: false,\r\n        success: function (response) {\r\n          var applyClearUrl = $(\".cart-total-label:contains('Coupon')\", $.parseHTML(response)).find('a').attr('href');\r\n\r\n          $.ajax({\r\n            url: applyClearUrl,\r\n            type: 'GET',\r\n            async: false\r\n          });\r\n        }\r\n      });\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML =  $.parseHTML(response.responseText);\r\n    var selector = location.href.match('cart') ? 'li.cart-total .cart-total-grandTotal' : 'div[data-test=\"cart-total\"] span[data-test=\"cart-price-value\"]';\r\n    var oldTotal = parseFloat($(selector).text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('li.cart-total .cart-total-grandTotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"spyder": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total-line-table__tbody .total-line.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n     if (bestCode) location.reload();\r\n  }\r\n};",
	"stacyadams": "var ExternalProvider = {\r\n    whenReady: function (step, next) {\r\n        if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n            setTimeout(function () {\r\n                var maxWait = 200;\r\n                var waited = 0;\r\n                var waitForClose = setInterval(function () {\r\n                    var confirmed = $('a[id=\"checkout:btnRemovePromo\"]').length;\r\n\r\n                    if ((confirmed) || (waited > maxWait)) {\r\n                        clearInterval(waitForClose);\r\n                        setTimeout(function () {\r\n                            next();\r\n                        }, 650);\r\n                    }\r\n\r\n                    waited++;\r\n                }, 10);\r\n            }, 50);\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('[id=\"checkout:lblPromoAmount\"]', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"stage": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyCouponUrl = $('#piggyApplyCouponUrl');\r\n        var clearCouponUrl = $('#piggyResultCouponUrl');\r\n\r\n        if (!applyCouponUrl.length) {\r\n            applyCouponUrl = document.createElement('input');\r\n\r\n            applyCouponUrl.id = 'piggyApplyCouponUrl';\r\n            applyCouponUrl.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n\r\n            applyCouponUrl = $('#piggyApplyCouponUrl');\r\n\r\n            applyCouponUrl.attr('value', this.isCartPage() ? '\/cart\/shoppingCart.jsp?_DARGS=\/cart\/includes\/orderSummary.jsp.promoform' : '\/checkout\/payment.jsp?_DARGS=\/checkout\/includes\/checkout-billing-promo.jsp.promoform');\r\n        }\r\n\r\n        if (!clearCouponUrl.length) {\r\n            clearCouponUrl = document.createElement('input');\r\n\r\n            clearCouponUrl.id = 'piggyclearCouponUrl';\r\n            clearCouponUrl.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearCouponUrl);\r\n\r\n            clearCouponUrl = $('#piggyclearCouponUrl');\r\n\r\n            clearCouponUrl.attr('value', this.isCartPage() ? 'https:\/\/www.stage.com\/cart\/shoppingCart.jsp' : 'https:\/\/www.stage.com\/checkout\/payment.jsp');\r\n        }\r\n    },\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var object = {};\r\n            var array = this.serializeArray();\r\n\r\n            $.each(array, function () {\r\n                if (object[this.name] !== undefined) {\r\n                    if (!object[this.name].push) {\r\n                        object[this.name] = [object[this.name]];\r\n                    }\r\n\r\n                    object[this.name].push(this.value || '');\r\n                } else {\r\n                    object[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return object;\r\n        };\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\\\/shoppingCart\\.jsp\/gi.test(location.href);\r\n    },\r\n    prepare: function (actionType, couponCode) {\r\n        if (actionType !== 'applyCouponUrl') {\r\n            return false;\r\n        }\r\n\r\n        var formData = {};\r\n\r\n        if (this.isCartPage()) {\r\n            formData = $('#cart-promo-code-form').serializeObject();\r\n            formData['\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon'] = 'APPLY';\r\n        } else {\r\n            formData = $('#checkout-payment-promo-code-form').serializeObject();\r\n            formData['\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon'] = 'Apply';\r\n        }\r\n\r\n        formData['promo-code'] = couponCode;\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response, status, $xhr, couponCode) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        window.location.reload(true);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"stage.mobile": "var ExternalProvider = {\r\n    queueName: '_cfq',\r\n    $: window.$piggyJq,\r\n\r\n    _prepareUrl: function () {\r\n        var applyCouponUrl = this.$('#piggyApplyCouponUrl');\r\n\r\n        if (!applyCouponUrl.length) {\r\n            applyCouponUrl = document.createElement('input');\r\n            applyCouponUrl.id = 'piggyApplyCouponUrl';\r\n            applyCouponUrl.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n            applyCouponUrl = this.$('#piggyApplyCouponUrl');\r\n            applyCouponUrl.attr('value', this.isCartPage() ? '\/m\/cart\/includes\/?_DARGS=\/m\/cart\/includes\/orderSummary.jsp.couponForm#' : '\/m\/checkout\/includes\/checkout-giftcoupon.jsp?_DARGS=\/m\/checkout\/includes\/checkout-giftcoupon.jsp.promoform');\r\n        }\r\n    },\r\n\r\n    init: function () {\r\n        this.$.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n\r\n    isCartPage: function () {\r\n        return \/cart\\\/shoppingCart\\.jsp\/gi.test(location.href);\r\n    },\r\n\r\n    prepare: function (action, code) {\r\n        if (action !== 'applyCouponUrl') return false;\r\n\r\n        var formData = {};\r\n\r\n        if (this.isCartPage()) {\r\n            formData = this.$('form[name=\"couponForm\"]').serializeObject();\r\n            formData = Object.assign(formData, {\r\n                promo: code,\r\n                hdnCouponCode: code\r\n            });\r\n        } else {\r\n            formData = this.$('form[name=\"promoform\"]').serializeObject();\r\n            formData['\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode'] = code;\r\n        }\r\n\r\n        formData['\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon'] = 'Apply';\r\n\r\n        return formData;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var $response = this.$.parseHTML(response);\r\n        var $summaryItem = this.isCartPage() ? this.$('.gutter-tfive .flex-items li', $response) : this.$('.order-summary .flex-items li', $response);\r\n        var codeFound = false;\r\n        var savings = 0.00;\r\n        var $item;\r\n\r\n        $summaryItem.each(function () {\r\n            $item = ExternalProvider.$(this);\r\n\r\n            if (ExternalProvider.$('p:first-child', $item).text().indexOf('Discounts') !== -1) {\r\n                codeFound = true;\r\n                savings = parseFloat(ExternalProvider.$('p:last-child', $item).text().replace(\/[^0-9|.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        if (codeFound) {\r\n            var $form = this.$(this.isCartPage() ? 'form[name=\"removeCoupon\"]' : '#editPromoform2', $response);\r\n            var formData = $form.serializeObject();\r\n\r\n            if (!this.isCartPage()) {\r\n                delete formData['\/atg\/commerce\/promotion\/CouponFormHandler.removeCoupon'];\r\n                formData['\/atg\/commerce\/promotion\/CouponFormHandler.removeCoupon'] = this.$('#couponModal', $response).attr('data-coupon-code');\r\n            }\r\n\r\n            delete formData['_D:\/atg\/commerce\/promotion\/CouponFormHandler.removeCoupon'];\r\n            formData['_D:\/atg\/commerce\/promotion\/CouponFormHandler.removeCoupon'] = ' ';\r\n\r\n            var queue = this.$(document).queue(this.queueName);\r\n\r\n            queue.unshift(function (next) {\r\n                ExternalProvider.$.ajax({\r\n                    type: 'POST',\r\n                    url: $form.attr('action'),\r\n                    cache: false,\r\n                    data: formData,\r\n                    dataType: 'html',\r\n                    success: function () {\r\n                        next();\r\n                    },\r\n                    error: function () {\r\n                        next();\r\n                    }\r\n                });\r\n            });\r\n\r\n            this.$(document).queue(this.queueName, queue);\r\n        }\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"staples": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        var data = {};\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            data = Object.assign(data, {\r\n                coupons: []\r\n            });\r\n            data.coupons[0] = code;\r\n        }\r\n\r\n        return JSON.stringify(data);\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.checkout.shoppingCart.coupons[0].couponAmt.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"staplesca": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response),\r\n        var oldPrice = parseFloat($('.preTaxTotal td:last-child').text().replace(\/[^0-9|.]\/g, '')) * 100;\r\n        var newPrice = parseFloat($('.preTaxTotal td:last-child', responseHTML).text().replace(\/[^0-9|.]\/g, '')) * 100;\r\n        var savings = (oldPrice - newPrice) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        $.post('https:\/\/www.staples.ca\/office\/supplies\/StaplesAddRemoveCoupon', {\r\n            promoName: bestCode,\r\n            orderId: $('input[name=\"orderId\"]').val(),\r\n            storeId: $('input[name=\"storeId\"]').val(),\r\n            catalogId: $('input[name=\"catalogId\"]').val(),\r\n            langId: $('input[name=\"langId\"]').val(),\r\n            taskType: \"A\",\r\n            skuAdded: \"false\"\r\n        }, function () {\r\n            location.reload();\r\n        })\r\n    }\r\n};",
	"staplesde": "var ExternalProvider = {\r\n    prepare: function (type, code){\r\n        if (type === \"applyCouponUrl\") {\r\n            $('#CouponApply').val(\"true\");\r\n            $('input[name=\"CouponViewModel.Coupons[0].PromoCode\"]').val(code);\r\n            return $('#CheckoutCartForm').serializeArray();\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var oldPrice = parseFloat($('#ItemPriceLabel').text().replace(',','.').replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('#ItemPriceLabel', $.parseHTML(response)).text().replace(',','.').replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"starbucks": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('.ordertot .value').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($('.ordertot .value', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"starfiredirect": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var applyUrl = $('.edit_checkout.animate-floating-labels')[0].action;\r\n        var resultUrl = $('.edit_checkout.animate-floating-labels')[0].action + '?step=contact_information';\r\n\r\n        \/\/ Append apply url input\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        \/\/ Append result url input\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        resultUrlInput.attr('value', resultUrl);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line.total-line--reduction .order-summary__emphasis', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, '')) || 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"statelinetack": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (action, code) {\r\n        var formData = $('#aspnetForm').serializeObject();\r\n\r\n        if (location.pathname === '\/BillingShipping.aspx') {\r\n            if (action === 'applyCouponUrl') {\r\n                formData = Object.assign(formData, {\r\n                    ctl00$MainContent$billingShipping$txtPromoCode: code,\r\n                    ctl00$MainContent$billingShipping$btnPromoCode: null\r\n                });\r\n            } else {\r\n                formData = Object.assign(formData, {\r\n                    ctl00$MainContent$billingShipping$btnUndoPromoCode: null\r\n                });\r\n            }\r\n        } else if (action === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$txtPromoCode: code,\r\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$btnPromoCode: null\r\n            });\r\n        } else {\r\n            formData = Object.assign(formData, {\r\n                ctl00$ctl00$CenterContentArea$MainContent$ctl00$btnUndoPromoCode: null\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.cart-checkout-subtotal-price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat($('.cart-checkout-subtotal-price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = 0;\r\n\r\n        if (oldTotal > newTotal) {\r\n             savings = parseFloat($('.promo-amount-value:contains(\"-$\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;;\r\n        };\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_txtPromoCode, #ctl00_MainContent_billingShipping_txtPromoCode').val(bestCode);\r\n            $('#ctl00_ctl00_CenterContentArea_MainContent_ctl00_btnPromoCode, #ctl00_MainContent_billingShipping_btnPromoCode').click();\r\n        }\r\n    }\r\n};",
	"stauer": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings;\r\n\r\n        var success = $('#footer div:contains(\"' + code + '\")', responseHTML).length === 1;\r\n\r\n        if (success) {\r\n            savings = $('.youSaved b', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        }\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n\r\n    complete: function()\r\n    {\r\n        location.reload();\r\n    }\r\n};",
	"steelseries": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.total_discounts);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    }\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"steinersports": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var discount = parseFloat($('[data-checkout-discount-amount-target]', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        if (discount > 0) {\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"steinmart": "var ExternalProvider = {\r\n    oldTotal: 0,\r\n    init: function () {\r\n      if ($('.ml-remove-source-code').length) {\r\n        var code = $('.messagediscount:first-child').text();\r\n        var self = this;\r\n\r\n        $.ajax({\r\n          url: 'https:\/\/www.steinmart.com\/basket.do?method=removeSourceCode&sourceCode=' + code,\r\n          type: 'POST',\r\n          async: false\r\n        });\r\n\r\n        $.ajax({\r\n          url: 'https:\/\/www.steinmart.com\/basket.do',\r\n          type: 'GET',\r\n          async: false,\r\n          success: function (response) {\r\n            var responseHTML = $.parseHTML(response);\r\n            self.oldTotal = parseFloat($('#EstTaxShipItemTable_estBasketTotal, .ml-summary-total .ml-accordion-summary-item-value', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    parse: function (response) {\r\n      var responseHTML = $.parseHTML(response);\r\n      var oldTotal = this.oldTotal !== 0 ? this.oldTotal : parseFloat($('#EstTaxShipItemTable_estBasketTotal, .ml-summary-total .ml-accordion-summary-item-value').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n      var newTotal = parseFloat($('#EstTaxShipItemTable_estBasketTotal, .ml-summary-total .ml-accordion-summary-item-value', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n      var savings = oldTotal - newTotal;\r\n\r\n      return {\r\n        success: savings > 0,\r\n        savings: Number.isNaN(savings) ? 0.00 : savings\r\n      };\r\n    },\r\n    complete: function (bestCode) {\r\n      if (bestCode) location.reload();\r\n    }\r\n};",
	"step2": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.DiscountAmount);\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var $input = $('#promocode').val(bestCode)[0].dispatchEvent(new Event(\"input\", {bubbles: true}));\r\n            $input.trigger('input').trigger('change');\r\n            var clickEvent = new MouseEvent('click', {\r\n                'view': window,\r\n                'bubbles': true,\r\n                'cancelable': true\r\n            });\r\n            $('#coupon_apply_button').get(0).dispatchEvent(clickEvent);\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"stevemadden": "var ExternalProvider = {\r\n    parse: function (response) {\r\n      var responseHTML = $.parseHTML(response);\r\n      var str = $('.reduction-code__text:contains(\"-$\")', responseHTML).text();\r\n      var pos = str.indexOf('(') + 1;\r\n  \r\n      str = str.slice(pos, str.lastIndexOf(')'));\r\n  \r\n      var savings = parseFloat(str.replace(\/[^0-9|.]\/g, ''));\r\n  \r\n      return {\r\n        success: savings > 0,\r\n        savings: Number.isNaN(savings) ? 0.00 : savings\r\n      };\r\n    },\r\n    complete: function (bestCode) {\r\n      if (bestCode) location.reload();\r\n    }\r\n  };",
	"stevesblindsandwallpaper": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($(\".value:contains(-$)\", responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $(\"#coupon_code\").val(bestCode);\r\n            $(\".addcoupon\").trigger(\"click\");\r\n        }\r\n    }\r\n\r\n};",
	"stewleonardsgifts": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"stickeryou": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.CheckoutBag.OrderSummary.Discount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestcode) {\r\n        if (bestcode) {\r\n            $('#promo-text').val(bestcode);\r\n            var s = document.createElement('script');\r\n            s.type = 'text\/javascript';\r\n            var code = `$('#promo-text').trigger('change');$('#promo-apply').click();`;\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n};",
	"stilacosmetics": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-discount > td:contains(\"- $\"):eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"stowawaycosmetics": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n\r\n    prepare: function (action, code) {\r\n        var formData = $('#order-summary .order-summary__section--discount form:nth-child(3)').serializeObject();\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                utf8: $('input[name=\"utf8\"]').val(),\r\n                _method: $('input[name=\"_method\"]').val(),\r\n                authenticity_token: $('input[name=\"authenticity_token\"]').val(),\r\n                step: $('#previous_step').val(),\r\n                'checkout[reduction_code]': code,\r\n                'checkout[client_details][browser_width]': $('input[name=\"checkout[client_details][browser_width]\"]').val(),\r\n                'checkout[client_details][browser_height]': $('input[name=\"checkout[client_details][browser_height]\"]').val(),\r\n                'checkout[client_details][javascript_enabled]': $('input[name=\"checkout[client_details][javascript_enabled]\"]').val()\r\n            });\r\n\r\n            return formData;\r\n        } else if (action === 'clearCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                utf8: $('input[name=\"utf8\"]').val(),\r\n                _method: $('input[name=\"_method\"]').val(),\r\n                authenticity_token: $('input[name=\"authenticity_token\"]').val(),\r\n                step: $('#previous_step').val(),\r\n                'checkout[clear_discount]': $('#checkout_clear_discount').val()\r\n            });\r\n\r\n            return formData;\r\n        }\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = Number($('.total-line--reduction .total-line__price .visually-hidden', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').removeAttr('disabled');\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').removeClass('btn--disabled');\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]').click();\r\n        }\r\n    }\r\n};",
	"straighttalk": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var $response = $.parseHTML(response),\r\n            $discountWrap = $('.discount-wrap', $response),\r\n            codeFound = $('.discount-promo', $discountWrap).text().toLowerCase().indexOf(code.toLowerCase()) !== -1;\r\n        return {\r\n            success: codeFound,\r\n            savings: codeFound ? parseFloat($('.discount-amount', $discountWrap).text().replace(\/[^0-9|\\.]\/g, '')) : 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"strapworks": "var ExternalProvider = {\r\n    init: function () {\r\n        this.oldTotal = $('.colors_productprice').text().replace(\/[^0-9.]\/g, '');\r\n    },\r\n    isCartPage: function () {\r\n        return \/ShoppingCart\/.test(location.href);\r\n    },\r\n    _init: function () {\r\n        var applyUrlInput = $('#___jpApplyUrl');\r\n        var applyUrl = this.isCartPage() ? 'https:\/\/www.strapworks.com\/ShoppingCart.asp' : 'https:\/\/www.strapworks.com\/one-page-checkout.asp';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpApplyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            if (this.isCartPage()) {\r\n                data = {\r\n                    RefreshFromPopup: $('input[name=\"RefreshFromPopup\"]').val(),\r\n                    Quantity1: $('#Quantity1').val(),\r\n                    ShipCountry: $('select[name=\"ShipCountry\"]').val(),\r\n                    ShipState_Required: $('#ShipState_Required').val(),\r\n                    ShipState_dropdown: $('select[name=\"ShipState_dropdown\"]').val(),\r\n                    ShipState: $('#ShipState').val(),\r\n                    ShipPostalCode: $('input[name=\"ShipPostalCode\"]').val(),\r\n                    CouponCode: code,\r\n                    'btnCouponCode.x': '',\r\n                    'btnCouponCode.y': ''\r\n                };\r\n            } else {\r\n                data = {\r\n                    PCIaaS_CardId: $('#PCIaaS_CardId').val(),\r\n                    BillingFirstName: $('input[name=\"BillingFirstName\"]').val(),\r\n                    BillingLastName: $('input[name=\"BillingLastName\"]').val(),\r\n                    BillingCompanyName: $('input[name=\"BillingCompanyName\"]').val(),\r\n                    BillingAddress1: $('input[name=\"BillingAddress1\"]').val(),\r\n                    BillingAddress2: $('input[name=\"BillingAddress2\"]').val(),\r\n                    BillingCity: $('input[name=\"BillingCity\"]').val(),\r\n                    BillingCityChanged: $('input[name=\"BillingCityChanged\"]').val(),\r\n                    BillingCountry: $('select[name=\"BillingCountry\"]').val(),\r\n                    BillingCountryChanged: $('input[name=\"BillingCountryChanged\"]').val(),\r\n                    BillingState_Required: $('input[name=\"BillingState_Required\"]').val(),\r\n                    BillingState_dropdown: $('select[name=\"BillingState_dropdown\"]').val(),\r\n                    BillingState: $('#BillingState').val(),\r\n                    BillingStateChanged: $('input[name=\"BillingStateChanged\"]').val(),\r\n                    BillingPostalCode: $('input[name=\"BillingPostalCode\"]').val(),\r\n                    BillingPostalCodeChanged: $('input[name=\"BillingPostalCodeChanged\"]').val(),\r\n                    BillingPhoneNumber: $('input[name=\"BillingPhoneNumber\"]').val(),\r\n                    BillingFaxNumber: $('input[name=\"BillingFaxNumber\"]').val(),\r\n                    Email: $('input[name=\"Email\"]').val(),\r\n                    emailsubscriber: $('input[name=\"emailsubscriber\"]').val(),\r\n                    EmailSubscriberHidden: $('input[name=\"EmailSubscriberHidden\"]').val(),\r\n                    ShipState_Required: $('input[name=\"ShipState_Required\"]').val(),\r\n                    ShipState_dropdown: $('select[name=\"ShipState_dropdown\"]').val(),\r\n                    ShipState: $('input[name=\"ShipState\"]').val(),\r\n                    ShipTo: $('select[name=\"ShipTo\"]').val(),\r\n                    ShipFirstName: $('input[name=\"ShipFirstName\"]').val(),\r\n                    ShipLastName: $('input[name=\"ShipLastName\"]').val(),\r\n                    ShipCompanyName: $('input[name=\"ShipCompanyName\"]').val(),\r\n                    ShipAddress1: $('input[name=\"ShipAddress1\"]').val(),\r\n                    ShipAddress2: $('input[name=\"ShipAddress2\"]').val(),\r\n                    ShipCity: $('input[name=\"ShipCity\"]').val(),\r\n                    ShipPostalCode: $('input[name=\"ShipPostalCode\"]').val(),\r\n                    ShipPhoneNumber: $('input[name=\"ShipPhoneNumber\"]').val(),\r\n                    ShipFaxNumber: $('input[name=\"ShipFaxNumber\"]').val(),\r\n                    password: $('input[name=\"password\"]').val(),\r\n                    passwordagain: $('input[name=\"passwordagain\"]').val(),\r\n                    Previous_Tax_Percents: $('input[name=\"Previous_Tax_Percents\"]').val(),\r\n                    Previous_Calc_Shipping: $('input[name=\"Previous_Calc_Shipping\"]').val(),\r\n                    hidden_btncalc_shipping: $('input[name=\"hidden_btncalc_shipping\"]').val(),\r\n                    PaymentMethodTypeDisplay: $('select[name=\"PaymentMethodTypeDisplay\"]').val(),\r\n                    PaymentMethodType: $('select[name=\"PaymentMethodType\"]').val(),\r\n                    BankName: $('input[name=\"BankName\"]').val(),\r\n                    AccountType: $('input[name=\"AccountType\"]').val(),\r\n                    RoutingNumber: $('input[name=\"RoutingNumber\"]').val(),\r\n                    AccountNumber: $('input[name=\"AccountNumber\"]').val(),\r\n                    CheckNumber: $('input[name=\"CheckNumber\"]').val(),\r\n                    Keep_Payment_Method_On_File_eCheck: $('input[name=\"Keep_Payment_Method_On_File_eCheck\"]').val(),\r\n                    PONum: $('input[name=\"PONum\"]').val(),\r\n                    CreditCardType: $('select[name=\"CreditCardType\"]').val(),\r\n                    CreditCardNumber: $('input[name=\"CreditCardNumber\"]').val(),\r\n                    CardHoldersName: $('input[name=\"CardHoldersName\"]').val(),\r\n                    CC_ExpDate_Month: $('select[name=\"CC_ExpDate_Month\"]').val(),\r\n                    CC_ExpDate_Year: $('select[name=\"CC_ExpDate_Year\"]').val(),\r\n                    Keep_Payment_Method_On_File_CCard: $('input[name=\"Keep_Payment_Method_On_File_CCard\"]').val(),\r\n                    Order_Comments: $('#v65-onepage-ordercomments-input').val(),\r\n                    'last-form-submit-date': $('input[name=\"last-form-submit-date\"]').val(),\r\n                    Using_Existing_Account: $('input[name=\"Using_Existing_Account\"]').val(),\r\n                    Quantity1: $('input[name=\"Quantity1\"]').val(),\r\n                    CouponCode: code,\r\n                    'btnCouponCode.x': '',\r\n                    'btnCouponCode.y': ''\r\n                };\r\n            }\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = parseFloat($('.colors_productprice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('input[name=\"CouponCode\"]').val(bestCode);\r\n                $('input[name=\"btnCouponCode\"]').click();\r\n            } else if (!$('input[name=\"CouponCode\"]').is(':visible')) {\r\n                $(\"a:contains('coupon')\").trigger('click');\r\n                $('input[name=\"CouponCode\"]').val(bestCode);\r\n                $('input[name=\"btnCouponCode\"]').click();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._init();",
	"strawberrynet": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var object = {};\r\n            var data = this.serializeArray();\r\n\r\n            $.each(data, function () {\r\n                if (object[this.name] !== undefined) {\r\n                    if (!object[this.name].push) {\r\n                        object[this.name] = [object[this.name]];\r\n                    }\r\n\r\n                    object[this.name].push(this.value || '');\r\n                } else {\r\n                    object[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return object;\r\n        };\r\n    },\r\n    prepare: function (action, code) {\r\n        var formData = $('#SNForm').serializeObject();\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            formData.discCode = code;\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.OrderSummary.PromoList[0].DiscAmount.replace('-US&#36;', ''));\r\n\r\n        if (savings <= parseFloat($('div[data-name=\"discountValue\"]').text().replace(\/[^0-9]\/g, '')) \/ 100) savings = 0;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discCode').val(bestCode);\r\n            $('#discCode~input').click();\r\n        }\r\n    }\r\n};",
	"striderite": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.bfx-total-discount:contains(\"- $\") ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"strivectin": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload()\r\n        }\r\n    }\r\n}",
	"strollerhaus": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.order-summary__emphasis').eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.order-summary__emphasis', responseHTML).eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"stuartslondon": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var storeCurrency = amount.toLocaleString(locale, { style: 'currency', currency: currency, minimumFractionDigits: minimumFractionDigits });\r\n\r\n        if ($('.EUR').length > 0) {\r\n            storeCurrency = amount.toLocaleString(localeMapping.DE, { style: 'currency', currency: 'EUR', minimumFractionDigits: minimumFractionDigits });\r\n        } else if ($('.GBP').length > 0) {\r\n            storeCurrency = amount.toLocaleString(localeMapping.GB, { style: 'currency', currency: 'GBP', minimumFractionDigits: minimumFractionDigits });\r\n        }\r\n\r\n        return storeCurrency;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#basket_discount .product-content__price--inc', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"stuartweitzman": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var formData = {};\r\n        var responseHTML;\r\n        var oldTotal;\r\n        var newTotal;\r\n\r\n        var savings;\r\n\r\n        if (this.isCartPage()) {\r\n            formData = {\r\n\r\n                __EVENTTARGET: 'CT_Top_1$lbRemovePromo',\r\n                __EVENTARGUMENT: '',\r\n                CT_Top_1$sesMain$drpShippingCountry: $('input[name=\"CT_Top_1_sesMain_drpShippingCountry\"]').val(),\r\n                CT_Top_1$sesMain$drpShippingMethod: $('input[name=\"CT_Top_1$sesMain$drpShippingMethod\"]').val(),\r\n                CT_Top_1$hdnStoreLocationId: $('input[name=\"CT_Top_1$hdnStoreLocationId\"]').val(),\r\n                __VIEWSTATEGENERATOR: $('input[name=\"__VIEWSTATEGENERATOR\"]').val(),\r\n                __EVENTVALIDATION: $('input[name=\"__EVENTVALIDATION\"]').val(),\r\n                __VIEWSTATE: $('input[name=\"__VIEWSTATE\"]').val()\r\n\r\n            };\r\n\r\n            $.ajax({\r\n                url: 'https:\/\/www.stuartweitzman.com\/shopping-bag\/',\r\n                success: function (result) {\r\n                    responseHTML = $.parseHTML(result);\r\n                    oldTotal = parseFloat($('#spanTotal_0').text().replace(\/[^0-9|.]\/g, ''));\r\n                    newTotal = parseFloat($('#spanTotal_0', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n                    savings = oldTotal - newTotal;\r\n                },\r\n                async: false\r\n            });\r\n\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: 'https:\/\/www.stuartweitzman.com\/shopping-bag\/',\r\n                data: formData,\r\n                success: function (result) {\r\n                },\r\n                async: false\r\n            });\r\n        } else {\r\n            formData = {\r\n\r\n                F: 'SubmitPromo',\r\n                SiteId: '1',\r\n                Promo: ''\r\n            };\r\n\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: 'https:\/\/www.stuartweitzman.com\/ajax.aspx',\r\n                data: formData,\r\n                success: function (result) {\r\n                },\r\n                async: false\r\n            });\r\n            savings = parseFloat(response.Discount.replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCartPage: function () {\r\n        return \/shopping-bag\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.hdng').click();\r\n            $('#CT_Top_1_txtPromotionCode, #CT_Top_0_txtPromoCode').val(bestCode);\r\n            $('#CT_Top_1_btnPromo:eq(0), div.PromoEntry.s_1half span input').click();\r\n        } \r\n    }\r\n};",
	"stuckonyou": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"stumpsparty": "var ExternalProvider = {\r\n  prepareUrl: function (type, code) {\r\n    var id = $('#data-mz-preload-checkout').text();\r\n    var matchId = id.match('\"amountRefunded\":(.*)\"tenantId\"')[0];\r\n    var trueId = matchId.match('\"id\":\"(.*)\",\"tenantId\"')[1];\r\n    var clearCouponInput = $('#__jpClearCouponUrl');\r\n    var clearCouponUrl = 'https:\/\/www.stumpsparty.com\/api\/commerce\/orders\/' + trueId + '\/coupons\/CLAIMCODE';\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = 'https:\/\/www.stumpsparty.com\/api\/commerce\/orders\/' + trueId + '\/coupons\/CLAIMCODE';\r\n    var resultUrlInput = $('#___jpResultUrl');\r\n    var resultUrl = 'https:\/\/www.stumpsparty.com\/api\/commerce\/orders\/' + trueId;\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    if (!resultUrlInput.length) {\r\n      resultUrlInput = document.createElement('input');\r\n      resultUrlInput.id = '___jpResultUrl';\r\n      resultUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n      resultUrlInput = $('#___jpResultUrl');\r\n    }\r\n\r\n\r\n    if (!clearCouponInput.length) {\r\n      clearCouponInput = document.createElement('input');\r\n      clearCouponInput.id = '__jpClearCouponUrl';\r\n      clearCouponInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(clearCouponInput);\r\n      clearCouponInput = $('#__jpClearCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    resultUrlInput.attr('value', resultUrl);\r\n    clearCouponInput.attr('value', clearCouponUrl);\r\n  },\r\n  prepare: function (action, code) {\r\n    var apiContext = $('#data-mz-preload-apicontext').text();\r\n    var apiContextAppClaims = apiContext.match('\"headers\":{(.*)\"x-vol-currency\"')[1];\r\n    var apiContextAppClaimsId = apiContextAppClaims.match('\"x-vol-app-claims\":\"(.*)\",')[1];\r\n    var apiContextCatalog = apiContext.match('\"x-vol-master-catalog\":\"(.*)\"x-vol-tenant\"')[1];\r\n    var apiContextCatalogId = apiContextCatalog.match('\"x-vol-catalog\":\"(.*)\",')[1];\r\n    var apiContextUserClaimsId = apiContext.match('\"x-vol-user-claims\":\"(.*)\"},\"urls\"')[1];\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      $.ajaxSettings.beforeSend = function (xhr) {\r\n        xhr.setRequestHeader('x-vol-app-claims', {\r\n          toString: function () {\r\n            return apiContextAppClaimsId;\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-catalog', {\r\n          toString: function () {\r\n            return apiContextCatalogId;\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-currency', {\r\n          toString: function () {\r\n            return 'USD';\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-locale', {\r\n          toString: function () {\r\n            return 'en-US';\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-master-catalog', {\r\n          toString: function () {\r\n            return 1;\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-site', {\r\n          toString: function () {\r\n            return '25731';\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-tenant', {\r\n          toString: function () {\r\n            return '16647';\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-user-claims', {\r\n          toString: function () {\r\n            return apiContextUserClaimsId;\r\n          }\r\n        });\r\n      };\r\n    }\r\n\r\n    if (action === 'clearCouponUrl') {\r\n      $.ajaxSettings.beforeSend = function (xhr) {\r\n        xhr.setRequestHeader('x-vol-app-claims', {\r\n          toString: function () {\r\n            return apiContextAppClaimsId;\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-catalog', {\r\n          toString: function () {\r\n            return apiContextCatalogId;\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-currency', {\r\n          toString: function () {\r\n            return 'USD';\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-locale', {\r\n          toString: function () {\r\n            return 'en-US';\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-master-catalog', {\r\n          toString: function () {\r\n            return 1;\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-site', {\r\n          toString: function () {\r\n            return '25731';\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-tenant', {\r\n          toString: function () {\r\n            return '16647';\r\n          }\r\n        });\r\n        xhr.setRequestHeader('x-vol-user-claims', {\r\n          toString: function () {\r\n            return apiContextUserClaimsId;\r\n          }\r\n        });\r\n        xhr.setRequestHeader('X-HTTP-Method-Override', {\r\n          toString: function () {\r\n            return 'DELETE';\r\n          }\r\n        });\r\n      };\r\n\r\n      var data = code;\r\n\r\n      return data;\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.orderDiscounts[0].impact);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon-code').focus().val(bestCode).blur();\r\n      setTimeout(function () {\r\n        $('.code_input_btn').click();\r\n      }, 1000);\r\n    }\r\n  }\r\n};\r\nExternalProvider.prepareUrl();",
	"stylebureau": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_4', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sugarfina": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        if (response.success) {\r\n            var savings = parseFloat(response.msg.replace(\/[^0-9.]\/g, \"\"));\r\n            if (savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"sugru": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var selector = $('.header-country-selector__initials').text();\r\n        var locale = localeMapping.FR;\r\n        var newCurrency = currency;\r\n\r\n        if (selector === 'FR') {\r\n            locale = localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        } else if (selector === 'DE') {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        } else if (selector === 'GB') {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    __prepareUrl: function () {\r\n        $.ajax({\r\n            url: 'https:\/\/buy.sugru.com\/api\/checkout\/update_discount.json',\r\n            type: 'OPTIONS',\r\n            async: false\r\n        });\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.discount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"sulwhasoo": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('.v-fix~.button2').click();\r\n    }\r\n  }\r\n};",
	"sundryclothing": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sunfood": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sunglasshut": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        var formData = $('form[name=\"PromotionCodeForm\"]').serializeArray();\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            formData.map(function (v, i) {\r\n                if (v.name === 'promoCode' || v.name === 'promoCodeNonAjax') {\r\n                    formData[i].value = code;\r\n                }\r\n\r\n                if (v.name === 'URL') {\r\n                    formData[i].value = 'OrderCalculate?updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-3&calculationUsageId=-7&URL=AjaxOrderItemDisplayView?appliedPromo=' + code;\r\n                }\r\n\r\n                return v;\r\n            });\r\n            formData.push({\r\n                name: 'errorViewName',\r\n                value: 'AjaxOrderItemDisplayView'\r\n            });\r\n        }\r\n\r\n        if (action === 'clearCouponUrl') {\r\n            formData.map(function (v, i) {\r\n                if (v.name === 'promoCode' || v.name === 'removeOldPromoCode') {\r\n                    formData[i].value = code;\r\n                }\r\n\r\n                if (v.name === 'taskType') {\r\n                    formData[i].value = 'R';\r\n                }\r\n\r\n                if (v.name === 'URL') {\r\n                    formData[i].value = 'OrderCalculate?updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&calculationUsageId=-3&calculationUsageId=-7&URL=AjaxOrderItemDisplayView?appliedPromo=';\r\n                }\r\n\r\n                return v;\r\n            });\r\n            formData.push({\r\n                name: 'errorViewName',\r\n                value: 'AjaxOrderItemDisplayView'\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.tcl-text.tcl-text--green', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"sunspel": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var currencySelector = $('#subTotal').text().replace(\/[0-9.,]\/g, '').trim();\r\n        var countrySelector = $('.skip.skip--country').text();\r\n        \r\n        if (currencySelector === \"\u20ac\" || countrySelector.match('Europe')) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (currencySelector === \"\u00a3\" || countrySelector.match('United Kingdom')) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"superatv": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if(bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"superdrug": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#discount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"superdry": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('#shopping-bag-icon').text().replace(\/[A-Z.0-9,]\/g, '').trim();\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n        else if (selector === \"\u00a3\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['FR'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"superga": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('tr.discount > td:nth-child(2)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discount').val(bestCode);\r\n            $('#couponCodeSubmit').click();\r\n        }\r\n    }\r\n};",
	"superga-usa": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        var savings = parseFloat(oldTotal - newTotal);\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"superjeweler": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('#subtotal').val().replace(\/[^0-9.]\/g, ''));\r\n        var newTotal = parseFloat($('#subtotal', responseHTML).val().replace(\/[^0-9.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n};",
	"superjeweler.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.grand-total .discount input', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        var savings = $savings.val().replace(\/[^0-9|.]\/g, '');\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"supermediastore": "'use strict';\r\n\r\nvar ExternalProvider = {\r\n    oldTotal: 0,\r\n    init: function () {\r\n        this.oldTotal = this.getTotal();\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        const savings = this.oldTotal - this.getTotal($.parseHTML(response));\r\n        if(savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    getTotal: function(contextHtml) {\r\n        const totalNode = $('#subtotal > div.prop > div.value', contextHtml);\r\n        const totalText = totalNode.text().replace(\/[^0-9|\\.]\/g, '').toString();\r\n        const total = parseFloat(totalText);\r\n        if(total > 0){\r\n            return total;\r\n        }\r\n        throw new Error(\"cannot get the total\");\r\n    }\r\n};",
	"supershoes": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings;\r\n\r\n        var success = $('p.coupon_message_success:contains(\"' + code + '\")', responseHTML).length > 0;\r\n\r\n        if (success) {\r\n            savings = $('span#discount', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        }\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n\r\n    complete: function()\r\n    {\r\n        location.reload();\r\n    }\r\n};",
	"superstartickets": "var ExternalProvider = {\r\n    serializeObject: function serializeObject(a) {\r\n        var o = {};\r\n        $.each(a, function () {\r\n            o[this.name] = this.value || '';\r\n        });\r\n        return o;\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type == 'applyCouponUrl' || type == 'clearCouponUrl') {\r\n            var data = this.serializeObject($('#aspnetForm').serializeArray());\r\n            data.ctl00$C2ContentPlaceHolder$DiscountCodeTextBox = code;\r\n            if(type == 'clearCouponUrl'){\r\n                data.ctl00$C2ContentPlaceHolder$DiscountCodeTextBox = \"XXXX\";\r\n            }\r\n\r\n            return data;\r\n        }\r\n\r\n        return null\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var discountHTML = $(response.controls['ctl00$C2ContentPlaceHolder$DiscountYTableRowValue']);\r\n        var savings = parseFloat($('span span', discountHTML).html().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n};",
	"superstartickets.mobile": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"supplementhunt": "var ExternalProvider = {\r\n    couponUsageId: '',\r\n    prepare: function (type, code) {\r\n        if (type !== 'clearCouponUrl') return null;\r\n        return {\r\n            _token: $('input[name=\"_token\"]').val(),\r\n            couponUsageId: this.couponUsageId\r\n        }\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response.responseText);\r\n        this.couponUsageId = $('input[name=\"couponUsageId\"]', responseHTML).val();\r\n        var savings = parseFloat($('.cart-subtotal:contains(' + code + ') .required', responseHTML).text().replace(\/[^0-9.]\/g, \"\"));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"suppliesoutlet": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        \/\/ If data needs to be prepared\r\n        if (type == 'applyCouponUrl') {\r\n\r\n            var data = {\r\n                'btnCouponCode.x': 23,\r\n                'btnCouponCode.y': 5,\r\n            };\r\n\r\n            $('form[name=\"form\"]').find('input[type=\"text\"]').each(function () {\r\n                data[$(this).attr('name')] = $(this).val();\r\n            });\r\n\r\n            data.CouponCode = code;\r\n            return data;\r\n        }\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('.v65-cart-details-font', responseHTML).length > 0;\r\n\r\n\r\n        if (codeFound) {\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = parseFloat($('#v65-cart-total-estimate-cell b').text().replace(\/[^0-9|\\.]\/g, '')),\r\n                newPrice = parseFloat($('#v65-cart-total-estimate-cell b', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')),\r\n                savings = (oldPrice - newPrice);\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#v65-cart-coupon-entry-details-input').val(bestCode);\r\n            $('#v65-cart-coupon-entry-details-button').click();\r\n        }\r\n    }\r\n};",
	"surefit": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var str = $('.reduction-code__text:contains(\"-$\")', responseHTML).text();\r\n    var pos = str.indexOf('(') + 1;\r\n\r\n    str = str.slice(pos, str.lastIndexOf(')'));\r\n\r\n    var savings = parseFloat(str.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('button[data-trekkie-id=\"apply_discount_button\"]').prop('disabled', false).click();\r\n    }\r\n  }\r\n};",
	"surlatable": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('div.orderSumPromoPrice', responseHTML).html().replace('$', '').replace('(', '').replace(')', ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings) {\r\n\t\t\r\n        location.reload(true);\r\n\r\n    }\r\n    \r\n}",
	"suzannesomers": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings1 = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings2 = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().split(\"$\")[1]);\r\n    var savings = Number.isNaN(savings1) ? (savings2) : savings1;\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"swansonvitamins": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('#cartHeading').text().replace(\/[A-z.0-9.():,]\/g, '').trim()\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (selector === \"\u20ac\") {\r\n            locale = localeMapping['FR'];\r\n            currency = \"EUR\";\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('p:contains(\"-$\")', responseHTML).eq(0).text().replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#fldPromoCode2').val(bestCode);\r\n            $('button[name=\"promoCodeSubmit\"]').click();\r\n        }\r\n    }\r\n};",
	"swap": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = $('.payment-container-subtotal strong:eq(0)').text().replace(\/[^0-9|.]\/g, '');\r\n        var newPrice = $('.payment-container-subtotal strong:eq(0)', responseHTML).first().text().replace(\/[^0-9|.]\/g, '');\r\n        var savings = parseFloat(oldPrice - newPrice);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discount-input').val(bestCode);\r\n            $('.apply-discount-code').click();\r\n        }\r\n    }\r\n};",
	"swarovski": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n    if (type === 'applyCouponUrl') {\r\n\r\n      data = {\r\n        voucherCode: code,\r\n        CSRFToken: JSON.parse(window.sessionStorage.CSRFTokenInfo).token\r\n      }\r\n    }\r\n\r\n    return data;\r\n  },\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping['US'];\r\n    var selector = $('.country-locator-entry__text:eq(0)').text().replace(\/[0-9.,]\/g, '').trim();\r\n\r\n    switch (selector) {\r\n      case \"United Kingdom\":\r\n        locale = localeMapping['GB'];\r\n        currency = \"GBP\";\r\n        break;\r\n      case \"Germany\":\r\n        locale = localeMapping['DE'];\r\n        currency = \"EUR\";\r\n        break;\r\n      case \"France\":\r\n        locale = localeMapping['FR'];\r\n        currency = \"EUR\";\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n\r\n    var oldTotal = parseFloat($('#cartSummary .headline.headline--hl6:eq(1)').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('#cartSummary .headline.headline--hl6:eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"sweatybetty": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.row.order-discount.discount .columns.small-6', responseHTML).eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_billing_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"swimoutlet": "var ExternalProvider = {\r\n    parse: function (response) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.txt-c-green', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#txtCouponCode').val(bestCode);\r\n            $('#applyGiftCode').click();\r\n        }\r\n    }\r\n\r\n};",
	"swimspot": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var respHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount', respHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        if (!$('.cart-promos_remove', respHTML).length < 1) {\r\n            var remCoupLnk = $('.cart-promos_remove', respHTML).attr('href');\r\n\r\n            $.ajax({ url: remCoupLnk, type: 'GET', async: false });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $.ajax({\r\n                url: 'https:\/\/www.swimspot.com\/cart\/promotions\/apply\/',\r\n                type: 'POST',\r\n                async: false,\r\n                data: {\r\n                    csrfmiddlewaretoken: $('input[name=\"csrfmiddlewaretoken\"]').val(),\r\n                    code: bestCode\r\n                },\r\n                complete: function () {\r\n                    location.reload();\r\n                }\r\n            });\r\n        }\r\n    }\r\n};",
	"swimsuitsdirect": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($(\".order-summary__emphasis:contains('- $')\", responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('#checkout_reduction_code').get(0).dispatchEvent(new Event('input', { bubbles: true, cancelable: true }));\r\n      $('button[data-trekkie-id=\"apply_discount_button\"]').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  }\r\n};",
	"swimsuitsforall": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.cart-order-total').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.cart-order-total', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[name=\"couponCode\"]').val(bestCode);\r\n      $('.couponButton span').click();\r\n    }\r\n  }\r\n};",
	"swissdiamond": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var selector = \"#shopping-cart-totals-table .price:last\";\r\n        var oldPrice = parseFloat($(selector).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newPrice = parseFloat($(selector, responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if(bestCode){\r\n            location.reload()\r\n        }\r\n    }\r\n};",
	"sylvane": "var ExternalProvider = {\r\n\r\n    _totalBeforeDiscount: 0.00,\r\n    \r\n    prepare: function(action, code) {\r\n\r\n        if (action === 'applyCouponUrl' || action === 'clearCouponUrl') {\r\n            this._totalBeforeDiscount = parseFloat($('#cart__summary__order_total').attr('data-price'));\r\n            return { promo_code: code };\r\n        } else if (action === 'clearCouponUrl') {\r\n            return { promo_code: code };\r\n        }\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        if (response && response.shopping_cart && response.shopping_cart.order_total) {\r\n            var savings = parseFloat(this._totalBeforeDiscount - response.shopping_cart.order_total);\r\n            if (savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n        \r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n};",
	"szul": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    prepare: function (type, code) {\r\n        var form = $('div.mycart-total-price-mob.visible-xs.visible-sm').next().clone();\r\n        if(type === \"applyCouponUrl\"){\r\n            form.find('input[name=\"couponCode\"]').val(code);\r\n            this.addHiddenValue(form, 'action', 'ApplyCoupon');\r\n            return form.serialize();\r\n        } else if(type === \"clearCouponUrl\"){\r\n            this.addHiddenValue(form, 'action', 'RemoveCoupon');\r\n            return form.serialize();\r\n        }\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsText = $('span:contains(\"(-\")', responseHTML).text();\r\n        var savings = parseFloat(savingsText.replace(this.nonPriceRegex, ''));\r\n        if(savings > 0){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSavings) {\r\n        location.reload(true);\r\n    },\r\n\r\n    addHiddenValue: function (form, name, value) {\r\n        $('<input>').attr({\r\n            type: 'hidden',\r\n            name: name,\r\n            value: value\r\n        }).appendTo(form);\r\n    },\r\n};",
	"t3micro": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.add-promo-code add-promo-code-slide').click();\r\n            $('#coupon_code').val(bestCode);\r\n            window.location.href = 'javascript:discountForm.submit(false)';\r\n        }\r\n    }\r\n};",
	"tafford": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        var responseHTML = $(response.review_html);\r\n        var savings = parseFloat($('#checkout-review-table > tfoot > tr:eq(1) > td:eq(1) > span.price', responseHTML[0]).html().replace('-', '').replace('$', ''));\r\n        \r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n        \r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n};",
	"tahariasl": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"tailorstorede": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var getAmount = response.html.match('class=\"minusPrice\">(.*)&nbsp;&euro');\r\n        var savings = parseFloat(getAmount[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tailorstorefr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var getAmount = response.html.match('class=\"minusPrice\">(.*)&nbsp;&euro');\r\n        var savings = parseFloat(getAmount[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tailorstore": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat($('.priceColumn:contains(-)', response.html).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"takko": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $(response);\r\n    var oldTotal = parseFloat($('.order-value:contains(\"\u20ac\")').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('.order-value:contains(\"\u20ac\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"talbots": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat(responseHTML[0].innerText.split('-')[1].replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"taldepot": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('tr.summary-total .a-right', responseHTML).text().replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tamaramellon": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"tanga": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        \r\n        var savings = parseFloat($('.coupon_code_container', responseHTML).next().find('.text-pebble').text().replace(\/[^0-9|\\.]\/g, ''));\r\n        if(savings){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        location.reload(true);\r\n    }\r\n};",
	"target": "var ExternalProvider = {\r\n    $: window.$piggyJq || window.$,\r\n\r\n    init: function () {\r\n        this.$.ajaxSetup({\r\n            xhrFields: {\r\n                withCredentials: true\r\n            }\r\n        });\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        var data = {\r\n            offerType: 'promocode',\r\n            offerCodes: [code]\r\n        };\r\n\r\n        if (type !== 'resultUrl') {\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var result = response.response;\r\n\r\n        var success = false;\r\n\r\n        if (result.summary.coupons[0].description === 'APPLIED') success = true;\r\n\r\n        var savings = result.summary.totalAdjustment;\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"targetoptical": "var ExternalProvider = {\r\n    origPrice: '',\r\n    prepare: function (type) {\r\n        var data = {};\r\n        var storeID = $('#storeID').val();\r\n        var catalogID = $('#catalogId').val();\r\n        var langId = $('#langId').val();\r\n        \r\n        var formData = {\r\n            storeId: storeID,\r\n            catalogId: catalogID,\r\n            langId: langId,\r\n            orderId: '.',\r\n            calculationUsage: '-1,-2,-3,-4,-5,-6,-7'\r\n        };\r\n\r\n        if (type === 'resultUrl') {\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: 'https:\/\/www.targetoptical.com\/webapp\/wcs\/stores\/servlet\/AjaxOrderChangeServiceItemUpdate',\r\n                cache: false,\r\n                data: formData,\r\n                contentType: 'application\/x-www-form-urlencoded'\r\n            });\r\n\r\n            data = {\r\n                storeId: $('input[name=\"storeId\"]').val(),\r\n                catalogId: $('input[name=\"catalogId\"]').val(),\r\n                langId: $('input[name=\"langId\"]').val()\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_2').text().replace(\/[^0-9.]\/g, ''));\r\n        var newPrice = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_promotion_01-glass', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tartecosmetics": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount-value', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tascperformance": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td.total-line__price  span.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) $('#checkout_reduction_code').val(bestCode).closest('form').submit();\r\n    }\r\n};",
	"taskrabbit": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var ApplyUrl = 'https:\/\/www.taskrabbit.com\/api\/v3\/promotions\/valid.json?';\r\n\r\n        ApplyUrl = ApplyUrl + 'uid=' + JSON.parse(localStorage.getItem('tr-post-data')).identifier;\r\n        ApplyUrl = ApplyUrl + '&funnel_id=' + JSON.parse(localStorage.getItem('tr-post-data')).attributes.funnel_id;\r\n        ApplyUrl += '&job_type=Template';\r\n        ApplyUrl = ApplyUrl + '&job_draft_guid' + JSON.parse(localStorage.getItem('tr-post-data')).attributes.job_draft_guid;\r\n        ApplyUrl += '&form_referrer=homepage_v2_hero_buttons';\r\n        ApplyUrl = ApplyUrl + '&task_template_id=' + JSON.parse(localStorage.getItem('tr-post-data')).attributes.taskTemplate.id;\r\n        ApplyUrl = ApplyUrl + '&invitee_id=' + JSON.parse(localStorage.getItem('tr-post-data')).attributes.invitee.id;\r\n        ApplyUrl = ApplyUrl + '&category_id=' + JSON.parse(localStorage.getItem('tr-post-data')).attributes.category_id;\r\n        ApplyUrl = ApplyUrl + '&category_name=' + JSON.parse(localStorage.getItem('tr-post-data')).attributes.category_name;\r\n        ApplyUrl = ApplyUrl + '&marketing_group_id=' + JSON.parse(localStorage.getItem('tr-post-data')).attributes.marketing_group_id;\r\n        ApplyUrl = ApplyUrl + '&title=' + JSON.parse(localStorage.getItem('tr-post-data')).attributes.title;\r\n        ApplyUrl += '&vehicle_requirement=none&intent_level=high&code=CLAIMCODE';\r\n\r\n        var ApplyUrlInput = $('#___jpApplyUrl');\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('input');\r\n            ApplyUrlInput.id = '___jpApplyUrl';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        ApplyUrlInput.attr('value', ApplyUrl);\r\n    },\r\n    parse: function (response) {\r\n        var savingsString = response.promotion.formatted_value;\r\n        var savings = parseFloat(savingsString.replace('$', ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('.js-reveal-promoCodeField:eq(0)').get(0).dispatchEvent(clickEvent);\r\n            $('input[name=\"job.promotion_code\"]').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('input[name=\"job.promotion_code\"]').get(0).dispatchEvent(changeEvent);\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"tassimode": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n\r\n    prepare: function (action, code) {\r\n        var formData = $('form[name=\"cartForm\"]').serializeObject();\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                promotionCode: code,\r\n                promotionCodes: code,\r\n                applyPromotion: '',\r\n                cartState: 'cart',\r\n                workingTemplateOnly: true\r\n            });\r\n        } else {\r\n            formData = Object.assign(formData, {\r\n                deletePromotion: code,\r\n                cartState: 'cart',\r\n                workingTemplateOnly: true\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.ish-costSummary-totalItem .ish-costSummary-item-value').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newPrice = parseFloat($('.ish-costSummary-totalItem .ish-costSummary-item-value', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tastemade": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $(\"button[data-trekkie-id='apply_discount_button']\").removeAttr('disabled');\r\n      $(\"button[data-trekkie-id='apply_discount_button']\").removeClass('btn--disabled');\r\n      $(\"button[data-trekkie-id='apply_discount_button']\").click();\r\n    }\r\n  }\r\n};",
	"tatcha": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                dwfrm_cart_shipments_i0_items_i0_quantity: $('select[name=\"dwfrm_cart_shipments_i0_items_i0_quantity\"]').val(),\r\n                liuuid: $('input[name=\"liuuid\"]').val(),\r\n                everyDelivery: $('input[name=\"everyDelivery\"]').val(),\r\n                dwfrm_smartorderrefill_OsfSorSmartOrderRefillInterval: $('select[name=\"dwfrm_smartorderrefill_OsfSorSmartOrderRefillInterval\"]').val(),\r\n                dwfrm_cart_couponCode: code,\r\n                dwfrm_cart_addCoupon: $('button[name=\"dwfrm_cart_addCoupon\"]').val(),\r\n                csrf_token: $('input[name=\"csrf_token\"]:eq(0)').val()\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.table tr:nth-child(2) td:nth-child(2)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"tatesbakeshop": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tati": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#cart_total .main_table:eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, '') \/ 100);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tatifr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#cart_total .main_table td:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, '') \/ 100);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"taylorgifts": "var ExternalProvider = {\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('.totalrow.ti-you-saved span', responseHTML).text().toLowerCase().indexOf(\"You Saved\".toLowerCase()) >= 0;\r\n\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('.totalrow.grandtotal span').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('.totalrow.grandtotal span', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"taylormadegolf": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            if (this.isCartPage()) {\r\n                data = {\r\n                    csrf_token: $('input[name=\"csrf_token\"]').val(),\r\n                    dwfrm_cart_couponCode: code,\r\n                    dwfrm_cart_addCoupon: 'dwfrm_cart_addCoupon'\r\n                };\r\n            } else {\r\n                data = {\r\n                    csrf_token: $('input[name=\"csrf_token\"]').val(),\r\n                    dwfrm_billing_couponCode: code,\r\n                    dwfrm_billing_applyCoupon: 'dwfrm_billing_applyCoupon'\r\n                };\r\n            }\r\n        }\r\n\r\n        return data;\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.label:contains(\"Order Total:\"):eq(0)').next().text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.label:contains(\"Order Total:\"):eq(0)', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"tbdress": "var ExternalProvider = {\r\n  init: function () {\r\n    this.oldTotal = $('span#spanOriginalTotalPrice').text().replace(\/[^0-9.]\/g, '') \/ 100;\r\n  },\r\n  prepare: function (action, code) {\r\n    if (action === 'injectCoupon') {\r\n      $('#textCoupon').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#textCoupon').trigger('input').trigger('change');\r\n      $('#btnCoupon').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    setTimeout(function () {\r\n      var maxWait = 200,\r\n        waited = 0;\r\n      var selector = $('#textCoupon').length;\r\n      var waitForClose = setInterval(function () {\r\n        var confirmed = step === 'injectCoupon' ? selector : !selector;\r\n\r\n        if ((confirmed) || (waited > maxWait)) {\r\n          clearInterval(waitForClose);\r\n          setTimeout(function () {\r\n            next();\r\n          }, 500);\r\n        }\r\n\r\n        waited++;\r\n      }, 10);\r\n    }, 50);\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('span#spanCouponDiscountPrice').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#textCoupon').val(bestCode);\r\n      $('#btnCoupon').click();\r\n    }\r\n  }\r\n};",
	"tchibo": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var o = {};\r\n      var a = this.serializeArray();\r\n\r\n      $.each(a, function () {\r\n        if (o[this.name] !== undefined) {\r\n          if (!o[this.name].push) {\r\n            o[this.name] = [o[this.name]];\r\n          }\r\n\r\n          o[this.name].push(this.value || '');\r\n        } else {\r\n          o[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return o;\r\n    };\r\n  },\r\n  __prepareUrl: function () {\r\n    var applyUrlInput = $('#__applyUrl');\r\n    var applyUrl = $('#basketForm').length ? $('#basketForm').attr('action') : $('form[method=\"post\"]').attr('action');\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__applyUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__applyUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var basketForm = $('#basketForm');\r\n\r\n    if (!basketForm.length) {\r\n      basketForm = $('form[method=\"post\"]');\r\n    }\r\n\r\n    basketForm = basketForm.serializeObject();\r\n\r\n    if (location.pathname.match('cart') && type === 'applyCouponUrl') {\r\n      basketForm = Object.assign(basketForm, {\r\n        'wsacAndGiftCardInput:r:1:r:cr:1:c:pr:3:m:r:1:r:cr:1:c:pr:1:container:fs:inputAndLabel:c:i:input': code,\r\n        'wsacAndGiftCardInput:r:1:r:cr:1:c:pr:3:m:r:1:r:cr:1:c:pr:2:button': 'Einl\u00f6sen'\r\n      });\r\n    } else if (location.pathname.match('checkout') && type === 'applyCouponUrl') {\r\n      basketForm = Object.assign(basketForm, {\r\n        'grr:r:10:r:1:r:cr:1:c:pr:3:m:r:1:r:cr:1:c:pr:1:container:fs:inputAndLabel:c:i:input': code,\r\n        'grr:r:10:r:1:r:cr:1:c:pr:3:m:r:1:r:cr:1:c:pr:2:button': 'Einl\u00f6sen'\r\n      });\r\n    }\r\n\r\n    return basketForm;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('dd.h-tp-color--cartamount strong').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('dd.h-tp-color--cartamount strong', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"teamexpress": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n\tif(response && response.discountTotalCents) {\r\n\t\tvar savings = parseFloat(response.discountTotalCents\/100);\r\n\t\tif(savings > 0){\r\n\t\t\treturn {\r\n\t\t            success: true,\r\n\t\t            savings: savings\r\n\t\t        }\r\n\t        }\r\n\t}\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode,bestSavings){\r\n        $('#checkoutPromoCodeInput').val(bestCode);\r\n        $('#applyPromoCodeButton').click();\r\n    }\r\n}",
	"teavana": "var ExternalProvider={\r\n     parse: function(response,status,$xhr,code){\r\n        var jqObj = $.parseHTML(response.responseText)\r\n        if(this.isCouponApplied(jqObj,code)){\r\n            var discount = $('.orderdiscounts',jqObj).find('.value2').text().replace(\/[^0-9|\\.]\/g,'')\r\n            if(discount){\r\n                return{\r\n                    success:true,\r\n                    savings:parseFloat(discount)\r\n                }\r\n            }\r\n        }\r\n        return{\r\n            success:false,\r\n            savings:0.00\r\n        }\r\n    },\r\n    isCouponApplied:function(jqObj,code){\r\n        var promoCodeString =$('.pcode',jqObj).text().replace(\/(.*\\: )|\\s\/g,'')\r\n        return (code==promoCodeString)\r\n    },\r\n    complete: function(bestCode,bestSavings){\r\n        location.reload()\r\n    }\r\n}",
	"teavana.mobile": "var ExternalProvider={\r\n     parse: function(response,status,$xhr,code){\r\n        var jqObj = $.parseHTML(response.responseText)\r\n        if(this.isCouponApplied(jqObj,code)){\r\n            var discount = $('.orderdiscounts',jqObj).find('.value2').text().replace(\/[^0-9|\\.]\/g,'')\r\n            if(discount){\r\n                return{\r\n                    success:true,\r\n                    savings:parseFloat(discount)\r\n                }\r\n            }\r\n        }\r\n        return{\r\n            success:false,\r\n            savings:0.00\r\n        }\r\n    },\r\n    isCouponApplied:function(jqObj,code){\r\n        var promoCodeString =$('.pcode',jqObj).text().replace(\/(.*\\: )|\\s\/g,'')\r\n        return (code==promoCodeString)\r\n    },\r\n    complete: function(bestCode,bestSavings){\r\n        location.reload()\r\n    }\r\n}",
	"tech21": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        let locale;\r\n\r\n        if (location.pathname.match('_de')) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (location.pathname.match('_gb')) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (location.pathname.match('_fr')) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['FR'];\r\n        } else {\r\n            locale = localeMapping['US'];\r\n        }\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: currency, minimumFractionDigits: 2 });\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0.00;\r\n        var data = {\r\n            remove: 0,\r\n            coupon_code: code\r\n        };\r\n        $.ajax({\r\n            url: 'https:\/\/www.tech21.com\/en_gb\/checkout\/cart\/couponPost\/',\r\n            mode: 'POST',\r\n            data: data,\r\n            success: function (result) {\r\n                savings = parseFloat(result.match('discount_amount\":\"-(.*)base_discount_amount\":\"-')[0].replace(\/[^0-9|.]\/g, ''));\r\n            },\r\n            async: false\r\n        });\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#promo-code-btn').click();\r\n        }\r\n    }\r\n};",
	"techarmor": "var ExternalProvider = {\r\n    jp_entity_id: '',\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"jp_entity_id\", window.checkoutConfig.quoteData.entity_id);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('jp_entity_id');\r\n\r\n        this.jp_entity_id = value;\r\n    },\r\n    isCartPage: function () {\r\n        return \/checkout\\\/cart\/.test(location.href);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0;\r\n        var oldTotal = $('.price:contains(\"-\")') ? parseFloat($('.price:contains(\"-\")').text().replace(\/[^.0-9|]\/g, '')) : 0;\r\n        var newTotal = 0;\r\n\r\n        if (this.isCartPage()) {\r\n            newTotal = parseFloat(response.responseText.match('discount_amount\":\"-(.*)base_discount_amount\":\"-')[1]);\r\n            savings = newTotal - oldTotal;\r\n        } else {\r\n            $.ajax({\r\n                url: 'https:\/\/techarmor.com\/rest\/default\/V1\/guest-carts\/' + this.jp_entity_id + '\/coupons\/' + code,\r\n                type: 'PUT',\r\n                async: false\r\n            });\r\n\r\n            $.ajax({\r\n                url: 'https:\/\/techarmor.com\/rest\/default\/V1\/guest-carts\/' + this.jp_entity_id + '\/payment-information?_=' + Date.now(),\r\n                type: 'GET',\r\n                success: function (result) {\r\n                    newTotal = parseFloat(result.totals.discount_amount * -1);\r\n                    savings = newTotal - oldTotal;\r\n                },\r\n                async: false\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('#coupon_code').val(bestCode);\r\n                $('button[value=\"Apply Discount\"]').click();\r\n            } else {\r\n                $('#discount-code').val(bestCode);\r\n\r\n                var changeEvent = new Event('change', {\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n\r\n                $('#discount-code').get(0).dispatchEvent(changeEvent);\r\n\r\n                var clickEvent = new MouseEvent('click', {\r\n                    view: window,\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n\r\n                $('button[value=\"Apply Discount\"]').get(0).dispatchEvent(clickEvent);\r\n            }\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"techinthebasket": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var getAmount = response.match('base_discount_amount\":\"-(.+)\",\"grand_total');\r\n    var savings = parseFloat(getAmount[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"techrabbit": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.a-right', responseHTML).filter(function(){\r\n            return $(this).text().indexOf('Discount') > -1;\r\n        }).next('.a-right');\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = parseFloat($savings.text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            if(savings > 0.00){\r\n                return {\r\n                    success: true,\r\n                    savings: parseFloat(savings)\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"teeoff": "var ExternalProvider = {\r\n  init: function () {\r\n    if ($('.promo-remove-area').length) {\r\n      $.ajax({\r\n        url: 'https:\/\/www.teeoff.com\/Cart\/RemovePromoCode?',\r\n        type: 'GET',\r\n        async: false\r\n      });\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHtml = $.parseHTML(response);\r\n    var savings = parseFloat($('#promoDiscount', responseHtml).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    $('#input-promo-cod').val(bestCode);\r\n    $('#apply-promo-code').click();\r\n  }\r\n};",
	"teleflora": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.m-shopping-cart-grand-total-d-fix .youSavedAmountLbl', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"tello": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"temptu": "var ExternalProvider = {\r\n\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.a-right span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"tendencio": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:eq(1):contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tennisexpress": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#orderTotals:eq(1) tr:eq(4) .right', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"tennispoint": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = $('.couponData td', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '') \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"voucherNr\"]').val(bestCode);\r\n            $('.submitButton').click();\r\n        }\r\n    }\r\n};",
	"tenstickers": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = response.discount;\r\n        var savings = parseFloat(responseHTML);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.glyphicon.glyphicon-chevron-down:eq(2)').click();\r\n            $('#voucher-code').val(bestCode);\r\n            $('#voucher-code-btn').click();\r\n        }\r\n    }\r\n};",
	"territoryahead": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        \r\n        var savings = 0.0;\r\n        var codeFound = $('.couponerror',responseHTML).text().toLowerCase().indexOf(\"Success\".toLowerCase()) >= 0;\r\n        \r\n        \r\n        var result;\r\n\r\n        \r\n        if(codeFound) {\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            \r\n            $(\".frmCartStyle .row\",responseHTML).each(function(i,el){\r\n                if($(el).text().toLowerCase().indexOf(\"Savings\".toLowerCase()) >= 0){\r\n                \r\n                    savings = Number($(el).children(\".info-user\").text().replace(\/[^0-9|\\.]\/g, ''));\r\n                }\r\n            \r\n            });\r\n            \r\n        }\r\n        \r\n        return {\r\n                success: codeFound,\r\n                savings: savings\r\n            }\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\r\n        $('input[name=\"COUPON\"]').val(bestCode);\r\n        \r\n        $('form[name=\"frmCoupon\"]').submit();\r\n              \r\n\r\n    }\r\n    \r\n}",
	"tervis": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n\r\n        function serializeObject(a) {\r\n            var o = {};\r\n            $.each(a, function() {\r\n                o[this.name] = this.value || '';\r\n            });\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('#cart-items-form').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n        data['dwfrm_cart_updateCart'] = 'dwfrm_cart_updateCart:dwfrm_cart_updateCart';\r\n        data['cartAction'] = 'add';\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data['dwfrm_cart_couponCode'] = code;\r\n            data['dwfrm_cart_addCoupon'] = 'dwfrm_cart_addCoupon';\r\n        } else {\r\n            data['dwfrm_cart_coupons_i0_deleteCoupon'] = 'Remove';\r\n            data['dwfrm_cart_couponCode'] = '';\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = $('.order-total .align-right').text().replace(\/[^0-9|\\.]\/g, '');\r\n        var newTotal = $('.order-total .align-right', responseHTML).text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if(savings > 0.00){\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n};",
	"testclear": "function serializeObject(a) {\r\n    var o = {};\r\n    $.each(a, function() {\r\n        o[this.name] = this.value || '';\r\n    });\r\n    return o;\r\n}\r\n\r\nvar ExternalProvider = {\r\n    prepare: function(type, code){\r\n\r\n        var formDataArray = $('#aspnetForm').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data['ctl00$ctl00$NestedMaster$PageContent$PaymentWidget$CouponCode'] = code;\r\n            data['ctl00$ctl00$NestedMaster$PageContent$PaymentWidget$ApplyCouponButton'] = 'Apply';\r\n        } else {\r\n            delete data['ctl00$ctl00$NestedMaster$PageContent$PaymentWidget$CouponCode'];\r\n            delete data['ctl00$ctl00$NestedMaster$PageContent$PaymentWidget$ApplyCouponButton'];\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('#ctl00_ctl00_NestedMaster_PageContent_BasketTotalSummary1_Coupons', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"teva": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var applyUrlInput = jQuery('#__jpCouponUrl');\r\n        var applyUrl;\r\n\r\n        if (jQuery('#cart-items-form').length) {\r\n            applyUrl = $('#cart-items-form').attr('action');\r\n        } else {\r\n            var urlParams = new URLSearchParams(location.search);\r\n\r\n            applyUrl = 'https:\/\/www.teva.com\/cart?dwcont=' + urlParams.get('dwcont');\r\n        }\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = jQuery('#__jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsText = $('.order-discount-amount', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        var savings = parseFloat(savingsText);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings || 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        location.reload();\r\n    }\r\n\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"tezenisde": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrl;\r\n    var resultUrl;\r\n\r\n    if (!this.isCheckout()) {\r\n      applyUrl = 'https:\/\/de.tezenis.com\/checkout\/update_items_in_order.cmd';\r\n      resultUrl = 'https:\/\/de.tezenis.com\/checkout\/update_items_in_order.cmd';\r\n    } else {\r\n      applyUrl = 'https:\/\/de.tezenis.com\/checkout\/update_promo_code_ajax.cmd';\r\n      resultUrl = 'https:\/\/de.tezenis.com\/checkout\/includes\/order_summary_include_wrapper.jsp';\r\n    }\r\n\r\n    if ($('input[name=\"__jpApplyUrl\"]').length === 0) {\r\n      $('body').append('<input type=\"hidden\" name=\"__jpApplyUrl\" value=\"' + applyUrl + '\" \/>');\r\n      $('body').append('<input type=\"hidden\" name=\"__jpResultUrl\" value=\"' + resultUrl + '\" \/>');\r\n    }\r\n  },\r\n  isCheckout: function () {\r\n    return location.pathname === '\/checkout\/payment.jsp';\r\n  },\r\n  prepare: function (type, code) {\r\n    var oApplyUrlData = null;\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      oApplyUrlData = {\r\n        form_state: 'updatePromoCodeForm',\r\n        promoCode: code,\r\n        delete: false,\r\n        pipelineFreezed: $('input[name=\"pipelineFreezed\"]').val()\r\n      };\r\n\r\n      if (!this.isCheckout()) {\r\n        $('#promoCode').val(code);\r\n        $('input[name=\"checkoutAction\"]').val(4);\r\n        oApplyUrlData = $('form[name=\"basket_body\"]').serializeArray();\r\n      }\r\n    }\r\n\r\n    return oApplyUrlData;\r\n  },\r\n  parse: function (response) {\r\n    var oldTotal;\r\n    var newTotal;\r\n\r\n    if (!this.isCheckout()) {\r\n      oldTotal = parseFloat($('#estimated-grand-total').text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n      newTotal = parseFloat($('#estimated-grand-total', $.parseHTML(response)).text().replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n    } else {\r\n      oldTotal = parseFloat($('div.total-price-wrapper div.value').text().split('\u20ac')[0].replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n      newTotal = parseFloat(response.match(\/nowrap\">.*\/g)[0].replace(',', '.').replace(\/[^0-9.]\/g, ''));\r\n    }\r\n\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCode').val(bestCode);\r\n      $(\"input[value='add']\").click();\r\n    }\r\n  }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"tfnclondon": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('a[data-target-element=\"#header-currency\"]').text().trim().replace(\/[A-Z.0-9,]\/g, '');\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n        else if (selector === \"$\") {\r\n            currency = 'USD';\r\n            locale = localeMapping['US'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tgw-desktop": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#WC_SingleShipmentOrderTotalsSummary_td_12', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if(bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"thalia": "var ExternalProvider = {\r\n    origPrice: 0,\r\n    init: function () {\r\n        this.origPrice = parseFloat($('.ncFooterItem .oPrice').text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newPrice = parseFloat($('.ncFooterItem .oPrice', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        var savings = this.origPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"theapollobox": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.cart.couponSave) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"theartofshaving": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar savings = parseFloat($('#discount-total', responseHTML).text().replace('$', '').replace('-', '').trim());\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n}",
	"thebay": "jQuery.fn.extend({\r\n    getSerializedArray: function () {\r\n        var form_array = $(this).serializeArray();\r\n        var data = {};\r\n\r\n        $.each(form_array, function () {\r\n            data[this.name] = this.value || '';\r\n        });\r\n\r\n        return data;\r\n    }\r\n});\r\n\r\nvar ExternalProvider = {\r\n    oldCartPrice: 0,\r\n    init: function () {\r\n        var price = $('#estimateTotalCharges').text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n        if (price) {\r\n            this.oldCartPrice = parseFloat(price);\r\n        }\r\n\r\n        if (isNaN(this.oldCartPrice)) {\r\n            this.oldCartPrice = 0;\r\n        }\r\n    },\r\n    prepare: function (requestType, code) {\r\n        if (requestType != 'resultUrl') {\r\n            var form_data = $('#applyPromoCode2').getSerializedArray();\r\n\r\n            form_data.promoCode = code;\r\n            form_data.requesttype = 'ajax';\r\n            form_data.taskType = requestType == 'applyCouponUrl' ? 'A' : 'R';\r\n\r\n            return form_data;\r\n        }\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var jqObj = $.parseHTML(response.responseText);\r\n        var newPrice = parseFloat($('#estimateTotalCharges', jqObj).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var savings = this.oldCartPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promoCode').val(bestCode);\r\n            $('#WC_PromotionCodeDisplay_links_1').get(0).click();\r\n        }\r\n    }\r\n};",
	"thebay.mobile": "jQuery.fn.extend({\r\n    getSerializedArray: function () {\r\n        var form_array = $(this).serializeArray();\r\n        var data = {};\r\n\r\n        $.each(form_array, function () {\r\n            data[this.name] = this.value || '';\r\n        });\r\n\r\n        return data;\r\n    }\r\n});\r\n\r\nvar ExternalProvider = {\r\n    oldCartPrice: 0,\r\n    init: function () {\r\n        var price = $('#estimateTotalCharges').text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n        if (price) {\r\n            this.oldCartPrice = parseFloat(price);\r\n        }\r\n\r\n        if (isNaN(this.oldCartPrice)) {\r\n            this.oldCartPrice = 0;\r\n        }\r\n    },\r\n    prepare: function (requestType, code) {\r\n        if (requestType != 'resultUrl') {\r\n            var form_data = $('#applyPromoCode2').getSerializedArray();\r\n\r\n            form_data.promoCode = code;\r\n            form_data.requesttype = 'ajax';\r\n            form_data.taskType = requestType == 'applyCouponUrl' ? 'A' : 'R';\r\n\r\n            return form_data;\r\n        }\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var jqObj = $.parseHTML(response.responseText);\r\n        var newPrice = parseFloat($('#estimateTotalCharges', jqObj).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var savings = this.oldCartPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promoCode').val(bestCode);\r\n            $('#WC_PromotionCodeDisplay_links_1').get(0).click();\r\n        }\r\n    }\r\n};",
	"thebodyshop": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        let locale;\r\n\r\n        if (location.pathname.match(\/de-de\/g)) {\r\n            locale = localeMapping['DE'];\r\n            currency = 'EUR';\r\n        } else if (location.pathname.match(\/en-gb\/g)) {\r\n            locale = localeMapping['GB'];\r\n            currency = 'GBP';\r\n        } else if (location.pathname.match(\/fr-fr\/g)) {\r\n            locale = localeMapping['FR'];\r\n            currency = 'EUR';\r\n        } else {\r\n            locale = localeMapping['US'];\r\n        }\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: currency, minimumFractionDigits: 2 });\r\n    },\r\n    prepareUrl: function () {\r\n        var applyUrlInput = $('#___applyUrl');\r\n        var clearUrlInput = $('#___clearUrl');\r\n        var applyUrl = location.href + '\/addPromoCode';\r\n        var clearUrl = location.href + '\/removePromoCode';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___applyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___applyUrl');\r\n        }\r\n\r\n        if (!clearUrlInput.length) {\r\n            clearUrlInput = document.createElement('input');\r\n            clearUrlInput.id = '___clearUrl';\r\n            clearUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n            clearUrlInput = $('#___clearUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n        clearUrlInput.attr('value', clearUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type !== 'clearCouponUrl') {\r\n            return null;\r\n        }\r\n\r\n        var CSRFToken = $('.promocode-container input[name=\"CSRFToken\"]').val();\r\n        var promoCode = code.toLowerCase();\r\n        var data = {\r\n            CSRFToken: CSRFToken,\r\n            promoCode: promoCode\r\n        };\r\n\r\n        data['remove-' + promoCode] = '';\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = parseFloat($('.promo-amount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\n\r\nExternalProvider.prepareUrl();",
	"thebookofeveryone": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.data.discount * -1);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"conranshop": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ewm": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n    var script = document.createElement('script');\r\n\r\n    scriptContent += 'body.setAttribute(\"formKey\", window.ewmgCheckoutConfig.formKey);';\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var formKey = $('body').attr('formKey');\r\n    var ApplyUrlInput = $('#___jpApplyUrl');\r\n    var ApplyUrl = 'https:\/\/www.ewm.co.uk\/fast-checkout\/v1\/api\/\/basket?form_key=' + formKey + '';\r\n\r\n\r\n    if (!ApplyUrlInput.length) {\r\n      ApplyUrlInput = document.createElement('input');\r\n      ApplyUrlInput.id = '___jpApplyUrl';\r\n      ApplyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n      ApplyUrlInput = $('#___jpApplyUrl');\r\n    }\r\n\r\n    ApplyUrlInput.attr('value', ApplyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = { discount_code: code };\r\n\r\n      return JSON.stringify(data);\r\n    } else if (type === 'clearCouponUrl') {\r\n      data = { remove_discount: true };\r\n\r\n      return JSON.stringify(data);\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.discount_total.replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCodes) {\r\n    if (bestCodes) {\r\n      $('input[name=\"discount_code\"]').val(bestCodes);\r\n\r\n      var changeEvent = new Event('change', {\r\n        bubbles: true,\r\n        cancelable: true\r\n      });\r\n\r\n      $('input[name=\"discount_code\"]').get(0).dispatchEvent(changeEvent);\r\n      $('button.button--secondary.button--small').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"thefragranceshop": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.discountAmt);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"thefruitcompany": "var ExternalProvider = {\r\n    parse: function (response) {\r\n      var responseHTML = $.parseHTML(response);\r\n      var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n  \r\n      return {\r\n        success: savings > 0,\r\n        savings: Number.isNaN(savings) ? 0.00 : savings\r\n      };\r\n    },\r\n    complete: function (bestCode) {\r\n      if (bestCode) {\r\n        jQuery('#coupon_code').val(bestCode);\r\n        jQuery(\"button[title='Apply']\").click();\r\n      }\r\n    }\r\n  };",
	"thefryecompany": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code__text:contains(\"-$\")', responseHTML).text().split(\"$\")[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"thegldshop": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        if ($('#__jpCookie').length == 0) {\r\n            var userCookie = location.href.match(\/checkouts\\\/([\\w]+)\/g)[0].split('\/')[1];\r\n\r\n            $('body').append('<input type=\"hidden\" id=\"__jpCookie\" value=\"' + userCookie + '\" \/>');\r\n        }\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            $('#checkout_reduction_code').val(code);\r\n\r\n            return $('#checkout_reduction_code').closest('form').serializeArray();\r\n        }\r\n    },\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"honest": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('input[placeholder=\"Enter Promo Code\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[placeholder=\"Enter Promo Code\"]').trigger('input').trigger('change');\r\n      $('button[data-ng-disabled=\"vm.disablePromoApplyButton\"]').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 3000, waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$(\".cls_loadingMask\").length;\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 800);\r\n          }\r\n          waited++;\r\n        }, 10);\r\n      }, 3000);\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('div[data-ng-bind=\"vm.cart.order_pricing_info.coupon_discount | currency\"]', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"the-house": "var ExternalProvider = {\r\n    prepare: function(action, code) {\r\n        var formData = {};\r\n\r\n        $(\"#shipto input\").each(function() {\r\n            if ($(this).attr(\"id\") != undefined && $(this).val().length > 0) {\r\n                formData[$(this).attr(\"id\")] = $(this).val();  \r\n            }\r\n        });\r\n\r\n        $(\"#shipto select\").each(function() {\r\n            if ($(this).attr(\"id\") != undefined && $(this).val().length > 0) {\r\n                formData[$(this).attr(\"id\")] = $(this).val();\r\n            }\r\n        });\r\n        \r\n        if(action == 'applyCouponUrl') {\r\n            \r\n            formData.coupon = code;\r\n            formData.redemptionCode = code;\r\n        } else formData.redemptionCode = '';\r\n        \r\n        \/\/Get Finger Id\r\n        var matches = \/\\<p([^\\<]+)session\\_id\\=thehouse_com([^&]+)([^\\<]+)\\<\\\/p\\>\/gim.exec(document.body.innerHTML);\r\n        if(matches.length == 4) {\r\n            formData.deviceFingerprintId = matches[2];\r\n        }\r\n        \r\n        return formData;\r\n    },\r\n    \r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        var savings = parseFloat(response.redemption);\r\n        if(savings == 0) {\r\n            return {\r\n                success: false,\r\n                savings: savings\r\n            }\r\n        }\r\n        \r\n        return {\r\n            success: true,\r\n            savings: savings\r\n        };\r\n    },\r\n    \r\n    complete: function(bestCode) {\r\n        $('#redemptionCode').val(bestCode);\r\n\r\n        var evt = document.createEvent(\"HTMLEvents\");\r\n        evt.initEvent(\"click\", true, true);\r\n        $(\"#checkout-coupons .btn-success\").get(0).dispatchEvent(evt);\r\n    }\r\n};",
	"thehungryjpeg": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.data.discount;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"thehut": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.responsiveBasket_discountValue', responseHTML)[0].innerHTML.replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n            $('#discountcode').val('');\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"theirishstore": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = 'USD';\r\n        var selector = $('#switcher-currency-trigger strong').attr('class');\r\n\r\n        if (selector === 'language-GBP') {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector === 'language-EUR') {\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match(\/\"discount_amount\":\"([0-9|.]+)\"\/)[1]);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"thejewellershop": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span[itemprop=\"price\"]:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"thelightersideco": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span.mz-carttable-rowtotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"thelimited": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price-coupon', responseHTML).text().split(' ')[2].replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"themacateam": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    let checkoutId = Object.keys(window.sessionStorage).filter((sessionKey) => { return ~sessionKey.indexOf('fb_conversion_key_') })[0].split('fb_conversion_key_')[1]\r\n    if (document.getElementById(\"checkoutId\") === null) {\r\n      let checkoutIdInput = document.createElement(\"input\");\r\n      checkoutIdInput.id = 'checkoutId';\r\n      checkoutIdInput.setAttribute('type', 'hidden');\r\n      checkoutIdInput.setAttribute('value', checkoutId);\r\n      (document.body || document.head || document.documentElement).appendChild(checkoutIdInput);\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    let couponDetails = response.coupons;\r\n    let savings = (couponDetails !== undefined) ? couponDetails[0].discountedAmount : 0;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"themenlohouse": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.pricing.promoDiscount * -1);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        var data = {};\r\n\r\n        if (this.isCheckoutPage()) {\r\n            window.location.href = 'https:\/\/www.themenlohouse.com\/checkout?coupon=' + bestCode;\r\n        } else {\r\n            data = {\r\n                method: 'getOrder',\r\n                promoCode: bestCode\r\n            };\r\n            $.ajax({\r\n                url: 'https:\/\/www.themenlohouse.com\/api_checkout?instart_disable_injection=true',\r\n                type: 'POST',\r\n                data: JSON.stringify(data),\r\n                dataType: 'json',\r\n                async: false\r\n            });\r\n            location.reload();\r\n        }\r\n    },\r\n    isCheckoutPage: function () {\r\n        return \/checkout\/.test(location.href);\r\n    }\r\n};",
	"menswearhouse": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($(\"[id^='WC_SingleShipmentOrderTotalsSummary_td_']:last\").text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var newTotal = parseFloat($(\"[id^='WC_SingleShipmentOrderTotalsSummary_td_']:last\", responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n        if(savings > 0){\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode){\r\n        if(bestCode) {\r\n            if ($('#promoCodeCheckoutInput').length) {\r\n                $('#promoCodeCheckoutInput').val(bestCode);\r\n                var clickEvent = document.createEvent('MouseEvents');\r\n                clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\r\n                $('#applyPromoBtn').get(0).dispatchEvent(clickEvent);\r\n            } else {\r\n                $('#promoCode').val(bestCode);\r\n                var clickEvent = document.createEvent('MouseEvents');\r\n                clickEvent.initMouseEvent('click', true, true, document.defaultView, 0, 0, 0, 0, 0);\r\n                $('#WC_PromotionCodeDisplay_links_1').get(0).dispatchEvent(clickEvent);\r\n            }\r\n        }\r\n    }\r\n};",
	"themine": "var ExternalProvider = {\r\n    init: function () {\r\n        this._oldTotal = $('#lblTotalAmountDue').text().replace(\/[^0-9.]\/g, '');\r\n    },\r\n    prepare: function (action, code) {\r\n        var formArray = $('#frmMain').serializeArray();\r\n        var data = {};\r\n\r\n        $.each(formArray, function () {\r\n            data[this.name] = this.value || '';\r\n        });\r\n        data.ctl00$ctl00$ctl00$Main$MainMasterContent$ContentPlaceholder1$tbPromoCode = code;\r\n        data['ctl00$ctl00$ctl00$Main$MainMasterContent$ContentPlaceholder1$btnCouponValidate'] = 'Validate';\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = $('#lblTotalAmountDue', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        var savings = (this._oldTotal - newTotal) > 0 ? $('#lblDiscount', responseHTML).text().replace(\/[^0-9.]\/g, '') : 0.00;\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#tbPromoCode').val(bestCode);\r\n            $('#btnCouponValidate').click();\r\n            $('#tbPromoCode').val('');\r\n        }\r\n    }\r\n};",
	"themountain": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"theoutnet": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigitsParam) {\r\n        var newCurrency = currency;\r\n        var locale = localeMapping.US;\r\n        var selector = $('.shippingCountry').text();\r\n\r\n        if (selector.match('GB')) {\r\n            newCurrency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        } else if (selector.match('DE' || 'FR')) {\r\n            newCurrency = 'EUR';\r\n            locale = localeMapping.DE || localeMapping.FR;\r\n        }\r\n\r\n        var currencyObj = { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigitsParam };\r\n\r\n        return amount.toLocaleString(locale, currencyObj);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.products-price .valueToPay .value').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.discounted.price .value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"theperfectrug": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.uc-price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload()\r\n    }\r\n}",
	"thepilateswheel": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"thepopcornfactory": "var ExternalProvider = {\r\n  serializeObject: function (a) {\r\n    var o = {};\r\n    $.each(a, function () {\r\n      o[this.name] = this.value || '';\r\n    });\r\n\r\n    return o;\r\n  },\r\n  isNan: function (discount) {\r\n    return Number.isNaN(discount) ? 0.00 : discount;\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = this.serializeObject($('#PromotionCodeForm').serializeArray());\r\n    if (type === 'applyCouponUrl') {\r\n      data.promoCode = code;\r\n      data.appliedPromoCode = code;\r\n      return data;\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var promoDiscount = parseFloat($('#promotionDiscount', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n    var shippingDiscount = parseFloat($('#shippingDiscount', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = this.isNan(promoDiscount) + this.isNan(shippingDiscount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"theproteinworks": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('.col.w30.line-price').text().replace(\/[A-z.0-9.,]\/g, '').trim();\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (selector === \"\u20ac\") {\r\n            locale = localeMapping['FR'];\r\n            currency = \"EUR\";\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var parseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.summary-total > td:contains(-)', parseHTML)[0].innerHTML.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"theproteinworksfr": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var responseSvngs = parseFloat($('.summary-total > td:contains(-)', responseHTML).last().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var pageSvngs = parseFloat($('.summary-total > td:contains(-)').last().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var currCodes = $('.coupon-name').text().toUpperCase();\r\n        var respCodes = $('.coupon-name', responseHTML).text().toUpperCase();\r\n        var savings = 0.00;\r\n\r\n        if (currCodes.includes(code.toUpperCase())) {\r\n            savings = pageSvngs;\r\n        } else if (!currCodes.includes(code.toUpperCase()) && respCodes.includes(code.toUpperCase())) {\r\n            savings = responseSvngs;\r\n            $.ajax({\r\n                url: 'https:\/\/fr.theproteinworks.com\/amcoupons\/checkout\/cancelCoupon\/',\r\n                type: 'POST',\r\n                data: { amcoupon_code_cancel: code },\r\n                async: false\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"theshelvingstore": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match('DiscountTotal(.*)LastProduct')[0].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('#v65-cart-coupon-entry-details-input').val(bestCode);\r\n                var s = document.createElement('script');\r\n                s.type = 'text\/javascript';\r\n                var code = `jQuery('#v65-cart-coupon-entry-details-input').trigger('change');jQuery('#v65-cart-coupon-entry-details-button').click();`;\r\n                s.appendChild(document.createTextNode(code));\r\n                document.body.appendChild(s);\r\n            } else {\r\n                location.reload();\r\n            }\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        return \/ShoppingCart\/.test(location.href);\r\n    },\r\n};",
	"thestorytailorsde": "var ExternalProvider = {\r\n  prepare: function (type) {\r\n    if (type === 'clearCouponUrl') {\r\n      $.ajax({\r\n        url: 'https:\/\/www.diemagiemeinesnamens.de\/order',\r\n        type: 'GET',\r\n        async: false,\r\n        success: function (response) {\r\n          var responseHTML = $.parseHTML(response);\r\n          var clearCouponUrl = $('.price_discount_delete', responseHTML).attr('href');\r\n\r\n          $.ajax({\r\n            url: clearCouponUrl,\r\n            type: 'POST',\r\n            async: false\r\n          });\r\n        }\r\n      });\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price_discount_delete', responseHTML).parent().next().first().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    $('#discount_name').val(bestCode);\r\n    $('button[name=\"submitAddDiscount\"]').click();\r\n  }\r\n};",
	"thetoyshop": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount:contains(-)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"thewalkingcompany": "var ExternalProvider = {\r\n    parse: function(response, $xhr, status, code) {\r\n\r\n        return {\r\n            success: response.IsValid && response.SourceCode.trim() === code.trim(),\r\n            savings: parseFloat(response.DisAmt)\r\n        };\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"thingsremembered": "var ExternalProvider = {\r\n\r\n    retrieveWindowVariable: function (name, variable) {\r\n        var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\r\n        var script = document.createElement('script');\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('tmp_' + name);\r\n\r\n        $('body').removeAttr('tmp_' + name);\r\n\r\n        return value;\r\n    },\r\n\r\n    prepare: function (action, code) {\r\n        if (['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n        var storage = this.retrieveWindowVariable('shoppingCart', 'localStorage.shoppingCart');\r\n        var shoppingCart = {\r\n            coupons: [],\r\n            items: []\r\n        };\r\n\r\n        if (storage) {\r\n            storage = JSON.parse(storage);\r\n            shoppingCart.items = storage.items;\r\n        }\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            shoppingCart.coupons.push({\r\n                code: code,\r\n                description: '',\r\n                status: '',\r\n                level: '',\r\n                id: ''\r\n            });\r\n        } else shoppingCart.coupons = [];\r\n\r\n        return JSON.stringify({\r\n            shoppingCart: shoppingCart\r\n        });\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = Math.abs(parseFloat(response.discountInfo.claimedCouponMultiPromotions[code.toUpperCase()][0].totalAdjustment));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var promoCode = $('#CC-promotionDetails-promoCode');\r\n\r\n            promoCode.val(bestCode);\r\n\r\n            var evt = document.createEvent('HTMLEvents');\r\n\r\n            evt.initEvent('change', false, true);\r\n            promoCode.get(0).dispatchEvent(evt);\r\n\r\n            evt = document.createEvent('HTMLEvents');\r\n            evt.initEvent('click', false, false);\r\n            $('#CC-promotion-applyCode').get(0).dispatchEvent(evt);\r\n        }\r\n    }\r\n};",
	"thinkgeek": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n        if (type !== 'applyCouponUrl') return null;\r\n\r\n        var accountId;\r\n\r\n        \/\/ extract account_id from on-page head script\r\n        var tgScript = $('head script:contains(\"tg.account\")')[0].text;\r\n\r\n        var matchExp = \/(?:\"account_id\":)\"[a-z0-9]+\"\/;\r\n        var replaceExp = \/\"|account_id\":\/g;\r\n\r\n        accountId = tgScript.match(matchExp)[0].replace(replaceExp, '');\r\n\r\n        var orderId = $('#form_order_id')[0].value;\r\n\r\n        var data = JSON.stringify({\r\n            promo_code: code,\r\n            svs_pin: '',\r\n            svs_captcha: '',\r\n            account_id: accountId,\r\n            order_id: orderId\r\n        });\r\n\r\n        return data;\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var success = response.data.codes_applied.manual === code;\r\n        var savings;\r\n\r\n        if (success) {\r\n            savings = response.data.cart.cart_lines.reduce(function (sum, current) {\r\n                return sum + parseFloat(current.discount);\r\n            }, 0);\r\n        }\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings && savings > 0 ? savings : 0.00\r\n        };\r\n    },\r\n\r\n    complete: function()\r\n    {\r\n        location.reload();\r\n    }\r\n};",
	"thinkgeek.mobile": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n        if (type !== 'applyCouponUrl') return null;\r\n\r\n        var accountId;\r\n\r\n        \/\/ extract account_id from on-page head script\r\n        var tgScript = $('head script:contains(\"tg.account\")')[0].text;\r\n\r\n        var matchExp = \/(?:\"account_id\":)\"[a-z0-9]+\"\/;\r\n        var replaceExp = \/\"|account_id\":\/g;\r\n\r\n        accountId = tgScript.match(matchExp)[0].replace(replaceExp, '');\r\n\r\n        var orderId = $('.checkout-header-id')[0].text.replace('Order ID: ', '');\r\n\r\n        var data = JSON.stringify({\r\n            promo_code: code,\r\n            account_id: accountId,\r\n            order_id: orderId\r\n        });\r\n\r\n        return data;\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var success = response.data.codes_applied.manual === code;\r\n        var savings;\r\n\r\n        if (success) {\r\n            savings = response.data.cart.cart_lines.reduce(function (sum, current) {\r\n                return sum + parseFloat(current.discount);\r\n            }, 0);\r\n        }\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings && savings > 0 ? savings : 0.00\r\n        };\r\n    },\r\n\r\n    complete: function()\r\n    {\r\n        location.reload();\r\n    }\r\n};",
	"thompson-morgan": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldPrice = response.subTotal.replace(\/[^0-9|.]\/g, '');\r\n        var newPrice = response.tempTotal.replace(\/[^0-9|.]\/g, '');\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#ordercode').val(bestCode);\r\n            $('#orderCodeForm > div.btn').click();\r\n        }\r\n    }\r\n};",
	"thompsoncigar": "jQuery.fn.extend({\r\n    getSerializedArray: function () {\r\n        var data = {}\r\n        var form_data = $(this).serializeArray()\r\n        $.each(form_data, function () {\r\n            data[this.name] = data[this.value] || ''\r\n        })\r\n        return data;\r\n    }\r\n})\r\nvar ExternalProvider = {\r\n    oldPrice: 0,\r\n    currentPath: 0,\r\n    cartPage: \"CART\",\r\n    paymentPage: \"PAYMENT\",\r\n    formSelector: \"\",\r\n    init: function () {\r\n        this.setPrice()\r\n        this.setPath()\r\n        this.setFormSelector()\r\n    },\r\n    setPrice: function () {\r\n        var price = $(\"#TotalList .OrderTotalRight\")[0].innerHTML.replace(\/[^0-9.]\/g, '')\r\n        if (price)\r\n            this.oldPrice = parseFloat(price)\r\n        if (this.oldPrice == NaN)\r\n            this.oldPrice = 0\r\n    },\r\n    setPath: function () {\r\n        var pathPattern = \/\\\/basket.cmd\/g\r\n        var curr_path = pathPattern.exec(location.pathname)\r\n        if (curr_path)\r\n            this.currentPath = this.cartPage\r\n        else\r\n            this.currentPath = this.paymentPage\r\n    },\r\n    setFormSelector: function () {\r\n        this.formSelector = (this.currentPath == this.cartPage) ? \"#BasketForm\" : \"#paymentForm\"\r\n    },\r\n    prepare: function (requestType, code) {\r\n        if (requestType == 'applyCouponUrl') {\r\n            $('#promoCode').val(code)\r\n        }\r\n        else {\r\n            $('input[name=\"promoCodeToRemove\"]').val(code)\r\n            $('input[name=\"removePromoCode\"]').val(true)\r\n        }\r\n\r\n        var form_array = $(this.formSelector).serializeArray()\r\n        return form_array\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var jqObj = $.parseHTML(response)\r\n        var savings = parseFloat(response.match('itemDiscountAmount(.*)quantity')[0].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) location.reload();\r\n    }\r\n\r\n\r\n}",
	"thorntons": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.order-value').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.order-value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"thoughtfully": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var savings;\r\n\r\n        var extractedJSON = JSON.parse(response.match(\/{.*}\/g).filter(function(string) {\r\n            return string.indexOf('\"total_segments\"') >= 0;\r\n        }));\r\n\r\n        var discountSegment = extractedJSON.totalsData.total_segments.find(function(segment) {\r\n            return segment.code === 'discount';\r\n        });\r\n\r\n        var success = discountSegment !== undefined;\r\n\r\n        if (success) {\r\n            savings = discountSegment.value.replace(\/[^0-9.]\/g, '');\r\n        }\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n\r\n    complete: function()\r\n    {\r\n        location.reload();\r\n    }\r\n};",
	"threads4thought": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"threedots": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#CP_lblPromotionaldiscount', responseHTML).text().replace(\/[$-]\/g, ''));\r\n        if (savings && !($('#CP_lblError').text().includes('not found'))) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    whenReady: function (step, next) {\r\n        var codeApplyTime;\r\n        var counter = 0;\r\n        if (step === 'injectCoupon') {\r\n            codeApplyTime = setInterval(function () {\r\n                counter += 1;\r\n                if ($('#md:visible').length === 0 || counter > 100) {\r\n                    clearInterval(codeApplyTime);\r\n                    next();\r\n                }\r\n            }, 100);\r\n        }\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (!bestCode) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"thriftbooks": "var ExternalProvider = {\r\n\tparse: function (response) {\r\n\t\tvar success = !response.CouponError;\r\n\t\tvar savings = response.CouponDiscount;\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: success,\r\n\t\t\tsavings: success && savings ? parseFloat(savings) : 0.00\r\n\t\t};\r\n\t},\r\n\r\n\tcomplete: function (bestCode) {\r\n\t\tif (bestCode) location.reload();\r\n\t}\r\n};",
	"thrivemarket": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldTotal = 0;\r\n\t\t\r\n        if (location.href === 'https:\/\/thrivemarket.com\/cart') {\r\n            oldTotal = parseFloat($('.CartReviewRow__value:eq(2)').text().replace(\/[^0-9|.]\/g, ''));\r\n        } else if (location.href === 'https:\/\/thrivemarket.com\/checkout\/') {\r\n            oldTotal = parseFloat($(\"div[data-test-id='review-total-list'] .ru6j9n-1\").text().replace(\/[^0-9|.]\/g, ''));\r\n        };\r\n        \r\n        var newTotal = response.grand_total;\r\n        var savings = oldTotal - newTotal;\r\n       \r\n        if (!$('#coupon').length) {\r\n            $('.CartForm__btn[type=\"button\"]').click();\r\n        }\r\n        if ($('#aw-onestepcheckout-coupon-code-cancel-btn').length) {\r\n            $('#aw-onestepcheckout-coupon-code-cancel-btn').click();\r\n        } \r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#coupon_code').trigger('input').trigger('change');\r\n            $('button[data-test-id=\"coupon__apply\"]')[0].click();\r\n            $('#coupon_code').val('');\r\n        }\r\n    }\r\n};",
	"thymes": "var ExternalProvider = {\r\n  initSerializeObject: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n      $.each(data, function () {\r\n        object[this.name] = this.value || '';\r\n      });\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    data = {};\r\n    if (action === 'applyCouponUrl') {\r\n      var formData = $('#myForm').serializeObject();\r\n      formData.ctl00$phMainContent$txtPromoCode = code;\r\n      formData.__EVENTTARGET = 'ctl00$phMainContent$lbtnApply';\r\n      data = formData;\r\n    }\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.estimated-total').next().text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.estimated-total', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.initSerializeObject();",
	"ticketclub": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon') {\r\n      $('#PromoCode').val(code);\r\n      $('#PromoCode').get(0).dispatchEvent(changeEvent);\r\n      $('#add-promo-code-button').click();\r\n      $('#PromoCode').val('');\r\n    } else if (type === 'removeInjectedCoupon') {\r\n      $('.remove-promo-link').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1000);\r\n          }\r\n\r\n          waited++;\r\n        }, 80);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('i:contains(\"- $\"):first()').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ticketliquidator": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = 'https:\/\/checkout.ticketliquidator.com\/Payment\/VerifyPromoCode' + window.location.search;\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.promo-code-dollar-savings:eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"ticketnetwork": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = 'https:\/\/checkout.ticketnetwork.com\/Payment\/VerifyPromoCode' + window.location.search;\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.responseText);\r\n    var savings = parseFloat($('.promo-code-dollar-savings:eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#PromoCode').val(bestCode);\r\n      $('#add-promo-code-button').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"tidebuy": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'applyCouponUrl') {\r\n      document.cookie = 'CouponCode=' + code + '; domain=.tidebuy.com; path=\/;';\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.RealCouponMoney);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#textCoupon').val(bestCode);\r\n      $('#btnCoupon').click();\r\n    }\r\n  }\r\n};",
	"tiescom": "var ExternalProvider={\r\n    oldCartPrice:0,\r\n    currentPath:\"\",\r\n    checkout:\"checkout\",\r\n    cart:\"cart\",\r\n    priceSelector:\"\",\r\n    init: function(){\r\n        this.setCurrentPath()\r\n        this.setSelectors()\r\n        this.setOldPrice()\r\n    },\r\n    setCurrentPath:function(){\r\n        var pattern = \/\\\/shopping-cart\/g\r\n        if(pattern.exec(location.pathname))\r\n           this.currentPath = this.cart\r\n        else\r\n           this.currentPath = this.checkout\r\n    },\r\n    setSelectors:function(){\r\n        if(this.currentPath == this.cart)\r\n            this.priceSelector = '.cart-totals .lg .total-value'\r\n        else\r\n            this.priceSelector = '#checkout-summary-total'    \r\n    },\r\n    setOldPrice:function(){\r\n         var price = $(this.priceSelector).text().replace(\/[^0-9|\\.]\/g,'')\r\n         if(price)\r\n            this.oldCartPrice = parseFloat(price)\r\n         if(isNaN(this.oldCartPrice))\r\n            this.oldCartPrice = 0 \r\n    },\r\n    parse:function(response,status,$xhr,code){\r\n        var newPrice = parseFloat(response.total.replace(\/[^0-9|\\.]\/g,''))\r\n        var discount = this.oldCartPrice - newPrice\r\n        if(discount>0){\r\n            return{\r\n                success:true,\r\n                savings:discount\r\n            }\r\n        }\r\n        return{\r\n            success:false,\r\n            savings:0.0\r\n        }\r\n    },\r\n    complete:function(bestCode,bestSavings){\r\n        location.reload()\r\n    }\r\n}",
	"tigerdirect": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n\r\n        $('input[name=\"Coupon\"]').val(code);\r\n\r\n        var couponData = $('form[name=\"order\"]').serialize();\r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return couponData;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            oldPrice = Number($('.cart_totalInfo-grandTotal').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n            newPrice = Number($('.cart_totalInfo-grandTotal', responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n            savings = (oldPrice - newPrice)\/100;\r\n\r\n\r\n        if (savings > 0){\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"tiierisch": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.fCoupon.replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tillys": "var ExternalProvider = {\r\n\r\n    origPrice: 0,\r\n\r\n    init: function () {\r\n        this.origPrice = parseFloat($('.order-subtotal td:eq(1)').text().replace(\/[^0-9.]\/g, ''));\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newPrice = parseFloat($('.order-subtotal td:eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        var savings = this.origPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"timberland": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(Math.abs(response.amounts.adjustments[0].amount));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('.promo-code-form-billing-promo-code').val(bestCode);\r\n      $('button:contains(\"Apply\")').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"timbuk2": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"timelife": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-details-price em:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promo-code-input').val(bestCode);\r\n            $(\"input[value='Apply']\").click();\r\n        }\r\n    }\r\n};",
	"timetospa": "var ExternalProvider = {\r\n    prepare: function(type, code){\r\n        function serializeObject(a) {\r\n            var o = {};\r\n            $.each(a, function() {\r\n                o[this.name] = this.value || '';\r\n            });\r\n            return o;\r\n        }\r\n\r\n        var formDataArray = $('#aspnetForm').serializeArray();\r\n\r\n        var data = serializeObject(formDataArray);\r\n\r\n        \/\/ If data needs to be prepared\r\n        if(type == 'applyCouponUrl'){\r\n            data['ctl00$PageContent$CouponCode'] = code;\r\n            data['ctl00$PageContent$btnUpdateCart3.x'] = 0;\r\n            data['ctl00$PageContent$btnUpdateCart3.y'] = 0;\r\n        } else {\r\n            data['ctl00$PageContent$ctrlShoppingCart$ctl00$ctl01'] = 1;\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('#ctl00_PageContent_ctrlCartSummary_lblDiscount', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = parseFloat($savings.text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n            if(savings > 0.00){\r\n                return {\r\n                    success: true,\r\n                    savings: parseFloat(savings)\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        if(bestCode){\r\n            location.reload(true);\r\n        }\r\n    }\r\n};",
	"timex": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var oldPrice = parseFloat($('.order-subtotal').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat(response.baskettotal);\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tirebuyer": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldVal = Math.trunc(parseFloat($('.subTotal div:contains(\"-$\")').text().replace(\/[^0-9.]\/g, '')) *100) \/100;\r\n        var newVal = Math.trunc(parseFloat($('.discountContainer div:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) *100) \/100;\r\n        var savings = 0.00;\r\n\r\n        oldVal = isNaN(oldVal) ? 0.00 : oldVal;\r\n\r\n        if (newVal > oldVal) {\r\n            savings = Math.trunc(parseFloat($('.discountContainer div:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, '')) *100) \/100;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"titan": "var ExternalProvider = {\r\n    _prepareUrl: function() {\r\n\r\n        var applyUrlInput = $('#__jpCouponUrl'),\r\n            applyUrl = $('#opc-discount-coupon-form').length ? 'https:\/\/www.titan.fitness\/onepage\/coupon\/couponPost' : 'http:\/\/www.titan.fitness\/checkout\/cart\/couponPost\/';\r\n        if(!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement(\"input\");\r\n            applyUrlInput.id = '__jpCouponUrl';\r\n            applyUrlInput.style.display = \"none\";\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#__jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.summary-total span', responseHTML).text().replace(\/[$-]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        $('#coupon_code').val(bestCode);\r\n        $('.discount-form button').click();\r\n        if ($('#opc-discount-coupon-form').length) {\r\n            location.reload(true);\r\n        }\r\n    }\r\n}\r\nExternalProvider._prepareUrl();",
	"titanramps": "var ExternalProvider = {\r\n    _prepareUrl: function(){\r\n        var applyCouponUrl = $('#__jpApplyCouponUrl');\r\n        if(!applyCouponUrl.length) {\r\n            applyCouponUrl = document.createElement(\"input\");\r\n            applyCouponUrl.id = '__jpApplyCouponUrl';\r\n            applyCouponUrl.style.display = \"none\";\r\n            (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n            applyCouponUrl = $('#__jpApplyCouponUrl');\r\n            applyCouponUrl.attr('value', this.isCartPage() ? '\/checkout\/cart\/couponPost\/' : '\/firecheckout\/index\/saveCoupon\/');\r\n        }\r\n    },\r\n\r\n    init: function() {\r\n        $.fn.serializeObject = function()\r\n        {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function() {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n\r\n    isCartPage: function() {\r\n        return \/checkout\\\/cart\/gi.test(location.href);\r\n    },\r\n\r\n    prepare: function(action, code) {\r\n        var formData = {},\r\n            isApplyCoupon = action === 'applyCouponUrl';\r\n\r\n        if(this.isCartPage()) {\r\n\r\n            formData = {\r\n                remove: isApplyCoupon ? 0 : 1,\r\n                coupon_code: code\r\n            };\r\n        } else {\r\n\r\n            formData = $('#firecheckout-form').serializeObject();\r\n            formData = Object.assign(formData, {\r\n                'discount-coupon': 1,\r\n                'coupon[remove]': isApplyCoupon ? 0 : 1,\r\n                'coupon[code]': code\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n\r\n    parseAmount: function(string) {\r\n        return parseFloat(string.trim().replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var codeFound = false, savings = 0.00, $cartTotal, $item;\r\n        if (this.isCartPage()) {\r\n\r\n            var $response = $.parseHTML(response);\r\n\r\n            $cartTotal = $('#shopping-cart-totals-table tr', $response);\r\n            codeFound = $('#coupon_code', $response).val().toLowerCase().indexOf(code.toLowerCase()) !== -1;\r\n        } else {\r\n\r\n            response = JSON.parse(response);\r\n            var $discountWrap = $.parseHTML(response.update_section['coupon-discount']),\r\n                $reviewWrap = $.parseHTML(response.update_section.review);\r\n\r\n            $cartTotal = $('#checkout-review-table tr', $reviewWrap);\r\n            codeFound = $('#coupon-code', $discountWrap).val().toLowerCase().indexOf(code.toLowerCase()) !== -1;\r\n        }\r\n\r\n        $cartTotal.each(function() {\r\n            $item = $(this);\r\n            if($('td:first-child', $item).text().indexOf('Discount') !== -1) {\r\n                savings = ExternalProvider.parseAmount($('td:last-child', $item).text());\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"titanramps.mobile": "var ExternalProvider = {\r\n    _prepareUrl: function(){\r\n        var applyCouponUrl = $('#__jpApplyCouponUrl');\r\n        if(!applyCouponUrl.length) {\r\n            applyCouponUrl = document.createElement(\"input\");\r\n            applyCouponUrl.id = '__jpApplyCouponUrl';\r\n            applyCouponUrl.style.display = \"none\";\r\n            (document.body || document.head || document.documentElement).appendChild(applyCouponUrl);\r\n            applyCouponUrl = $('#__jpApplyCouponUrl');\r\n            applyCouponUrl.attr('value', this.isCartPage() ? '\/checkout\/cart\/couponPost\/' : '\/firecheckout\/index\/saveCoupon\/');\r\n        }\r\n    },\r\n\r\n    init: function() {\r\n        $.fn.serializeObject = function()\r\n        {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function() {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n\r\n    isCartPage: function() {\r\n        return \/checkout\\\/cart\/gi.test(location.href);\r\n    },\r\n\r\n    prepare: function(action, code) {\r\n        var formData = {},\r\n            isApplyCoupon = action === 'applyCouponUrl';\r\n\r\n        if(this.isCartPage()) {\r\n\r\n            formData = {\r\n                remove: isApplyCoupon ? 0 : 1,\r\n                coupon_code: code\r\n            };\r\n        } else {\r\n\r\n            formData = $('#firecheckout-form').serializeObject();\r\n            formData = Object.assign(formData, {\r\n                'discount-coupon': 1,\r\n                'coupon[remove]': isApplyCoupon ? 0 : 1,\r\n                'coupon[code]': code\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n\r\n    parseAmount: function(string) {\r\n        return parseFloat(string.trim().replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        var codeFound = false, savings = 0.00, $cartTotal, $item;\r\n        if (this.isCartPage()) {\r\n\r\n            var $response = $.parseHTML(response);\r\n\r\n            $cartTotal = $('#shopping-cart-totals-table tr', $response);\r\n            codeFound = $('#coupon_code', $response).val().toLowerCase().indexOf(code.toLowerCase()) !== -1;\r\n        } else {\r\n\r\n            response = JSON.parse(response);\r\n            var $discountWrap = $.parseHTML(response.update_section['coupon-discount']),\r\n                $reviewWrap = $.parseHTML(response.update_section.review);\r\n\r\n            $cartTotal = $('#checkout-review-table tr', $reviewWrap);\r\n            codeFound = $('#coupon-code', $discountWrap).val().toLowerCase().indexOf(code.toLowerCase()) !== -1;\r\n        }\r\n\r\n        $cartTotal.each(function() {\r\n            $item = $(this);\r\n            if($('td:first-child', $item).text().indexOf('Discount') !== -1) {\r\n                savings = ExternalProvider.parseAmount($('td:last-child', $item).text());\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"tjc": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    let responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.coupon-discount span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#dwfrm_cart_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n    }\r\n  }\r\n};",
	"tjmaxx": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n      for (var i = 0; i < data.length; i++){\r\n          object[data[i]['name']] = data[i]['value'];\r\n      }\r\n      \r\n      return object;\r\n    };\r\n  },\r\n  organizeFormData: function (element, elementCode, code, elementToChange, elementToPush, elementToPushValue) {\r\n    var formData = element.serializeObject();\r\n\r\n    delete formData[elementToChange];\r\n    formData[elementCode] = code;\r\n\r\n    var data = Object.keys(formData).map(function (key) {\r\n      return { name: key, value: formData[key] };\r\n    });\r\n\r\n    data.push({ name: elementToPush, value: elementToPushValue });\r\n    data.push({ name: elementToChange, value: '' });\r\n\r\n    return data;\r\n  },\r\n  processFormData: function (action, code, formApplyElement, formClearElement) {\r\n    var data = {};\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      data = this.organizeFormData(formApplyElement, '\/atg\/commerce\/promotion\/CouponFormHandler.couponClaimCode', code, '_D:\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon', '\/atg\/commerce\/promotion\/CouponFormHandler.claimCoupon', 'Apply');\r\n    } else if (action === 'clearCouponUrl') {\r\n      data = this.organizeFormData(formClearElement, '\/atg\/commerce\/promotion\/CouponFormHandler.unClaimCoupon', code, '_D:\/atg\/commerce\/promotion\/CouponFormHandler.unClaimCoupon', '\/atg\/commerce\/promotion\/CouponFormHandler.unClaimCoupon', 'Submit');\r\n    }\r\n\r\n    return data;\r\n  },\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n\r\n    if (this.isCartPage()) {\r\n      data = this.processFormData(action, code, $('#promo'), $('#couponRemoveForm'));\r\n    } else {\r\n      jQuery.ajaxSetup({ async: false });\r\n      $.get('https:\/\/tjmaxx.tjx.com\/store\/checkout\/cart.jsp', function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        data = this.processFormData(action, code, $('#promo', responseHTML), $('#couponRemoveForm', responseHTML));\r\n      });\r\n    }\r\n\r\n    return data;\r\n  },\r\n\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = 0;\r\n\r\n    if (this.isCartPage()) {\r\n      oldTotal = parseFloat($('.order-total-price').text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      oldTotal = parseFloat($('#totalPrice').text().replace(\/[^0-9|.]\/g, ''));\r\n    }\r\n\r\n    var newTotal = parseFloat($('.order-total-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promo-code').val(bestCode);\r\n      $('#accept-promotion').click();\r\n    }\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/store\/checkout\/cart.jsp';\r\n  }\r\n};",
	"tmart": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.ot_price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            $('#disc-ot_coupon').val(bestCode);\r\n            $('#coupon_apply').click();\r\n        }\r\n    }\r\n};",
	"tmart.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.save.replace('$', ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"tmlewin": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat($('.value:contains(\"-\")', $.parseHTML(response)).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tmlewinuk": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-discount.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    },\r\n};",
	"tnvitamins": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"tobi": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat($('span:contains(\"$-\")', $.parseHTML(response)).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $(\"input[id='promotion_code'\").val(bestCode);\r\n            $(\"input[value='Apply']\").click();\r\n        }\r\n    }\r\n};",
	"tobydeals": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('button[value=\"Apply Coupon\"]').click();\r\n        }\r\n    }\r\n};",
	"toddsnyder": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    var savings = oldTotal - newTotal;\r\n\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      location.reload();\r\n    }\r\n  }\r\n};",
	"toffs": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.price:contains(-)', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tokyolaundry": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tommiecopper": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('#shopping-cart-totals-table > tfoot > tr > td.a-right.last > strong > span').text().replace(\/[^0-9.]\/g, ''));\r\n    var newTotal = parseFloat($('#shopping-cart-totals-table > tfoot > tr > td.a-right.last > strong > span', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n    \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      jQuery(\"#coupon_code\").val(bestCode);\r\n      jQuery(\"#discount-coupon-form button\").click();\r\n    }\r\n  }\r\n}",
	"tommy": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = false;\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        taskType: $('input[name=\"taskType\"]').val(),\r\n        URL: '',\r\n        storeId: $('#storeId').val(),\r\n        catalogId: $('input[name=\"catalogId\"]').val(),\r\n        langId: $('input[name=\"langId\"]').val(),\r\n        finalView: $('input[name=\"finalView\"]').val(),\r\n        promoCode: code,\r\n        requesttype: 'ajax',\r\n        authToken: $('#csrf_authToken').val()\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.negativeValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"tommyfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.orderSummary.totalOrderAmount').text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.orderSummary.totalOrderAmount', responseHTML).text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"toms": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var discount = parseFloat($('#order-summary-det .ln-item', responseHTML).filter(function () {\r\n            return $(this).html().indexOf('Discount') > -1;\r\n        }).next('.ln-amt').text()\r\n            .replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: discount > 0,\r\n            savings: isNaN(discount) ? 0.00 : discount\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (location.href.includes('checkout'))\r\n                $('#co-pcode-input').val(bestCode);\r\n            else\r\n                $('#pcode-input').val(bestCode);\r\n            $('input[value=\"APPLY\"]').click();\r\n        }\r\n    }\r\n};",
	"tomtailor": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var currentDiscount = parseFloat($('.m-cart-summary__container font:contains(\"-\")').first().text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n        var savings = parseFloat($('td:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n        if (savings <= currentDiscount) {\r\n            savings = 0;\r\n        }\r\n\r\n        return {    \r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tomthumb": "var ExternalProvider = {\r\n    init: function () {\r\n        this.oldTotal = parseFloat($('.id_TotalEstimates').text().replace(\/[^0-9|.]\/g, ''));\r\n    },\r\n    prepare: function (action, code) {\r\n        var clickEvent = new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        });\r\n\r\n        if (action === 'injectCoupon') {\r\n            $('#txtPromo').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#txtPromo').trigger('input').trigger('change');\r\n            $('#btnaddenabled').get(0).dispatchEvent(clickEvent);\r\n        }\r\n\r\n        return null;\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 500);\r\n    },\r\n    parse: function () {\r\n        var newTotal = parseFloat($('.id_TotalEstimates').text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#txtPromo').val(bestCode);\r\n            $('#btnaddenabled').click();\r\n        }\r\n    }\r\n};",
	"tomtom": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('.price').eq(0).text().replace(\/[-.A-z.0-9.,]\/g, '').trim();\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var savings = response.summary[3].price * -1;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tomtop": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.data.discount.toString().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_promo_input').val(bestCode);\r\n            $('#checkout_promo_apply').click();\r\n        }\r\n    }\r\n};",
	"tonyrobbins": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"Checkout\", Shopify.Checkout.token);';\r\n        scriptContent += 'body.setAttribute(\"shopId\", __st.a);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var Checkout = $('body').attr('Checkout');\r\n        var shopId = $('body').attr('shopId');\r\n        var ApplyUrlInput = $('#___jpApplyUrl');\r\n        var ApplyUrl = 'https:\/\/store.tonyrobbins.com\/' + shopId + '\/checkouts\/' + Checkout + '';\r\n\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('input');\r\n            ApplyUrlInput.id = '___jpApplyUrl';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        ApplyUrlInput.attr('value', ApplyUrl);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price:eq(1) ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.field__input-btn.btn').removeAttr('disabled');\r\n            $('.field__input-btn.btn').click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"toofaced": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response)\r\n    var savings = parseFloat($('.order-discount.discount', responseHTML)[0].innerHTML.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n};",
	"toolbarn": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(-$)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"tooledup": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.value.discount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#btn_basket_coupon').click();\r\n            $('#CouponCode').val(bestCode);\r\n            $('.button.proceed').click();\r\n        }\r\n    }\r\n};",
	"toolstoday": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"tophatter": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, couponCode) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        this.savings = $('td[style = \"max-width: 350px;\"]', responseHTML).next().text().replace(\/[^0-9|.]\/g, '');\r\n\r\n        if(this.savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: this.savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: this.savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    },\r\n    savings: 0.00\r\n};",
	"topman": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    if (action === 'applyCouponUrl') {\r\n      var data = {\r\n        promotionId: code,\r\n        responseType: 'orderSummary'\r\n      };\r\n\r\n      return JSON.stringify(data);\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.basket.discounts[0].value);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"topmande": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        promotionId: code,\r\n        responseType: 'basket'\r\n      };\r\n    } else if (type === 'clearCouponUrl') {\r\n      data = {\r\n        promotionCode: code,\r\n        responseType: 'basket'\r\n      };\r\n    }\r\n\r\n    return JSON.stringify(data);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.discounts[0].value);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"topmanfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.summary_price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"topmanuk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.basket.discounts[0].value.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"toppik": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match(\/\"value\":\"-([0-9|.]+)\"\/)[1]);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    conmplete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"topshop": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function () {\r\n        ExternalProvider.hasPromoCodeApplied() && ExternalProvider.removeCouponCode();\r\n        if (ExternalProvider.hasPromoCodeApplied() === false && retries < 3) {\r\n          clearInterval(interval);\r\n          resolve();\r\n        } else if (retries >= 3) {\r\n          clearInterval(interval);\r\n          resolve();\r\n        }\r\n        retries++;\r\n      }, 2000);\r\n    })\r\n  },\r\n  removeCouponCode: function () {\r\n    $('.PromotionCode-removeText').get(0).dispatchEvent(this.clickEvent);\r\n  },\r\n  parse: function (response) {\r\n    let savings = Math.abs(response.discounts[0].value);\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCheckoutPage: function () {\r\n    return location.pathname === '\/checkout\/payment' || location.pathname === 'location\/checkout\/payment\/';\r\n  },\r\n  hasPromoCodeApplied: function () {\r\n    return $('.PromotionCode-removeText').length > 0\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promotionCode-text').val(bestCode);\r\n      $('#promotionCode-text').get(0).dispatchEvent(this.changeEvent);\r\n      $('.PromotionCode-submit').get(0).dispatchEvent(this.clickEvent);\r\n    };\r\n  },\r\n  createEventInstance: function () {\r\n    this.changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n    this.clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  }\r\n};\r\nExternalProvider.createEventInstance();",
	"topshopfr": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var serializedArray = this.serializeArray();\r\n\r\n      $.each(serializedArray, function () {\r\n        if (object[this.name] !== undefined) {\r\n          if (!object[this.name].push) {\r\n            object[this.name] = [object[this.name]];\r\n          }\r\n\r\n          object[this.name].push(this.value || '');\r\n        } else {\r\n          object[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    var data = $('#promo_codes form').serializeObject();\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      data = Object.assign(data, {\r\n        promoCode: code\r\n      });\r\n\r\n      return data;\r\n    } else if (action === 'clearCouponUrl') {\r\n      data = Object.assign(data, {\r\n        promoCode: code,\r\n        taskType: 'R'\r\n      });\r\n\r\n      return data;\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.summary_price:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"topviewnyc": "var ExternalProvider = {\r\n  init: function () {\r\n    this.oldTotal = parseFloat($('.total_confirm').text().replace(\/[^0-9.]\/g, ''));\r\n  },\r\n  parse: function (response) {\r\n    var newTotal = parseFloat(response.total);\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"torrid": "var ExternalProvider = {\r\n    prepare: function(actionType, couponCode) {\r\n        if(actionType === 'applyCouponUrl') {\r\n            if(this.$('.orderdiscounts').length) {\r\n                var queue = this.$(document).queue(this.queueName);\r\n\r\n                queue.unshift(function(next) {\r\n                    $.ajax({\r\n                        url: `https:\/\/www.torrid.com\/on\/demandware.store\/Sites-torrid-Site\/default\/Cart-AddCouponJson?couponCode=${couponCode}&format=ajax`, \/\/ eslint-disable-line Parsing error: Unexpected character '`'\r\n                        mode: 'GET',\r\n                        responseType: 'json',\r\n                        success: function() {\r\n                            next();\r\n                        },\r\n                        error: function() {\r\n                            next();\r\n                        }\r\n                    });\r\n                });\r\n\r\n                this.$(document).queue(this.queueName, queue);\r\n            }\r\n        }\r\n    },\r\n    parse: function(response, status, $xhr, couponCode) {\r\n        var responseHTML = this.$.parseHTML(response);\r\n        this.savings = parseFloat(this.$('.odisc', responseHTML).text().replace(this.nonPriceRegex, ''));\r\n\r\n        if(this.savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: this.savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: this.savings\r\n        };\r\n    },\r\n    complete: function(bestCode){\r\n        if(bestCode) {\r\n            if(this.$('.orderdiscounts').length) {\r\n                location.reload(true);\r\n            } else {\r\n                this.$('#dwfrm_cart_couponCode, #dwfrm_billing_couponCode').val(bestCode);\r\n                this.$('#add-coupon, [name=\"dwfrm_cart_addCoupon\"]').click();\r\n            }\r\n        }\r\n    },\r\n    queueName: '_cfq',\r\n    $: window.$piggyJq || jQuery,\r\n    nonPriceRegex: \/[^0-9|.]\/g,\r\n    savings: 0.00\r\n};",
	"toryburch": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"dwfrm_cart_couponCode\"]').val(bestCode);\r\n            $('button[value=\"Apply\"]').click();\r\n        }\r\n    }\r\n};",
	"toshiba": "var ExternalProvider = {\r\n    \r\n    parse: function(response, status, $xhr, code)\r\n    {\t\r\n         var responseHTML = $.parseHTML(response),\r\n            codeFound = $('.coupon .f-9', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\t\t\t\r\n        if (codeFound){\r\n\r\n\t\t\tvar oldPrice = Number($('#js_summary .total dd').text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n\t\t\t\tnewPrice = Number($('#js_summary .total dd',responseHTML).text().replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n\t\t\t\tsavings = (oldPrice - newPrice)\/100;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\tsavings: savings\r\n\t\t\t}\t\t\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\tsuccess: false,\r\n\t\t\tsavings: 0.00\r\n\t\t};\r\n    }\r\n}",
	"tostadorafr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#descuento_bajera', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"totaldefense": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, couponCode) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var subTotal = parseFloat($('tr .subtotal-text span').text().replace(\/[^0-9|.]\/g, ''));\r\n        var grandTotal = parseFloat($('tr .total-text span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = subTotal - grandTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"totaldiabetessupply": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.field__input-btn.btn.btn--disabled').removeAttr('disabled');\r\n            $('.field__input-btn.btn.btn--disabled').removeClass('btn--disabled');\r\n            $('button span:contains(\"Apply\")').click();\r\n        }\r\n    }\r\n};",
	"totalpetsupply": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('td', responseHTML).filter(function(el){return $(this).html().indexOf('Discount:') > -1}).next('td').find('strong');\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('#coupon button').click();\r\n        }\r\n    }\r\n};",
	"totalwireless": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount-amount > p', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"tourradar": "var ExternalProvider = {\r\n    DataParameters: {},\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var main = document.getElementsByTagName(\"main\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        ExternalProvider.DataParameters = $.parseJSON($('main').attr('data-parameters'));\r\n\r\n        var ApplyUrlInput = $('#___jpApplyUrl');\r\n        var ApplyUrl = 'https:\/\/www.tourradar.com\/book-now\/check_promo_code\/' + ExternalProvider.DataParameters.tourId;\r\n\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('input');\r\n            ApplyUrlInput.id = '___jpApplyUrl';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        ApplyUrlInput.attr('value', ApplyUrl);\r\n    },\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        var vars = [];\r\n        var hash;\r\n        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\r\n\r\n        for (var i = 0; i < hashes.length; i++) {\r\n            hash = hashes[i].split('=');\r\n            vars.push(hash[0]);\r\n            vars[hash[0]] = hash[1];\r\n        }\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                promoCode: code,\r\n                pax: ExternalProvider.DataParameters.pax,\r\n                currency: ExternalProvider.DataParameters.currency,\r\n                date: vars.date,\r\n                email: ''\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = String(response.data.referral_value).replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0.00,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        if (bestCode) {\r\n            $('.link a')[0].click();\r\n            $('div.field').find('input').val(bestCode);\r\n            $('.field a')[0].click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"tours4fun": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.coupon_total.replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        location.reload(true);\r\n    }\r\n};",
	"tours4fun.mobile": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var product_id = $('li[ng-show=\"showTourDetails\"]:contains(\"Tour Code\")').text();\r\n        product_id = product_id.substr(product_id.indexOf('-') + 1);\r\n        var data = {\r\n            couponCode: code,\r\n            totalPrice: parseFloat($('.cart-total-price:eq(0)').text().replace(\/[^0-9|\\.]\/g, '')),\r\n            product_id: product_id\r\n        }\r\n        return data;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.coupon_total.replace(\/[^0-9|\\.]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        var clickEvent = new MouseEvent('click', {\r\n           'view': window,\r\n           'bubbles': true,\r\n           'cancelable': true\r\n        });\r\n        $('.head-right a').get(0).dispatchEvent(clickEvent);\r\n        $('#input-coupon-code').val(bestCode)[0].dispatchEvent(new Event(\"input\", {bubbles: true}));\r\n        $('#input-coupon-code').trigger('input').trigger('change');\r\n        $('.btn-coupon-apply').click();\r\n    }\r\n};",
	"tous": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        $('#coupon_code').val(bestCode);\r\n        $('.button.apply').click();\r\n    }\r\n};",
	"toysrus": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, couponCode) {\r\n        var responseJSON = JSON.parse(response);\r\n        var responseCouponCode = responseJSON.appliedPromoCodes;\r\n\r\n        responseCouponCode.forEach(function (index) {\r\n            this.codeFound = index.couponCode;\r\n            this.savings = responseJSON.orderSummary.totalSavings;\r\n        }, this);\r\n\r\n        if (couponCode.toLowerCase() === this.codeFound.toLowerCase()) {\r\n            if (this.savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: this.savings\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: this.savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    },\r\n    codeFound: '',\r\n    savings: 0.00,\r\n    regularExpression: \/[^0-9|.]\/g\r\n};",
	"toysrus.mobile": "var ExternalProvider = {\r\n    prepare: function (actionType, couponCode) {\r\n        var formData = {};\r\n        var applyCouponData = { couponId: couponCode };\r\n        var clearCouponData = { couponCode: couponCode };\r\n\r\n        if (actionType === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                coupondetails: JSON.stringify(applyCouponData)\r\n            });\r\n        }\r\n\r\n        if (actionType === 'clearCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                customparams: JSON.stringify(clearCouponData)\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response, status, $xhr, couponCode) {\r\n        var responseJSON = JSON.parse(response);\r\n        var responseCouponCode = responseJSON.properties.promocodeinfo.promos;\r\n\r\n        responseCouponCode.forEach(function (index) {\r\n            this.codeFound = index.promoid;\r\n            this.savings += responseJSON.properties.cartinfo.savingstotal.replace(this.regularExpression, '');\r\n        }, this);\r\n\r\n        if (couponCode === this.codeFound) {\r\n            if (this.savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: this.savings\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: this.savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload(true);\r\n        }\r\n    },\r\n    codeFound: '',\r\n    savings: 0.00,\r\n    regularExpression: \/[^0-9|.]\/g\r\n};",
	"tracfone": "var ExternalProvider = {\r\n    origPrice: '',\r\n    storeId: '',\r\n    catalogId: '',\r\n    langId: '',\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"storeId\", WCParamJS.storeId);';\r\n        scriptContent += 'body.setAttribute(\"catalogId\", WCParamJS.catalogId);';\r\n        scriptContent += 'body.setAttribute(\"langId\", WCParamJS.langId);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        this.storeId = $('body').attr('storeid');\r\n        this.catalogId = $('body').attr('catalogid');\r\n        this.langId = $('body').attr('langid');\r\n\r\n        this.origPrice = parseFloat($('.js-totalplanprice').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var resultUrl = 'https:\/\/shop.tracfone.com\/shop\/ShopCartDisplayView?shipmentType=single&catalogId=' + this.catalogId + '&langId=' + this.langId + '&storeId=' + this.storeId + '';\r\n\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        resultUrlInput.attr('value', resultUrl);\r\n\r\n        $('body').removeAttr('storeid');\r\n        $('body').removeAttr('catalogid');\r\n        $('body').removeAttr('langid');\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'clearCouponUrl') {\r\n            data = {\r\n                orderId: $('input[name=\"orderId\"]').val(),\r\n                taskType: 'R',\r\n                URL: '',\r\n                storeId: this.storeId,\r\n                catalogId: this.catalogId,\r\n                langId: this.langId,\r\n                finalView: 'AjaxOrderItemDisplayView',\r\n                requesttype: 'ajax',\r\n                promoCode: code\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var newPrice = parseFloat($('.js-totalplanprice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        var savings = this.origPrice - newPrice;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        location.reload(true);\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"tractorsupplycompany": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function() {\r\n        retries++;\r\n        $('.removeImg').click();\r\n        $('img[alt=\"Remove Promo Code\"]').click();\r\n        if (!$('.removeImg').length && !$('img[alt=\"Remove Promo Code\"]').length && retries < 3) {\r\n          clearInterval(interval);         \r\n          resolve();\r\n        } else if (retries === 3) {\r\n          resolve();\r\n        }\r\n      }, 2000);\r\n    })\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#discount_value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n      \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"trafalgarstore": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total-line__price span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"trainme": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"trainz": "var ExternalProvider = {\r\n\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"token\", Shopify.Checkout.token);';\r\n        scriptContent += 'body.setAttribute(\"__st\", __st.a);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var token = $('body').attr('token');\r\n        var __st = $('body').attr('__st');\r\n\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = 'https:\/\/www.trainz.com\/' + __st + '\/checkouts\/' + token;\r\n\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n\r\n        var ResultUrlInput = $('#___jpResultUrl');\r\n        var ResultUrl = 'https:\/\/www.trainz.com\/' + __st + '\/checkouts\/' + token + '?step=contact_information';\r\n\r\n\r\n        if (!ResultUrlInput.length) {\r\n            ResultUrlInput = document.createElement('input');\r\n            ResultUrlInput.id = '___jpResultUrl';\r\n            ResultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ResultUrlInput);\r\n            ResultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        ResultUrlInput.attr('value', ResultUrl);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"trampolinepartsandsupply": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#shopping-cart-totals-table .price:eq(4)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code, #id_couponcode').val(bestCode);\r\n            $('button[title=\"Apply Coupon\"], #onestepcheckout-coupon-add').click();\r\n        }\r\n    }\r\n};",
	"transformyourimages": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.disc', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"promcode\"]').val(bestCode);\r\n            $('#submit').click();\r\n        }\r\n    }\r\n};",
	"travelocity": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        couponCode: code,\r\n        tripid: $('body').attr('data-tripid'),\r\n        tlCouponAttach: 1,\r\n        tlCouponCode: code,\r\n        productType: $('#ga').attr('data-cko-ga-lob').toLowerCase(),\r\n        binPrefix: null\r\n      };\r\n\r\n      return data;\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.couponModel.couponDiscount.amount.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#couponId').val(bestCode);\r\n      $('#apply_coupon_button').click();\r\n    }\r\n  }\r\n};",
	"travelodge": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    this.createScript();\r\n    this.getContentData();\r\n    this.createInputs();\r\n  },\r\n  prepare: function (step, code, xhr, a) {\r\n    if (step === 'applyCouponUrl') {\r\n      return this.bookingData;\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    let savings = this.applyCouponUrl(response.data.code);\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#uqdCodeBox').val(bestCode);\r\n      $('#uqdButton').click();\r\n    }\r\n  },\r\n  createScript: function () {\r\n    let script = document.createElement('script');\r\n    let scriptContent = `\r\n      var body = document.getElementsByTagName(\"body\")[0];\r\n      body.setAttribute(\"uniqodo\", JSON.stringify(UNIQODO.getBookingData()));\r\n      body.setAttribute(\"uniqodo-priv\", UNIQODO.priv);\r\n      body.setAttribute(\"uniqodo-advertiserID\", UNIQODO.advertiserId);\r\n      body.setAttribute(\"xpid\", NREUM.loader_config.xpid);\r\n    `;\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n  },\r\n  getContentData: function () {\r\n    const bodyAttributes = $('body');\r\n    this.bookingData = JSON.parse(bodyAttributes.attr('uniqodo'));\r\n    this.APIKey = bodyAttributes.attr('uniqodo-priv');\r\n    this.advertiserID = bodyAttributes.attr('uniqodo-advertiserID');\r\n    this.csrf = bodyAttributes.attr('xpid');\r\n    $('#tmpScript').remove();\r\n    bodyAttributes.removeAttr('uniqodo uniqodo-priv uniqodo-advertiserID');\r\n  },\r\n  createInputs: function () {\r\n    $('<input>', {\r\n      type: 'hidden',\r\n      id: 'api_key',\r\n      value: ExternalProvider.APIKey\r\n    }).appendTo('body');\r\n    $('<input>', {\r\n      type: 'hidden',\r\n      id: 'advertiser_id',\r\n      value: ExternalProvider.advertiserID\r\n    }).appendTo('body');\r\n    $('<input>', {\r\n      type: 'hidden',\r\n      id: 'xpid',\r\n      value: ExternalProvider.csrf\r\n    }).appendTo('body');\r\n  },\r\n  applyCouponUrl: function (code) {\r\n    let header = { 'X-NewRelic-ID': this.csrf };\r\n    let data = { discount_code: code };\r\n    let savings = 0;\r\n    $.ajax({\r\n      url: 'https:\/\/www.travelodge.co.uk\/checkout\/apply-discount',\r\n      type: 'POST',\r\n      header: header,\r\n      async: false,\r\n      data: data,\r\n      success: function (response) {\r\n        savings = parseFloat(response.totalDiscount \/ 100);\r\n      }\r\n    });\r\n    return savings;\r\n  },\r\n};\r\n\/\/Give time for UNIQODO API to load\r\nsetTimeout(() => ExternalProvider.__prepareUrl(), 500);",
	"travelsmith": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discountvalue.discount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"travismathew": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.totals_html);\r\n    var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code_mini, #coupon_code').val(bestCode);\r\n      $('.apply-coupon, button[value=\"Apply\"]').click();\r\n    }\r\n  }\r\n};",
	"treatwellde": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('input[placeholder=\"Aktionscode eingeben\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[placeholder=\"Aktionscode eingeben\"]').trigger('input').trigger('change');\r\n      $('.anchor.secondary.new-code').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    } else {\r\n      $('.promocode').click();\r\n    }\r\n  },\r\n\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon') || (step === 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 500);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 50);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('div .order-subtotals span:contains(\"-\")').text().replace(\/[^0-9]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[placeholder=\"Aktionscode eingeben\"]').val(bestCode);\r\n      $('.anchor.secondary.new-code').click();\r\n    }\r\n  }\r\n};",
	"treetopia": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n\r\n    parse: function(response, status, $xhr, code){\r\n        var responseHTML = $(response);\r\n        var savingsNode = $('td.v65-onepage-ordersummary-itemtotal:contains(\"-$\")',responseHTML);\r\n        var savings = savingsNode.text().replace(this.nonPriceRegex, '').toString();\r\n        if(savings.length > 0) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        location.reload(true)\r\n    }\r\n};",
	"trendybutler": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.discount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#couponCode').val(bestCode);\r\n            $(\"button[data-action-url='\/checkout\/apply-coupon']\").click();\r\n        }\r\n    }\r\n};",
	"trudiamonds": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.TPRICE:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#ctl00_CONTENT_sb_tlBasket_pc_tbPromotionCode, #ctl00_CONTENT_tc1_pc_tbPromotionCode').val(bestCode);\r\n            $('#ctl00_CONTENT_sb_tlBasket_pc_lbtnApplyRemove, #ctl00_CONTENT_tc1_pc_lbtnApplyRemove')[0].click();\r\n        }\r\n    }\r\n};",
	"truefacet": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.chksidebar);\r\n    var oldTotal = parseFloat($('#totalprice, .order_amt').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('#totalprice', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode);\r\n      $('.addcoupon').trigger('click');\r\n    }\r\n  }\r\n\r\n};",
	"truehealth": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|\\.]\/g,\r\n    parse: function(response, status, $xhr, code){\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsNode = $('tr.totals-discount > td.a-right > span.price', responseHTML);\r\n        var savings = savingsNode.text().replace(this.nonPriceRegex, '').toString();\r\n        if(savings.length > 0) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n        location.reload(true)\r\n    }\r\n};",
	"trueleafmarket": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"truevalue": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = 0;\r\n\r\n        if (this.getCheckOutType() === 'CART') {\r\n            savings = response.substring(response.indexOf('base_discount_amount'));\r\n            savings = savings.substring(23, savings.indexOf(',') - 1);\r\n        } else {\r\n            var urlString = '';\r\n\r\n            var currentHtml = $('html').html();\r\n            var checkoutConfigString2 = currentHtml.substring(currentHtml.indexOf('{\"entity_id\":'));\r\n\r\n            checkoutConfigString2 = checkoutConfigString2.substring(0, checkoutConfigString2.indexOf(',') - 1) + '\"}';\r\n\r\n            var checkoutConfigObject2 = JSON.parse(checkoutConfigString2);\r\n            var entityId = checkoutConfigObject2.entity_id;\r\n\r\n            urlString = 'https:\/\/www.truevalue.com\/rest\/default\/V1\/guest-carts\/' + entityId + '\/';\r\n\r\n\r\n            $.ajax({\r\n                url: urlString + 'coupons\/' + code,\r\n                method: 'PUT',\r\n                success: function () {\r\n                    $.ajax({\r\n                        url: urlString + 'payment-information',\r\n                        method: 'GET',\r\n                        success: function (result) {\r\n                            savings = Math.abs(result.totals.discount_amount);\r\n                        },\r\n                        async: false\r\n                    });\r\n                },\r\n                async: false\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            var codeFieldId = '';\r\n            var applyButtonSelector = '';\r\n\r\n            if (this.getCheckOutType() === 'CART') {\r\n                $('#coupon_code').val(bestCode);\r\n                $('button[value=\"Apply Discount\"]').trigger('click');\r\n            } else {\r\n                codeFieldId = 'discount-code';\r\n                applyButtonSelector = \"\\\"button[class='action action-apply']\\\"\";\r\n                $('#' + codeFieldId).val(bestCode);\r\n\r\n                var s = document.createElement('script');\r\n\r\n                s.type = 'text\/javascript';\r\n\r\n                var code = 'jQuery(\"#' + codeFieldId + '\").change(); jQuery(' + applyButtonSelector + ').click();';\r\n\r\n                s.appendChild(document.createTextNode(code));\r\n                document.body.appendChild(s);\r\n            }\r\n        }\r\n    },\r\n    getCheckOutType: function () {\r\n        var type = '';\r\n\r\n        if (location.href.includes('cart')) {\r\n            type = 'CART';\r\n        } else {\r\n            type = 'CHECKOUT';\r\n        }\r\n\r\n        return type;\r\n    }\r\n\r\n};",
	"trumedic": "var ExternalProvider = {\r\n    _init: function () {\r\n        var securityToken = $('script:contains(\"wc_cart_params\"),script:contains(\"wc_checkout_params\")').text().match(\/\"apply_coupon_nonce\":\"([A-z|0-9]+)\"\/)[1];\r\n        var securityTokenInput = $('#__securityToken');\r\n\r\n        if (!securityTokenInput.length) {\r\n            securityTokenInput = document.createElement('input');\r\n            securityTokenInput.id = '__securityToken';\r\n            securityTokenInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(securityTokenInput);\r\n            securityTokenInput = $('#__securityToken');\r\n        }\r\n\r\n        securityTokenInput.attr('value', securityToken);\r\n\r\n        return null;\r\n    },\r\n    parse: function (response, a, $b, code) {\r\n        var validCode = !(response.includes('woocommerce-error'));\r\n        var savings = validCode ? this._getSavings(code) : 0.00;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    _getSavings: function (code) {\r\n        var savings;\r\n        var cartIdQty = $('.input-text.qty.text').attr('name');\r\n        var formData = {\r\n            coupon_code: code,\r\n            'woocommerce-cart-nonce': $('#woocommerce-cart-nonce').val(),\r\n            _wp_http_referer: '\/cart\/'\r\n        };\r\n\r\n        formData[cartIdQty] = $('.input-text.qty.text').val();\r\n        $.ajax({\r\n            url: 'https:\/\/trumedic.com\/cart\/',\r\n            type: 'POST',\r\n            async: false,\r\n            data: formData,\r\n            success: function (result) {\r\n                savings = parseFloat($('.cart-discount td:contains(\"-\")', result).text().replace(\/[^.0-9]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return savings;\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._init();",
	"trunki": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.reduction-code', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"trustedtech": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"trustedtours": "var ExternalProvider = {\r\n\r\n\tinit: function() {\r\n\t\t$.fn.serializeObject = function()\r\n\t\t{\r\n\t\t\tvar o = {};\r\n\t\t\tvar a = this.serializeArray();\r\n\t\t\t$.each(a, function() {\r\n\t\t\t\tif (o[this.name] !== undefined) {\r\n\t\t\t\t\tif (!o[this.name].push) {\r\n\t\t\t\t\t\to[this.name] = [o[this.name]];\r\n\t\t\t\t\t}\r\n\t\t\t\t\to[this.name].push(this.value || '');\r\n\t\t\t\t} else {\r\n\t\t\t\t\to[this.name] = this.value || '';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn o;\r\n\t\t};\r\n\t},\r\n\r\n    prepare: function (action, code) {\r\n\t\tif(action !== 'applyCouponUrl') return false;\r\n\r\n\t\tvar formData = $('#aspnetForm').serializeObject();\r\n\r\n\t\tformData = Object.assign(formData, {\r\n\t\t\tctl00$ctl00$NestedMaster$PageContent$ucCouponCode$CouponCode: code,\r\n\t\t\tctl00$ctl00$NestedMaster$PageContent$ucCouponCode$ApplyCouponButton: 'Apply'\r\n        });\r\n\r\n\t\treturn formData;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n\t    var $response = $.parseHTML(response),\r\n            couponForm = $('#ctl00_ctl00_NestedMaster_PageContent_ucCouponCode_CouponsPanel', $response),\r\n            couponMessage = $('.success', couponForm);\r\n\t    if(couponMessage && couponMessage.text().toLowerCase().indexOf(('coupon ' + code + ' accepted').toLowerCase()) !== -1) {\r\n\r\n\t        return {\r\n\t            success: true,\r\n                savings: Math.abs(parseFloat($('#ctl00_ctl00_NestedMaster_PageContent_BasketTotalSummary_Coupons', $response).text().replace(\/[^0-9|\\.]\/g, '')))\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n\tcomplete: function(bestCode) {\r\n\t\tif(bestCode) location.reload();\r\n\t}\r\n};",
	"tulo": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.discount:contains(\"- $\"):last', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#dwfrm_cart_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n\r\n      if (location.href.includes('delivery')) location.reload();\r\n    }\r\n  }\r\n};",
	"turnbullandasser": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.Basket-checkout .Basket-checkout-title:contains(\"Discount\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $.post('\/checkout\/secure\/couponPost\/', {\r\n        remove: 0,\r\n        coupon_code: bestCode\r\n      }, () => location.reload())\r\n    }\r\n  }\r\n};",
	"turtlebeach": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('#in-context-paypal-metadata').attr('data-currency');\r\n\r\n        if (selector === 'EUR') {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === 'GBP') {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n        else if (selector === 'EUR') {\r\n            currency = 'EUR';\r\n            locale = localeMapping['FR'];\r\n        } else {\r\n            locale = localeMapping['US'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match('product_discounts(.*)')[1].split(',')[1]);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"tvc-mall": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var jsonParse = JSON.parse(response.match('_discountInfo =(.+?);')[1]);\r\n        var savings = parseFloat(jsonParse.DiscountAmount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tvstoreonline": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"tweakslumber": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldPrice = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newPrice = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldPrice - newPrice;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"twillory": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var len = $(\"span:contains('- $'), span:contains('-$')\", responseHTML);\r\n    var savings = 0;\r\n    for (var i = 0; i < len.length; ++i) {\r\n      var str = $(\"span:contains('- $'), span:contains('-$')\", responseHTML).eq(i).text();\r\n      if (str.indexOf('(') > 0) {\r\n        var pos = str.indexOf('(') + 1;\r\n        str = str.slice(pos, str.lastIndexOf(')'));\r\n        savings += parseFloat(str.replace(\/[^0-9|.]\/g, ''));\r\n      } else {\r\n        savings = parseFloat(str.replace(\/[^0-9|.]\/g, ''));\r\n      }\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"twinings": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.mini-basket__smry__discounts td', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload()\r\n  }\r\n};",
	"twinkledealscom": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response),\r\n            savings = 0;\r\n        if ($('.cancel_coupon', responseHTML).length) {\r\n            savings = parseFloat($('.row2 .my_shop_price:eq(1)', responseHTML).attr('data-orgp'));\r\n        }\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n}",
	"twinkledealscom.mobile": "var ExternalProvider = {\r\n    oldTotal: 0,\r\n    init: function () {\r\n        this.oldTotal = $piggyJq('.js_grandTotalPrice').attr('data-orgp');\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $piggyJq.parseHTML(response),\r\n            savings = 0;\r\n        if ($piggyJq('#js_cancleBtn', responseHTML).length) {\r\n            savings = this.oldTotal - $piggyJq('.js_grandTotalPrice', responseHTML).attr('data-orgp');\r\n        }\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.assign('https:\/\/cartm.twinkledeals.com\/m-flow-a-cart.html?pcode='+bestCode);\r\n        }\r\n    }\r\n}",
	"u90soccer": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar savings = parseFloat($('#shopping-cart-totals-table .coupon-line .price', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n    \tif(savings > 0) {\r\n    \t\treturn {\r\n    \t\t\tsuccess: true,\r\n    \t\t\tsavings: savings\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"ubaldi": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.contenu_etape.innerHTML);\r\n        var savings = parseFloat($('.montant-code-promo', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"udemy": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n    if (action === 'applyCouponUrl') {\r\n      data = {\r\n        codes: [code]\r\n      };\r\n\r\n      return JSON.stringify(data);\r\n    }\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.cart[0].current_discount.discount_amount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    }\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ugears": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.total-line__price span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ugg": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('.price-sales').text().replace(\/[0-9.,]\/g, '').trim();\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (selector === \"\u20ac\") {\r\n            locale = localeMapping['FR'];\r\n            currency = \"EUR\";\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.order-totals-table .order-total td:nth-child(2)').eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.order-totals-table .order-total td:nth-child(2)', responseHTML).eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = (oldPrice - newPrice);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"ukcoach": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var className = $('body').attr('class');\r\n\r\n        this.isCart = className === undefined;\r\n\r\n        var clearUrlInput = $('#___jpCouponUrl');\r\n        var resultUrlInput = $('#___jpResultUrl');\r\n        var clearUrl = this.isCheckoutPage() ? $('#cartAction').val() : 'https:\/\/uk.coach.com\/shipping?dwcont=' + $('#cart-items-form').attr('action').match('dwcont=(.*)')[1];\r\n        var resultUrl = this.isCheckoutPage() ? $('#cartAction').val() : 'https:\/\/uk.coach.com\/shipping?dwcont=' + $('#cart-items-form').attr('action').match('dwcont=(.*)')[1];\r\n\r\n        if (!clearUrlInput.length) {\r\n            clearUrlInput = document.createElement('input');\r\n            clearUrlInput.id = '___jpCouponUrl';\r\n            clearUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n            clearUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        if (!resultUrlInput.length) {\r\n            resultUrlInput = document.createElement('input');\r\n            resultUrlInput.id = '___jpResultUrl';\r\n            resultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n            resultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        clearUrlInput.attr('value', clearUrl);\r\n        resultUrlInput.attr('value', resultUrl);\r\n    },\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n        var selector = location.host;\r\n\r\n        if (selector.match('uk')) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector.match('fr')) {\r\n            locale = localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        } else if (selector.match('de')) {\r\n            locale = localeMapping.DE\r\n            newCurrency = 'EUR'\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response)\r\n        var savings = parseFloat($('.promo-value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#dwfrm_cart_couponCode').trigger('input').trigger('change');\r\n            $('#add-coupon').click();\r\n        };\r\n    },\r\n    isCheckoutPage: function () {\r\n        return \/shipping\/.test(location.href);\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"uksoccershop": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n\r\n        var selector = $(\"#switcher-info .currency\").text().replace(\/[0-9.,]\/g, '').trim();\r\n        var locale = '';\r\n        switch (selector) {\r\n            case 'EUR':\r\n                locale = localeMapping['FR'];\r\n                currency = \"EUR\";\r\n                break;\r\n            case 'USD':\r\n                locale = localeMapping['US'];\r\n                currency = \"USD\";\r\n                break;\r\n            default:\r\n                locale = localeMapping['GB'];\r\n                currency = \"GBP\";\r\n                break;\r\n        }\r\n\r\n        var storeCurrency = amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n\r\n        return storeCurrency;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"Discount\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#couponinput').val(bestCode);\r\n            $('#dwfrm_cart_addCoupon').click();\r\n        }\r\n    }\r\n};",
	"ukswimwear": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-total-price .price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#xOfferCode').val(bestCode);\r\n            $('.col-lg-4.btn.btn-primary').click();\r\n        }\r\n    },\r\n};",
	"uktoolcentre": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":-(\\w+),\/)[1]);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    $('#coupon_code').val(bestCode);\r\n    $('button:contains(\"Apply Discount\")').click();\r\n  }\r\n};",
	"ullapopken": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    this.isCart = $('body#basket').length > 0;\r\n\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = this.isCart ? location.origin + '\/basket\/' : location.origin + '\/order\/summary-of-order\/';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n\r\n    if (this.isCart && type === 'applyCouponUrl') {\r\n      data = {\r\n        'cart:couponForm': 'cart:couponForm',\r\n        'cart:couponForm:voucher_input': code,\r\n        'javax.faces.ViewState': $('input[name=\"javax.faces.ViewState\"]').val(),\r\n        'javax.faces.source': 'cart:couponForm:addVoucherToCartButton',\r\n        'javax.faces.partial.event': 'click',\r\n        'javax.faces.partial.execute': 'cart:couponForm:addVoucherToCartButton cart:couponForm:voucher_input',\r\n        'javax.faces.partial.render': 'cart:cart cart:costing cart:coupon globalNotifications globalTracking basket-box',\r\n        'javax.faces.behavior.event': 'action',\r\n        'javax.faces.partial.ajax': true\r\n      };\r\n    } else if (!this.isCart && type === 'applyCouponUrl') {\r\n      data = {\r\n        'checkoutVoucher:couponForm': 'checkoutVoucher:couponForm',\r\n        'checkoutVoucher:couponForm:voucher_input': code,\r\n        'javax.faces.ViewState': $('input[name=\"javax.faces.ViewState\"]').val(),\r\n        'javax.faces.source': $('.couponSubmit input').attr('name'),\r\n        'javax.faces.partial.event': 'click',\r\n        'javax.faces.partial.execute': $('.couponSubmit input').attr('name') + ' checkoutVoucher:couponForm',\r\n        'javax.faces.partial.render': 'cartCounter cartOverview globalTracking messages checkoutVoucher:couponForm cart_entries',\r\n        'javax.faces.behavior.event': 'action',\r\n        'javax.faces.partial.ajax': true\r\n      };\r\n    } else if (this.isCart && type === 'clearCouponUrl') {\r\n      data = {\r\n        'cart:cart': 'cart:cart',\r\n        'javax.faces.ViewState': $('input[name=\"javax.faces.ViewState\"]').val()\r\n      };\r\n      data['cart:cart:repeater:' + ($('#cart .row_height').length) + ':removeFromCart'] = 'cart:cart:repeater:' + ($('#cart .row_height').length) + ':removeFromCart';\r\n    } else if (!this.isCart && type === 'clearCouponUrl') {\r\n      data = {\r\n        'javax.faces.ViewState': $('input[name=\"javax.faces.ViewState\"]').val(),\r\n        'javax.faces.source': $('#cartOverview > form').attr('id') + ':repeater:' + ($('tr').length - 1) + ':removeFromCart',\r\n        'javax.faces.partial.event': 'click',\r\n        'javax.faces.partial.execute': $('#cartOverview > form').attr('id') + ':repeater:' + ($('tr').length - 1) + ':removeFromCart ' + $('#cartOverview > form').attr('id'),\r\n        'javax.faces.partial.render': 'cartOverview',\r\n        'javax.faces.behavior.event': 'action',\r\n        'javax.faces.partial.ajax': true\r\n      };\r\n      data[$('#cartOverview > form').attr('id')] = $('#cartOverview > form').attr('id');\r\n      data['cart:cart:repeater:' + ($('tr').length - 1) + ':removeFromCart'] = 'cart:cart:repeater:' + ($('tr').length - 1) + ':removeFromCart';\r\n    } else {\r\n      return null;\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = this.isCart ? parseFloat($('.discount:contains(\"- $\"):first()', responseHTML).text().replace(\/[^0-9|.]\/g, '')) : parseFloat($('span:contains(\"$-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"ullapopkende": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var className = $('body').attr('class');\r\n\r\n        this.isCart = className === undefined;\r\n\r\n        var applyUrlInput = $('#___jpCouponUrl');\r\n        var applyUrl = this.isCartPage() ? 'warenkorb\/' : 'bestellung\/bestelluebersicht\/';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '___jpCouponUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#___jpCouponUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (this.isCartPage()) {\r\n            if (type === 'applyCouponUrl') {\r\n                data = {\r\n                    'cart:couponForm': $('input[name=\"cart:couponForm\"]').val(),\r\n                    'cart:couponForm:voucher_input': code,\r\n                    'javax.faces.ViewState': $('input[name=\"javax.faces.ViewState\"]').val(),\r\n                    'javax.faces.source': 'cart:couponForm:addVoucherToCartButton',\r\n                    'javax.faces.partial.event': 'click',\r\n                    'javax.faces.partial.execute': 'cart:couponForm:addVoucherToCartButton cart:couponForm:voucher_input',\r\n                    'javax.faces.partial.render': 'cart:cart cart:costing cart:coupon globalNotifications globalTracking basket-box',\r\n                    'javax.faces.behavior.event': 'action',\r\n                    'javax.faces.partial.ajax': true\r\n                };\r\n\r\n                return data;\r\n            } else if (type === 'clearCouponUrl') {\r\n                data = {\r\n                    'cart:cart': $('input[name=\"cart:cart\"]').val(),\r\n                    'javax.faces.ViewState': $('input[name=\"javax.faces.ViewState\"]').val(),\r\n                    'cart:cart:repeater:1:removeFromCart': 'cart:cart:repeater:1:removeFromCart'\r\n                };\r\n\r\n                return data;\r\n            }\r\n        } else if (!this.isCartPage() && type === 'applyCouponUrl') {\r\n            data = {\r\n                'checkoutVoucher:couponForm': $('input[name=\"checkoutVoucher:couponForm\"]').val(),\r\n                'checkoutVoucher:couponForm:voucher_input': code,\r\n                'javax.faces.ViewState': $('input[name=\"javax.faces.ViewState\"]:first').val(),\r\n                'javax.faces.source': $('.couponSubmit label').attr('for'),\r\n                'javax.faces.partial.execute': $('.couponSubmit label').attr('for') + ' ' + 'checkoutVoucher:couponForm',\r\n                'javax.faces.partial.render': 'cartCounter cartOverview globalTracking messages checkoutVoucher:couponForm cart_entries',\r\n                'javax.faces.partial.event': 'click',\r\n                'javax.faces.behavior.event': 'action',\r\n                'javax.faces.partial.ajax': true\r\n            };\r\n\r\n            return data;\r\n        } else if (type === 'clearCouponUrl') {\r\n            $.ajaxSettings.beforeSend = function (xhr) {\r\n                xhr.setRequestHeader('Accept', {\r\n                    toString: function () {\r\n                        return '*\/*';\r\n                    }\r\n                });\r\n                xhr.setRequestHeader('content-type', {\r\n                    toString: function () {\r\n                        return 'application\/x-www-form-urlencoded;charset=UTF-8';\r\n                    }\r\n                });\r\n            };\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        return \/warenkorb\/.test(location.href);\r\n    },\r\n\r\n    parse: function (response) {\r\n        var checkoutSavings = 0;\r\n        var cartSavings = 0;\r\n        if (!this.isCartPage()) {\r\n            $.ajax({\r\n                url: 'https:\/\/www.ullapopken.de\/api\/res\/checkout\/cart',\r\n                type: 'GET',\r\n                success: function (result) {\r\n                    checkoutSavings = parseFloat(result.totalDiscounts.value);\r\n                },\r\n                async: false,\r\n            });\r\n        } else {\r\n            var responseXML = $.parseHTML(response.getElementsByTagName('update')[4].childNodes[0].data);\r\n            cartSavings = $('.discount:first', responseXML).text().replace(',', '.').replace(\/[^.0-9]\/g, '');\r\n        }\r\n        var savings = this.isCartPage() ? cartSavings : checkoutSavings;\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                document.getElementById('cart:couponForm:voucher_input').value = bestCode;\r\n                document.getElementById('cart:couponForm:addVoucherToCartButton').click();\r\n            } else {\r\n                document.getElementById('checkoutVoucher:couponForm:voucher_input').value = bestCode;\r\n                document.querySelector('input[value=\"Einl\u00f6sen\"],input[value=\"redeem\"]').click();\r\n            }\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"ulta": "var ExternalProvider = {\r\n  isCouponFieldVisible: function() {\r\n    return !$(\"#couponID\").is(\":visible\") || $('.Coupons__appliedRemoveLink').length > 0;\r\n  },\r\n  isCouponApplied: function() {\r\n    return $('.Coupons__applied').length > 0;\r\n  },\r\n  beforeInit: function() {\r\n    if (this.isCouponApplied() === true) {\r\n      return new Promise((resolve) => {\t\r\n        let retries = 0;\t\r\n        const interval = setInterval(function() {\t\r\n          retries++;\r\n  \r\n          if ($('.Coupons__appliedRemoveLink a').length > 0 && retries < 3) {\r\n            $('.Coupons__appliedRemoveLink a')[0].click();\r\n          }\r\n          if (!$('.Coupons__appliedRemoveLink a').length) {\r\n            clearInterval(interval);\t\r\n            resolve();\r\n          } else if (retries >= 3) {\t\r\n            clearInterval(interval);\r\n            resolve();\t\r\n          }\r\n        }, 2000);\r\n      })\r\n    }\r\n    \r\n    return null;\r\n  },\r\n  init: function () {\r\n    if (!this.isCouponFieldVisible()) { \r\n      $('.Coupons .MixedMenuButton').click();\r\n    }\r\n    this.oldTotal = parseFloat($('.BagSummaryItems__estimate-amount').text().replace(\/[^0-9|.]\/g, ''));\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('#couponID').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#couponID').trigger('input').trigger('change');\r\n      $('.Coupons__formInputField button').click();\r\n    }\r\n  },\r\n  whenReady: function(step, next){\r\n    if ( (step == 'injectCoupon') || (step == 'removeInjectedCoupon') ) {\r\n      setTimeout(function() {\r\n        var maxWait = 200, waited = 0;\r\n        var waitForClose = setInterval(function() {\r\n          var confirmed = !$(\".cls_loadingMask\").length;\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function() {\r\n              next();\r\n            }, 500);\r\n          }\r\n          waited++;\r\n        }, 10);\r\n      }, 50);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var newTotal = parseFloat($('.BagSummaryItems__estimate-amount').text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"ultrascopes": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"Checkout\", Shopify.Checkout.token);';\r\n        scriptContent += 'body.setAttribute(\"shopId\", __st.a);';\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var Checkout = $('body').attr('Checkout');\r\n        var shopId = $('body').attr('shopId');\r\n        var ApplyUrlInput = $('#___jpApplyUrl');\r\n        var ApplyUrl = 'https:\/\/ultrascopes.com\/' + shopId + '\/checkouts\/' + Checkout + '';\r\n\r\n\r\n        if (!ApplyUrlInput.length) {\r\n            ApplyUrlInput = document.createElement('input');\r\n            ApplyUrlInput.id = '___jpApplyUrl';\r\n            ApplyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ApplyUrlInput);\r\n            ApplyUrlInput = $('#___jpApplyUrl');\r\n        }\r\n\r\n        ApplyUrlInput.attr('value', ApplyUrl);\r\n\r\n\r\n        var ResultUrlInput = $('#___jpResultUrl');\r\n        var ResultUrl = 'https:\/\/ultrascopes.com\/' + shopId + '\/checkouts\/' + Checkout + '?step=contact_information';\r\n\r\n\r\n        if (!ResultUrlInput.length) {\r\n            ResultUrlInput = document.createElement('input');\r\n            ResultUrlInput.id = '___jpResultUrl';\r\n            ResultUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(ResultUrlInput);\r\n            ResultUrlInput = $('#___jpResultUrl');\r\n        }\r\n\r\n        ResultUrlInput.attr('value', ResultUrl);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price:eq(1) ', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestsavings) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.field__input-btn.btn').removeAttr('disabled');\r\n            $('.field__input-btn.btn').click();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"unbeatablesale": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.promoCodeDiscountValue', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $(\"#promoCodeInput\").val(bestCode);\r\n            $(\"button[name='_target2']\").click();\r\n        };\r\n    },\r\n };",
	"underarmourde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-discount.discount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#dwfrm_cart_couponCode').val(bestCode);\r\n      $('#add-coupon').click();\r\n    }\r\n  }\r\n};",
	"underarmourfr": "var ExternalProvider = {\r\n    parse: function (response, a, $b, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var validCoupon = $('#applied-coupons-list .cart-coupon-item__text', responseHTML).text().toLowerCase().includes(code.toLowerCase());\r\n        var validSavings = parseFloat($('.order-discount.discount', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n        var supprimerName = $('.cart-coupon-item.is--applied:contains(\"' + code + '\") button', responseHTML).attr('name');\r\n        var savings = 0.00;\r\n        var removeData = {};\r\n\r\n        removeData.dwfrm_cart_couponCode = '';\r\n        removeData[supprimerName] = 'Supprimer';\r\n\r\n        if (validCoupon) {\r\n            savings = validSavings;\r\n            $.ajax({\r\n                url: $('#promo-codes-block form[name=\"dwfrm_cart\"]').attr('action'),\r\n                type: 'POST',\r\n                async: false,\r\n                data: removeData\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#dwfrm_cart_couponCode').val(bestCode);\r\n            $('#add-coupon').click();\r\n        }\r\n    }\r\n};",
	"uniformcity": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    let discount_amount = response.match(\/\"discount_amount\":\"-([0-9|.]+)\"\/);\r\n    let savings = (discount_amount !== null) ? parseFloat(discount_amount[1]) : 0;\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"unineed": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('#coupon_code').val(bestCode);\r\n                $('button[value=\"Apply Coupon\"]').click();\r\n            } else {\r\n                $('#coupon_code').val(bestCode);\r\n                $('.amscheckout-apply').click();\r\n            }\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    }\r\n};",
	"unionbay": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('#shopping-cart-totals-table tbody tr:eq(1) td span', responseHTML);\r\n        savings = parseFloat(savings.text().replace(\/[$-]\/g, ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        $('#coupon_code').val(bestCode);\r\n        if (bestCode) {\r\n            $('.buttons-set .btn-checkout').click();\r\n        }\r\n    }\r\n};",
	"untilgone": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"upack": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        var jStorage = JSON.parse(localStorage.getItem('jStorage'));\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                request:\r\n                {\r\n                    Coupon: code,\r\n                    CouponsJson: JSON.stringify({\r\n                        Code: '',\r\n                        Type: '',\r\n                        Amount: 0,\r\n                        Reason: '',\r\n                        ReasonTerminal: '',\r\n                        Description: ''\r\n                    }) +\r\n                        ', ' +\r\n                        JSON.stringify(jStorage.couponsCollection[0]) +\r\n                        '}'\r\n                }\r\n            };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        if (type === 'clearCouponUrl') {\r\n            data = {\r\n                request:\r\n                {\r\n                    Coupon: null,\r\n                    CouponsJson: JSON.stringify({\r\n                        Code: '',\r\n                        Type: '',\r\n                        Amount: 0,\r\n                        Reason: '',\r\n                        ReasonTerminal: '',\r\n                        Description: ''\r\n                    }) +\r\n                        ', ' +\r\n                        JSON.stringify(jStorage.couponsCollection[0]) +\r\n                        '}'\r\n                }\r\n            };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.Coupon.Amount;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestcode) {\r\n        if (bestcode) {\r\n            $('#txtReferralNumber').val(bestcode);\r\n            $('#btnCouponApply').click();\r\n        }\r\n    }\r\n};",
	"urbandrinks": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat(jQuery('#shopping-cart-totals-table tbody tr:eq(1) span:contains(\"-\"):eq(0)', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"urbanears": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"\u00a3-\")', responseHTML).eq(0).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code').val(bestCode);\r\n            $('.button.button-primary.button-large').click();\r\n        }\r\n    }\r\n};",
	"urbanindustry": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n        var newCurrency;\r\n        var selector;\r\n        var s = document.createElement('script');\r\n        var code = \"document.querySelector('body').setAttribute('currency', window.currency);\";\r\n\r\n        s.id = 'tempScript';\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n        selector = $('body').attr('currency');\r\n        $('body').removeAttr('currency');\r\n        $('#tempScript').remove();\r\n\r\n        if (selector === 'GBP') {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector === 'EUR') {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        } else {\r\n            locale = localeMapping.US;\r\n            newCurrency = currency;\r\n        }\r\n\r\n        if ($('#checkout_reduction_code').length) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.field__input-btn').removeAttr('disabled').removeClass('btn--disabled').click();\r\n        }\r\n    }\r\n};",
	"urbanoutfitters": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector;\r\n        if (location.href.includes('shipping-address')) {\r\n            selector = $('.js-cart-totals__total').text().replace(\/[A-z.0-9,]\/g, '').trim();\r\n        } else {\r\n            selector = $('.js-currency-toggle').eq(0).text();\r\n        }\r\n\r\n        if (selector.match(\"GBP\") || selector === \"\u00a3\") {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (selector.match(\"EUR\") || selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE' || 'FR'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    init: function () {\r\n        $('#a-promo-code').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        this.oldTotal = parseFloat($('.js-cart-totals__total').text().replace(\/[^0-9|.]\/g, ''));\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('#promo-code').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#promo-code').trigger('input').trigger('change');\r\n            $('.c-cart-add-promo__button').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('.c-cart-add-promo__remove').click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 500);\r\n    },\r\n    parse: function () {\r\n        var newTotal = parseFloat($('.js-cart-totals__total').text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"urbanplanet": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"urlaubsbox": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\t\tvar savings = parseFloat($('strong', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\t\t\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"usmattress": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var getAmount = response.match(\"base_discount_amount(.*)tax_percent\");\r\n        var discount = getAmount[1];\r\n        var savings = parseFloat(discount.replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"usadawgs": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code){\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var $savings = $('.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML);\r\n\r\n        \/\/ If the element containing the savings value exists\r\n        if($savings.length){\r\n            var savings = $savings.text().replace(\/[^0-9|\\.]\/g, '');\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        location.reload(true);\r\n    }\r\n};",
	"usakaspersky": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        var formData = $('form[name=\"ShoppingCartForm\"]').serializeArray();\r\n        if (action == \"applyCouponUrl\") {\r\n            formData.forEach(element => {\r\n                if (element.name === \"couponCode\") {\r\n                    element.value = code\r\n                }\r\n            });\r\n            return formData;\r\n        }\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discountTotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"uscellular": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var params = this.serializeObject($('#coupon-form').serializeArray());\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      params.formContent = '{\"couponCode\":\"' + code + '\",\"couponAction\":\"add\"}';\r\n    }\r\n\r\n    return params;\r\n  },\r\n  serializeObject: function (a) {\r\n    var o = {};\r\n\r\n    $.each(a, function () {\r\n      o[this.name] = this.value || '';\r\n    });\r\n\r\n    return o;\r\n  },\r\n  parse: function (response) {\r\n    var resString = JSON.stringify(response);\r\n    var result = resString.replace(\/\\r?\\n|\\r\/g, '');\r\n    var matchResult = result.match('couponDesc(.*)off')[0];\r\n    var savings = matchResult.replace(\/[^0-9.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"uscfsaleschess": "var ExternalProvider = {\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        \r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n};",
	"usfashionbunker": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.balance.replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                $('.toggle-coupon-area').click();\r\n                $('input[name=\"coupon_code\"]').val(bestCode);\r\n                $('.button').click();\r\n            } else {\r\n                location.reload();\r\n            }\r\n        }\r\n    },\r\n    isCartPage: function () {\r\n        return \/cart\/.test(location.href);\r\n    }\r\n};",
	"valenciafr": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var langCurr = JSON.parse($('script:contains(\"currencyCode\")').text().split('=')[3].split(';')[0]);\r\n        var locale = langCurr.languageId === 4 ? localeMapping.FR : localeMapping.US;\r\n        var newCurrency = (langCurr.currencyCode === 'GBP' || langCurr.currencyCode === 'EUR') ? langCurr.currencyCode : 'USD';\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"valentins": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'injectCoupon') {\r\n            $('#coupon').val(code);\r\n            $('#couponsubmit').click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if (counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 500);\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat($('#couponContainer span').text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"valmano": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#coupon_totals_discount .price', responseHTML).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"vanheusen": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0.00;\r\n\r\n        if (this.isCartPage()) {\r\n            oldTotal = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13').text().replace(\/[^0-9|.]\/g, ''));\r\n            newTotal = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n            savings = oldTotal - newTotal;\r\n        } else {\r\n            oldTotal = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_10').text().replace(\/[^0-9|.]\/g, ''));\r\n            newTotal = parseFloat($('#WC_SingleShipmentOrderTotalsSummary_td_13', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n            savings = oldTotal - newTotal;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCartPage: function () {\r\n        return \/webapp\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"vanityplanet": "var ExternalProvider = {\r\n    queueName: \"_cfq\",\r\n    currentPath:\"\",\r\n    cart:\"cart\",\r\n    checkout:\"checkout\",\r\n    formSelector:\"\",\r\n    priceSelector:\"\",\r\n    oldCartPrice:0,\r\n    __injectSpanElement: function(){\r\n       this.init();\r\n       var url = $(this.formSelector).attr('action')\r\n       var reapply = true\r\n       if(this.currentPath == this.cart){\r\n         url = url.replace(\/&discount=.*\/g,'')  \r\n         url+=\"&discount=CLAIMCODE\"\r\n         reapply = false\r\n       }\r\n       var spanElement = \"<span id = 'sm-cp-url' display = 'none' reapply-attr = '\"+reapply+\"' url-attr = '\"+url+\"'><\/span>\"\r\n       $('body').append(spanElement)\r\n    },\r\n    init: function(){\r\n       this.setPath()\r\n       this.setVals()\r\n       this.extendFunction()\r\n    },\r\n    setPath: function(){\r\n        var pattern = \/\\\/cart\/g;\r\n        if(pattern.exec(location.pathname))\r\n            this.currentPath = this.cart\r\n        else\r\n            this.currentPath = this.checkout    \r\n    },\r\n    setVals: function(){\r\n        if(this.currentPath == this.cart){\r\n            this.oldCartPrice = parseFloat($('#update-cart').prev().find('span').attr('data-original-value').replace(\/[^0-9|\\.]\/g,''))\r\n            this.formSelector = \"#cartform\"\r\n        }\r\n        else{\r\n            this.oldCartPrice = parseFloat($(\".payment-due__price\").text().replace(\/[^0-9|\\.]\/g,''))\r\n            this.formSelector = \".order-summary__section--discount .edit_checkout:nth-child(2)\"\r\n        }\r\n        if(isNaN(this.oldCartPrice))\r\n            this.oldCartPrice = 0\r\n    },\r\n    extendFunction: function(){\r\n        jQuery.fn.extend({\r\n            getSerializeArray: function(){\r\n                var form_array = $(this).serializeArray()\r\n                var data = {}\r\n                $.each(form_array,function(){\r\n                    data[this.name] = this.value||''\r\n                })\r\n                return data;\r\n            }\r\n        })\r\n    },\r\n    prepare: function(requestType,code){\r\n        if(requestType == 'applyCouponUrl'){\r\n            var form_data = $(this.formSelector).getSerializeArray()\r\n            if(this.currentPath == this.cart){\r\n                form_data['discount-code'] = code\r\n                form_data['checkout'] = 'Apply'\r\n            }\r\n            else{\r\n                form_data['checkout[reduction_code]'] = code\r\n            }\r\n            return form_data\r\n        } \r\n    },\r\n    parse: function(response,status,xhr,code){\r\n        var jqObj = $.parseHTML(response)\r\n        var currentCode = $('.applied-reduction-code__information',jqObj).text().trim()\r\n        if(currentCode === code){\r\n           var newPrice = parseFloat($(\".payment-due__price\",jqObj).text().replace(\/[^0-9|\\.]\/g,''))\r\n           var discount = this.oldCartPrice - newPrice\r\n           if(discount >0){\r\n               this.enqueueRequest(jqObj)\r\n               return{\r\n                   success: true,\r\n                   savings: discount\r\n               }\r\n           }\r\n        }\r\n        return{\r\n            success: false,\r\n            savings: 0.0\r\n        }\r\n    },\r\n    enqueueRequest: function(jqObj){\r\n        var params = [\"utf8\",\"_method\",\"authenticity_token\",\"step\",\"checkout[clear_discount]\"];\r\n        var data = {}\r\n        var removeUrl = $(\".order-summary__section--discount .edit_checkout:nth-child(2)\",jqObj).attr('action')\r\n        var i = 0;\r\n        for(i=0;i<params.length;i++){\r\n            data[params[i]] = $(('input[name = \"'+params[i]+'\" ]'),jqObj).val()\r\n        }\r\n        var queue = $(document).queue(this.queueName)\r\n        queue.unshift(function(next){\r\n            $.ajax({\r\n                url: removeUrl, \r\n                type: \"Post\",\r\n                cache: false,\r\n                data: data,\r\n                contentType: 'application\/x-www-form-urlencoded',\r\n                dataType: 'html',\r\n                success: function(){\r\n                    next()\r\n                },\r\n                error: function(){\r\n                    next()\r\n                }\r\n            })\r\n        })\r\n        $(document).queue(this.queueName,queue)\r\n    },\r\n    complete: function(bestCode,bestSavings){\r\n        if(this.currentPath == this.cart){\r\n            $('input[name=\"discount-code\"]').val(bestCode)\r\n            $('input[name=\"discount-code\"] + input').click()\r\n            return;\r\n        }\r\n        location.reload()\r\n    }\r\n}\r\n\r\nExternalProvider.__injectSpanElement()",
	"vapesourcing": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = false;\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        updated_section: $('#updated_section').val(),\r\n        form_key: $('input[name=\"form_key\"]').val(),\r\n        'billing[address_id]': $('input[name=\"billing[address_id]\"]').val(),\r\n        method: $('input[name=\"method\"]').val(),\r\n        'billing[firstname]': $('input[name=\"billing[firstname]').val(),\r\n        'billing[lastname]': $('input[name=\"billing[lastname]\"]').val(),\r\n        'billing[company]': $('input[name=\"billing[company]\"]').val(),\r\n        'billing[email]': $('input[name=\"billing[email]\"]').val(),\r\n        'billing[telephone]': $('input[name=\"billing[telephone]\"]').val(),\r\n        'billing[street][]': $('input[name=\"billing[street][]\"]').val(),\r\n        'billing[street][]': $('input[name=\"billing[street][]\"]').val(),\r\n        'billing[city]': $('input[name=\"billing[city]\"]').val(),\r\n        'billing[region_id]': $('input[name=\"billing[region_id]\"]').val(),\r\n        'billing[region]': $('input[name=\"billing[region]\"]').val(),\r\n        'billing[postcode]': $('input[name=\"billing[postcode]\"]').val(),\r\n        'billing[country_id]': $('input[name=\"billing[country_id]\"]').val(),\r\n        'billing[fax]': $('input[name=\"billing[fax]\"]').val(),\r\n        'billing[customer_password]': $('input[name=\"billing[customer_password]\"]').val(),\r\n        'billing[confirm_password]': $('input[name=\"billing[confirm_password]\"]').val(),\r\n        'billing[save_in_address_book]': $('input[name=\"billing[save_in_address_book]\"]').val(),\r\n        'billing[use_for_shipping]': $('input[name=\"billing[use_for_shipping]\"]').val(),\r\n        'shipping[address_id]': $('input[name=\"shipping[address_id]\"]').val(),\r\n        'shipping[firstname]': $('input[name=\"shipping[firstname]\"]').val(),\r\n        'shipping[lastname]': $('input[name=\"shipping[lastname]\"]').val(),\r\n        'shipping[company]': $('input[name=\"shipping[company]\"]').val(),\r\n        'shipping[street][]': $('input[name=\"shipping[street][]]\"]').val(),\r\n        'shipping[street][]': $('input[name=\"shipping[street][]]\"]').val(),\r\n        'shipping[city]': $('input[name=\"shipping[city]\"]').val(),\r\n        'shipping[region_id]': $('input[name=\"shipping[region_id]\"]').val(),\r\n        'shipping[region]': $('input[name=\"shipping[region]\"]').val(),\r\n        'shipping[postcode]': $('input[name=\"shipping[postcode]\"]').val(),\r\n        'shipping[country_id]': $('input[name=\"shipping[country_id]\"]').val(),\r\n        'shipping[telephone]': $('input[name=\"shipping[telephone]\"]').val(),\r\n        'shipping[fax]': $('input[name=\"shipping[fax]\"]').val(),\r\n        'shipping[save_in_address_book]': $('input[name=\"save_in_address_book\"]').val(),\r\n        'shipping[same_as_billing]': $('input[name=\"same_as_billing\"]').val(),\r\n        'payment[method]': $('input[name=\"method\"]').val(),\r\n        hasUs: true,\r\n        vape_warnning: null,\r\n        remove: 0,\r\n        coupon_code: code,\r\n        cdr_ordercomment: null,\r\n        isAjax: 1\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat($('.price:contains(\"-$\")', response.html.review).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"vapor4life": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var codeFound = $('.a-right:not(.last)', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n        var savings = 0;\r\n\r\n        if (codeFound) {\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = parseFloat($('strong .price').text().replace(\/[^0-9|.]\/g, ''));\r\n            var newPrice = parseFloat($('strong .price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n            savings = oldPrice - newPrice;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            if ($('#coupon_code_onestepcheckout').length) {\r\n                $('#coupon_code_onestepcheckout').val(bestCode);\r\n                $('#add_coupon_code_button').click();\r\n            } else {\r\n                $('#coupon_code').val(bestCode);\r\n                $('.discount-form button').click();\r\n            }\r\n        }\r\n    }\r\n};",
	"vapordna": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"veestro": "var ExternalProvider = {\r\n  storeId: '',\r\n  rechargeCartId: '',\r\n  init: function () {\r\n    var self = this;\r\n    \r\n    jQuery.ajaxSetup({ async: false });\r\n    $.get(location.href, function (response) {\r\n      self.storeId = response.match(\/'store_id':\"(.*)\"\/)[1];\r\n      self.rechargeCartId = response.match(\/'recharge_cart_id':\"(.*)\"\/)[1];\r\n    })\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {\r\n      store_id: this.storeId,\r\n      recharge_cart_id: this.rechargeCartId,\r\n      discount_code: code,\r\n      customer_email: $('#checkout_email').val()\r\n    };\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.discount_amount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      const codeField = $('#checkout_discount_code');\r\n      const submitButton = $('#apply_discount');\r\n      codeField.val(bestCode);\r\n      codeField.get(0).dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\r\n      submitButton.get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  }\r\n};",
	"sexshopvenize": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.rechnungspreis').eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.rechnungspreis', responseHTML).eq(1).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = (oldTotal - newTotal) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"venteunique": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('div.t-right:contains(\"' + code + '\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"verabradley": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML($xhr.responseText);\r\n\r\n        var success = $('input[name=\"\/atg\/commerce\/promotion\/CouponFormHandler.couponRepoID\"]', responseHTML).attr('value') === code;\r\n\r\n        var savings;\r\n\r\n        if (success) {\r\n            savings = $('.cart-total .discounts', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        }\r\n\r\n        return {\r\n            success: success,\r\n            savings: success && savings ? parseFloat(savings) : 0.00\r\n        };\r\n    },\r\n\r\n    complete: function()\r\n    {\r\n        location.reload();\r\n    }\r\n};",
	"verizonwireless": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    $('body').attr('token', document.cookie.match(\/p_csrftkn=([\\w|-]+)\/)[1]);\r\n  },\r\n  parse: function (response) {\r\n    var oldTotal = parseFloat($('.lineTopPad p:contains(\"Due today\")>.h1').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat(response.payload.pageData.masterPassPaymentRequest.amount.replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"veromoda": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = location.href;\r\n\r\n        if (selector.match('de')) {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector.match('gb')) {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        } else if (selector.match('fr')) {\r\n            locale = localeMapping['FR'];\r\n            currency = \"EUR\";\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"klingelde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = $('#PromotionCodeRemoveForm_Order .shippingCosts', responseHTML).text().replace(\/[^0-9]\/g, '') \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"verseo": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var s = document.createElement('script');\r\n    var params = location.href.includes('cart') ? 'cart' : 'checkout';\r\n    var code = \"$('body').attr('apply', wc_\" + params + \"_params.apply_coupon_nonce);$('body').attr('clear', wc_\" + params + '_params.remove_coupon_nonce);';\r\n\r\n    s.appendChild(document.createTextNode(code));\r\n    document.body.appendChild(s);\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.woocommerce-Price-amount.amount:last').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.woocommerce-Price-amount.amount:last', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"vertbaudet": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (action, code) {\r\n        var formData = $('#aspnetForm').serializeObject();\r\n        if (action === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                ctl00$ScriptManager: 'ctl00$ScriptManager|SelectedAvantageChanged',\r\n                __EVENTTARGET: 'SelectedAvantageChanged',\r\n                __EVENTARGUMENT: code,\r\n                __CLIENTSTATE_ctl00_cphZoneActive_ModalPopupSubstitution0: { IsVisible: false },\r\n                __CLIENTSTATE_ctl00_cphZoneActive_ModalPopupSubstitution1: { IsVisible: false },\r\n                __CLIENTSTATE_ctl00_cphZoneActive_ctl08: {},\r\n                __CLIENTSTATE_ctl00_cphZoneActive_ctl00_cphZoneActive_ChoixCadeauAvantagePopupExtender: { IsVisible: false },\r\n                ctl00$cphZoneActive$quantiteCombo1: 1,\r\n                ctl00$cphZoneActive$saisieAvantageTextBox: code,\r\n                __ASYNCPOST: true\r\n            });\r\n        } else {\r\n\r\n            formData = Object.assign(formData, {\r\n                coupcode: '(optional)',\r\n                typed_coupcode: '',\r\n                dodelcoup: 'yes'\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.memo_chko_valeur.price-value.public-value').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.memo_chko_valeur.price-value.public-value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0.00,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#ctl00_cphZoneActive_saisieAvantageTextBox').val(bestCode);\r\n            $('#ctl00_cphZoneActive_modifierCodeAvantage').click();\r\n        }\r\n    }\r\n};",
	"vertbaudetde": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (action, code) {\r\n        var formData = $('#aspnetForm').serializeObject();\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                ctl00$ScriptManager: 'ctl00$ScriptManager|SelectedAvantageChanged',\r\n                __EVENTTARGET: 'SelectedAvantageChanged',\r\n                __EVENTARGUMENT: code,\r\n                __CLIENTSTATE_ctl00_cphZoneActive_ModalPopupSubstitution0: '{ IsVisible: false }',\r\n                __CLIENTSTATE_ctl00_cphZoneActive_ModalPopupSubstitution1: '{ IsVisible: false }',\r\n                __CLIENTSTATE_ctl00_cphZoneActive_ctl08: '{}',\r\n                __CLIENTSTATE_ctl00_cphZoneActive_ctl00_cphZoneActive_ChoixCadeauAvantagePopupExtender: '{ IsVisible: false }',\r\n                ctl00$cphZoneActive$saisieAvantageTextBox: code,\r\n                __ASYNCPOST: true\r\n            });\r\n        } else {\r\n            formData = Object.assign(formData, {\r\n                coupcode: '(optional)',\r\n                typed_coupcode: '',\r\n                dodelcoup: 'yes'\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.memo_chko_valeur.price-value.public-price .memo_chko_valeur_prix', responseHTML).text().replace(\/[^0-9|,]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0.00,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"vertbaudetfr": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var formDataObject = {};\r\n      var formDataArray = this.serializeArray();\r\n\r\n      $.each(formDataArray, function () {\r\n        if (formDataObject[this.name] !== undefined) {\r\n          if (!formDataObject[this.name].push) {\r\n            formDataObject[this.name] = [formDataObject[this.name]];\r\n          }\r\n\r\n          formDataObject[this.name].push(this.value || '');\r\n        } else {\r\n          formDataObject[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return formDataObject;\r\n    };\r\n  },\r\n  prepare: function (action, code) {\r\n    var formData = $('#aspnetForm').serializeObject();\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      formData = Object.assign(formData, {\r\n        ctl00$ScriptManager: 'ctl00$ScriptManager|SelectedAvantageChanged',\r\n        __EVENTTARGET: 'SelectedAvantageChanged',\r\n        __EVENTARGUMENT: code,\r\n        __CLIENTSTATE_ctl00_cphZoneActive_ModalPopupSubstitution0: '{ IsVisible: false }',\r\n        __CLIENTSTATE_ctl00_cphZoneActive_ModalPopupSubstitution1: '{ IsVisible: false }',\r\n        __CLIENTSTATE_ctl00_cphZoneActive_ctl08: '{}',\r\n        __CLIENTSTATE_ctl00_cphZoneActive_ctl00_cphZoneActive_ChoixCadeauAvantagePopupExtender: '{ IsVisible: false }',\r\n        ctl00$cphZoneActive$saisieAvantageTextBox: code,\r\n        __ASYNCPOST: true\r\n      });\r\n    } else {\r\n      formData = Object.assign(formData, {\r\n        coupcode: '(optional)',\r\n        typed_coupcode: '',\r\n        dodelcoup: 'yes'\r\n      });\r\n    }\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.memo_chko_valeur.price-value.public-value').text().replace(\",\", \".\").replace(\/[^0-9|,]\/g, ''));\r\n    var newTotal = parseFloat($('.memo_chko_valeur.price-value.public-value', responseHTML).text().replace(\",\", \".\").replace(\/[^0-9|,]\/g, ''));\r\n    var savings = (oldTotal - newTotal) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0.00,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"vertbaudetuk": "var ExternalProvider = {\r\n  polyfill: function() {\r\n    $.fn.serializeObject = function () {\r\n      var o = {};\r\n      var a = this.serializeArray();\r\n\r\n      $.each(a, function () {\r\n        if (o[this.name] !== undefined) {\r\n          if (!o[this.name].push) {\r\n            o[this.name] = [o[this.name]];\r\n          }\r\n\r\n          o[this.name].push(this.value || '');\r\n        } else {\r\n          o[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return o;\r\n    };\r\n  },\r\n  init: function() {\r\n    this.getOldTotal();\r\n  },\r\n  getOldTotal: function() {\r\n    let formData = $('#aspnetForm').serializeObject();\r\n    $.ajax({\r\n      url: '',\r\n      type: 'POST',\r\n      data: this.prepareFormData(formData, ''),\r\n      async: false,\r\n      success: function(response) {\r\n        const responseHTML = $.parseHTML(response);\r\n        ExternalProvider.oldTotal = parseFloat($('.memo_chko_minitotal_strong.price-value.public-price', responseHTML).text().replace(\/[^0-9|,]\/g, '')) \/ 100;\r\n      }\r\n    })\r\n  },\r\n  prepareFormData: function (formData, code) {\r\n    Object.assign(formData, {\r\n      ctl00$ScriptManager: 'ctl00$ScriptManager|SelectedAvantageChanged',\r\n      __EVENTTARGET: 'SelectedAvantageChanged',\r\n      __EVENTARGUMENT: code,\r\n      __CLIENTSTATE_ctl00_cphZoneActive_ModalPopupSubstitution0: '{ IsVisible: false }',\r\n      __CLIENTSTATE_ctl00_cphZoneActive_ModalPopupSubstitution1: '{ IsVisible: false }',\r\n      __CLIENTSTATE_ctl00_cphZoneActive_ctl08: '{}',\r\n      __CLIENTSTATE_ctl00_cphZoneActive_ctl00_cphZoneActive_ChoixCadeauAvantagePopupExtender: '{ IsVisible: false }',\r\n      ctl00$cphZoneActive$saisieAvantageTextBox: code,\r\n      __ASYNCPOST: true\r\n    });\r\n    return formData;\r\n  },\r\n  prepare: function (action, code) {\r\n    let formData = $('#aspnetForm').serializeObject();\r\n    if (action === 'applyCouponUrl') {\r\n      return this.prepareFormData(formData, code);\r\n    } else {\r\n      return this.prepareFormData(formData, '');\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let newTotal = parseFloat($('.memo_chko_minitotal_strong.price-value.public-price', responseHTML).text().replace(\/[^0-9|,]\/g, '')) \/ 100;\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0.00,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.polyfill();",
	"vertoe": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.total-line--reduction .total-line__price .order-summary__emphasis', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: savings\r\n        };\r\n    },\r\n    complete: function (bestCode, bestSavings) {\r\n        if(bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"vestiairecollective": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping['US'];\r\n    var selector = $('.i18n__choices.js-getUserInfo_i18n.js-openPopin_i18n span:eq(2)').text().replace(\/[-.A-z.0-9.,]\/g, '').trim();\r\n\r\n    if (selector === \"\u20ac\") {\r\n      currency = 'EUR';\r\n      locale = localeMapping['DE'];\r\n    } else if (selector === \"\u00a3\") {\r\n      currency = 'GBP';\r\n      locale = localeMapping['GB'];\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.result.currentCart[0].reductionCents) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#sPromoCode').val(bestCode);\r\n      $('#sPromoCode').get(0).dispatchEvent(new Event('change', { bubbles: true, cancelable: true }));\r\n      $('.btn-small:contains(\"Add\")').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  }\r\n};",
	"vestiairecollectivede": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.result.currentCart[0].reductionCents) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"vestry": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('#cphContentSimple_dlBasket_lblTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('#cphContentSimple_dlBasket_lblTotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"viagogofr": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var newCurrency = currency;\r\n        var selector = $('.header-links-list .mls span, .header-links-list .i-banknote~span').text();\r\n\r\n        if (selector.match('\u00a3')) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector.match('\u20ac')) {\r\n            locale = localeMapping.FR;\r\n            newCurrency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"victoriassecret": "var ExternalProvider = {\r\n    queueName: '_cfq',\r\n    prepare: function (type, code) {\r\n        var $offerInput = $('form#offers').find('input[name^=\"offerModel\"]');\r\n        var formData = {};\r\n        var applied = false;\r\n        var $ele;\r\n        var name;\r\n\r\n        $offerInput.each(function (idx, ele) {\r\n            $ele = $(ele);\r\n            name = $ele.attr('name');\r\n\r\n            if (formData[name]) return true;\r\n\r\n            if ($ele.val().length === 0 && !applied) {\r\n                formData[$ele.attr('name')] = code;\r\n                applied = true;\r\n            } else {\r\n                formData[$ele.attr('name')] = $ele.val();\r\n            }\r\n\r\n            return true;\r\n        });\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response, code) {\r\n        var codeFound = response.offersModel.find(function (e) {\r\n            return e.offerCode && e.offerCode.toLowerCase() === code.toLowerCase() && e.status === 'A';\r\n        });\r\n\r\n        var oldPrice = parseFloat($('.totalSection .orderTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat(response.orderModel.orderTotal.ordrTotal);\r\n        var savings = oldPrice - newPrice;\r\n\r\n        var queue = $(document).queue(this.queueName);\r\n\r\n        queue.unshift(function (next) {\r\n            $.ajax({\r\n                type: 'GET',\r\n                url: '\/commerce2\/offers\/remove?offerCode=' + [code, codeFound.serID].join(':'),\r\n                cache: false,\r\n                dataType: 'json',\r\n                success: function () {\r\n                    next();\r\n                },\r\n                error: function () {\r\n                    next();\r\n                }\r\n            });\r\n        });\r\n\r\n        $(document).queue(this.queueName, queue);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    },\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping.US;\r\n        var flag = $('.flag').attr('aria-label');\r\n\r\n        if (flag === 'GB Shipping Flag') {\r\n            locale = localeMapping.GB;\r\n            currency = 'GBP';\r\n        } else if (flag === 'FR Shipping Flag' || flag === 'DE Shipping Flag') {\r\n            locale = localeMapping.DE;\r\n            currency = 'EUR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: currency, minimumFractionDigits: minimumFractionDigits });\r\n    }\r\n};",
	"videdressing": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-resume-amount.text-green', responseHTML).text().replace(',', '.').replace(\/[^.0-9|]\/g, ''));\r\n        \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#code').val(bestCode);\r\n            $('#valid_submit_post').click();\r\n        }\r\n    }\r\n};",
	"villeroy-boch": "var ExternalProvider = {\r\n    parse: function (response) {\r\n      var responseHTML = $.parseHTML(response);\r\n      var oldTotal = parseFloat($('#shopping-cart-totals-table > tfoot > tr > td:nth-child(2) > strong > span').text().replace(\/[^0-9.]\/g, ''));\r\n      var newTotal = parseFloat($('#shopping-cart-totals-table > tfoot > tr > td:nth-child(2) > strong > span', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n      var savings = oldTotal - newTotal;\r\n      savings = oldTotal > newTotal ? savings : 0;\r\n  \r\n      return {\r\n        success: savings > 0,\r\n        savings: Number.isNaN(savings) ? 0.00 : savings\r\n      };\r\n    },\r\n    complete: function (bestCode) {\r\n      if (bestCode) location.reload();\r\n    }\r\n  };",
	"villeroyandbochde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('#shopping-cart-totals-table tfoot').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var newTotal = parseFloat($('#shopping-cart-totals-table tfoot', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"vimeo": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        if (response && response.success){\r\n            var oldPrice = parseFloat(response.subtotal.replace(\/[^0-9|\\.]\/g, '')),\r\n                newPrice = parseFloat(response.total),\r\n                savings = oldPrice - newPrice;\r\n\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n        location.reload(true);\r\n    }\r\n}",
	"vince": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-discount.discount > td:contains(\"$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"vincecamuto": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = response.totals.discount_amount.replace(\/[^0-9.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"vineyardvines": "var ExternalProvider = {\r\n    init: function () {\r\n        this.oldTotal = $('.ordersummary_cost_total').text().replace(\/[^0-9.]\/g, '');\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var newTotal = $('.ordersummary_cost_total', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n        var savings = this.oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (location.href.includes('https:\/\/www.vineyardvines.com\/cart')) {\r\n            if (bestCode) {\r\n                jQuery('#promo-code').val(bestCode);\r\n                jQuery('#add-coupon').click();\r\n            }\r\n        }\r\n        if (location.href.includes('https:\/\/www.vineyardvines.com\/billinginfo')) {\r\n            if (bestCode) {\r\n                jQuery('#billingCoupon').val(bestCode);\r\n                jQuery('#promo-code-apply').click();\r\n            }\r\n        }\r\n    }\r\n};",
	"vinos": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var oldSavings = parseFloat($('#shopping-cart-form > div > div > table > tfoot > tr:nth-child(7) > td.a-right > span').text().replace(\/[^0-9.]\/g, ''));\r\n    var savings = parseFloat($('.a-right:contains(\"-\"):last', $.parseHTML(response.html)).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n    if (response.coupon_status === \"error\" || savings <= oldSavings) {\r\n      savings = 0;\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"violife": "var ExternalProvider = {\r\n\tprepare: function(type, code) {\r\n\t\tif (type === 'applyCouponUrl') {\r\n\t\t\tvar formData = {};\r\n\t\t\tformData['CouponCode'] = code;\r\n\t\t\tformData['btnCouponCode'] = 'Apply';\r\n\t\t\tformData['ShipCountry'] = 'United States';\r\n\t\t\t$('input').each(function(){\r\n\t\t\t\tif (this.id.includes('Quantity')) {\r\n\t\t\t\t\tformData[this.id] = $(this).val();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn formData;\r\n\t\t}\r\n\t},\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar savings = parseFloat($('.v65-cart-giftcert-total .carttext', responseHTML).text().trim().replace('$', '').replace('-', ''));\r\n    \tif (savings) {\r\n    \t\treturn {\r\n    \t\t\tsuccess: true,\r\n    \t\t\tsavings: savings\r\n    \t\t}\r\n    \t}\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    }\r\n}",
	"virtual-college": "var ExternalProvider = {\r\n    parse: function (response) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.basket-panel__total:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"visiondirect": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount:eq(2)', responseHTML).text().replace('-', ''));\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSaving) {\r\n        location.reload(true);\r\n    }\r\n}",
	"visiondirectfr": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = response.totals;\r\n        var savings = parseFloat($('.table-totals-value:contains(\"-\")', responseHTML).text().replace(\",\",\".\").replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"vistaprint": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var codeFound = response.cart.summary.coupon;\r\n\r\n        if (codeFound && codeFound.isApplied && code.toLowerCase() === codeFound.code.toLowerCase()) {\r\n            var discountRendered = response.cart.summary.prices.discount.renderedPrice;\r\n\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(discountRendered.substring(discountRendered.indexOf('$')).replace(\/[^0-9|.]\/g, ''))\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"vistaprintde": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = response.substring(response.indexOf(\"class='savings-amount'>\") + \"class='savings-amount'>\".length);\r\n    var savingsLoc = savings.substring(0, savings.indexOf('<'));\r\n\r\n    if (savingsLoc.contains('lang=\"de-de\"')) {\r\n      savings = 0;\r\n    } else {\r\n      savings = parseFloat(savingsLoc.replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"vistavapors": "var ExternalProvider = {\r\n    isCartPage: function () {\r\n        return location.pathname === '\/cart.php';\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.data.cart.coupon.discountedAmount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if (this.isCartPage()) {\r\n                location.reload();\r\n            } else {\r\n                $('#couponcode').val(bestCode);\r\n                $('#apply_code').click();\r\n            }\r\n        }\r\n    }\r\n};",
	"vitacost": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    if (this.isCartPage() === false) {\r\n      return new Promise((resolve) => {\r\n        let retries = 0;\r\n        const interval = setInterval(function () {\r\n          retries++;\r\n          hasCodeApplied = $('.spcPromoCodes .link5:contains(\"Remove\")').length > 0\r\n          hasCodeApplied === true && $('.spcPromoCodes .link5:contains(\"Remove\")').get(0).dispatchEvent(ExternalProvider.clickEvent);\r\n          if (hasCodeApplied === false && retries < 3) {\r\n            clearInterval(interval);\r\n            resolve();\r\n          } else if (retries >= 3) {\r\n            clearInterval(interval);\r\n            resolve();\r\n          }\r\n        }, 2000);\r\n      })\r\n    }\r\n    return null;\r\n  },\r\n  __prepareUrl: function() {\r\n    this.createEventInstance();\r\n    let applyUrl = this.isCartPage() ? 'https:\/\/www.vitacost.com\/Checkout\/ShoppingCart.aspx?sce=view' : 'https:\/\/www.vitacost.com\/Checkout.aspx';\r\n    if(document.getElementById(\"___jpCouponUrl\") === null) {\r\n      let csrfInput = document.createElement(\"input\");\r\n      csrfInput.id = '___jpCouponUrl';\r\n      csrfInput.setAttribute('type', 'hidden');\r\n      csrfInput.setAttribute('value', applyUrl);\r\n      (document.body || document.head || document.documentElement).appendChild(csrfInput);\r\n    }\r\n    $('#___jpCouponUrl').val(applyUrl);\r\n  },\r\n  init: function() {\r\n    if(this.isCartPage()) {\r\n      code = $('.promoCodes li span').text().replace(\/[^a-zA-Z0-9]\/g, '');\r\n      this.getOldSubTotal(\r\n        $('#___jpCouponUrl').val(), \r\n        'POST', \r\n        this.getCartData('clearCouponUrl', code)\r\n      );\r\n    } else {\r\n      this.oldTotal = this.parseToNum($('#summaryBox .spcSR div:contains(\"Subtotal\")').next());\r\n    }\r\n  },\r\n  prepare: function (action, code) {\r\n    this.code = code;\r\n    if(action !== 'resultUrl') {\r\n      return this.isCartPage() ? this.getCartData(action, code) : this.getCheckoutData(action, code);\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let newTotal = this.parseToNum($('#orderSummary dt:contains(\"Order Subtotal\")', responseHTML).next());\r\n    let savings = this.getDiscount($('#orderSummary dt:contains(\"Promo Savings\")', responseHTML).next(), newTotal);\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  getDiscount: function(element, newTotal) {\r\n    return (element.length > 0) ? \r\n      parseFloat(element.text().replace(\/[^0-9|.]\/g, '')) : \r\n      this.oldTotal - newTotal\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      if(this.isCartPage()) {\r\n        $('input[name=\"IamMasterFrameYesIam$ctl02$txtPromotion\"]').val(bestCode);\r\n        $('input[name=\"IamMasterFrameYesIam$ctl02$btnPromoUpdate\"]').get(0).dispatchEvent(this.clickEvent);\r\n      } else {\r\n        $('#spcFrmPrmCde').val(bestCode);\r\n        $('#spcFrmPrmCdeSelectApply').get(0).dispatchEvent(this.clickEvent);\r\n      }\r\n    }\r\n  },\r\n  extractFormData: function(formElement) {\r\n    let serializeForm = formElement.serializeArray()\r\n    let formData = {}\r\n    serializeForm.forEach(data => {\r\n      formData[data.name] = data.value\r\n    });\r\n    return formData;\r\n  },\r\n  getCartData: function(action, code) {\r\n    let data = this.extractFormData($('#Form1'));\r\n    if(action === 'applyCouponUrl') {\r\n      data.IamMasterFrameYesIam$ctl02$txtPromotion = code;\r\n      data.IamMasterFrameYesIam$ctl02$btnPromoUpdate = 'Apply';\r\n    } else if (action === 'clearCouponUrl') {\r\n      data.__EVENTTARGET = 'IamMasterFrameYesIam$ctl02$btnPromo' + code;\r\n    }\r\n    return data;\r\n  },\r\n  getCheckoutData: function(action, code) {\r\n    let data = this.extractFormData($('#spcFrm'));\r\n    if(action === 'applyCouponUrl') {\r\n      data.spcFrmPrmCde = code;\r\n    }\r\n    else if (action === 'clearCouponUrl') {\r\n      data.PromoCodeToBeRemoved = code;\r\n      data.adobeCommand = 'Summary_PromoRemove';\r\n      data.spcFrmPmntSavedCC = '';\r\n      data.opId = '';\r\n      data.spcAjax = 1;\r\n      data.spcOpId = '';\r\n      data['commands[]'] = 'Summary_PromoRemove';\r\n    }\r\n    return data;\r\n  },\r\n  isCartPage: function() {\r\n    return location.pathname === '\/Checkout\/ShoppingCart.aspx';\r\n  },\r\n  getOldSubTotal: function(url, method, data = null, onSuccess = null) {\r\n    $.ajax({\r\n      url: url,\r\n      type: method,\r\n      data: data,\r\n      async: false,\r\n      success: function(response) {\r\n        const responseHTML = $.parseHTML(response);\r\n        ExternalProvider.oldTotal = ExternalProvider.parseToNum($('#orderSummary dt:contains(\"Order Subtotal\")', responseHTML).next());\r\n      }\r\n    })\r\n  },\r\n  parseToNum: function(element) {\r\n    return parseFloat(element.text().replace(\/[^0-9|.]\/g, ''))\r\n  },\r\n  createEventInstance: function() {\r\n    this.clickEvent = new MouseEvent('click', {\r\n      view: window,\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n  },\r\n};\r\nExternalProvider.__prepareUrl();",
	"vitafy": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart__totals.hide-for-small >table > tbody > tr:contains(-) .price', responseHTML)[0].innerHTML.replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"vitalchoice": "var ExternalProvider = {\r\n    retrieveWindowVariable: function (name, variable) {\r\n        var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + name + \"', \" + variable + '); }\\n';\r\n        var script = document.createElement('script');\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var value = $('body').attr('tmp_' + name);\r\n\r\n        $('body').removeAttr('tmp_' + name);\r\n\r\n        return value;\r\n    },\r\n\r\n    prepare: function (action, code) {\r\n        var modelText = '$(\\'.checkout-wrapper\\').get(0)).Model';\r\n\r\n        if (\/checkout\\\/main\/g.test(location.href)) {\r\n            modelText = '$(\\'.checkout-wrapper\\').get(0)).Model.Cart';\r\n        }\r\n\r\n        var modelData = JSON.parse(this.retrieveWindowVariable('viewModel', ['ko.toJSON(ko.dataFor(', modelText, ')'].join('')));\r\n\r\n        if (!Object.keys(modelData).length) return false;\r\n\r\n        modelData = Object.assign(modelData, {\r\n            DiscountCode: (action === 'applyCouponUrl') ? code : ''\r\n        });\r\n\r\n        return JSON.stringify(modelData);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        if (response.Data.DiscountCode && response.Data.DiscountCode.toLowerCase() === code.toLowerCase()) {\r\n            return {\r\n                success: true,\r\n                savings: Math.abs(response.Data.DiscountTotal)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"vitaminshoppe": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = !this.isCartPage() ? 'https:\/\/www.vitaminshoppe.com\/cart\/shopping-cart?_DARGS=\/cart\/redesign\/cartGadgets.jsp.cartform' : 'https:\/\/www.vitaminshoppe.com\/s\/checkout\/checkout.jsp?step=billing&_DARGS=\/s\/checkout\/gadgets\/promotionCode.jsp';\r\n    var resultUrl = !this.isCartPage() ? 'https:\/\/www.vitaminshoppe.com\/cart\/shopping-cart' : 'https:\/\/www.vitaminshoppe.com\/s\/checkout\/checkout.jsp?flow=DTC&step=billing';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    applyUrlInput.attr('value-result', resultUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    function serializeObject(a) {\r\n      var o = {};\r\n\r\n      $.each(a, function () {\r\n        o[this.name] = this.value || '';\r\n      });\r\n\r\n      return o;\r\n    }\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      var form;\r\n      var data;\r\n\r\n      if (!this.isCartPage()) {\r\n        form = $('form[name=\"cartform\"]').serializeArray();\r\n        data = serializeObject(form);\r\n        data['\/atg\/commerce\/order\/purchase\/CommitOrderFormHandler.couponCode'] = code;\r\n        data['\/atg\/commerce\/order\/purchase\/CommitOrderFormHandler.redeemCoupon'] = 'Apply';\r\n        $('input[name=\"\/atg\/commerce\/order\/purchase\/CommitOrderFormHandler.couponCode\"]').remove();\r\n\r\n        return data;\r\n      }\r\n\r\n      form = $('.promo-fields-block form').serializeArray();\r\n      data = serializeObject(form);\r\n      data['\/atg\/commerce\/order\/purchase\/CommitOrderFormHandler.couponCode'] = code;\r\n      data['\/atg\/commerce\/order\/purchase\/CommitOrderFormHandler.redeemCoupon'] = 'Apply';\r\n      $('input[name=\"\/atg\/commerce\/order\/purchase\/CommitOrderFormHandler.redeemCoupon\"]').remove();\r\n\r\n      return data;\r\n    }\r\n\r\n    return null;\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/s\/checkout\/checkout.jsp';\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = 0;\r\n\r\n    if (!this.isCartPage()) {\r\n      savings = parseFloat($('.coupon-amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      savings = parseFloat($('table[role=\"presentation\"] .text-right:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"vitaminworld": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount-order', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"vitamix": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var data = false;\r\n    if (type === 'applyCouponUrl') {\r\n      data = {\r\n        _dyncharset: 'UTF-8',\r\n        _dynSessConf: $('input[name=\"_dynSessConf\"]').val(),\r\n        '\/vitamix\/commerce\/promotion\/CouponFormHandler.couponClaimCode': code,\r\n        '_D:\/vitamix\/commerce\/promotion\/CouponFormHandler.couponClaimCode': '',\r\n        '\/vitamix\/commerce\/promotion\/CouponFormHandler.successURL': $('input[name=\"\/vitamix\/commerce\/promotion\/CouponFormHandler.successURL\"]').val(),\r\n        '_D:\/vitamix\/commerce\/promotion\/CouponFormHandler.successURL': '',\r\n        '\/vitamix\/commerce\/promotion\/CouponFormHandler.errorURL': $('input[name=\"\/vitamix\/commerce\/promotion\/CouponFormHandler.errorURL\"]').val(),\r\n        '_D:\/vitamix\/commerce\/promotion\/CouponFormHandler.errorURL': '',\r\n        '\/vitamix\/commerce\/promotion\/CouponFormHandler.claimCoupon': '',\r\n        '_D:\/vitamix\/commerce\/promotion\/CouponFormHandler.claimCoupon': '',\r\n        _DARGS: $('input[name=\"_DARGS\"]').val()\r\n      };\r\n    }\r\n\r\n    return data;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#discount_amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"vivaterra": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-totals div:contains(\"-$\")', responseHTML).last().text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"viviscalhairgrowthandhaircareprogram": "var ExternalProvider = {\r\n  parse: function (response, status, $xhr, code) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var validCode = $('#coupon_code', responseHTML).val() === code;\r\n    var savings = validCode ? parseFloat($('.right:contains(\"$-\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) : 0.00;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#coupon_code').val(bestCode).closest('form').submit();\r\n    }\r\n  }\r\n};",
	"vivobarefoot": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.row .sale:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      location.reload();\r\n    }\r\n  }\r\n};",
	"vmware": "var ExternalProvider = {\r\n    OrigPrice: '',\r\n    _prepareUrl: function () {\r\n        this.OrigPrice = parseFloat($('.dr_price:eq(1) ').text().replace(\/[^0-9.]\/g, ''));\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = 0.00;\r\n        var NewPrice = parseFloat($('.dr_price.dr_totals', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        savings = this.OrigPrice - NewPrice;\r\n\r\n        if (savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promoText').closest('form').submit();\r\n        }\r\n    }\r\n};\r\n\r\nExternalProvider._prepareUrl();",
	"voelkner": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.order_total.toString().match('F0000\"> -(.*)\u20ac<\/fo')[1].replace(\/[^0-9|]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"voguewigs": "var ExternalProvider = {\r\n  init: function () {\r\n    $.ajaxSetup({\r\n      beforeSend: function (xhr) {\r\n        xhr.setRequestHeader('X-Prototype-Version', ExternalProvider.retrieveWindowVariable('Prototype.Version'));\r\n        xhr.setRequestHeader('X-NewRelic-ID', ExternalProvider.retrieveWindowVariable('NREUM.loader_config.xpid'));\r\n        xhr.setRequestHeader('X-Distil-Ajax', ExternalProvider.retrieveWindowVariable('XMLHttpRequest.prototype.dH'));\r\n      }\r\n    });\r\n  },\r\n  retrieveWindowVariable: function (variable) {\r\n    var scriptContent = 'if (typeof ' + variable + \" !== 'undefined') { jQuery('body').attr('tmp_\" + variable + \"', \" + variable + '); }\\n';\r\n    var script = document.createElement('script');\r\n\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n    var value = $('body').attr('tmp_' + variable);\r\n\r\n    $('body').removeAttr('tmp_' + variable);\r\n\r\n    return value;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = response.update_section.html;\r\n    var savings = parseFloat($('.price:contains(-$)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"volcanoecigs": "var ExternalProvider = {\r\n  init: function() {\r\n    this.getOldTotal();\r\n  },\r\n  getOldTotal: function() {\r\n    this.oldTotal = parseFloat($('.order-summary__section--total-lines .total-line__name:contains(\"Subtotal\")').next().text().replace(\/[^0-9|.]\/g, ''));\r\n  },\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = 0;\r\n    if($('.total-line__name:contains(\"Discount\")', responseHTML).length > 0) {\r\n      savings = parseFloat($('.total-line__name:contains(\"Discount\")', responseHTML).next().find('.order-summary__emphasis').text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      let newTotal = parseFloat($('.order-summary__section--total-lines .total-line__name:contains(\"Subtotal\")', responseHTML).next().text().replace(\/[^0-9|.]\/g, ''));\r\n      savings = this.oldTotal - newTotal;\r\n    }\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"volcom": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldPrice = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newPrice = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldPrice - newPrice;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"carrefour": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    this.oldTotal = parseFloat($('.item.total').text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n    if (type === 'injectCoupon') {\r\n      $('#ipt_discountCode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#ipt_discountCode').trigger('input').trigger('change');\r\n      $('#bt_discountCode').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    var counter = 0;\r\n    var codeApplyTime = setInterval(function () {\r\n      counter += 1;\r\n\r\n      if (counter > 10) {\r\n        clearInterval(codeApplyTime);\r\n        next();\r\n      }\r\n    }, 500);\r\n  },\r\n  parse: function (response) {\r\n    var newTotal = parseFloat($('.item.total').text().replace(',', '.').replace(\/[^0-9|.]\/g, ''));\r\n    var savings = this.oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  }\r\n};",
	"vremi": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line__price .order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('button[data-trekkie-id=\"apply_discount_button\"]')\r\n                .removeClass('btn--disabled')\r\n                .removeAttr('disabled')\r\n                .click();\r\n        }\r\n    }\r\n};",
	"w3llpeople": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n        var $response = $.parseHTML(response),\r\n            $couponCode = $('#coupon_code', $response),\r\n            $cartTotal = $('#shopping-cart-totals-table tr', $response),\r\n            codeFound = $couponCode.val().toLowerCase() === code.toLowerCase(),\r\n            savings = 0.00, $item;\r\n\r\n        $cartTotal.each(function() {\r\n            $item = $(this);\r\n            if($('td:first-child', $item).text().indexOf('Discount') !== -1) {\r\n                savings = parseFloat($('.price', $item).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"w3llpeople.mobile": "var ExternalProvider = {\r\n    $: window.$piggyJq,\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n        var $response = this.$.parseHTML(response),\r\n            $couponCode = this.$('#coupon_code', $response),\r\n            $cartTotal = this.$('#shopping-cart-totals-table tr', $response),\r\n            codeFound = $couponCode.val().toLowerCase() === code.toLowerCase(),\r\n            savings = 0.00, $item;\r\n\r\n        $cartTotal.each(function() {\r\n            $item = ExternalProvider.$(this);\r\n            if(ExternalProvider.$('td:first-child', $item).text().indexOf('Discount') !== -1) {\r\n                savings = parseFloat(ExternalProvider.$('.price', $item).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        };\r\n    },\r\n\r\n    complete: function(bestCode) {\r\n        if(bestCode) location.reload();\r\n    }\r\n};",
	"wagjag": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.promo);\r\n        var savings = parseFloat($('.wrappedPriceValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#addGiftCardBtn').click();\r\n            $('#promo-code').val(bestCode);\r\n\r\n            var changeEvent = new Event('change', {\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#promo-code').get(0).dispatchEvent(changeEvent);\r\n            var s = document.createElement('script');\r\n            s.type = 'text\/javascript';\r\n            var code = `jQuery('#promo-code').trigger('change');\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#cart-apply-promo-code:contains(\"Apply\")').get(0).dispatchEvent(clickEvent);`;\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n};",
	"waitrose": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                orderId: $('input[name=orderId]').val(),\r\n                returnDate: '',\r\n                authToken: $('input[name=authToken]').val(),\r\n                validateTarget: '',\r\n                flatRateFee: $('input[name=flatRateFee]').val(),\r\n                numberOfBags: $('input[name=numberOfBags]').val(),\r\n                carrierBagChargeApplicable: $('input[name=carrierBagChargeApplicable]').val(),\r\n                carrierBagQuantity: $('input[name=carrierBagQuantity]').val(),\r\n                phone2Show: $('input[name=phone2Show]').val(),\r\n                paperPreferenceEnable: $('input[name=paperPreferenceEnable]').val(),\r\n                paperStatement: $('input[name=paperStatement]:eq(1)').val(),\r\n                fulfilmentnotes: '',\r\n                reservationOrder: $('input[name=reservationOrder]').val(),\r\n                errorViewName: 'OrderPreview',\r\n                redirecturl: 'CheckOutInitiateCmd',\r\n                removeIncentiveCode: '',\r\n                addIncentiveCode: code,\r\n                bagOptionFlagDeliveryTem: '',\r\n                bagOptionFlagCollectionTem: '',\r\n                includeWfiMagazine: '',\r\n                checkoutBagSortInOrder: $('input[name=checkoutBagSortInOrder]').val(),\r\n                level0Aisle: '',\r\n                isBaglessOffered: $('input[name=isBaglessOffered]').val(),\r\n                isChargeApplicable: $('input[name=isChargeApplicable]').val(),\r\n                bagChargeRuleId: $('input[name=bagChargeRuleId]').val(),\r\n                includeBags: $('input[name=includeBags]:eq(1)').val()\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"walg": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#basket_discount .product-content__price--inc span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"walgreens": "var ExternalProvider = {\r\n  beforeInit: function () {\r\n    return new Promise((resolve) => {\r\n      let retries = 0;\r\n      const interval = setInterval(function () {\r\n        retries++;\r\n        if ($('#wag-cart-remove-0').length) {\r\n          $('#wag-cart-remove-0')[0].click();\r\n        }\r\n\r\n        if (!$('#wag-cart-remove-0').length && retries < 3) {\r\n          clearInterval(interval);\r\n          resolve();\r\n        } else if (retries === 3) {\r\n          resolve();\r\n        }\r\n      }, 2000);\r\n    })\r\n  },\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      data = {\r\n        action: 'add',\r\n        couponCode: code\r\n      };\r\n\r\n      return JSON.stringify(data);\r\n    } else if (action === 'clearCouponUrl') {\r\n      data = {\r\n        action: 'delete',\r\n        couponCode: code\r\n      };\r\n\r\n      return JSON.stringify(data);\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.orderPriceInfo.savings.promoSavings) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"walgreensphoto": "var ExternalProvider = {\r\n    \r\n    basketTotal: 0.00,\r\n    lastCode: 0,\r\n    \r\n    init: function() {\r\n\r\n        this.basketTotal = Number($('#resp-checkout-secondaryTotalBottom > tbody > tr:nth-child(2) > td:nth-child(3)')[0].innerHTML.replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n    },\r\n    parse: function(response, status, $xhr, code) {\r\n\r\n        var responseHTML = $.parseHTML(response);\r\n        \r\n        var oldPrice = this.basketTotal,\r\n\t\t\tnewPrice = Number($('#resp-checkout-secondaryTotalBottom > tbody > tr:nth-child(2) > td:nth-child(3)', responseHTML)[0].innerHTML.replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n\t\tif (newPrice < oldPrice) {\r\n\t\t\t\r\n\t\t\tvar discount = oldPrice - newPrice;\r\n\r\n            lastCode = code;\r\n\r\n            return {\r\n                success: true,\r\n                savings: discount\r\n            }\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n        \r\n    },\r\n    complete: function(bestCode, bestSavings) {\r\n\r\n        if (bestCode === lastCode) {\r\n\r\n\t\t\tlocation.reload();\r\n\r\n\t\t}\r\n\t\telse {\r\n            \r\n            $('#couponcode_B_1')[0].value = bestCode;\r\n            $('#applyCouponButton')[0].click();\r\n            \r\n        }\r\n        \r\n    }\r\n}",
	"wallis": "var ExternalProvider = {\r\n    init: function () {\r\n        $('.Accordion-header').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        $('.PromotionCode-header').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'injectCoupon') {\r\n            $('#promotionCode-text').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n            $('#promotionCode-text').trigger('input').trigger('change');\r\n            $('.Button.PromotionCode-submit').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n        } else if (type === 'removeInjectedCoupon') {\r\n            $('.PromotionCode-removeText').click();\r\n        }\r\n    },\r\n    whenReady: function (step, next) {\r\n        var counter = 0;\r\n        var codeApplyTime = setInterval(function () {\r\n            counter += 1;\r\n\r\n            if ($('.PromotionCode-removeText').get(0) || counter > 10) {\r\n                clearInterval(codeApplyTime);\r\n                next();\r\n            }\r\n        }, 300);\r\n    },\r\n    parse: function () {\r\n        var savings = parseFloat($('span:contains(\"-\")').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    }\r\n};",
	"wallsandfloors": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('span:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    var calcDec = Math.pow(10, 2);\r\n    savings = Math.trunc(savings * calcDec) \/ calcDec;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"warnerbrosonlinestore": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n    var savings = parseFloat(oldTotal - newTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"warriorgear": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var s = document.createElement('script');\r\n        var params = location.pathname.match('panier') ? 'wc_cart_params' : 'wc_checkout_params';\r\n        var code = \"document.body.setAttribute('apply', \" + params + \".apply_coupon_nonce);document.body.setAttribute('remove', \" + params + '.remove_coupon_nonce);';\r\n\r\n        s.id = 'tempScript';\r\n        s.appendChild(document.createTextNode(code));\r\n        document.body.appendChild(s);\r\n        $('tempScript').remove();\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cart-discount .amount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"warriorgear": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var s = document.createElement('script');\r\n    var params = location.pathname.match('panier') ? 'wc_cart_params' : 'wc_checkout_params';\r\n    var code = \"document.body.setAttribute('apply', \" + params + \".apply_coupon_nonce);document.body.setAttribute('remove', \" + params + '.remove_coupon_nonce);';\r\n\r\n    s.id = 'tempScript';\r\n    s.appendChild(document.createTextNode(code));\r\n    document.body.appendChild(s);\r\n    $('tempScript').remove();\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-discount .amount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"watchshop": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.totals-row:eq(1)', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"waterstones": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.DiscountTotal * -1);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#txtCouponCode').val(bestCode);\r\n            \r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('#txtCouponCode').trigger('input').trigger('change');\r\n            $('#btnEnterCoupon').get(0).dispatchEvent(clickEvent);\r\n            $('.btn-primary:contains(\"Close\")').click();\r\n        }\r\n    }\r\n};",
	"wattsbeautyusa": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"way": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var auth = 'Bearer ' + document.cookie.match(\/Bearer=([\\w|-]+)\/)[1];\r\n\r\n        $.ajax({\r\n            url: 'https:\/\/www.way.com\/way-service\/cart\/checkout',\r\n            headers: {\r\n                authorization: auth\r\n            },\r\n            async: false,\r\n            success: function (response) {\r\n                $('body').attr('auth', auth);\r\n                $('body').attr('orderId', response.orderId);\r\n            }\r\n\r\n        });\r\n    },\r\n    prepare: function (type, code) {\r\n        return JSON.stringify({\r\n            orderId: document.cookie.match(\/Bearer=([\\w|-]+)\/) === null ? Number(localStorage['ngStorage-orderId']) : Number($('body').attr('orderId')),\r\n            orderType: 'CART',\r\n            price: {\r\n                promocodes: [{\r\n                    applyPromoCode: type === 'applyCouponUrl',\r\n                    promoCode: code\r\n                }]\r\n            }\r\n        });\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.price.promocodes[0].promoCodeValue);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var s = document.createElement('script');\r\n            var code = \"$('#promocode_input_Checkout_Login, #promocode_input_Checkout_Guest').focus().val('\" + bestCode +\r\n                \"').change().blur(); $('#promocode_apply_Checkout_Login, #promocode_apply_Checkout_Guest').click();\";\r\n\r\n            $('#promocode_arrow_Checkout_Login, #promocode_arrow_Checkout_Guest').click();\r\n            s.appendChild(document.createTextNode(code));\r\n            document.body.appendChild(s);\r\n        }\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"wayfair": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var applyCouponUrlElement = $('#__jpApplyCouponUrl');\r\n    var applyCouponUrl = this.isCartPage() ? 'https:\/\/www.wayfair.com\/a\/checkout\/basket\/update_promotion_or_gift_certificate' : 'https:\/\/secure.wayfair.com\/a\/checkout\/basket\/update_promotion_or_gift_certificate';\r\n\r\n    if (applyCouponUrlElement.length < 1) {\r\n      $('<input>').attr({\r\n        value: applyCouponUrl,\r\n        type: 'hidden',\r\n        id: '__jpApplyCouponUrl'\r\n      }).appendTo('body');\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.order_summary);\r\n    var savings = parseFloat($('.OrderSummary-price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/v\/checkout\/basket\/show';\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"wd": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('nobr', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"weareknitters": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response.content);\r\n    var savings = parseFloat($('.a-right span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"wedgwooduk": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"weightingcomforts": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"weirdfish": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td.cell-price > div', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#Code').val(bestCode);\r\n            $('#btnApplyOffer').click();\r\n        }\r\n    }\r\n};",
	"wellca": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        if ($('.checkout_subcontainer .error', responseHTML).text().indexOf(code) === -1) {\r\n            var savings = parseFloat($('.ot-coupon-Amount', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            if (savings) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n    complete: function () {\r\n        location.reload(true);\r\n    }\r\n}",
	"wellnessfx": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'applyCouponUrl') {\r\n            var data = { coupon_code: code };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response, status) {\r\n        var savings = 0.00;\r\n\r\n        if (status === 'success') {\r\n            var remCoup = JSON.stringify({ coupon_code: null });\r\n\r\n            savings = parseFloat(response.coupon_used_in_cents) \/ 100;\r\n\r\n            $.ajax({\r\n                url: 'https:\/\/www.wellnessfx.com\/purchase',\r\n                type: 'PUT',\r\n                headers: {\r\n                    'content-type': 'application\/json',\r\n                    'x-csrf-token': $('meta[name=\"csrf-token\"]').attr('content')\r\n                },\r\n                data: remCoup\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"weltbildde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = $('p[property=\"itemDiscountAmount\"]', $.parseHTML(response)).text().replace(',','').replace(\/[^0-9.]\/g,'');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"westelm": "var ExternalProvider = {\r\n  init: function () {\r\n    $.fn.serializeObject = function () {\r\n      var object = {};\r\n      var data = this.serializeArray();\r\n\r\n      $.each(data, function () {\r\n        if (object[this.name] !== undefined) {\r\n          if (!object[this.name].push) {\r\n            object[this.name] = [object[this.name]];\r\n          }\r\n\r\n          object[this.name].push(this.value || '');\r\n        } else {\r\n          object[this.name] = this.value || '';\r\n        }\r\n      });\r\n\r\n      return object;\r\n    };\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'applyCouponUrl') {\r\n      var form = $('#paymentInformation').serializeObject();\r\n\r\n      $('#promoCode').val(code);\r\n\r\n      return form;\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary-tally-item-value:contains(\"-\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#promoCode').val(bestCode);\r\n      $('#applyPromo').click();\r\n    }\r\n  }\r\n};",
	"westfalia": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.data.total_discount * -1);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"westmarine": "var ExternalProvider = {\r\n\r\n    _prepareUrl: function() {\r\n\r\n\t\tvar applyUrlInput = $('#__jpApplyCouponUrl'),\r\n\t\t\tapplyUrl = this.isCartPage() ? 'https:\/\/www.westmarine.com\/checkout\/redeemVoucherCode' : 'https:\/\/www.westmarine.com\/checkout\/singlePage\/redeemVoucherCode',\r\n            clearUrlInput = $('#__jpClearCouponUrl'),\r\n            clearUrl = this.isCartPage() ? 'https:\/\/www.westmarine.com\/cart\/remove\/promotionalVouchers' : 'https:\/\/www.westmarine.com\/checkout\/singlePage\/removeVoucherCode';\r\n\t\t\r\n        if(!applyUrlInput.length) {\r\n\t\t\tapplyUrlInput = document.createElement(\"input\");\r\n\t\t\tapplyUrlInput.id = '__jpApplyCouponUrl';\r\n\t\t\tapplyUrlInput.style.display = \"none\";\r\n\t\t\t(document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n\t\t\tapplyUrlInput = $('#__jpApplyCouponUrl');\r\n\t\t}\r\n\r\n        if(!clearUrlInput.length) {\r\n\t\t\tclearUrlInput = document.createElement(\"input\");\r\n\t\t\tclearUrlInput.id = '__jpClearCouponUrl';\r\n\t\t\tclearUrlInput.style.display = \"none\";\r\n\t\t\t(document.body || document.head || document.documentElement).appendChild(clearUrlInput);\r\n\t\t\tclearUrlInput = $('#__jpClearCouponUrl');\r\n\t\t}\r\n        \r\n\t\tapplyUrlInput.attr('value', applyUrl);\r\n        clearUrlInput.attr('value', clearUrl);\r\n\t},\r\n    \r\n    isCartPage: function() {\r\n        return window.location.href.indexOf('checkout') == -1;\r\n\t},\r\n\r\n    prepare: function(action, code) {\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            return { voucherCode: code };\r\n        } else if (action === 'clearCouponUrl') {\r\n            return this.isCartPage() ? { voucherNumber: code } : { voucherCode: code };\r\n        }\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n    parse: function(response, status, $xhr, code) {\r\n        \r\n        if (this.isCartPage()) {\r\n            var responseHTML = $.parseHTML(response);\r\n            var savings = parseFloat($('div.cart-subtotal > div.item_container_holder > div.item_container > .order_totals:eq(1) > .product-price > .sale', responseHTML).html().replace('(', '').replace(')', '').replace('$', '').replace(\/[^0-9|\\.]\/g, ''));\r\n            \r\n            if (savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n            }\r\n\r\n        } else {\r\n            var responseJSON = JSON.parse(response);\r\n            var responseHTML = $(responseJSON.cartTotals);\r\n            var savings = parseFloat($('.product-price > .sale', responseHTML).html().replace('(', '').replace(')', '').replace('$', ''));\r\n            \r\n            if (savings > 0) {\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                }\r\n            }\r\n            \r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n\r\n    },\r\n    \r\n    complete: function(bestCode, bestSaving) {\r\n        \r\n        location.reload(true);\r\n\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"wetnwildbeauty": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.match(\/\"discount_amount\":\"-[0-9|.]*\/).toString().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      var s = document.createElement('script');\r\n      var code = \"jQuery('#coupon_code, #discount-code').val('\" + bestCode + \"').trigger('change');jQuery('button[value=\\\"Apply Coupon\\\"]').click();\";\r\n\r\n      s.type = 'text\/javascript';\r\n      s.appendChild(document.createTextNode(code));\r\n      document.body.appendChild(s);\r\n    }\r\n  }\r\n};",
	"wexphotovideo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.voucher-applied', responseHTML).next().text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.show-voucher-link').click();\r\n            $('#voucherCode').val(bestCode);\r\n            $('button:contains(\"Apply\")').click();\r\n        }\r\n    }\r\n};",
	"whitehouseblackmarket": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.promoDiscounts[0].discountAmount.replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"whitestuff": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.cost-summary-item__price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"whittard": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price-total:contains(-)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"wholesalecostumeclub": "var ExternalProvider = {\r\n\tprepare: function(type, code){\r\n\t\t\r\n\t\t\r\n\t\tif (type === \"applyCouponUrl\") {\r\n\t\t\t\r\n\t\t\tdata = {};\r\n\t\t\tdata['keycode'] = code;\r\n\t\t\tdata['actn'] = $('#xoutkeycodeForm input[name=\"actn\"]').val();\r\n\t\t\tdata['x'] = '0';\r\n\t\t\tdata['y'] = '0';\r\n\t\t\t\r\n            return data;\r\n        }\r\n\t\t\r\n\t\treturn null;\r\n\t},\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n\r\n\t\tvar codeFound = false;\r\n\t\tvar savings = 0.0;\r\n\t\t\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\t\r\n\t\t$(\"#Cart_Totals th\",responseHTML).each(function(i,el){\r\n\t\t\t\r\n\t\t\tif($(el).text().toLowerCase().indexOf(\"Promotional Discount\".toLowerCase())>=0){\r\n\t\t\t\t\r\n\t\t\t\tsavings = Number($(el).next().text().replace(\/[^0-9|\\.]\/g, ''));\r\n\t\t\t\tif(savings>0){\r\n\t\t\t\t\tcodeFound=true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\t\r\n\t\t\r\n\t\t\r\n\t\treturn {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n        \r\n       \r\n    },\r\n    complete: function(bestCode, bestSavings){\r\n\t\t\r\n\t\t$(\"#keycodetext\").val(bestCode);\r\n\t\t\r\n\t\t$(\"#xoutkeycodeForm input.apply\").click();\r\n        \r\n\r\n    }\r\n    \r\n}",
	"wholesalepartysupplies": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('td:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promo_code').val(bestCode);\r\n            $('.button.button--alt').click();\r\n        }\r\n    }\r\n};",
	"whsmith": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-discount.discount .order-total-value.order-total-item', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"wickes": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = response.orderSummaryData.discountTotal.replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"wiggle": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('#voucher-discount .amount', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#txtVoucher, #voucherCode').val(bestCode);\r\n      $('#AddCode, #applyVoucher').click();\r\n    }\r\n  }\r\n};",
	"wigglesport": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#voucher-discount .amount', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCartPage: function () {\r\n        return \/basket\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            var couponField = this.isCartPage() ? '#txtVoucher' : '#voucherCode';\r\n            var applyField = this.isCartPage() ? '#AddCode' : '#applyVoucher';\r\n            \r\n            $(couponField).val(bestCode);\r\n            $(applyField).click();\r\n        }\r\n    }\r\n};",
	"wigsbuy": "var ExternalProvider = {\r\n    setCookie: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {\r\n        if (!sKey || \/^(?:expires|max-age|path|domain|secure)$\/i.test(sKey)) {\r\n            return false;\r\n        }\r\n\r\n        var sExpires = '';\r\n\r\n        if (vEnd) {\r\n            switch (vEnd.constructor) {\r\n                case Number:\r\n                    sExpires = vEnd === Infinity ? '; expires=Fri, 31 Dec 9999 23:59:59 GMT' : '; max-age=' + vEnd;\r\n                    break;\r\n                case String:\r\n                    sExpires = '; expires=' + vEnd;\r\n                    break;\r\n                case Date:\r\n                    sExpires = '; expires=' + vEnd.toUTCString();\r\n                    break;\r\n            }\r\n        }\r\n\r\n        document.cookie = encodeURIComponent(sKey) + '=' + encodeURIComponent(sValue) + sExpires + (sDomain ? '; domain=' + sDomain : '') + (sPath ? '; path=' + sPath : '') + (bSecure ? '; secure' : '');\r\n\r\n        return true;\r\n    },\r\n    prepare: function (actionType, couponCode) {\r\n        if (actionType === 'applyCouponUrl') {\r\n            this.setCookie('WigsBuyCouponCode', couponCode.toLowerCase(), Infinity, '\/', 'wigsbuy.com');\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = response.Data.ActiveResultModel.CouponReductionMoney;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        if (bestCode) {\r\n            $('#textCouponCode').val(bestCode);\r\n            $('#buttonUseCoupon').click();\r\n        }\r\n    }\r\n};",
	"wiivv": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"wildborn": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.color_ot_total', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"wiley": "var ExternalProvider = {\r\n    prepare: function(type, code)\r\n    {\r\n\r\n        var couponData = {};\r\n\r\n        var formInputs = [].slice.call($('input:not([type=\"radio\"]), input[type=\"radio\"]:checked'));\r\n\r\n        formInputs.forEach(function(e){\r\n            couponData[$(e).attr('name')] = $(e).val();\r\n        })\r\n\r\n        couponData[\"ADSPPROMO\"] = \"\";\r\n        couponData[\"APROMEXIST\"] = \"\";\r\n        couponData[\"ANEWPROMO\"] = code;\r\n\r\n        if (type === \"applyCouponUrl\") {\r\n            return couponData;\r\n        }\r\n\r\n        return null;\r\n\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var result;\r\n\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('span.accounterror', responseHTML).text().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n            \r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var oldPrice = Number($('th[valign=\"top\"][align=\"right\"]').text().split(' ').slice(-1)[0].replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                newPrice = Number($('th[valign=\"top\"][align=\"right\"]', responseHTML).text().split(' ').slice(-1)[0].replace(\/[^0-9|\\.]\/g, '')) * 100,\r\n                savings = (oldPrice - newPrice)\/100;\r\n\r\n            result = {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings){\r\n\r\n        var url = \"https:\/\/customer.wiley.com\/CGI-BIN\/LANSAWEB?WEBEVENT+R0C33D8270CE67601A5E2021+PRD+ENG\";\r\n        var couponData = {};\r\n\r\n        var formInputs = [].slice.call($('input:not([type=\"radio\"]), input[type=\"radio\"]:checked'));\r\n\r\n        formInputs.forEach(function(e){\r\n            couponData[$(e).attr('name')] = $(e).val();\r\n        })\r\n\r\n        couponData[\"ADSPPROMO\"] = \"\";\r\n        couponData[\"APROMEXIST\"] = \"\";\r\n        couponData[\"ANEWPROMO\"] = bestCode;\r\n\r\n        $.post(url, couponData, function(){\r\n            location.reload()\r\n        });\r\n    }\r\n}",
	"williams": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    if (action === 'injectCoupon') {\r\n      $('input[ng-model=\"vm.giftCertificateNumber\"]').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('input[ng-model=\"vm.giftCertificateNumber\"]').trigger('input').trigger('change');\r\n      $('.primaryAction.giftCertButton.ng-binding').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if (step === 'injectCoupon') {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('span:contains(\"-\u00a3\")').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1000);\r\n          }\r\n\r\n          waited++;\r\n        }, 100);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = $('span:contains(\"-\u00a3\")').text().replace(\/[^0-9.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"williamssonoma": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var obj = {};\r\n            var arr = this.serializeArray();\r\n\r\n            $.each(arr, function () {\r\n                if (obj[this.name] !== undefined) {\r\n                    if (!obj[this.name].push) {\r\n                        obj[this.name] = [obj[this.name]];\r\n                    }\r\n\r\n                    obj[this.name].push(this.value || '');\r\n                } else {\r\n                    obj[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return obj;\r\n        };\r\n    },\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            var $form = $('#paymentInformation');\r\n\r\n            $form.find('#promoCode').val(code);\r\n\r\n            return $form.serializeObject();\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldDiscount =  parseFloat($('.order-summary-tally-item-value.order-summary-tally-you-saved').text().replace(\/[^0-9.]\/g, ''));\r\n        oldDiscount  = isNaN(oldDiscount) ? 0.00 : oldDiscount;\r\n        var newDiscount =  parseFloat($('.order-summary-tally-item-value.order-summary-tally-you-saved', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        newDiscount = isNaN(newDiscount) ? 0.00 : newDiscount;\r\n        var savings = Math.abs(newDiscount - oldDiscount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promoCode').val(bestCode);\r\n            $('#applyPromo').trigger('click');\r\n        }\r\n    }\r\n};",
	"wilsonsleather": "var ExternalProvider = {\r\n\r\n    init: function() {\r\n\t\t$.ajaxSettings.contentType = \"application\/x-www-form-urlencoded; charset=UTF-8\";\r\n    },\r\n\r\n    isCheckout: function() {\r\n        return \/accordioncheckout\\.do\/gi.test(window.location.pathname);\r\n    },\r\n\r\n    parseAmount: function(string) {\r\n        return parseFloat(string.replace(\/[^0-9|\\.]\/g, ''));\r\n    },\r\n\r\n    parse: function(response, status, $xhr, code)\r\n    {\r\n        var responseHTML = $.parseHTML(response),\r\n            codeFound = $('#sourceCode', responseHTML).val().toLowerCase().indexOf(code.toLowerCase()) >= 0;\r\n\r\n        if (codeFound){\r\n\r\n            \/\/ Below are functional hacks to get the price change\r\n            var selector = '#EstTaxShipItemTable_estBasketTotal',\r\n                oldPrice = this.parseAmount($(this.isCheckout() ? '.ml-summary-total .ml-accordion-summary-item-value' : selector).text()),\r\n                newPrice = this.parseAmount($(selector, responseHTML).text());\r\n\r\n            return {\r\n                success: true,\r\n                savings: oldPrice - newPrice\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function (bestCode){\r\n        if(bestCode) location.reload();\r\n    }\r\n}",
	"windandweather": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var resultUrlInput = $('#___jpResultUrl');\r\n    var resultUrl = this.isCartPage() ? 'https:\/\/www.windandweather.com\/en\/cart' : 'https:\/\/www.windandweather.com\/en\/checkout\/multi\/delivery-address\/add';\r\n\r\n    if (!resultUrlInput.length) {\r\n      resultUrlInput = document.createElement('input');\r\n      resultUrlInput.id = '___jpResultUrl';\r\n      resultUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(resultUrlInput);\r\n      resultUrlInput = $('#___jpResultUrl');\r\n    }\r\n\r\n    resultUrlInput.attr('value', resultUrl);\r\n  },\r\n  prepare: function (type, code) {\r\n    var data = {};\r\n    var token = $('input[name=\"CSRFToken\"]').val();\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      data.promoCode = code,\r\n      data.CSRFToken = token;\r\n\r\n      return data;\r\n    }\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = 0;\r\n\r\n    if (this.isCartPage()) {\r\n      savings = parseFloat($('.discount:eq(1)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    } else {\r\n      savings = parseFloat($('.discount:eq(0)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    }\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/en\/cart';\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"windsorstore": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#bagSummary > div.summary-line-item.discount > div.amount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#CouponCode').val(bestCode);\r\n            $('.coupon-form').submit();\r\n        }\r\n    }\r\n};",
	"windycitynovelties": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.html);\r\n        var savings = $('#dynamic-discount-amount', responseHTML).text().replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promocode').val(bestCode);\r\n            $('button:contains(\"Apply\")').click();\r\n        }\r\n    }\r\n};",
	"wine": "var ExternalProvider = {\r\n  prepare: function (action, code) {\r\n    var data = {};\r\n\r\n    if (action === 'applyCouponUrl') {\r\n      data = Object.assign(data, {\r\n        promoCode: code\r\n      });\r\n\r\n      return JSON.stringify(data);\r\n    }\r\n\r\n    return false;\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.discountTotal.display.replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      var s = document.createElement('script');\r\n\r\n      s.type = 'text\/javascript';\r\n\r\n      var code = `$('.orderCodesForm_enteredPromoCode').text('${bestCode}');$('input[name=\"promoCode\"]').val('${bestCode}').trigger('change'); $('.orderCodesForm_applyPromo').prop('disabled', false).click()`;\r\n      s.appendChild(document.createTextNode(code));\r\n      document.body.appendChild(s);\r\n    }\r\n  }\r\n};",
	"winebasket": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.plaintext:contains(\"$\"):eq(2)').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('span:contains(\"$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"winecountrygiftbaskets": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var savings = $('.fcwcgrey.fsmedium', responseHTML).filter(function (el) {\r\n            return $(this).html().indexOf('Discount') > -1;\r\n        }).parent().next('td')\r\n            .find('.fcwcgrey.fsmedium')\r\n            .text()\r\n            .replace(\/[^0-9|.]\/g, '');\r\n\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"wingsupply": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.discount_amount);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"wisconsinmade": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = $('span:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, '');\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"wisefoodstorage": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"wix": "var ExternalProvider = {\r\n  prepare: function (type, code) {\r\n    var changeEvent = new Event('change', {\r\n      bubbles: true,\r\n      cancelable: true\r\n    });\r\n\r\n    if (type === 'injectCoupon' && $('span:contains(\"Enter\")').length) {\r\n      $('span:contains(\"Enter\")')[0].click();\r\n      $('input[placeholder=\"Enter promo code\"]').val(code);\r\n      $('input[placeholder=\"Enter promo code\"]').get(0).dispatchEvent(changeEvent);\r\n      $('button:contains(\"Apply\")').click();\r\n    }\r\n    else if (type === 'injectCoupon') {\r\n      $('input[placeholder=\"Enter promo code\"]').val(code);\r\n      $('input[placeholder=\"Enter promo code\"]').get(0).dispatchEvent(changeEvent);\r\n      $('button:contains(\"Apply\")').click();\r\n    }\r\n    else if (type === 'removeInjectedCoupon') {\r\n      $('a:contains(\"Remove\")').click();\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step == 'injectCoupon') || (step == 'removeInjectedCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 300,\r\n          waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 1500);\r\n          }\r\n\r\n          waited++;\r\n        }, 50);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function () {\r\n    var savings = parseFloat($('span[data-hook=\"discount-amount-text\"]').text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[placeholder=\"Enter promo code\"]').val(bestCode);\r\n      $('button:contains(\"Apply\")').click();\r\n    }\r\n  }\r\n};",
	"wmfamericas": "var ExternalProvider = {\r\n\tparse: function (response) {\r\n\t\tvar responseHTML = $.parseHTML(response);\r\n\t\tvar $savings = $('th.a-right', responseHTML).filter(function () {\r\n\t\t\treturn $(this).text().indexOf('Discount') > -1;\r\n\t\t}).next('td.a-right');\r\n\r\n\t\tvar savings = $savings.text().replace(\/[^0-9|.]\/g, '');\r\n\r\n\t\treturn {\r\n\t\t\tsuccess: savings > 0,\r\n\t\t\tsavings: isNaN(savings) ? 0.00 : savings\r\n\t\t};\r\n\t},\r\n\tcomplete: function (bestCode) {\r\n\t\tif (bestCode) location.reload();\r\n\t}\r\n};",
	"wolfermans": "var ExternalProvider = {\r\n  init: function () {\r\n    $('.h1.promolabel').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n  },\r\n  prepare: function (type, code) {\r\n    if (type === 'injectCoupon') {\r\n      $('#promoCode').val(code)[0].dispatchEvent(new Event('input', { bubbles: true }));\r\n      $('#promoCode').trigger('input').trigger('change');\r\n      $('#applyPromotionBtn').get(0).dispatchEvent(new MouseEvent('click', { view: window, bubbles: true, cancelable: true }));\r\n    }\r\n  },\r\n  whenReady: function (step, next) {\r\n    if ((step === 'injectCoupon')) {\r\n      setTimeout(function () {\r\n        var maxWait = 200;\r\n        var waited = 0;\r\n        var waitForClose = setInterval(function () {\r\n          var confirmed = !$('.cls_loadingMask').length;\r\n\r\n          if ((confirmed) || (waited > maxWait)) {\r\n            clearInterval(waitForClose);\r\n            setTimeout(function () {\r\n              next();\r\n            }, 300);\r\n          }\r\n\r\n          waited++;\r\n        }, 10);\r\n      }, 100);\r\n    }\r\n  },\r\n  parse: function (response, status, $xhr, code) {\r\n    var reponseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.td-columns.price-cart-summary:contains(\"-$\")', reponseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  }\r\n};",
	"wolverine": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.coupon-total:contains(-$)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n}",
	"wondershare": "var ExternalProvider = {\r\n    parse: function (response) {\r\n    \tvar responseHTML = $.parseHTML(response);\r\n    \tvar savings = parseFloat($('#coupon_discount', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n\r\n\treturn {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n     },\r\n     complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n     }\r\n};",
	"woodhouseclothing": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale = localeMapping['US'];\r\n        var selector = $('strong>.price').text().replace(\/[0-9.,]\/g, '');\r\n\r\n        if (selector === \"\u20ac\") {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === \"$\") {\r\n            currency = 'USD';\r\n            locale = localeMapping['US'];\r\n        }\r\n        \r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price:contains(-)', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"wooloversde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.text-right:contains(\"-\")', responseHTML).text().replace(\/[^.0-9|]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"wooloversfr": "var ExternalProvider = {\r\n    init: function () {\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var a = this.serializeArray();\r\n\r\n            $.each(a, function () {\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n\r\n                    o[this.name].push(this.value || '');\r\n                } else {\r\n                    o[this.name] = this.value || '';\r\n                }\r\n            });\r\n\r\n            return o;\r\n        };\r\n    },\r\n    prepare: function (action, code) {\r\n        var formData = $('#AddToBasket').serializeObject();\r\n\r\n        if (action === 'applyCouponUrl') {\r\n            formData = Object.assign(formData, {\r\n                vouchercode: code,\r\n                applyvoucher: 'voucher',\r\n                giftcode: ''\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('#cart_discount', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"woomfr": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = response.rewards.amount;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('input[data-target=\"book-promo.codeInput\"]').val(bestCode);\r\n      $('button:contains(\"Valider\")').click();\r\n    }\r\n  }\r\n};",
	"woot": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var oldTotal = parseFloat($('#order-total').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = response.Total;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if (savings) {\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"worldwidegolfshops": "var ExternalProvider = {\r\n  _prepareUrl: function () {\r\n    var applyUrlInput = $('#___jpCouponUrl');\r\n    var applyUrl = this.isCartPage() ? 'https:\/\/www.worldwidegolfshops.com\/shoppingcart.aspx' : 'https:\/\/www.worldwidegolfshops.com\/secure\/checkoutpage2.aspx';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '___jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#___jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n  },\r\n  isCartPage: function () {\r\n    return \/shoppingcart.aspx\/.test(location.pathname);\r\n  },\r\n  prepare: function (type, code) {\r\n    function serializeObject(a) {\r\n      var o = {};\r\n\r\n      $.each(a, function () {\r\n        o[this.name] = this.value || '';\r\n      });\r\n\r\n      return o;\r\n    }\r\n    var formDataArray = $('#form1').serializeArray();\r\n    var formData = serializeObject(formDataArray);\r\n\r\n    if (type === 'applyCouponUrl') {\r\n      formData.ctl00$ctl00$mainSiteContent$MainContent$basketForm$discount_code = code;\r\n      formData.ctl00$ctl00$mainSiteContent$MainContent$basketForm$ApplyDiscountButton = 'Apply';\r\n    }\r\n\r\n    return formData;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.DiscountPriceB:contains(\"-$\"):first', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#discount_code').val(bestCode);\r\n      $('#ApplyDiscountButton').click();\r\n    }\r\n  }\r\n};\r\nExternalProvider._prepareUrl();",
	"worldwidestereo": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('strong:contains(\"-$\")', responseHTML).text().replace(\/[^0-9.]\/g, ''));\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"wovenpear": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"shopwwe": "var ExternalProvider = {\r\n    parse: function (response) {\r\n      var responseHTML = $.parseHTML(response);\r\n      var oldTotal = parseFloat($('.order-value').text().replace(\/[^0-9|.]\/g, ''));\r\n      var newotal = parseFloat($('.order-value', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n      var savings = newotal < oldTotal ? parseFloat($('.order-discount.discount', responseHTML).text().replace(\/[^0-9|.]\/g, '')) : 0.00;\r\n  \r\n      return {\r\n        success: savings > 0,\r\n        savings: Number.isNaN(savings) ? 0.00 : savings\r\n      };\r\n    },\r\n    complete: function (bestCode) {\r\n      if (bestCode) {\r\n        $('#dwfrm_cart_couponCode').val(bestCode);\r\n        $('#add-coupon').click();\r\n      }\r\n    }\r\n  };",
	"xcvi": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.reduction-code__text:contains(\"-$\")', responseHTML).text();\r\n        savings = parseFloat(savings.substr(savings.indexOf(\"-$\") + 1).replace(\/[^0-9.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"xspode": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.column--total-price:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"xsstock": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.cart-total-value:contains(\"-\u00a3\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"xtendlife": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"xtrema": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.payment-due__price').text().replace(\/[^.0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.payment-due__price', responseHTML).text().replace(\/[^.0-9]\/g, ''));\r\n        var savings = parseFloat(oldTotal - newTotal);\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"xxxlutz": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat($('.vouchers .sum', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, '')) \/ 100;\r\n     \r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },    \r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"yamibuy": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.data.reduce_amount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"yandy": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    var applyUrlInput = $('#__jpCouponUrl');\r\n    var applyUrl = 'https:\/\/www.yandy.com\/api\/v1.1\/cart\/' + $('#cart-reference').text() + '\/coupon';\r\n\r\n    if (!applyUrlInput.length) {\r\n      applyUrlInput = document.createElement('input');\r\n      applyUrlInput.id = '__jpCouponUrl';\r\n      applyUrlInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n      applyUrlInput = $('#__jpCouponUrl');\r\n    }\r\n\r\n    applyUrlInput.attr('value', applyUrl);\r\n    this.__getCustomerKey();\r\n  },\r\n  __getCustomerKey: function () {\r\n    var customerKeyInput = $('#__jpCustomerKey');\r\n    var srcKey = $('.magnify-image').attr('src');\r\n    var customerKey = srcKey.match('uid=(.*)&page_type');\r\n\r\n    if (!customerKeyInput.length) {\r\n      customerKeyInput = document.createElement('input');\r\n      customerKeyInput.id = '__jpCustomerKey';\r\n      customerKeyInput.style.display = 'none';\r\n      (document.body || document.head || document.documentElement).appendChild(customerKeyInput);\r\n      customerKeyInput = $('#__jpCustomerKey');\r\n    }\r\n\r\n    customerKeyInput.attr('value', customerKey[1]);\r\n  },\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.data.discount_total);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"ycam": "var ExternalProvider = {\r\n    security: '',\r\n    getSecurityCodes: function (type) {\r\n        var pageParams = 'wc_checkout_params';\r\n\r\n        var scriptContent = 'var body = document.getElementsByTagName(\"body\")[0];';\r\n        var script = document.createElement('script');\r\n\r\n        scriptContent += 'body.setAttribute(\"securityApply\", ' + pageParams + '.apply_coupon_nonce);';\r\n        scriptContent += 'body.setAttribute(\"securityRemove\", ' + pageParams + '.remove_coupon_nonce);';\r\n        scriptContent += 'body.setAttribute(\"resultSecurity\", ' + pageParams + '.update_order_review_nonce);';\r\n\r\n        script.id = 'tmpScript';\r\n        script.appendChild(document.createTextNode(scriptContent));\r\n        (document.body || document.head || document.documentElement).appendChild(script);\r\n\r\n        var securityApply = $('body').attr('securityApply');\r\n        var securityRemove = $('body').attr('securityRemove');\r\n\r\n        this.security = $('body').attr('resultSecurity');\r\n\r\n        if (type === 'apply') {\r\n            return securityApply;\r\n        } else if (type === 'remove') {\r\n            return securityRemove;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                security: this.getSecurityCodes('apply'),\r\n                coupon_code: code\r\n            };\r\n        }\r\n\r\n        if (type === 'clearCouponUrl') {\r\n            data = {\r\n                security: this.getSecurityCodes('remove'),\r\n                coupon_code: code\r\n            };\r\n\r\n            return data;\r\n        }\r\n\r\n        if (type === 'resultUrl') {\r\n            data = {\r\n                security: this.security\r\n            };\r\n        }\r\n\r\n        return data;\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response.fragments['.woocommerce-checkout-review-order-table']);\r\n        var savings = parseFloat($('.cart-label-right:contains(\"-$\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload(true);\r\n    }\r\n};",
	"ycmc": "var ExternalProvider = {\r\n  prepare: function (type) {\r\n    var self = this;\r\n\r\n    if (type === 'applyCouponUrl' && $('button[value=\"Cancel Coupon\"]').length > 0) {\r\n      $.ajax({\r\n        url: 'https:\/\/www.ycmc.com\/checkout\/cart\/couponPost\/',\r\n        type: 'POST',\r\n        async: false,\r\n        data: {\r\n          remove: 1,\r\n          coupon_code: $('#coupon_code').val()\r\n        },\r\n        success: function (res) {\r\n          self.oldTotal = parseFloat($('#shopping-cart-totals-table tr:contains(\"Grand Total\")', res).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n      });\r\n    }\r\n\r\n    this._oldTotal = self.oldTotal;\r\n\r\n    return null;\r\n  },\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var preAppliedCode = $('button[value=\"Cancel Coupon\"]').length > 0;\r\n    var usualOldTotal = parseFloat($('#shopping-cart-totals-table tr:contains(\"Grand Total\")').text().replace(\/[^0-9|.]\/g, ''));\r\n    var oldTotal = preAppliedCode ? this._oldTotal : usualOldTotal;\r\n    var newTotal = parseFloat($('#shopping-cart-totals-table tr:contains(\"Grand Total\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"yesstyle": "var ExternalProvider = {\r\n    __prepareUrl: function () {\r\n        var applyUrlInput = $('#__applyUrl');\r\n        var interfaceID = $('.container form').attr('action').match(\/wicket:interface=:(.*):actionForm\/)[1];\r\n        var applyUrl = 'https:\/\/www.yesstyle.com\/?wicket:interface=:' + interfaceID + ':actionForm:panel.mainContent:leftActionBlocks:3:panel.activeMode:actionForm:continue::IActivePageBehaviorListener:0:2&wicket:ignoreIfNotActive=true&ischeckout=true&ism=true&random=';\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__applyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#__applyUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response) {\r\n        var getAmount = response.match(\/td class=\"text-right notranslate\">-US\\$&nbsp;(.*)<\\\/td><\\\/tr>\/);\r\n        var discount = parseFloat(getAmount[1].replace(\/[^0-9]\/g, ''));\r\n        var savings = discount \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider.__prepareUrl();",
	"ylighting": "var ExternalProvider = {\r\n    _prepareUrl: function () {\r\n        this.inCartPage = $('.site_checkout').length > 0;\r\n\r\n        var applyUrlInput = $('#__applyUrl');\r\n        var _dwcont = this.inCartPage ? '' : $('#dwfrm_billingcoupon').attr('action').split('\/')[$('#dwfrm_billingcoupon').attr('action').split('\/').length - 1];\r\n        var applyUrl = this.inCartPage ? $('#dwfrm_cart').attr('action') : 'https:\/\/www.ylighting.com\/cart?dwcont=' + _dwcont;\r\n\r\n        if (!applyUrlInput.length) {\r\n            applyUrlInput = document.createElement('input');\r\n            applyUrlInput.id = '__applyUrl';\r\n            applyUrlInput.style.display = 'none';\r\n            (document.body || document.head || document.documentElement).appendChild(applyUrlInput);\r\n            applyUrlInput = $('#__applyUrl');\r\n        }\r\n\r\n        applyUrlInput.attr('value', applyUrl);\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var existingDiscElems = $('.mini_productsubtotal .salesprice');\r\n        var respDiscElems = $('.mini_productsubtotal .salesprice', responseHTML);\r\n        var existingDiscount = 0.00;\r\n        var discount = 0.00;\r\n        var savings = 0.00;\r\n\r\n        for (var x = 0; x < existingDiscElems.length; x++) {\r\n            existingDiscount += parseFloat(existingDiscElems.eq(x).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n\r\n        for (var y = 0; y < respDiscElems.length; y++) {\r\n            discount += parseFloat(respDiscElems.eq(y).text().replace(\/[^0-9|.]\/g, ''));\r\n        }\r\n\r\n        if (discount > existingDiscount) {\r\n            savings = discount;\r\n\r\n            var formData = {\r\n                dwfrm_cart_couponCode: ''\r\n            };\r\n\r\n            formData[$('.coupon-applied-block li:contains(\"' + code.toUpperCase() + '\") button', responseHTML).attr('name')] = 'Remove';\r\n\r\n            $.ajax({\r\n                url: $('#dwfrm_cart').attr('action'),\r\n                type: 'POST',\r\n                async: false,\r\n                data: formData\r\n            });\r\n        }\r\n\r\n        var self = this;\r\n\r\n        if (!this.inCartPage) {\r\n            self._savings = 0.00;\r\n            $.ajax({\r\n                url: 'https:\/\/www.ylighting.com\/on\/demandware.store\/Sites-YLighting-Site\/default\/COBilling-ApplyCoupon?couponCode=' + code.toUpperCase(),\r\n                type: 'GET',\r\n                async: false,\r\n                success: function () {\r\n                    $.ajax({\r\n                        url: 'https:\/\/www.ylighting.com\/on\/demandware.store\/Sites-YLighting-Site\/default\/COOnePage-UpdateSummary',\r\n                        type: 'GET',\r\n                        async: false,\r\n                        success: function (res) {\r\n                            var resHTML = $.parseHTML(res);\r\n\r\n                            var existingDiscElemsCheckout = $('.mini_productdescription .salesprice');\r\n                            var respDiscElemsCheckout = $('.mini_productdescription .salesprice', resHTML);\r\n                            var existingDiscountCheckout = 0.00;\r\n                            var discountCheckout = 0.00;\r\n\r\n                            for (var a = 0; a < existingDiscElemsCheckout.length; a++) {\r\n                                existingDiscountCheckout += parseFloat(existingDiscElemsCheckout.eq(a).text().replace(\/[^0-9|.]\/g, ''));\r\n                            }\r\n\r\n                            for (var b = 0; b < respDiscElemsCheckout.length; b++) {\r\n                                discountCheckout += parseFloat(respDiscElemsCheckout.eq(b).text().replace(\/[^0-9|.]\/g, ''));\r\n                            }\r\n\r\n                            if (discountCheckout > existingDiscountCheckout) {\r\n                                self._savings = discountCheckout;\r\n\r\n                                $.ajax({\r\n                                    url: 'https:\/\/www.ylighting.com\/on\/demandware.store\/Sites-YLighting-Site\/default\/COBilling-RemoveCLI?coupon=' + code.toUpperCase(),\r\n                                    type: 'GET',\r\n                                    async: false\r\n                                });\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    savings = self._savings;\r\n                }\r\n            });\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"dwfrm_cart_couponCode\"],#dwfrm_billingcoupon_couponCode').val(bestCode).change().blur();\r\n            $('button[name=\"dwfrm_cart_addCoupon\"],button[name=\"dwfrm_billingcoupon_applyCoupon\"]').click();\r\n        }\r\n    }\r\n};\r\nExternalProvider._prepareUrl();",
	"yogaoutlet": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|.]\/g,\r\n    prepare: function (type, code) {\r\n        var form = $('form[name=\"form\"]').clone();\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            form.find('input[name=\"CouponCode\"], input[name=\"couponcode\"]').val(code);\r\n            this.addHiddenValue(form, 'btnCouponCode.x', 19);\r\n            this.addHiddenValue(form, 'btnCouponCode.x', 9);\r\n\r\n            return form.serialize();\r\n        } else if (type === 'clearCouponUrl') {\r\n            this.addHiddenValue(form, 'btnRemove_Coupon', 'Remove_Coupon');\r\n            this.addHiddenValue(form, 'action', 'update');\r\n\r\n            return form.serialize();\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    addHiddenValue: function (form, name, value) {\r\n        $('<input>').attr({\r\n            type: 'hidden',\r\n            name: name,\r\n            value: value\r\n        }).appendTo(form);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savingsText = $('div.shopped-total-items-price > p.p-item-price', responseHTML).text();\r\n        var savings = parseFloat(savingsText.replace(this.nonPriceRegex, '').toString());\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            location.reload();\r\n        }\r\n    }\r\n};",
	"yogisurprise": "var ExternalProvider = {\r\n    _init: function () {\r\n        var securityToken = $('script:contains(\"wc_cart_params\"),script:contains(\"wc_checkout_params\")').text().match(\/\"apply_coupon_nonce\":\"([A-z0-9]+)\"\/)[1];\r\n        var jpElement = document.createElement('input');\r\n\r\n        if ($('#_jpElement').length < 1) {\r\n            jpElement.id = '_jpElement';\r\n            jpElement.type = 'hidden';\r\n            (document.body || document.head || document.documentElement).appendChild(jpElement);\r\n        }\r\n\r\n        $('#_jpElement').attr('securityToken', securityToken);\r\n    },\r\n    parse: function (response) {\r\n        var validCoupon = response.includes('successfully') || response.includes('already applied');\r\n        var savings = 0.00;\r\n\r\n        if (validCoupon) {\r\n            var discount = 0.00;\r\n\r\n            $.ajax({\r\n                url: location.href,\r\n                type: 'POST',\r\n                data: {\r\n                    coupon_code: '',\r\n                    'woocommerce-cart-nonce': $('#woocommerce-cart-nonce').val(),\r\n                    _wp_http_referer: '\/cart\/'\r\n                },\r\n                async: false,\r\n                success: function (res) {\r\n                    var resHTML = $.parseHTML(res);\r\n\r\n                    discount = parseFloat($('.cart-discount .woocommerce-Price-amount.amount', resHTML).eq(0).text().replace(\/[^.0-9]\/g, ''));\r\n                }\r\n            });\r\n            savings = discount;\r\n        }\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};\r\nExternalProvider._init();",
	"yoins": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (['applyCouponUrl', 'clearCouponUrl'].indexOf(action) === -1) return false;\r\n\r\n        var formData = {\r\n            disType: 2,\r\n            disCode: (action === 'applyCouponUrl') ? code : '',\r\n            shipCode: null,\r\n            hadExchanged: 0,\r\n            isSubmit: 0,\r\n            cpfNumber: null,\r\n            payCode: null,\r\n            addressId: 0,\r\n            remark_text: null,\r\n            token: null\r\n        };\r\n\r\n        return formData;\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n\r\n        return {\r\n            success: response.discounts.disCode.toLowerCase() === code.toLowerCase(),\r\n            savings: response.discounts.countPrice\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"yomonda": "var ExternalProvider = {\r\n    prepare: function (state, code) {\r\n        if (state === 'applyCouponUrl') {\r\n            return JSON.stringify({\r\n                couponCode: code,\r\n                errors: [],\r\n                messages: [],\r\n                type: 'coupon'\r\n            });\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('.totalsum .nobreak').text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n        var newTotal = parseFloat(response.order.basketTotal.value.value);\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"yoox": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n\r\n        if (location.href.contains('de') || location.href.contains('fr')) {\r\n            currency = 'EUR';\r\n            locale = location.href.contains('de') ? localeMapping.DE : localeMapping.FR;\r\n        } else if (location.href.contains('uk')) {\r\n            currency = 'GBP';\r\n            locale = localeMapping.GB;\r\n        } else {\r\n            locale = localeMapping.US;\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    }\r\n};",
	"yorkphoto": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var savings = parseFloat(response.CartSummary.DiscountTotal);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"youngandreckless": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.order-summary__emphasis:contains(\"- $\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) {\r\n      $('#checkout_reduction_code').val(bestCode);\r\n      $('.btn--disabled').removeClass('btn--disabled').removeAttr('disabled').click();\r\n    }\r\n  }\r\n};",
	"younkers": "var ExternalProvider = {\r\n\r\n\tprepare: function(action, code) {\r\n\t\tif(action !== 'applyCouponUrl') return false;\r\n\r\n\t\treturn {\r\n            catalogId    : $('input[name=\"catalogId\"]').val(),\r\n            errorViewName: 'AjaxOrderItemDisplayView',\r\n            orderId      : $('input[name=\"orderId\"]').val(),\r\n            langId       : $('input[name=\"langId\"]').val(),\r\n            storeId      : $('input[name=\"storeId\"]').val(),\r\n            taskType     : 'A',\r\n            promoCode    : code,\r\n            applyButton  : code\r\n        }\r\n\t},\r\n\r\n\tparseAmount: function(string) {\r\n\t\treturn parseFloat(string.replace(\/[^0-9|\\.]\/g, ''));\r\n\t},\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n    \tvar $response = $.parseHTML(response),\r\n            appliedPromotion = $('.appliedPromotion', $response),\r\n            codeFound = false, savings = 0.00;\r\n\r\n        appliedPromotion.each(function() {\r\n\r\n            if($(this).attr('data-promocode').toLowerCase() === code.toLowerCase()) {\r\n            \tcodeFound = true;\r\n            }\r\n\t    });\r\n\r\n        if(codeFound) {\r\n\t\t\tvar currentTotal = this.parseAmount($('.orderTotal').text()),\r\n\t\t\t\tappliedTotal = this.parseAmount($('.orderTotal', $response).text());\r\n\r\n\t\t\tsavings = currentTotal - appliedTotal;\r\n        }\r\n\r\n        return {\r\n            success: codeFound,\r\n            savings: savings\r\n        }\r\n    },\r\n\r\n\tcomplete: function(bestCode) {\r\n\r\n    \tif(bestCode) {\r\n\r\n    \t\t$.ajax({\r\n\t\t\t    url: '\/AjaxOrderCalculateSecure',\r\n\t\t\t    type: 'GET',\r\n                cache: false,\r\n                dataType: 'html',\r\n\t\t\t    data: {\r\n                    estimateTax: true,\r\n                    calculationUsageId: -7,\r\n                    updatePrices: 1,\r\n                    updateMiniCartCookie: true,\r\n                    calculateTax: true,\r\n                    errorViewName: 'AjaxOrderItemDisplayView',\r\n                    orderId: $('input[name=\"orderId\"]').val(),\r\n\t\t            notStorePrice: true,\r\n\t\t            URL: 'donothing'\r\n\t\t\t    },\r\n\t\t\t    success: function() {\r\n\t\t\t    \tlocation.reload();\r\n\t\t\t    }\r\n\t\t    })\r\n\t    }\r\n\t}\r\n};",
	"yvesrocher": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('#ajaxGrandTotal').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('#ajaxGrandTotal', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if (savings > 0.00) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function(bestCode, bestSaving){\r\n\r\n        $.post('https:\/\/www.yvesrocherusa.com\/control\/applyProductPromoCode\/showcart_common', {\r\n            sff: '',\r\n            productPromoCodeId: bestCode\r\n        }, function () {\r\n            location.reload(true);\r\n        });\r\n    }\r\n};",
	"yvesrocher.mobile": "var ExternalProvider = {\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var oldTotal = parseFloat($('.cart-total-val').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = parseFloat($('.cart-total-val', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        var savings = oldTotal - newTotal;\r\n\r\n        if (savings > 0.00) {\r\n            return {\r\n                success: true,\r\n                savings: parseFloat(savings)\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSaving) {\r\n        location.reload(true);\r\n    }\r\n};",
	"yvesrocherde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldTotal = parseFloat($('.to_pay_total .amount').text().replace(\/[^0-9]\/g, ''));\r\n        var newTotal = parseFloat($('.to_pay_total .amount', responseHTML).text().replace(\/[^0-9]\/g, ''));\r\n        var savings = (oldTotal - newTotal) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"zaful": "var ExternalProvider = {\r\n  displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping['US'];\r\n    var url = window.location.pathname;\r\n\r\n    if (isEUR = url.match(\/(de|fr)\/g)) {\r\n      currency = 'EUR';\r\n      locale = localeMapping[isEUR.shift().toUpperCase()];\r\n    } else if (url.match(\/en\/g)) {\r\n      currency = 'GBP';\r\n      locale = localeMapping['GB'];\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n  },\r\n  parse: function (response) {\r\n    var timeStamp = $('script[src*=\"currency_huilv\"]').attr('src');\r\n    var multiplier;\r\n    var criteria;\r\n\r\n    switch ($('#price_total').text().replace(\/[-.A-z.0-9.,]\/g, '').trim()) {\r\n      case '\u20ac':\r\n        criteria = \/my_array\\['EUR'\\] = ([0-9|.]+);\/;\r\n        break;\r\n      case '\u00a3':\r\n        criteria = \/my_array\\['GBP'\\] = ([0-9|.]+);\/;\r\n        break;\r\n      default:\r\n        criteria = \/my_array\\['USD'\\] = ([0-9|.]+);\/;\r\n        break;\r\n    }\r\n\r\n    $.ajax({ url: timeStamp,\r\n      type: 'GET',\r\n      async: false,\r\n      success: function (res) {\r\n        multiplier = parseFloat(res.match(criteria)[1]);\r\n      }\r\n    });\r\n\r\n    var savings = Math.trunc(parseFloat(response.couponSaving * multiplier) * 100) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"zalandolounge": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'applyCouponUrl') {\r\n            var data = { couponCode: code };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.checkoutSession.cart_info.discountTotal) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"zalandoprivefr": "var ExternalProvider = {\r\n    prepare: function (action, code) {\r\n        if (action === 'applyCouponUrl') {\r\n            var data = { couponCode: code };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.checkoutSession.cart_info.discountTotal) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"zalandouk": "var ExternalProvider = {\r\n  __prepareUrl: function () {\r\n    this.getApplyCouponUrl();\r\n    this.getData();\r\n    this.getHeaders();\r\n  },\r\n  getApplyCouponUrl: function() {\r\n    let couponUrl = this.isCartPage() ? '\/api\/cart-fragment\/redeem' : '\/api\/checkout\/redeem'\r\n    this.createInput('__JPCouponUrl', couponUrl);\r\n  },\r\n  getData: function() {\r\n    let cartData = this.isCartPage() && JSON.parse(decodeURIComponent($('#app').attr('data-data')));\r\n    this.cartId = this.isCartPage() && cartData.cart.id\r\n    this.trackingId = $('#TrackingFlowidBearer').attr('data-flow-id');\r\n  },\r\n  getHeaders: function() {\r\n    this.createInput('csrf', this.getCookieByName('frsx'));\r\n  },\r\n  prepare: function(step, code) {\r\n    if(this.isCartPage()) {\r\n      return JSON.stringify({\r\n        cartId: this.cartId,\r\n        code: code,\r\n        pageRenderFlowId: this.trackingId\r\n      });\r\n    } else {\r\n      return JSON.stringify({\r\n        code: code,\r\n        pageRenderFlowId: this.trackingId\r\n      });\r\n    }\r\n  },\r\n  parse: function (response) {\r\n    let savings = this.isCartPage() ?\r\n      this.parseToNum(response.cart.coupon.amount.amount) :\r\n      this.parseToNum(response.coupons[0].amount);\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  isCartPage: function () {\r\n    return location.pathname === '\/cart' || location.pathname === '\/cart\/';\r\n  },\r\n  createInput: function(id, value) {\r\n    if(document.getElementById(id) === null) {\r\n      let createdInput = document.createElement(\"input\");\r\n      createdInput.id = id;\r\n      createdInput.setAttribute('type', 'hidden');\r\n      createdInput.setAttribute('value', value);\r\n      (document.body || document.head || document.documentElement).appendChild(createdInput);\r\n    }\r\n  },\r\n  getCookieByName: function (name) {\r\n    var value = '; ' + document.cookie;\r\n    var parts = value.split('; ' + name + '=');\r\n    if (parts.length === 2) return parts.pop().split(';').shift();\r\n  },\r\n  parseToNum: function(value) {\r\n    return this.isCartPage() ? Math.abs(value) : parseFloat(value.replace(\/[^0-9|.]\/g, ''));\r\n  }\r\n};\r\nExternalProvider.__prepareUrl();",
	"zales": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    var oldTotal = parseFloat($('.cart-totals-body > .row:first').text().replace(\/[^0-9|.]\/g, ''));\r\n    var newTotal = parseFloat($('.cart-totals-body > .row:first', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    var savings = oldTotal - newTotal;\r\n    \r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"zapals": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.match('discount_amount(.*)base_discount_amount')[0].replace(\/[^0-9|.]\/g, ''))\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"zapals.mobile": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, code) {\r\n        var responseHTML = $piggyJq.parseHTML(response.summary);\r\n        if (!response.error) {\r\n            var savings = parseFloat($piggyJq('.shopping-cart-summary__row .price:eq(1)', responseHTML).text().replace(\/[^0-9|\\.]\/g, ''));\r\n            return {\r\n                success: true,\r\n                savings: savings\r\n            }\r\n        }\r\n        return {\r\n          success: false,\r\n          savings: 0.00\r\n        }\r\n    },\r\n\r\n    complete: function(bestCode, bestSavings) {\r\n        location.reload(true);\r\n    }\r\n};",
	"zavvi": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.responsiveBasket_discountValue:contains(\"-\")', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $(\"#discountcode\").val(bestCode);\r\n            $(\"#add-discount-code\").click();\r\n        }\r\n    }\r\n};",
	"zavvide": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var discount = parseFloat($('.responsiveBasket_discountValue', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = discount \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#discountcode').val(bestCode);\r\n            $('#add-discount-code').click();\r\n        }\r\n    }\r\n};",
	"zeeandco": "var ExternalProvider = {\r\n  parse: function (response) {\r\n    var responseHTML = $.parseHTML(response);\r\n    var savings = parseFloat($('.price:contains(\"-\")', responseHTML).last().text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  }\r\n};",
	"zenhotels": "var ExternalProvider = {\r\n\tdisplayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n    var locale = localeMapping.US;\r\n    var newCurrency = 'USD';\r\n    var selector = $('.zen-currency-select-list option:selected')[0].value;\r\n\r\n    if (selector === 'GBP') {\r\n      locale = localeMapping.GB;\r\n      newCurrency = 'GBP';\r\n    } else if (selector === 'EUR') {\r\n      locale = localeMapping.DE;\r\n      newCurrency = 'EUR';\r\n    } else {\r\n      locale = localeMapping.US;\r\n      newCurrency = currency;\r\n    }\r\n\r\n    return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n  }\r\n};",
	"zennioptical": "var ExternalProvider = {\r\n    nonPriceRegex: \/[^0-9|.]\/g,\r\n    totalSelector: '.order-total',\r\n    oldTotal: 0,\r\n    init: function () {\r\n        var toBeParsed = $(this.totalSelector).text().replace(this.nonPriceRegex, '');\r\n\r\n        this.oldTotal = parseFloat(toBeParsed);\r\n    },\r\n\r\n    parse: function (response, status, $xhr, code) {\r\n        var responseHTML = $.parseHTML(response.responseText);\r\n        var totalNode = $(this.totalSelector, responseHTML);\r\n        var toBeParsed = totalNode.text().replace(this.nonPriceRegex, '').toString();\r\n\r\n        if (toBeParsed.length > 0) {\r\n            var newTotal = parseFloat(toBeParsed);\r\n\r\n            if (this.oldTotal) {\r\n                var savings = this.oldTotal - newTotal;\r\n\r\n                return {\r\n                    success: true,\r\n                    savings: savings\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: 0.00\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode, bestSavings) {\r\n        location.reload(true);\r\n    }\r\n\r\n};",
	"zestbeauty": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n        var selector = this.isCartPage() ? $('.dropdown-heading.cover .value:first').text() : $('.price:first').text().replace(\/[.0-9]\/g, '');\r\n\r\n        if (selector === 'Germany' || selector === '\u20ac') {\r\n            currency = 'EUR';\r\n            locale = localeMapping['DE'];\r\n        } else if (selector === 'United Kingdom' || selector === '\u00a3') {\r\n            currency = 'GBP';\r\n            locale = localeMapping['GB'];\r\n        }\r\n        else if (selector === 'France' || selector === '\u20ac') {\r\n            currency = 'EUR';\r\n            locale = localeMapping['FR'];\r\n        } else {\r\n            locale = localeMapping['US'];\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency, minimumFractionDigits });\r\n    },\r\n    parse: function (response, status, $xhr, code) {\r\n        var savings = parseFloat(response.match('discount_amount\":\"-(.*)base_discount_amount\":\"-')[1].replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    isCartPage: function () {\r\n        return \/checkout\\\/cart\/.test(location.href);\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            if ($('#coupon_code').length) {\r\n                $('#coupon_code').val(bestCode);\r\n                $('button[value=\"Apply Discount\"]').click();\r\n            } else {\r\n                $('#discount-code').val(bestCode);\r\n\r\n                var changeEvent = new Event('change', {\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n\r\n                $('#discount-code').get(0).dispatchEvent(changeEvent);\r\n\r\n                var clickEvent = new MouseEvent('click', {\r\n                    view: window,\r\n                    bubbles: true,\r\n                    cancelable: true\r\n                });\r\n\r\n                $('button[value=\"Apply Discount\"]').get(0).dispatchEvent(clickEvent);\r\n\r\n            }\r\n        }\r\n    }\r\n};",
	"zigzagzurich": "var ExternalProvider = {\r\n    displayCurrency: function (amount, currency, localeMapping, minimumFractionDigits) {\r\n        var locale;\r\n        var newCurrency;\r\n        var selector = $('.geolizr-currency-switcher-value').text();\r\n\r\n        if (selector.match('GBP')) {\r\n            locale = localeMapping.GB;\r\n            newCurrency = 'GBP';\r\n        } else if (selector.match('EUR')) {\r\n            locale = localeMapping.DE;\r\n            newCurrency = 'EUR';\r\n        } else {\r\n            locale = localeMapping.US;\r\n            newCurrency = currency;\r\n        }\r\n\r\n        if ($('#checkout_reduction_code').length) {\r\n            newCurrency = 'SFR';\r\n        }\r\n\r\n        return amount.toLocaleString(locale, { style: 'currency', currency: newCurrency, minimumFractionDigits: minimumFractionDigits });\r\n    },\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.total-line-table .order-summary__emphasis:contains(\"-\")', responseHTML).text().match(\/[0-9][0-9|.]*\/));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#checkout_reduction_code').val(bestCode);\r\n            $('.field__input-btn').removeClass('btn--disabled').removeAttr('disabled').click();\r\n        }\r\n    }\r\n};",
	"zinus": "var ExternalProvider = {\r\n    parse: function(response, status, $xhr, couponCode) {\r\n        var responseHTML = $.parseHTML(response.responseText);\r\n        var subTotal   = $('.total-line--subtotal .total-line__price span').text().replace(\/[^0-9|\\.]\/g,'');\r\n        var grandTotal = $('.total-recap__final-price', responseHTML).text().replace(\/[^0-9|\\.]\/g,'');\r\n\r\n        this.savings = subTotal - grandTotal;\r\n\r\n        if(this.savings > 0) {\r\n            return {\r\n                success: true,\r\n                savings: this.savings\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            savings: this.savings\r\n        };\r\n    },\r\n    complete: function(bestCode, bestSavings) {\r\n        if(bestCode) { location.reload(); }\r\n    },\r\n    savings: 0.00\r\n};",
	"zipvit": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = $('.price:contains(\"-\u00a3\")', responseHTML).first().text().replace(\/[^0-9|.]\/g, '');\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('input[name=\"coupon_code\"]').val(bestCode);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('.btn.btn-secondary').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"zirh": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('span:contains(\"-\")', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#coupon_code, #id_couponcode').val(bestCode);\r\n            $('button[title=\"Apply Coupon\"], #onestepcheckout-coupon-add').click();\r\n        }\r\n    }\r\n};",
	"zizowireless": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                \"promocodes\": [\r\n                    {\r\n                        \"code\": code\r\n                    }\r\n                ]\r\n            };\r\n        }\r\n\r\n        return JSON.stringify(data);\r\n    },\r\n    parse: function (response) {\r\n        var savings = response;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"zonealarm": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        if (type === 'applyCouponUrl') {\r\n            return {\r\n                'org.apache.struts.taglib.html.TOKEN': localStorage.getItem('eng_mt').match(\/TOKEN=([\\w]+)\/g)[0].replace('TOKEN=',''),\r\n                coupon: code\r\n            };\r\n        }\r\n\r\n        return null;\r\n    },\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('ul.total li:contains(\"Total\")').text().replace(\/[^0-9.]\/g, ''));\r\n        var newTotal = parseFloat($('ul.total li:contains(\"Total\")', $.parseHTML(response)).text().replace(\/[^0-9.]\/g, ''));\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings.toFixed(2)\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"zonediet": "var ExternalProvider = {\r\n  __init: function () {\r\n    this.isCartpage() ? this.createTempScript('cart') : this.createTempScript('checkout');\r\n  },\r\n  createTempScript: function (pageType) {\r\n    const script = document.createElement('script');\r\n    let scriptContent = `\r\n      var createInput = ${this.createInput.toString()};\r\n      createInput('applySecurityCode', wc_${pageType}_params.apply_coupon_nonce);\r\n      createInput('removeSecurityCode', wc_${pageType}_params.remove_coupon_nonce);\r\n    `;\r\n    script.id = 'tmpScript';\r\n    script.appendChild(document.createTextNode(scriptContent));\r\n    (document.body || document.head || document.documentElement).appendChild(script);\r\n    $('#tmpScript').remove();\r\n  },\r\n  parse: function (response) {\r\n    const responseHTML = $.parseHTML(response);\r\n    let savings = parseFloat($('.cart-discount span', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n    return {\r\n      success: savings > 0,\r\n      savings: Number.isNaN(savings) ? 0.00 : savings\r\n    };\r\n  },\r\n  complete: function (bestCode) {\r\n    if (bestCode) location.reload();\r\n  },\r\n  createInput: function (id, value) {\r\n    if (document.getElementById(id) === null) {\r\n      let createdInput = document.createElement(\"input\");\r\n      createdInput.id = id;\r\n      createdInput.setAttribute('type', 'hidden');\r\n      createdInput.setAttribute('value', value);\r\n      (document.body || document.head || document.documentElement).appendChild(createdInput);\r\n    } else {\r\n      document.getElementById(id).value = value;\r\n    }\r\n  },\r\n  isCartpage: function () {\r\n    return \/cart\/.test(location.pathname);\r\n  }\r\n};\r\nExternalProvider.__init();",
	"zoobio": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var savings = parseFloat(response.discount.value);\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.coupon__button').click();\r\n            $('#qcode').val(bestCode);\r\n\r\n            var clickEvent = new MouseEvent('click', {\r\n                view: window,\r\n                bubbles: true,\r\n                cancelable: true\r\n            });\r\n\r\n            $('._js_apply_coupon_button').get(0).dispatchEvent(clickEvent);\r\n        }\r\n    }\r\n};",
	"zoobiode": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n\r\n        var discount = parseFloat($('.fr.grand-total.coupon-price', responseHTML).text().replace(\/[^0-9|.]\/g, ''));\r\n        var savings = discount \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        }\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"zooblitz": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.row--voucher .panel--td.column--total-price.block:contains(\"-\")', responseHTML).text().replace(\/,\/g, '.').replace(\/[^0-9|.]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('.add-voucher--field').val(bestCode);\r\n            $('.add-voucher--button').click();\r\n        }\r\n    }\r\n};",
	"zooplus": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var oldSavings = $('.discount__component:contains(\"-\")').text().replace(',', '.');\r\n\r\n        oldSavings = parseFloat(oldSavings.replace(\/[^0-9.]\/g, ''));\r\n\r\n        var savings = $('.discount__component:contains(\"-\") ', responseHTML).text().replace(',', '.');\r\n\r\n        savings = parseFloat(savings.replace(\/[^0-9.]\/g, ''));\r\n\r\n        if (oldSavings < savings) {\r\n            return {\r\n                success: savings > 0,\r\n                savings: isNaN(savings) ? 0.00 : savings\r\n            };\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"zooplusde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.discount__component.discounted', responseHTML).text().replace(\/[^0-9]\/g, '')) \/ 100;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) location.reload();\r\n    }\r\n};",
	"zooroyalde": "var ExternalProvider = {\r\n    parse: function (response) {\r\n        var responseHTML = $.parseHTML(response);\r\n        var savings = parseFloat($('.price__line:contains(\"-\")', responseHTML).text().replace(',', '.').replace(\/[^.0-9]\/g, ''));\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#basket_add_voucher').val(bestCode);\r\n            $('.flyout__button.flyout__button--darkgrey').click();\r\n        }\r\n    }\r\n};",
	"zoro": "var ExternalProvider = {\r\n    prepare: function (type, code) {\r\n        var data = {};\r\n\r\n        if (type === 'applyCouponUrl') {\r\n            data = {\r\n                promocode: {\r\n                    code: code\r\n                }\r\n            };\r\n\r\n            return JSON.stringify(data);\r\n        }\r\n\r\n        return false;\r\n    },\r\n    parse: function (response) {\r\n        var oldTotal = parseFloat($('.cart-summary-total-formatted').text().replace(\/[^0-9|.]\/g, ''));\r\n        var newTotal = response.summary.total;\r\n        var savings = oldTotal - newTotal;\r\n\r\n        return {\r\n            success: savings > 0,\r\n            savings: isNaN(savings) ? 0.00 : savings\r\n        };\r\n    },\r\n    complete: function (bestCode) {\r\n        if (bestCode) {\r\n            $('#promocode').val(bestCode);\r\n            $('#promo-code-apply-btn').click();\r\n        }\r\n    }\r\n};"
};